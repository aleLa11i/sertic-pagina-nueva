var rP=Object.defineProperty,iP=Object.defineProperties;var oP=Object.getOwnPropertyDescriptors;var sw=Object.getOwnPropertySymbols;var aP=Object.prototype.hasOwnProperty,sP=Object.prototype.propertyIsEnumerable;var lw=(t,n,a)=>n in t?rP(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,cw=(t,n)=>{for(var a in n||(n={}))aP.call(n,a)&&lw(t,a,n[a]);if(sw)for(var a of sw(n))sP.call(n,a)&&lw(t,a,n[a]);return t},uw=(t,n)=>iP(t,oP(n));const lP=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const v of d)if(v.type==="childList")for(const b of v.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&u(b)}).observe(document,{childList:!0,subtree:!0});function a(d){const v={};return d.integrity&&(v.integrity=d.integrity),d.referrerpolicy&&(v.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?v.credentials="include":d.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function u(d){if(d.ep)return;d.ep=!0;const v=a(d);fetch(d.href,v)}};lP();function Is(t){return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Is(t)}function Eo(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function hw(t,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Co(t,n,a){return n&&hw(t.prototype,n),a&&hw(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function As(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nv(t,n){return nv=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},nv(t,n)}function pg(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&nv(t,n)}function of(t,n){if(n&&(Is(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return As(t)}function oa(t){return oa=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},oa(t)}function La(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function JS(t){if(Array.isArray(t))return t}function cP(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dw(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,u=new Array(n);a<n;a++)u[a]=t[a];return u}function QS(t,n){if(!!t){if(typeof t=="string")return dw(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return dw(t,n)}}function eT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uP(t){return JS(t)||cP(t)||QS(t)||eT()}function fw(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function pw(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?fw(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):fw(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}var hP={type:"logger",log:function(n){this.output("log",n)},warn:function(n){this.output("warn",n)},error:function(n){this.output("error",n)},output:function(n,a){console&&console[n]&&console[n].apply(console,a)}},dP=function(){function t(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Eo(this,t),this.init(n,a)}return Co(t,[{key:"init",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=u.prefix||"i18next:",this.logger=a||hP,this.options=u,this.debug=u.debug}},{key:"setDebug",value:function(a){this.debug=a}},{key:"log",value:function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return this.forward(u,"log","",!0)}},{key:"warn",value:function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return this.forward(u,"warn","",!0)}},{key:"error",value:function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return this.forward(u,"error","")}},{key:"deprecate",value:function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return this.forward(u,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(a,u,d,v){return v&&!this.debug?null:(typeof a[0]=="string"&&(a[0]="".concat(d).concat(this.prefix," ").concat(a[0])),this.logger[u](a))}},{key:"create",value:function(a){return new t(this.logger,pw(pw({},{prefix:"".concat(this.prefix,":").concat(a,":")}),this.options))}}]),t}(),Jo=new dP,Fs=function(){function t(){Eo(this,t),this.observers={}}return Co(t,[{key:"on",value:function(a,u){var d=this;return a.split(" ").forEach(function(v){d.observers[v]=d.observers[v]||[],d.observers[v].push(u)}),this}},{key:"off",value:function(a,u){if(!!this.observers[a]){if(!u){delete this.observers[a];return}this.observers[a]=this.observers[a].filter(function(d){return d!==u})}}},{key:"emit",value:function(a){for(var u=arguments.length,d=new Array(u>1?u-1:0),v=1;v<u;v++)d[v-1]=arguments[v];if(this.observers[a]){var b=[].concat(this.observers[a]);b.forEach(function(I){I.apply(void 0,d)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(I){I.apply(I,[a].concat(d))})}}}]),t}();function td(){var t,n,a=new Promise(function(u,d){t=u,n=d});return a.resolve=t,a.reject=n,a}function mw(t){return t==null?"":""+t}function fP(t,n,a){t.forEach(function(u){n[u]&&(a[u]=n[u])})}function T0(t,n,a){function u(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function d(){return!t||typeof t=="string"}for(var v=typeof n!="string"?[].concat(n):n.split(".");v.length>1;){if(d())return{};var b=u(v.shift());!t[b]&&a&&(t[b]=new a),Object.prototype.hasOwnProperty.call(t,b)?t=t[b]:t={}}return d()?{}:{obj:t,k:u(v.shift())}}function gw(t,n,a){var u=T0(t,n,Object),d=u.obj,v=u.k;d[v]=a}function pP(t,n,a,u){var d=T0(t,n,Object),v=d.obj,b=d.k;v[b]=v[b]||[],u&&(v[b]=v[b].concat(a)),u||v[b].push(a)}function Em(t,n){var a=T0(t,n),u=a.obj,d=a.k;if(!!u)return u[d]}function yw(t,n,a){var u=Em(t,a);return u!==void 0?u:Em(n,a)}function tT(t,n,a){for(var u in n)u!=="__proto__"&&u!=="constructor"&&(u in t?typeof t[u]=="string"||t[u]instanceof String||typeof n[u]=="string"||n[u]instanceof String?a&&(t[u]=n[u]):tT(t[u],n[u],a):t[u]=n[u]);return t}function uu(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var mP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function gP(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(n){return mP[n]}):t}var mg=typeof window!="undefined"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,yP=[" ",",","?","!",";"];function _P(t,n,a){n=n||"",a=a||"";var u=yP.filter(function(s){return n.indexOf(s)<0&&a.indexOf(s)<0});if(u.length===0)return!0;var d=new RegExp("(".concat(u.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),v=!d.test(t);if(!v){var b=t.indexOf(a);b>0&&!d.test(t.substring(0,b))&&(v=!0)}return v}function _w(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function qp(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?_w(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_w(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function vP(t){var n=xP();return function(){var u=oa(t),d;if(n){var v=oa(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return of(this,d)}}function xP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nT(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!t){if(t[n])return t[n];for(var u=n.split(a),d=t,v=0;v<u.length;++v){if(!d||typeof d[u[v]]=="string"&&v+1<u.length)return;if(d[u[v]]===void 0){for(var b=2,s=u.slice(v,v+b).join(a),I=d[s];I===void 0&&u.length>v+b;)b++,s=u.slice(v,v+b).join(a),I=d[s];if(I===void 0)return;if(n.endsWith(s)){if(typeof I=="string")return I;if(s&&typeof I[s]=="string")return I[s]}var F=u.slice(v+b).join(a);return F?nT(I,F,a):void 0}d=d[u[v]]}return d}}var bP=function(t){pg(a,t);var n=vP(a);function a(u){var d,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Eo(this,a),d=n.call(this),mg&&Fs.call(As(d)),d.data=u||{},d.options=v,d.options.keySeparator===void 0&&(d.options.keySeparator="."),d.options.ignoreJSONStructure===void 0&&(d.options.ignoreJSONStructure=!0),d}return Co(a,[{key:"addNamespaces",value:function(d){this.options.ns.indexOf(d)<0&&this.options.ns.push(d)}},{key:"removeNamespaces",value:function(d){var v=this.options.ns.indexOf(d);v>-1&&this.options.ns.splice(v,1)}},{key:"getResource",value:function(d,v,b){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},I=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,F=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,W=[d,v];b&&typeof b!="string"&&(W=W.concat(b)),b&&typeof b=="string"&&(W=W.concat(I?b.split(I):b)),d.indexOf(".")>-1&&(W=d.split("."));var j=Em(this.data,W);return j||!F||typeof b!="string"?j:nT(this.data&&this.data[d]&&this.data[d][v],b,I)}},{key:"addResource",value:function(d,v,b,s){var I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},F=this.options.keySeparator;F===void 0&&(F=".");var W=[d,v];b&&(W=W.concat(F?b.split(F):b)),d.indexOf(".")>-1&&(W=d.split("."),s=v,v=W[1]),this.addNamespaces(v),gw(this.data,W,s),I.silent||this.emit("added",d,v,b,s)}},{key:"addResources",value:function(d,v,b){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var I in b)(typeof b[I]=="string"||Object.prototype.toString.apply(b[I])==="[object Array]")&&this.addResource(d,v,I,b[I],{silent:!0});s.silent||this.emit("added",d,v,b)}},{key:"addResourceBundle",value:function(d,v,b,s,I){var F=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},W=[d,v];d.indexOf(".")>-1&&(W=d.split("."),s=b,b=v,v=W[1]),this.addNamespaces(v);var j=Em(this.data,W)||{};s?tT(j,b,I):j=qp(qp({},j),b),gw(this.data,W,j),F.silent||this.emit("added",d,v,b)}},{key:"removeResourceBundle",value:function(d,v){this.hasResourceBundle(d,v)&&delete this.data[d][v],this.removeNamespaces(v),this.emit("removed",d,v)}},{key:"hasResourceBundle",value:function(d,v){return this.getResource(d,v)!==void 0}},{key:"getResourceBundle",value:function(d,v){return v||(v=this.options.defaultNS),this.options.compatibilityAPI==="v1"?qp(qp({},{}),this.getResource(d,v)):this.getResource(d,v)}},{key:"getDataByLanguage",value:function(d){return this.data[d]}},{key:"hasLanguageSomeTranslations",value:function(d){var v=this.getDataByLanguage(d),b=v&&Object.keys(v)||[];return!!b.find(function(s){return v[s]&&Object.keys(v[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),a}(Fs),rT={processors:{},addPostProcessor:function(n){this.processors[n.name]=n},handle:function(n,a,u,d,v){var b=this;return n.forEach(function(s){b.processors[s]&&(a=b.processors[s].process(a,u,d,v))}),a}};function vw(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Oi(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?vw(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vw(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function wP(t){var n=SP();return function(){var u=oa(t),d;if(n){var v=oa(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return of(this,d)}}function SP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xw={},bw=function(t){pg(a,t);var n=wP(a);function a(u){var d,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Eo(this,a),d=n.call(this),mg&&Fs.call(As(d)),fP(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],u,As(d)),d.options=v,d.options.keySeparator===void 0&&(d.options.keySeparator="."),d.logger=Jo.create("translator"),d}return Co(a,[{key:"changeLanguage",value:function(d){d&&(this.language=d)}},{key:"exists",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(d==null)return!1;var b=this.resolve(d,v);return b&&b.res!==void 0}},{key:"extractFromKey",value:function(d,v){var b=v.nsSeparator!==void 0?v.nsSeparator:this.options.nsSeparator;b===void 0&&(b=":");var s=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator,I=v.ns||this.options.defaultNS||[],F=b&&d.indexOf(b)>-1,W=!this.options.userDefinedKeySeparator&&!v.keySeparator&&!this.options.userDefinedNsSeparator&&!v.nsSeparator&&!_P(d,b,s);if(F&&!W){var j=d.match(this.interpolator.nestingRegexp);if(j&&j.length>0)return{key:d,namespaces:I};var Y=d.split(b);(b!==s||b===s&&this.options.ns.indexOf(Y[0])>-1)&&(I=Y.shift()),d=Y.join(s)}return typeof I=="string"&&(I=[I]),{key:d,namespaces:I}}},{key:"translate",value:function(d,v,b){var s=this;if(Is(v)!=="object"&&this.options.overloadTranslationOptionHandler&&(v=this.options.overloadTranslationOptionHandler(arguments)),v||(v={}),d==null)return"";Array.isArray(d)||(d=[String(d)]);var I=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator,F=this.extractFromKey(d[d.length-1],v),W=F.key,j=F.namespaces,Y=j[j.length-1],H=v.lng||this.language,be=v.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(H&&H.toLowerCase()==="cimode"){if(be){var ge=v.nsSeparator||this.options.nsSeparator;return Y+ge+W}return W}var Q=this.resolve(d,v),V=Q&&Q.res,J=Q&&Q.usedKey||W,he=Q&&Q.exactUsedKey||W,pe=Object.prototype.toString.apply(V),ze=["[object Number]","[object Function]","[object RegExp]"],Ee=v.joinArrays!==void 0?v.joinArrays:this.options.joinArrays,We=!this.i18nFormat||this.i18nFormat.handleAsObject,Be=typeof V!="string"&&typeof V!="boolean"&&typeof V!="number";if(We&&V&&Be&&ze.indexOf(pe)<0&&!(typeof Ee=="string"&&pe==="[object Array]")){if(!v.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(J,V,Oi(Oi({},v),{},{ns:j})):"key '".concat(W," (").concat(this.language,")' returned an object instead of string.");if(I){var Oe=pe==="[object Array]",it=Oe?[]:{},St=Oe?he:J;for(var ct in V)if(Object.prototype.hasOwnProperty.call(V,ct)){var at="".concat(St).concat(I).concat(ct);it[ct]=this.translate(at,Oi(Oi({},v),{joinArrays:!1,ns:j})),it[ct]===at&&(it[ct]=V[ct])}V=it}}else if(We&&typeof Ee=="string"&&pe==="[object Array]")V=V.join(Ee),V&&(V=this.extendTranslation(V,d,v,b));else{var An=!1,Jt=!1,hn=v.count!==void 0&&typeof v.count!="string",_n=a.hasDefaultValue(v),qn=hn?this.pluralResolver.getSuffix(H,v.count,v):"",Pn=v["defaultValue".concat(qn)]||v.defaultValue;!this.isValidLookup(V)&&_n&&(An=!0,V=Pn),this.isValidLookup(V)||(Jt=!0,V=W);var mr=v.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Ve=mr&&Jt?void 0:V,pt=_n&&Pn!==V&&this.options.updateMissing;if(Jt||An||pt){if(this.logger.log(pt?"updateKey":"missingKey",H,Y,W,pt?Pn:V),I){var Tt=this.resolve(W,Oi(Oi({},v),{},{keySeparator:!1}));Tt&&Tt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Dt=[],bn=this.languageUtils.getFallbackCodes(this.options.fallbackLng,v.lng||this.language);if(this.options.saveMissingTo==="fallback"&&bn&&bn[0])for(var ar=0;ar<bn.length;ar++)Dt.push(bn[ar]);else this.options.saveMissingTo==="all"?Dt=this.languageUtils.toResolveHierarchy(v.lng||this.language):Dt.push(v.lng||this.language);var Zn=function(sr,ko,Io){var la=_n&&Io!==V?Io:Ve;s.options.missingKeyHandler?s.options.missingKeyHandler(sr,Y,ko,la,pt,v):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(sr,Y,ko,la,pt,v),s.emit("missingKey",sr,Y,ko,V)};this.options.saveMissing&&(this.options.saveMissingPlurals&&hn?Dt.forEach(function(Er){s.pluralResolver.getSuffixes(Er).forEach(function(sr){Zn([Er],W+sr,v["defaultValue".concat(sr)]||Pn)})}):Zn(Dt,W,Pn))}V=this.extendTranslation(V,d,v,Q,b),Jt&&V===W&&this.options.appendNamespaceToMissingKey&&(V="".concat(Y,":").concat(W)),(Jt||An)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?V=this.options.parseMissingKeyHandler(W,An?V:void 0):V=this.options.parseMissingKeyHandler(V))}return V}},{key:"extendTranslation",value:function(d,v,b,s,I){var F=this;if(this.i18nFormat&&this.i18nFormat.parse)d=this.i18nFormat.parse(d,b,s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!b.skipInterpolation){b.interpolation&&this.interpolator.init(Oi(Oi({},b),{interpolation:Oi(Oi({},this.options.interpolation),b.interpolation)}));var W=typeof d=="string"&&(b&&b.interpolation&&b.interpolation.skipOnVariables!==void 0?b.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),j;if(W){var Y=d.match(this.interpolator.nestingRegexp);j=Y&&Y.length}var H=b.replace&&typeof b.replace!="string"?b.replace:b;if(this.options.interpolation.defaultVariables&&(H=Oi(Oi({},this.options.interpolation.defaultVariables),H)),d=this.interpolator.interpolate(d,H,b.lng||this.language,b),W){var be=d.match(this.interpolator.nestingRegexp),ge=be&&be.length;j<ge&&(b.nest=!1)}b.nest!==!1&&(d=this.interpolator.nest(d,function(){for(var J=arguments.length,he=new Array(J),pe=0;pe<J;pe++)he[pe]=arguments[pe];return I&&I[0]===he[0]&&!b.context?(F.logger.warn("It seems you are nesting recursively key: ".concat(he[0]," in key: ").concat(v[0])),null):F.translate.apply(F,he.concat([v]))},b)),b.interpolation&&this.interpolator.reset()}var Q=b.postProcess||this.options.postProcess,V=typeof Q=="string"?[Q]:Q;return d!=null&&V&&V.length&&b.applyPostProcessor!==!1&&(d=rT.handle(V,d,v,this.options&&this.options.postProcessPassResolved?Oi({i18nResolved:s},b):b,this)),d}},{key:"resolve",value:function(d){var v=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,I,F,W,j;return typeof d=="string"&&(d=[d]),d.forEach(function(Y){if(!v.isValidLookup(s)){var H=v.extractFromKey(Y,b),be=H.key;I=be;var ge=H.namespaces;v.options.fallbackNS&&(ge=ge.concat(v.options.fallbackNS));var Q=b.count!==void 0&&typeof b.count!="string",V=Q&&!b.ordinal&&b.count===0&&v.pluralResolver.shouldUseIntlApi(),J=b.context!==void 0&&(typeof b.context=="string"||typeof b.context=="number")&&b.context!=="",he=b.lngs?b.lngs:v.languageUtils.toResolveHierarchy(b.lng||v.language,b.fallbackLng);ge.forEach(function(pe){v.isValidLookup(s)||(j=pe,!xw["".concat(he[0],"-").concat(pe)]&&v.utils&&v.utils.hasLoadedNamespace&&!v.utils.hasLoadedNamespace(j)&&(xw["".concat(he[0],"-").concat(pe)]=!0,v.logger.warn('key "'.concat(I,'" for languages "').concat(he.join(", "),`" won't get resolved as namespace "`).concat(j,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),he.forEach(function(ze){if(!v.isValidLookup(s)){W=ze;var Ee=[be];if(v.i18nFormat&&v.i18nFormat.addLookupKeys)v.i18nFormat.addLookupKeys(Ee,be,ze,pe,b);else{var We;Q&&(We=v.pluralResolver.getSuffix(ze,b.count,b));var Be="_zero";if(Q&&(Ee.push(be+We),V&&Ee.push(be+Be)),J){var Oe="".concat(be).concat(v.options.contextSeparator).concat(b.context);Ee.push(Oe),Q&&(Ee.push(Oe+We),V&&Ee.push(Oe+Be))}}for(var it;it=Ee.pop();)v.isValidLookup(s)||(F=it,s=v.getResource(ze,pe,it,b))}}))})}}),{res:s,usedKey:I,exactUsedKey:F,usedLng:W,usedNS:j}}},{key:"isValidLookup",value:function(d){return d!==void 0&&!(!this.options.returnNull&&d===null)&&!(!this.options.returnEmptyString&&d==="")}},{key:"getResource",value:function(d,v,b){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(d,v,b,s):this.resourceStore.getResource(d,v,b,s)}}],[{key:"hasDefaultValue",value:function(d){var v="defaultValue";for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)&&v===b.substring(0,v.length)&&d[b]!==void 0)return!0;return!1}}]),a}(Fs);function y_(t){return t.charAt(0).toUpperCase()+t.slice(1)}var TP=function(){function t(n){Eo(this,t),this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Jo.create("languageUtils")}return Co(t,[{key:"getScriptPartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return null;var u=a.split("-");return u.length===2||(u.pop(),u[u.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(u.join("-"))}},{key:"getLanguagePartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return a;var u=a.split("-");return this.formatLanguageCode(u[0])}},{key:"formatLanguageCode",value:function(a){if(typeof a=="string"&&a.indexOf("-")>-1){var u=["hans","hant","latn","cyrl","cans","mong","arab"],d=a.split("-");return this.options.lowerCaseLng?d=d.map(function(v){return v.toLowerCase()}):d.length===2?(d[0]=d[0].toLowerCase(),d[1]=d[1].toUpperCase(),u.indexOf(d[1].toLowerCase())>-1&&(d[1]=y_(d[1].toLowerCase()))):d.length===3&&(d[0]=d[0].toLowerCase(),d[1].length===2&&(d[1]=d[1].toUpperCase()),d[0]!=="sgn"&&d[2].length===2&&(d[2]=d[2].toUpperCase()),u.indexOf(d[1].toLowerCase())>-1&&(d[1]=y_(d[1].toLowerCase())),u.indexOf(d[2].toLowerCase())>-1&&(d[2]=y_(d[2].toLowerCase()))),d.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a}},{key:"isSupportedCode",value:function(a){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(a=this.getLanguagePartFromCode(a)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(a)>-1}},{key:"getBestMatchFromCodes",value:function(a){var u=this;if(!a)return null;var d;return a.forEach(function(v){if(!d){var b=u.formatLanguageCode(v);(!u.options.supportedLngs||u.isSupportedCode(b))&&(d=b)}}),!d&&this.options.supportedLngs&&a.forEach(function(v){if(!d){var b=u.getLanguagePartFromCode(v);if(u.isSupportedCode(b))return d=b;d=u.options.supportedLngs.find(function(s){if(s.indexOf(b)===0)return s})}}),d||(d=this.getFallbackCodes(this.options.fallbackLng)[0]),d}},{key:"getFallbackCodes",value:function(a,u){if(!a)return[];if(typeof a=="function"&&(a=a(u)),typeof a=="string"&&(a=[a]),Object.prototype.toString.apply(a)==="[object Array]")return a;if(!u)return a.default||[];var d=a[u];return d||(d=a[this.getScriptPartFromCode(u)]),d||(d=a[this.formatLanguageCode(u)]),d||(d=a[this.getLanguagePartFromCode(u)]),d||(d=a.default),d||[]}},{key:"toResolveHierarchy",value:function(a,u){var d=this,v=this.getFallbackCodes(u||this.options.fallbackLng||[],a),b=[],s=function(F){!F||(d.isSupportedCode(F)?b.push(F):d.logger.warn("rejecting language code not found in supportedLngs: ".concat(F)))};return typeof a=="string"&&a.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(a)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(a)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(a))):typeof a=="string"&&s(this.formatLanguageCode(a)),v.forEach(function(I){b.indexOf(I)<0&&s(d.formatLanguageCode(I))}),b}}]),t}(),EP=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],CP={1:function(n){return Number(n>1)},2:function(n){return Number(n!=1)},3:function(n){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},5:function(n){return Number(n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5)},6:function(n){return Number(n==1?0:n>=2&&n<=4?1:2)},7:function(n){return Number(n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},8:function(n){return Number(n==1?0:n==2?1:n!=8&&n!=11?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(n==1?0:n==2?1:n<7?2:n<11?3:4)},11:function(n){return Number(n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(n!==0)},14:function(n){return Number(n==1?0:n==2?1:n==3?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:n!==0?1:2)},17:function(n){return Number(n==1||n%10==1&&n%100!=11?0:1)},18:function(n){return Number(n==0?0:n==1?1:2)},19:function(n){return Number(n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3)},20:function(n){return Number(n==1?0:n==0||n%100>0&&n%100<20?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)},22:function(n){return Number(n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3)}},kP=["v1","v2","v3"],ww={zero:0,one:1,two:2,few:3,many:4,other:5};function IP(){var t={};return EP.forEach(function(n){n.lngs.forEach(function(a){t[a]={numbers:n.nr,plurals:CP[n.fc]}})}),t}var AP=function(){function t(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Eo(this,t),this.languageUtils=n,this.options=a,this.logger=Jo.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=IP()}return Co(t,[{key:"addRule",value:function(a,u){this.rules[a]=u}},{key:"getRule",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(a,{type:u.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[a]||this.rules[this.languageUtils.getLanguagePartFromCode(a)]}},{key:"needsPlural",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=this.getRule(a,u);return this.shouldUseIntlApi()?d&&d.resolvedOptions().pluralCategories.length>1:d&&d.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(a,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(a,d).map(function(v){return"".concat(u).concat(v)})}},{key:"getSuffixes",value:function(a){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=this.getRule(a,d);return v?this.shouldUseIntlApi()?v.resolvedOptions().pluralCategories.sort(function(b,s){return ww[b]-ww[s]}).map(function(b){return"".concat(u.options.prepend).concat(b)}):v.numbers.map(function(b){return u.getSuffix(a,b,d)}):[]}},{key:"getSuffix",value:function(a,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=this.getRule(a,d);return v?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(v.select(u)):this.getSuffixRetroCompatible(v,u):(this.logger.warn("no plural rule found for: ".concat(a)),"")}},{key:"getSuffixRetroCompatible",value:function(a,u){var d=this,v=a.noAbs?a.plurals(u):a.plurals(Math.abs(u)),b=a.numbers[v];this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1&&(b===2?b="plural":b===1&&(b=""));var s=function(){return d.options.prepend&&b.toString()?d.options.prepend+b.toString():b.toString()};return this.options.compatibilityJSON==="v1"?b===1?"":typeof b=="number"?"_plural_".concat(b.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1?s():this.options.prepend&&v.toString()?this.options.prepend+v.toString():v.toString()}},{key:"shouldUseIntlApi",value:function(){return!kP.includes(this.options.compatibilityJSON)}}]),t}();function Sw(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function _o(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Sw(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Sw(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}var PP=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Eo(this,t),this.logger=Jo.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||function(a){return a},this.init(n)}return Co(t,[{key:"init",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};a.interpolation||(a.interpolation={escapeValue:!0});var u=a.interpolation;this.escape=u.escape!==void 0?u.escape:gP,this.escapeValue=u.escapeValue!==void 0?u.escapeValue:!0,this.useRawValueToEscape=u.useRawValueToEscape!==void 0?u.useRawValueToEscape:!1,this.prefix=u.prefix?uu(u.prefix):u.prefixEscaped||"{{",this.suffix=u.suffix?uu(u.suffix):u.suffixEscaped||"}}",this.formatSeparator=u.formatSeparator?u.formatSeparator:u.formatSeparator||",",this.unescapePrefix=u.unescapeSuffix?"":u.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":u.unescapeSuffix||"",this.nestingPrefix=u.nestingPrefix?uu(u.nestingPrefix):u.nestingPrefixEscaped||uu("$t("),this.nestingSuffix=u.nestingSuffix?uu(u.nestingSuffix):u.nestingSuffixEscaped||uu(")"),this.nestingOptionsSeparator=u.nestingOptionsSeparator?u.nestingOptionsSeparator:u.nestingOptionsSeparator||",",this.maxReplaces=u.maxReplaces?u.maxReplaces:1e3,this.alwaysFormat=u.alwaysFormat!==void 0?u.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var a="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(a,"g");var u="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(u,"g");var d="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(d,"g")}},{key:"interpolate",value:function(a,u,d,v){var b=this,s,I,F,W=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function j(Q){return Q.replace(/\$/g,"$$$$")}var Y=function(V){if(V.indexOf(b.formatSeparator)<0){var J=yw(u,W,V);return b.alwaysFormat?b.format(J,void 0,d,_o(_o(_o({},v),u),{},{interpolationkey:V})):J}var he=V.split(b.formatSeparator),pe=he.shift().trim(),ze=he.join(b.formatSeparator).trim();return b.format(yw(u,W,pe),ze,d,_o(_o(_o({},v),u),{},{interpolationkey:pe}))};this.resetRegExp();var H=v&&v.missingInterpolationHandler||this.options.missingInterpolationHandler,be=v&&v.interpolation&&v.interpolation.skipOnVariables!==void 0?v.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,ge=[{regex:this.regexpUnescape,safeValue:function(V){return j(V)}},{regex:this.regexp,safeValue:function(V){return b.escapeValue?j(b.escape(V)):j(V)}}];return ge.forEach(function(Q){for(F=0;s=Q.regex.exec(a);){var V=s[1].trim();if(I=Y(V),I===void 0)if(typeof H=="function"){var J=H(a,s,v);I=typeof J=="string"?J:""}else if(v&&v.hasOwnProperty(V))I="";else if(be){I=s[0];continue}else b.logger.warn("missed to pass in variable ".concat(V," for interpolating ").concat(a)),I="";else typeof I!="string"&&!b.useRawValueToEscape&&(I=mw(I));var he=Q.safeValue(I);if(a=a.replace(s[0],he),be?(Q.regex.lastIndex+=he.length,Q.regex.lastIndex-=s[0].length):Q.regex.lastIndex=0,F++,F>=b.maxReplaces)break}}),a}},{key:"nest",value:function(a,u){var d=this,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b,s,I=_o({},v);I.applyPostProcessor=!1,delete I.defaultValue;function F(H,be){var ge=this.nestingOptionsSeparator;if(H.indexOf(ge)<0)return H;var Q=H.split(new RegExp("".concat(ge,"[ ]*{"))),V="{".concat(Q[1]);H=Q[0],V=this.interpolate(V,I),V=V.replace(/'/g,'"');try{I=JSON.parse(V),be&&(I=_o(_o({},be),I))}catch(J){return this.logger.warn("failed parsing options string in nesting for key ".concat(H),J),"".concat(H).concat(ge).concat(V)}return delete I.defaultValue,H}for(;b=this.nestingRegexp.exec(a);){var W=[],j=!1;if(b[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(b[1])){var Y=b[1].split(this.formatSeparator).map(function(H){return H.trim()});b[1]=Y.shift(),W=Y,j=!0}if(s=u(F.call(this,b[1].trim(),I),I),s&&b[0]===a&&typeof s!="string")return s;typeof s!="string"&&(s=mw(s)),s||(this.logger.warn("missed to resolve ".concat(b[1]," for nesting ").concat(a)),s=""),j&&(s=W.reduce(function(H,be){return d.format(H,be,v.lng,_o(_o({},v),{},{interpolationkey:b[1].trim()}))},s.trim())),a=a.replace(b[0],s),this.regexp.lastIndex=0}return a}}]),t}();function Tw(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function _s(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Tw(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Tw(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function MP(t){var n=t.toLowerCase().trim(),a={};if(t.indexOf("(")>-1){var u=t.split("(");n=u[0].toLowerCase().trim();var d=u[1].substring(0,u[1].length-1);if(n==="currency"&&d.indexOf(":")<0)a.currency||(a.currency=d.trim());else if(n==="relativetime"&&d.indexOf(":")<0)a.range||(a.range=d.trim());else{var v=d.split(";");v.forEach(function(b){if(!!b){var s=b.split(":"),I=uP(s),F=I[0],W=I.slice(1),j=W.join(":");j.trim()==="false"&&(a[F.trim()]=!1),j.trim()==="true"&&(a[F.trim()]=!0),isNaN(j.trim())||(a[F.trim()]=parseInt(j.trim(),10)),a[F.trim()]||(a[F.trim()]=j.trim())}})}}return{formatName:n,formatOptions:a}}var zP=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Eo(this,t),this.logger=Jo.create("formatter"),this.options=n,this.formats={number:function(u,d,v){return new Intl.NumberFormat(d,v).format(u)},currency:function(u,d,v){return new Intl.NumberFormat(d,_s(_s({},v),{},{style:"currency"})).format(u)},datetime:function(u,d,v){return new Intl.DateTimeFormat(d,_s({},v)).format(u)},relativetime:function(u,d,v){return new Intl.RelativeTimeFormat(d,_s({},v)).format(u,v.range||"day")},list:function(u,d,v){return new Intl.ListFormat(d,_s({},v)).format(u)}},this.init(n)}return Co(t,[{key:"init",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},d=u.interpolation;this.formatSeparator=d.formatSeparator?d.formatSeparator:d.formatSeparator||","}},{key:"add",value:function(a,u){this.formats[a.toLowerCase().trim()]=u}},{key:"format",value:function(a,u,d,v){var b=this,s=u.split(this.formatSeparator),I=s.reduce(function(F,W){var j=MP(W),Y=j.formatName,H=j.formatOptions;if(b.formats[Y]){var be=F;try{var ge=v&&v.formatParams&&v.formatParams[v.interpolationkey]||{},Q=ge.locale||ge.lng||v.locale||v.lng||d;be=b.formats[Y](F,Q,_s(_s(_s({},H),v),ge))}catch(V){b.logger.warn(V)}return be}else b.logger.warn("there was no format function for ".concat(Y));return F},a);return I}}]),t}();function Ew(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Cw(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Ew(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ew(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function OP(t){var n=LP();return function(){var u=oa(t),d;if(n){var v=oa(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return of(this,d)}}function LP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function DP(t,n){for(var a=t.indexOf(n);a!==-1;)t.splice(a,1),a=t.indexOf(n)}var RP=function(t){pg(a,t);var n=OP(a);function a(u,d,v){var b,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Eo(this,a),b=n.call(this),mg&&Fs.call(As(b)),b.backend=u,b.store=d,b.services=v,b.languageUtils=v.languageUtils,b.options=s,b.logger=Jo.create("backendConnector"),b.state={},b.queue=[],b.backend&&b.backend.init&&b.backend.init(v,s.backend,s),b}return Co(a,[{key:"queueLoad",value:function(d,v,b,s){var I=this,F=[],W=[],j=[],Y=[];return d.forEach(function(H){var be=!0;v.forEach(function(ge){var Q="".concat(H,"|").concat(ge);!b.reload&&I.store.hasResourceBundle(H,ge)?I.state[Q]=2:I.state[Q]<0||(I.state[Q]===1?W.indexOf(Q)<0&&W.push(Q):(I.state[Q]=1,be=!1,W.indexOf(Q)<0&&W.push(Q),F.indexOf(Q)<0&&F.push(Q),Y.indexOf(ge)<0&&Y.push(ge)))}),be||j.push(H)}),(F.length||W.length)&&this.queue.push({pending:W,loaded:{},errors:[],callback:s}),{toLoad:F,pending:W,toLoadLanguages:j,toLoadNamespaces:Y}}},{key:"loaded",value:function(d,v,b){var s=d.split("|"),I=s[0],F=s[1];v&&this.emit("failedLoading",I,F,v),b&&this.store.addResourceBundle(I,F,b),this.state[d]=v?-1:2;var W={};this.queue.forEach(function(j){pP(j.loaded,[I],F),DP(j.pending,d),v&&j.errors.push(v),j.pending.length===0&&!j.done&&(Object.keys(j.loaded).forEach(function(Y){W[Y]||(W[Y]=[]),j.loaded[Y].length&&j.loaded[Y].forEach(function(H){W[Y].indexOf(H)<0&&W[Y].push(H)})}),j.done=!0,j.errors.length?j.callback(j.errors):j.callback())}),this.emit("loaded",W),this.queue=this.queue.filter(function(j){return!j.done})}},{key:"read",value:function(d,v,b){var s=this,I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,W=arguments.length>5?arguments[5]:void 0;return d.length?this.backend[b](d,v,function(j,Y){if(j&&Y&&I<5){setTimeout(function(){s.read.call(s,d,v,b,I+1,F*2,W)},F);return}W(j,Y)}):W(null,{})}},{key:"prepareLoading",value:function(d,v){var b=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},I=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),I&&I();typeof d=="string"&&(d=this.languageUtils.toResolveHierarchy(d)),typeof v=="string"&&(v=[v]);var F=this.queueLoad(d,v,s,I);if(!F.toLoad.length)return F.pending.length||I(),null;F.toLoad.forEach(function(W){b.loadOne(W)})}},{key:"load",value:function(d,v,b){this.prepareLoading(d,v,{},b)}},{key:"reload",value:function(d,v,b){this.prepareLoading(d,v,{reload:!0},b)}},{key:"loadOne",value:function(d){var v=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=d.split("|"),I=s[0],F=s[1];this.read(I,F,"read",void 0,void 0,function(W,j){W&&v.logger.warn("".concat(b,"loading namespace ").concat(F," for language ").concat(I," failed"),W),!W&&j&&v.logger.log("".concat(b,"loaded namespace ").concat(F," for language ").concat(I),j),v.loaded(d,W,j)})}},{key:"saveMissing",value:function(d,v,b,s,I){var F=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(v)){this.logger.warn('did not save key "'.concat(b,'" as the namespace "').concat(v,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}b==null||b===""||(this.backend&&this.backend.create&&this.backend.create(d,v,b,s,null,Cw(Cw({},F),{},{isUpdate:I})),!(!d||!d[0])&&this.store.addResource(d[0],v,b,s))}}]),a}(Fs);function BP(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(n){var a={};if(Is(n[1])==="object"&&(a=n[1]),typeof n[1]=="string"&&(a.defaultValue=n[1]),typeof n[2]=="string"&&(a.tDescription=n[2]),Is(n[2])==="object"||Is(n[3])==="object"){var u=n[3]||n[2];Object.keys(u).forEach(function(d){a[d]=u[d]})}return a},interpolation:{escapeValue:!0,format:function(n,a,u,d){return n},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function kw(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Iw(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Ko(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Iw(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Iw(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function FP(t){var n=NP();return function(){var u=oa(t),d;if(n){var v=oa(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return of(this,d)}}function NP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zp(){}function jP(t){var n=Object.getOwnPropertyNames(Object.getPrototypeOf(t));n.forEach(function(a){typeof t[a]=="function"&&(t[a]=t[a].bind(t))})}var Cm=function(t){pg(a,t);var n=FP(a);function a(){var u,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1?arguments[1]:void 0;if(Eo(this,a),u=n.call(this),mg&&Fs.call(As(u)),u.options=kw(d),u.services={},u.logger=Jo,u.modules={external:[]},jP(As(u)),v&&!u.isInitialized&&!d.isClone){if(!u.options.initImmediate)return u.init(d,v),of(u,As(u));setTimeout(function(){u.init(d,v)},0)}return u}return Co(a,[{key:"init",value:function(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=arguments.length>1?arguments[1]:void 0;typeof v=="function"&&(b=v,v={}),!v.defaultNS&&v.ns&&(typeof v.ns=="string"?v.defaultNS=v.ns:v.ns.indexOf("translation")<0&&(v.defaultNS=v.ns[0]));var s=BP();this.options=Ko(Ko(Ko({},s),this.options),kw(v)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ko(Ko({},s.interpolation),this.options.interpolation)),v.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=v.keySeparator),v.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=v.nsSeparator);function I(V){return V?typeof V=="function"?new V:V:null}if(!this.options.isClone){this.modules.logger?Jo.init(I(this.modules.logger),this.options):Jo.init(null,this.options);var F;this.modules.formatter?F=this.modules.formatter:typeof Intl!="undefined"&&(F=zP);var W=new TP(this.options);this.store=new bP(this.options.resources,this.options);var j=this.services;j.logger=Jo,j.resourceStore=this.store,j.languageUtils=W,j.pluralResolver=new AP(W,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),F&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(j.formatter=I(F),j.formatter.init(j,this.options),this.options.interpolation.format=j.formatter.format.bind(j.formatter)),j.interpolator=new PP(this.options),j.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},j.backendConnector=new RP(I(this.modules.backend),j.resourceStore,j,this.options),j.backendConnector.on("*",function(V){for(var J=arguments.length,he=new Array(J>1?J-1:0),pe=1;pe<J;pe++)he[pe-1]=arguments[pe];d.emit.apply(d,[V].concat(he))}),this.modules.languageDetector&&(j.languageDetector=I(this.modules.languageDetector),j.languageDetector.init(j,this.options.detection,this.options)),this.modules.i18nFormat&&(j.i18nFormat=I(this.modules.i18nFormat),j.i18nFormat.init&&j.i18nFormat.init(this)),this.translator=new bw(this.services,this.options),this.translator.on("*",function(V){for(var J=arguments.length,he=new Array(J>1?J-1:0),pe=1;pe<J;pe++)he[pe-1]=arguments[pe];d.emit.apply(d,[V].concat(he))}),this.modules.external.forEach(function(V){V.init&&V.init(d)})}if(this.format=this.options.interpolation.format,b||(b=Zp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var Y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);Y.length>0&&Y[0]!=="dev"&&(this.options.lng=Y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var H=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];H.forEach(function(V){d[V]=function(){var J;return(J=d.store)[V].apply(J,arguments)}});var be=["addResource","addResources","addResourceBundle","removeResourceBundle"];be.forEach(function(V){d[V]=function(){var J;return(J=d.store)[V].apply(J,arguments),d}});var ge=td(),Q=function(){var J=function(pe,ze){d.isInitialized&&!d.initializedStoreOnce&&d.logger.warn("init: i18next is already initialized. You should call init just once!"),d.isInitialized=!0,d.options.isClone||d.logger.log("initialized",d.options),d.emit("initialized",d.options),ge.resolve(ze),b(pe,ze)};if(d.languages&&d.options.compatibilityAPI!=="v1"&&!d.isInitialized)return J(null,d.t.bind(d));d.changeLanguage(d.options.lng,J)};return this.options.resources||!this.options.initImmediate?Q():setTimeout(Q,0),ge}},{key:"loadResources",value:function(d){var v=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zp,s=b,I=typeof d=="string"?d:this.language;if(typeof d=="function"&&(s=d),!this.options.resources||this.options.partialBundledLanguages){if(I&&I.toLowerCase()==="cimode")return s();var F=[],W=function(H){if(!!H){var be=v.services.languageUtils.toResolveHierarchy(H);be.forEach(function(ge){F.indexOf(ge)<0&&F.push(ge)})}};if(I)W(I);else{var j=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);j.forEach(function(Y){return W(Y)})}this.options.preload&&this.options.preload.forEach(function(Y){return W(Y)}),this.services.backendConnector.load(F,this.options.ns,s)}else s(null)}},{key:"reloadResources",value:function(d,v,b){var s=td();return d||(d=this.languages),v||(v=this.options.ns),b||(b=Zp),this.services.backendConnector.reload(d,v,function(I){s.resolve(),b(I)}),s}},{key:"use",value:function(d){if(!d)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!d.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return d.type==="backend"&&(this.modules.backend=d),(d.type==="logger"||d.log&&d.warn&&d.error)&&(this.modules.logger=d),d.type==="languageDetector"&&(this.modules.languageDetector=d),d.type==="i18nFormat"&&(this.modules.i18nFormat=d),d.type==="postProcessor"&&rT.addPostProcessor(d),d.type==="formatter"&&(this.modules.formatter=d),d.type==="3rdParty"&&this.modules.external.push(d),this}},{key:"changeLanguage",value:function(d,v){var b=this;this.isLanguageChangingTo=d;var s=td();this.emit("languageChanging",d);var I=function(Y){if(b.language=Y,b.languages=b.services.languageUtils.toResolveHierarchy(Y),b.resolvedLanguage=void 0,!(["cimode","dev"].indexOf(Y)>-1))for(var H=0;H<b.languages.length;H++){var be=b.languages[H];if(!(["cimode","dev"].indexOf(be)>-1)&&b.store.hasLanguageSomeTranslations(be)){b.resolvedLanguage=be;break}}},F=function(Y,H){H?(I(H),b.translator.changeLanguage(H),b.isLanguageChangingTo=void 0,b.emit("languageChanged",H),b.logger.log("languageChanged",H)):b.isLanguageChangingTo=void 0,s.resolve(function(){return b.t.apply(b,arguments)}),v&&v(Y,function(){return b.t.apply(b,arguments)})},W=function(Y){!d&&!Y&&b.services.languageDetector&&(Y=[]);var H=typeof Y=="string"?Y:b.services.languageUtils.getBestMatchFromCodes(Y);H&&(b.language||I(H),b.translator.language||b.translator.changeLanguage(H),b.services.languageDetector&&b.services.languageDetector.cacheUserLanguage(H)),b.loadResources(H,function(be){F(be,H)})};return!d&&this.services.languageDetector&&!this.services.languageDetector.async?W(this.services.languageDetector.detect()):!d&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(W):W(d),s}},{key:"getFixedT",value:function(d,v,b){var s=this,I=function F(W,j){var Y;if(Is(j)!=="object"){for(var H=arguments.length,be=new Array(H>2?H-2:0),ge=2;ge<H;ge++)be[ge-2]=arguments[ge];Y=s.options.overloadTranslationOptionHandler([W,j].concat(be))}else Y=Ko({},j);Y.lng=Y.lng||F.lng,Y.lngs=Y.lngs||F.lngs,Y.ns=Y.ns||F.ns;var Q=s.options.keySeparator||".",V=b?"".concat(b).concat(Q).concat(W):W;return s.t(V,Y)};return typeof d=="string"?I.lng=d:I.lngs=d,I.ns=v,I.keyPrefix=b,I}},{key:"t",value:function(){var d;return this.translator&&(d=this.translator).translate.apply(d,arguments)}},{key:"exists",value:function(){var d;return this.translator&&(d=this.translator).exists.apply(d,arguments)}},{key:"setDefaultNamespace",value:function(d){this.options.defaultNS=d}},{key:"hasLoadedNamespace",value:function(d){var v=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=this.resolvedLanguage||this.languages[0],I=this.options?this.options.fallbackLng:!1,F=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var W=function(H,be){var ge=v.services.backendConnector.state["".concat(H,"|").concat(be)];return ge===-1||ge===2};if(b.precheck){var j=b.precheck(this,W);if(j!==void 0)return j}return!!(this.hasResourceBundle(s,d)||!this.services.backendConnector.backend||W(s,d)&&(!I||W(F,d)))}},{key:"loadNamespaces",value:function(d,v){var b=this,s=td();return this.options.ns?(typeof d=="string"&&(d=[d]),d.forEach(function(I){b.options.ns.indexOf(I)<0&&b.options.ns.push(I)}),this.loadResources(function(I){s.resolve(),v&&v(I)}),s):(v&&v(),Promise.resolve())}},{key:"loadLanguages",value:function(d,v){var b=td();typeof d=="string"&&(d=[d]);var s=this.options.preload||[],I=d.filter(function(F){return s.indexOf(F)<0});return I.length?(this.options.preload=s.concat(I),this.loadResources(function(F){b.resolve(),v&&v(F)}),b):(v&&v(),Promise.resolve())}},{key:"dir",value:function(d){if(d||(d=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!d)return"rtl";var v=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return v.indexOf(this.services.languageUtils.getLanguagePartFromCode(d))>-1||d.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var d=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zp,s=Ko(Ko(Ko({},this.options),v),{isClone:!0}),I=new a(s),F=["store","services","language"];return F.forEach(function(W){I[W]=d[W]}),I.services=Ko({},this.services),I.services.utils={hasLoadedNamespace:I.hasLoadedNamespace.bind(I)},I.translator=new bw(I.services,I.options),I.translator.on("*",function(W){for(var j=arguments.length,Y=new Array(j>1?j-1:0),H=1;H<j;H++)Y[H-1]=arguments[H];I.emit.apply(I,[W].concat(Y))}),I.init(s,b),I.translator.options=I.options,I.translator.backendConnector.services.utils={hasLoadedNamespace:I.hasLoadedNamespace.bind(I)},I}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),a}(Fs);La(Cm,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Cm(t,n)});var Gr=Cm.createInstance();Gr.createInstance=Cm.createInstance;Gr.createInstance;Gr.init;Gr.loadResources;Gr.reloadResources;Gr.use;Gr.changeLanguage;Gr.getFixedT;Gr.t;Gr.exists;Gr.setDefaultNamespace;Gr.hasLoadedNamespace;Gr.loadNamespaces;Gr.loadLanguages;var pd=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function UP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VP(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(a){var u=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,u.get?u:{enumerable:!0,get:function(){return t[a]}})}),n}var In={exports:{}},ln={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Aw=Object.getOwnPropertySymbols,$P=Object.prototype.hasOwnProperty,GP=Object.prototype.propertyIsEnumerable;function qP(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function ZP(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var n={},a=0;a<10;a++)n["_"+String.fromCharCode(a)]=a;var u=Object.getOwnPropertyNames(n).map(function(v){return n[v]});if(u.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(v){d[v]=v}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var iT=ZP()?Object.assign:function(t,n){for(var a,u=qP(t),d,v=1;v<arguments.length;v++){a=Object(arguments[v]);for(var b in a)$P.call(a,b)&&(u[b]=a[b]);if(Aw){d=Aw(a);for(var s=0;s<d.length;s++)GP.call(a,d[s])&&(u[d[s]]=a[d[s]])}}return u};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0=iT,Gu=60103,oT=60106;ln.Fragment=60107;ln.StrictMode=60108;ln.Profiler=60114;var aT=60109,sT=60110,lT=60112;ln.Suspense=60113;var cT=60115,uT=60116;if(typeof Symbol=="function"&&Symbol.for){var vo=Symbol.for;Gu=vo("react.element"),oT=vo("react.portal"),ln.Fragment=vo("react.fragment"),ln.StrictMode=vo("react.strict_mode"),ln.Profiler=vo("react.profiler"),aT=vo("react.provider"),sT=vo("react.context"),lT=vo("react.forward_ref"),ln.Suspense=vo("react.suspense"),cT=vo("react.memo"),uT=vo("react.lazy")}var Pw=typeof Symbol=="function"&&Symbol.iterator;function WP(t){return t===null||typeof t!="object"?null:(t=Pw&&t[Pw]||t["@@iterator"],typeof t=="function"?t:null)}function af(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dT={};function qu(t,n,a){this.props=t,this.context=n,this.refs=dT,this.updater=a||hT}qu.prototype.isReactComponent={};qu.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(af(85));this.updater.enqueueSetState(this,t,n,"setState")};qu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fT(){}fT.prototype=qu.prototype;function C0(t,n,a){this.props=t,this.context=n,this.refs=dT,this.updater=a||hT}var k0=C0.prototype=new fT;k0.constructor=C0;E0(k0,qu.prototype);k0.isPureReactComponent=!0;var I0={current:null},pT=Object.prototype.hasOwnProperty,mT={key:!0,ref:!0,__self:!0,__source:!0};function gT(t,n,a){var u,d={},v=null,b=null;if(n!=null)for(u in n.ref!==void 0&&(b=n.ref),n.key!==void 0&&(v=""+n.key),n)pT.call(n,u)&&!mT.hasOwnProperty(u)&&(d[u]=n[u]);var s=arguments.length-2;if(s===1)d.children=a;else if(1<s){for(var I=Array(s),F=0;F<s;F++)I[F]=arguments[F+2];d.children=I}if(t&&t.defaultProps)for(u in s=t.defaultProps,s)d[u]===void 0&&(d[u]=s[u]);return{$$typeof:Gu,type:t,key:v,ref:b,props:d,_owner:I0.current}}function HP(t,n){return{$$typeof:Gu,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function A0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gu}function XP(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return n[a]})}var Mw=/\/+/g;function __(t,n){return typeof t=="object"&&t!==null&&t.key!=null?XP(""+t.key):n.toString(36)}function lm(t,n,a,u,d){var v=typeof t;(v==="undefined"||v==="boolean")&&(t=null);var b=!1;if(t===null)b=!0;else switch(v){case"string":case"number":b=!0;break;case"object":switch(t.$$typeof){case Gu:case oT:b=!0}}if(b)return b=t,d=d(b),t=u===""?"."+__(b,0):u,Array.isArray(d)?(a="",t!=null&&(a=t.replace(Mw,"$&/")+"/"),lm(d,n,a,"",function(F){return F})):d!=null&&(A0(d)&&(d=HP(d,a+(!d.key||b&&b.key===d.key?"":(""+d.key).replace(Mw,"$&/")+"/")+t)),n.push(d)),1;if(b=0,u=u===""?".":u+":",Array.isArray(t))for(var s=0;s<t.length;s++){v=t[s];var I=u+__(v,s);b+=lm(v,n,a,I,d)}else if(I=WP(t),typeof I=="function")for(t=I.call(t),s=0;!(v=t.next()).done;)v=v.value,I=u+__(v,s++),b+=lm(v,n,a,I,d);else if(v==="object")throw n=""+t,Error(af(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n));return b}function Wp(t,n,a){if(t==null)return t;var u=[],d=0;return lm(t,u,"","",function(v){return n.call(a,v,d++)}),u}function YP(t){if(t._status===-1){var n=t._result;n=n(),t._status=0,t._result=n,n.then(function(a){t._status===0&&(a=a.default,t._status=1,t._result=a)},function(a){t._status===0&&(t._status=2,t._result=a)})}if(t._status===1)return t._result;throw t._result}var yT={current:null};function Da(){var t=yT.current;if(t===null)throw Error(af(321));return t}var KP={ReactCurrentDispatcher:yT,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:I0,IsSomeRendererActing:{current:!1},assign:E0};ln.Children={map:Wp,forEach:function(t,n,a){Wp(t,function(){n.apply(this,arguments)},a)},count:function(t){var n=0;return Wp(t,function(){n++}),n},toArray:function(t){return Wp(t,function(n){return n})||[]},only:function(t){if(!A0(t))throw Error(af(143));return t}};ln.Component=qu;ln.PureComponent=C0;ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KP;ln.cloneElement=function(t,n,a){if(t==null)throw Error(af(267,t));var u=E0({},t.props),d=t.key,v=t.ref,b=t._owner;if(n!=null){if(n.ref!==void 0&&(v=n.ref,b=I0.current),n.key!==void 0&&(d=""+n.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(I in n)pT.call(n,I)&&!mT.hasOwnProperty(I)&&(u[I]=n[I]===void 0&&s!==void 0?s[I]:n[I])}var I=arguments.length-2;if(I===1)u.children=a;else if(1<I){s=Array(I);for(var F=0;F<I;F++)s[F]=arguments[F+2];u.children=s}return{$$typeof:Gu,type:t.type,key:d,ref:v,props:u,_owner:b}};ln.createContext=function(t,n){return n===void 0&&(n=null),t={$$typeof:sT,_calculateChangedBits:n,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:aT,_context:t},t.Consumer=t};ln.createElement=gT;ln.createFactory=function(t){var n=gT.bind(null,t);return n.type=t,n};ln.createRef=function(){return{current:null}};ln.forwardRef=function(t){return{$$typeof:lT,render:t}};ln.isValidElement=A0;ln.lazy=function(t){return{$$typeof:uT,_payload:{_status:-1,_result:t},_init:YP}};ln.memo=function(t,n){return{$$typeof:cT,type:t,compare:n===void 0?null:n}};ln.useCallback=function(t,n){return Da().useCallback(t,n)};ln.useContext=function(t,n){return Da().useContext(t,n)};ln.useDebugValue=function(){};ln.useEffect=function(t,n){return Da().useEffect(t,n)};ln.useImperativeHandle=function(t,n,a){return Da().useImperativeHandle(t,n,a)};ln.useLayoutEffect=function(t,n){return Da().useLayoutEffect(t,n)};ln.useMemo=function(t,n){return Da().useMemo(t,n)};ln.useReducer=function(t,n,a){return Da().useReducer(t,n,a)};ln.useRef=function(t){return Da().useRef(t)};ln.useState=function(t){return Da().useState(t)};ln.version="17.0.2";In.exports=ln;var _T=In.exports,vT={exports:{}},no={},xT={exports:{}},bT={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var n,a,u,d;if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;t.unstable_now=function(){return v.now()}}else{var b=Date,s=b.now();t.unstable_now=function(){return b.now()-s}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var I=null,F=null,W=function(){if(I!==null)try{var Ve=t.unstable_now();I(!0,Ve),I=null}catch(pt){throw setTimeout(W,0),pt}};n=function(Ve){I!==null?setTimeout(n,0,Ve):(I=Ve,setTimeout(W,0))},a=function(Ve,pt){F=setTimeout(Ve,pt)},u=function(){clearTimeout(F)},t.unstable_shouldYield=function(){return!1},d=t.unstable_forceFrameRate=function(){}}else{var j=window.setTimeout,Y=window.clearTimeout;if(typeof console!="undefined"){var H=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof H!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var be=!1,ge=null,Q=-1,V=5,J=0;t.unstable_shouldYield=function(){return t.unstable_now()>=J},d=function(){},t.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Ve?Math.floor(1e3/Ve):5};var he=new MessageChannel,pe=he.port2;he.port1.onmessage=function(){if(ge!==null){var Ve=t.unstable_now();J=Ve+V;try{ge(!0,Ve)?pe.postMessage(null):(be=!1,ge=null)}catch(pt){throw pe.postMessage(null),pt}}else be=!1},n=function(Ve){ge=Ve,be||(be=!0,pe.postMessage(null))},a=function(Ve,pt){Q=j(function(){Ve(t.unstable_now())},pt)},u=function(){Y(Q),Q=-1}}function ze(Ve,pt){var Tt=Ve.length;Ve.push(pt);e:for(;;){var Dt=Tt-1>>>1,bn=Ve[Dt];if(bn!==void 0&&0<Be(bn,pt))Ve[Dt]=pt,Ve[Tt]=bn,Tt=Dt;else break e}}function Ee(Ve){return Ve=Ve[0],Ve===void 0?null:Ve}function We(Ve){var pt=Ve[0];if(pt!==void 0){var Tt=Ve.pop();if(Tt!==pt){Ve[0]=Tt;e:for(var Dt=0,bn=Ve.length;Dt<bn;){var ar=2*(Dt+1)-1,Zn=Ve[ar],Er=ar+1,sr=Ve[Er];if(Zn!==void 0&&0>Be(Zn,Tt))sr!==void 0&&0>Be(sr,Zn)?(Ve[Dt]=sr,Ve[Er]=Tt,Dt=Er):(Ve[Dt]=Zn,Ve[ar]=Tt,Dt=ar);else if(sr!==void 0&&0>Be(sr,Tt))Ve[Dt]=sr,Ve[Er]=Tt,Dt=Er;else break e}}return pt}return null}function Be(Ve,pt){var Tt=Ve.sortIndex-pt.sortIndex;return Tt!==0?Tt:Ve.id-pt.id}var Oe=[],it=[],St=1,ct=null,at=3,An=!1,Jt=!1,hn=!1;function _n(Ve){for(var pt=Ee(it);pt!==null;){if(pt.callback===null)We(it);else if(pt.startTime<=Ve)We(it),pt.sortIndex=pt.expirationTime,ze(Oe,pt);else break;pt=Ee(it)}}function qn(Ve){if(hn=!1,_n(Ve),!Jt)if(Ee(Oe)!==null)Jt=!0,n(Pn);else{var pt=Ee(it);pt!==null&&a(qn,pt.startTime-Ve)}}function Pn(Ve,pt){Jt=!1,hn&&(hn=!1,u()),An=!0;var Tt=at;try{for(_n(pt),ct=Ee(Oe);ct!==null&&(!(ct.expirationTime>pt)||Ve&&!t.unstable_shouldYield());){var Dt=ct.callback;if(typeof Dt=="function"){ct.callback=null,at=ct.priorityLevel;var bn=Dt(ct.expirationTime<=pt);pt=t.unstable_now(),typeof bn=="function"?ct.callback=bn:ct===Ee(Oe)&&We(Oe),_n(pt)}else We(Oe);ct=Ee(Oe)}if(ct!==null)var ar=!0;else{var Zn=Ee(it);Zn!==null&&a(qn,Zn.startTime-pt),ar=!1}return ar}finally{ct=null,at=Tt,An=!1}}var mr=d;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ve){Ve.callback=null},t.unstable_continueExecution=function(){Jt||An||(Jt=!0,n(Pn))},t.unstable_getCurrentPriorityLevel=function(){return at},t.unstable_getFirstCallbackNode=function(){return Ee(Oe)},t.unstable_next=function(Ve){switch(at){case 1:case 2:case 3:var pt=3;break;default:pt=at}var Tt=at;at=pt;try{return Ve()}finally{at=Tt}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=mr,t.unstable_runWithPriority=function(Ve,pt){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var Tt=at;at=Ve;try{return pt()}finally{at=Tt}},t.unstable_scheduleCallback=function(Ve,pt,Tt){var Dt=t.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?Dt+Tt:Dt):Tt=Dt,Ve){case 1:var bn=-1;break;case 2:bn=250;break;case 5:bn=1073741823;break;case 4:bn=1e4;break;default:bn=5e3}return bn=Tt+bn,Ve={id:St++,callback:pt,priorityLevel:Ve,startTime:Tt,expirationTime:bn,sortIndex:-1},Tt>Dt?(Ve.sortIndex=Tt,ze(it,Ve),Ee(Oe)===null&&Ve===Ee(it)&&(hn?u():hn=!0,a(qn,Tt-Dt))):(Ve.sortIndex=bn,ze(Oe,Ve),Jt||An||(Jt=!0,n(Pn))),Ve},t.unstable_wrapCallback=function(Ve){var pt=at;return function(){var Tt=at;at=pt;try{return Ve.apply(this,arguments)}finally{at=Tt}}}})(bT);xT.exports=bT;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg=In.exports,Gn=iT,Tr=xT.exports;function tt(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!gg)throw Error(tt(227));var wT=new Set,Nd={};function tc(t,n){Bu(t,n),Bu(t+"Capture",n)}function Bu(t,n){for(Nd[t]=n,t=0;t<n.length;t++)wT.add(n[t])}var Pa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),JP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zw=Object.prototype.hasOwnProperty,Ow={},Lw={};function QP(t){return zw.call(Lw,t)?!0:zw.call(Ow,t)?!1:JP.test(t)?Lw[t]=!0:(Ow[t]=!0,!1)}function eM(t,n,a,u){if(a!==null&&a.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tM(t,n,a,u){if(n===null||typeof n=="undefined"||eM(t,n,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ii(t,n,a,u,d,v,b){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=t,this.type=n,this.sanitizeURL=v,this.removeEmptyString=b}var zr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zr[t]=new ii(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];zr[n]=new ii(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zr[t]=new ii(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zr[t]=new ii(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zr[t]=new ii(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zr[t]=new ii(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zr[t]=new ii(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zr[t]=new ii(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zr[t]=new ii(t,5,!1,t.toLowerCase(),null,!1,!1)});var P0=/[\-:]([a-z])/g;function M0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(P0,M0);zr[n]=new ii(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(P0,M0);zr[n]=new ii(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(P0,M0);zr[n]=new ii(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zr[t]=new ii(t,1,!1,t.toLowerCase(),null,!1,!1)});zr.xlinkHref=new ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zr[t]=new ii(t,1,!1,t.toLowerCase(),null,!0,!0)});function z0(t,n,a,u){var d=zr.hasOwnProperty(n)?zr[n]:null,v=d!==null?d.type===0:u?!1:!(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N");v||(tM(n,a,d,u)&&(a=null),u||d===null?QP(n)&&(a===null?t.removeAttribute(n):t.setAttribute(n,""+a)):d.mustUseProperty?t[d.propertyName]=a===null?d.type===3?!1:"":a:(n=d.attributeName,u=d.attributeNamespace,a===null?t.removeAttribute(n):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,u?t.setAttributeNS(u,n,a):t.setAttribute(n,a))))}var nc=gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,md=60103,jl=60106,ws=60107,O0=60108,bd=60114,L0=60109,D0=60110,yg=60112,wd=60113,km=60120,_g=60115,R0=60116,B0=60121,F0=60128,ST=60129,N0=60130,rv=60131;if(typeof Symbol=="function"&&Symbol.for){var Sr=Symbol.for;md=Sr("react.element"),jl=Sr("react.portal"),ws=Sr("react.fragment"),O0=Sr("react.strict_mode"),bd=Sr("react.profiler"),L0=Sr("react.provider"),D0=Sr("react.context"),yg=Sr("react.forward_ref"),wd=Sr("react.suspense"),km=Sr("react.suspense_list"),_g=Sr("react.memo"),R0=Sr("react.lazy"),B0=Sr("react.block"),Sr("react.scope"),F0=Sr("react.opaque.id"),ST=Sr("react.debug_trace_mode"),N0=Sr("react.offscreen"),rv=Sr("react.legacy_hidden")}var Dw=typeof Symbol=="function"&&Symbol.iterator;function nd(t){return t===null||typeof t!="object"?null:(t=Dw&&t[Dw]||t["@@iterator"],typeof t=="function"?t:null)}var v_;function gd(t){if(v_===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);v_=n&&n[1]||""}return`
`+v_+t}var x_=!1;function Hp(t,n){if(!t||x_)return"";x_=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(I){var u=I}Reflect.construct(t,[],n)}else{try{n.call()}catch(I){u=I}t.call(n.prototype)}else{try{throw Error()}catch(I){u=I}t()}}catch(I){if(I&&u&&typeof I.stack=="string"){for(var d=I.stack.split(`
`),v=u.stack.split(`
`),b=d.length-1,s=v.length-1;1<=b&&0<=s&&d[b]!==v[s];)s--;for(;1<=b&&0<=s;b--,s--)if(d[b]!==v[s]){if(b!==1||s!==1)do if(b--,s--,0>s||d[b]!==v[s])return`
`+d[b].replace(" at new "," at ");while(1<=b&&0<=s);break}}}finally{x_=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?gd(t):""}function nM(t){switch(t.tag){case 5:return gd(t.type);case 16:return gd("Lazy");case 13:return gd("Suspense");case 19:return gd("SuspenseList");case 0:case 2:case 15:return t=Hp(t.type,!1),t;case 11:return t=Hp(t.type.render,!1),t;case 22:return t=Hp(t.type._render,!1),t;case 1:return t=Hp(t.type,!0),t;default:return""}}function Su(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ws:return"Fragment";case jl:return"Portal";case bd:return"Profiler";case O0:return"StrictMode";case wd:return"Suspense";case km:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D0:return(t.displayName||"Context")+".Consumer";case L0:return(t._context.displayName||"Context")+".Provider";case yg:var n=t.render;return n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case _g:return Su(t.type);case B0:return Su(t._render);case R0:n=t._payload,t=t._init;try{return Su(t(n))}catch{}}return null}function Ns(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function TT(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rM(t){var n=TT(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,v=a.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return d.call(this)},set:function(b){u=""+b,v.call(this,b)}}),Object.defineProperty(t,n,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Xp(t){t._valueTracker||(t._valueTracker=rM(t))}function ET(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),u="";return t&&(u=TT(t)?t.checked?"true":"false":t.value),t=u,t!==a?(n.setValue(t),!0):!1}function Im(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function iv(t,n){var a=n.checked;return Gn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:t._wrapperState.initialChecked})}function Rw(t,n){var a=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;a=Ns(n.value!=null?n.value:a),t._wrapperState={initialChecked:u,initialValue:a,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function CT(t,n){n=n.checked,n!=null&&z0(t,"checked",n,!1)}function ov(t,n){CT(t,n);var a=Ns(n.value),u=n.type;if(a!=null)u==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?av(t,n.type,a):n.hasOwnProperty("defaultValue")&&av(t,n.type,Ns(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Bw(t,n,a){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,a||n===t.value||(t.value=n),t.defaultValue=n}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function av(t,n,a){(n!=="number"||Im(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}function iM(t){var n="";return gg.Children.forEach(t,function(a){a!=null&&(n+=a)}),n}function sv(t,n){return t=Gn({children:void 0},n),(n=iM(n.children))&&(t.children=n),t}function Tu(t,n,a,u){if(t=t.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=n.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&u&&(t[a].defaultSelected=!0)}else{for(a=""+Ns(a),n=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,u&&(t[d].defaultSelected=!0);return}n!==null||t[d].disabled||(n=t[d])}n!==null&&(n.selected=!0)}}function lv(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Gn({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fw(t,n){var a=n.value;if(a==null){if(a=n.children,n=n.defaultValue,a!=null){if(n!=null)throw Error(tt(92));if(Array.isArray(a)){if(!(1>=a.length))throw Error(tt(93));a=a[0]}n=a}n==null&&(n=""),a=n}t._wrapperState={initialValue:Ns(a)}}function kT(t,n){var a=Ns(n.value),u=Ns(n.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),n.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),u!=null&&(t.defaultValue=""+u)}function Nw(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}var cv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function IT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uv(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?IT(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yp,AT=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(n,a,u,d){MSApp.execUnsafeLocalFunction(function(){return t(n,a,u,d)})}:t}(function(t,n){if(t.namespaceURI!==cv.svg||"innerHTML"in t)t.innerHTML=n;else{for(Yp=Yp||document.createElement("div"),Yp.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Yp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function jd(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Sd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oM=["Webkit","ms","Moz","O"];Object.keys(Sd).forEach(function(t){oM.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Sd[n]=Sd[t]})});function PT(t,n,a){return n==null||typeof n=="boolean"||n===""?"":a||typeof n!="number"||n===0||Sd.hasOwnProperty(t)&&Sd[t]?(""+n).trim():n+"px"}function MT(t,n){t=t.style;for(var a in n)if(n.hasOwnProperty(a)){var u=a.indexOf("--")===0,d=PT(a,n[a],u);a==="float"&&(a="cssFloat"),u?t.setProperty(a,d):t[a]=d}}var aM=Gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hv(t,n){if(n){if(aM[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(tt(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(tt(60));if(!(typeof n.dangerouslySetInnerHTML=="object"&&"__html"in n.dangerouslySetInnerHTML))throw Error(tt(61))}if(n.style!=null&&typeof n.style!="object")throw Error(tt(62))}}function dv(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function j0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fv=null,Eu=null,Cu=null;function jw(t){if(t=lf(t)){if(typeof fv!="function")throw Error(tt(280));var n=t.stateNode;n&&(n=Tg(n),fv(t.stateNode,t.type,n))}}function zT(t){Eu?Cu?Cu.push(t):Cu=[t]:Eu=t}function OT(){if(Eu){var t=Eu,n=Cu;if(Cu=Eu=null,jw(t),n)for(t=0;t<n.length;t++)jw(n[t])}}function U0(t,n){return t(n)}function LT(t,n,a,u,d){return t(n,a,u,d)}function V0(){}var DT=U0,Ul=!1,b_=!1;function $0(){(Eu!==null||Cu!==null)&&(V0(),OT())}function sM(t,n,a){if(b_)return t(n,a);b_=!0;try{return DT(t,n,a)}finally{b_=!1,$0()}}function Ud(t,n){var a=t.stateNode;if(a===null)return null;var u=Tg(a);if(u===null)return null;a=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(tt(231,n,typeof a));return a}var pv=!1;if(Pa)try{var rd={};Object.defineProperty(rd,"passive",{get:function(){pv=!0}}),window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{pv=!1}function lM(t,n,a,u,d,v,b,s,I){var F=Array.prototype.slice.call(arguments,3);try{n.apply(a,F)}catch(W){this.onError(W)}}var Td=!1,Am=null,Pm=!1,mv=null,cM={onError:function(t){Td=!0,Am=t}};function uM(t,n,a,u,d,v,b,s,I){Td=!1,Am=null,lM.apply(cM,arguments)}function hM(t,n,a,u,d,v,b,s,I){if(uM.apply(this,arguments),Td){if(Td){var F=Am;Td=!1,Am=null}else throw Error(tt(198));Pm||(Pm=!0,mv=F)}}function rc(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&1026)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function RT(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Uw(t){if(rc(t)!==t)throw Error(tt(188))}function dM(t){var n=t.alternate;if(!n){if(n=rc(t),n===null)throw Error(tt(188));return n!==t?null:t}for(var a=t,u=n;;){var d=a.return;if(d===null)break;var v=d.alternate;if(v===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===v.child){for(v=d.child;v;){if(v===a)return Uw(d),t;if(v===u)return Uw(d),n;v=v.sibling}throw Error(tt(188))}if(a.return!==u.return)a=d,u=v;else{for(var b=!1,s=d.child;s;){if(s===a){b=!0,a=d,u=v;break}if(s===u){b=!0,u=d,a=v;break}s=s.sibling}if(!b){for(s=v.child;s;){if(s===a){b=!0,a=v,u=d;break}if(s===u){b=!0,u=v,a=d;break}s=s.sibling}if(!b)throw Error(tt(189))}}if(a.alternate!==u)throw Error(tt(190))}if(a.tag!==3)throw Error(tt(188));return a.stateNode.current===a?t:n}function BT(t){if(t=dM(t),!t)return null;for(var n=t;;){if(n.tag===5||n.tag===6)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===t)break;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function Vw(t,n){for(var a=t.alternate;n!==null;){if(n===t||n===a)return!0;n=n.return}return!1}var FT,G0,NT,jT,gv=!1,Qo=[],Ps=null,Ms=null,zs=null,Vd=new Map,$d=new Map,id=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yv(t,n,a,u,d){return{blockedOn:t,domEventName:n,eventSystemFlags:a|16,nativeEvent:d,targetContainers:[u]}}function Gw(t,n){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Vd.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(n.pointerId)}}function od(t,n,a,u,d,v){return t===null||t.nativeEvent!==v?(t=yv(n,a,u,d,v),n!==null&&(n=lf(n),n!==null&&G0(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),t)}function fM(t,n,a,u,d){switch(n){case"focusin":return Ps=od(Ps,t,n,a,u,d),!0;case"dragenter":return Ms=od(Ms,t,n,a,u,d),!0;case"mouseover":return zs=od(zs,t,n,a,u,d),!0;case"pointerover":var v=d.pointerId;return Vd.set(v,od(Vd.get(v)||null,t,n,a,u,d)),!0;case"gotpointercapture":return v=d.pointerId,$d.set(v,od($d.get(v)||null,t,n,a,u,d)),!0}return!1}function pM(t){var n=Vl(t.target);if(n!==null){var a=rc(n);if(a!==null){if(n=a.tag,n===13){if(n=RT(a),n!==null){t.blockedOn=n,jT(t.lanePriority,function(){Tr.unstable_runWithPriority(t.priority,function(){NT(a)})});return}}else if(n===3&&a.stateNode.hydrate){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cm(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=H0(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(a!==null)return n=lf(a),n!==null&&G0(n),t.blockedOn=a,!1;n.shift()}return!0}function qw(t,n,a){cm(t)&&a.delete(n)}function mM(){for(gv=!1;0<Qo.length;){var t=Qo[0];if(t.blockedOn!==null){t=lf(t.blockedOn),t!==null&&FT(t);break}for(var n=t.targetContainers;0<n.length;){var a=H0(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(a!==null){t.blockedOn=a;break}n.shift()}t.blockedOn===null&&Qo.shift()}Ps!==null&&cm(Ps)&&(Ps=null),Ms!==null&&cm(Ms)&&(Ms=null),zs!==null&&cm(zs)&&(zs=null),Vd.forEach(qw),$d.forEach(qw)}function ad(t,n){t.blockedOn===n&&(t.blockedOn=null,gv||(gv=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,mM)))}function UT(t){function n(d){return ad(d,t)}if(0<Qo.length){ad(Qo[0],t);for(var a=1;a<Qo.length;a++){var u=Qo[a];u.blockedOn===t&&(u.blockedOn=null)}}for(Ps!==null&&ad(Ps,t),Ms!==null&&ad(Ms,t),zs!==null&&ad(zs,t),Vd.forEach(n),$d.forEach(n),a=0;a<id.length;a++)u=id[a],u.blockedOn===t&&(u.blockedOn=null);for(;0<id.length&&(a=id[0],a.blockedOn===null);)pM(a),a.blockedOn===null&&id.shift()}function Kp(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var pu={animationend:Kp("Animation","AnimationEnd"),animationiteration:Kp("Animation","AnimationIteration"),animationstart:Kp("Animation","AnimationStart"),transitionend:Kp("Transition","TransitionEnd")},w_={},VT={};Pa&&(VT=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function vg(t){if(w_[t])return w_[t];if(!pu[t])return t;var n=pu[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in VT)return w_[t]=n[a];return t}var $T=vg("animationend"),GT=vg("animationiteration"),qT=vg("animationstart"),ZT=vg("transitionend"),WT=new Map,q0=new Map,gM=["abort","abort",$T,"animationEnd",GT,"animationIteration",qT,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ZT,"transitionEnd","waiting","waiting"];function Z0(t,n){for(var a=0;a<t.length;a+=2){var u=t[a],d=t[a+1];d="on"+(d[0].toUpperCase()+d.slice(1)),q0.set(u,n),WT.set(u,d),tc(d,[u])}}var yM=Tr.unstable_now;yM();var Ln=8;function du(t){if((1&t)!==0)return Ln=15,1;if((2&t)!==0)return Ln=14,2;if((4&t)!==0)return Ln=13,4;var n=24&t;return n!==0?(Ln=12,n):(t&32)!==0?(Ln=11,32):(n=192&t,n!==0?(Ln=10,n):(t&256)!==0?(Ln=9,256):(n=3584&t,n!==0?(Ln=8,n):(t&4096)!==0?(Ln=7,4096):(n=4186112&t,n!==0?(Ln=6,n):(n=62914560&t,n!==0?(Ln=5,n):t&67108864?(Ln=4,67108864):(t&134217728)!==0?(Ln=3,134217728):(n=805306368&t,n!==0?(Ln=2,n):(1073741824&t)!==0?(Ln=1,1073741824):(Ln=8,t))))))}function _M(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function vM(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(tt(358,t))}}function Gd(t,n){var a=t.pendingLanes;if(a===0)return Ln=0;var u=0,d=0,v=t.expiredLanes,b=t.suspendedLanes,s=t.pingedLanes;if(v!==0)u=v,d=Ln=15;else if(v=a&134217727,v!==0){var I=v&~b;I!==0?(u=du(I),d=Ln):(s&=v,s!==0&&(u=du(s),d=Ln))}else v=a&~b,v!==0?(u=du(v),d=Ln):s!==0&&(u=du(s),d=Ln);if(u===0)return 0;if(u=31-js(u),u=a&((0>u?0:1<<u)<<1)-1,n!==0&&n!==u&&(n&b)===0){if(du(n),d<=Ln)return n;Ln=d}if(n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=u;0<n;)a=31-js(n),d=1<<a,u|=t[a],n&=~d;return u}function HT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mm(t,n){switch(t){case 15:return 1;case 14:return 2;case 12:return t=fu(24&~n),t===0?Mm(10,n):t;case 10:return t=fu(192&~n),t===0?Mm(8,n):t;case 8:return t=fu(3584&~n),t===0&&(t=fu(4186112&~n),t===0&&(t=512)),t;case 2:return n=fu(805306368&~n),n===0&&(n=268435456),n}throw Error(tt(358,t))}function fu(t){return t&-t}function S_(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function xg(t,n,a){t.pendingLanes|=n;var u=n-1;t.suspendedLanes&=u,t.pingedLanes&=u,t=t.eventTimes,n=31-js(n),t[n]=a}var js=Math.clz32?Math.clz32:wM,xM=Math.log,bM=Math.LN2;function wM(t){return t===0?32:31-(xM(t)/bM|0)|0}var SM=Tr.unstable_UserBlockingPriority,TM=Tr.unstable_runWithPriority,um=!0;function EM(t,n,a,u){Ul||V0();var d=W0,v=Ul;Ul=!0;try{LT(d,t,n,a,u)}finally{(Ul=v)||$0()}}function CM(t,n,a,u){TM(SM,W0.bind(null,t,n,a,u))}function W0(t,n,a,u){if(um){var d;if((d=(n&4)===0)&&0<Qo.length&&-1<$w.indexOf(t))t=yv(null,t,n,a,u),Qo.push(t);else{var v=H0(t,n,a,u);if(v===null)d&&Gw(t,u);else{if(d){if(-1<$w.indexOf(t)){t=yv(v,t,n,a,u),Qo.push(t);return}if(fM(v,t,n,a,u))return;Gw(t,u)}sE(t,n,u,null,a)}}}}function H0(t,n,a,u){var d=j0(u);if(d=Vl(d),d!==null){var v=rc(d);if(v===null)d=null;else{var b=v.tag;if(b===13){if(d=RT(v),d!==null)return d;d=null}else if(b===3){if(v.stateNode.hydrate)return v.tag===3?v.stateNode.containerInfo:null;d=null}else v!==d&&(d=null)}}return sE(t,n,u,d,a),null}var Ss=null,X0=null,hm=null;function XT(){if(hm)return hm;var t,n=X0,a=n.length,u,d="value"in Ss?Ss.value:Ss.textContent,v=d.length;for(t=0;t<a&&n[t]===d[t];t++);var b=a-t;for(u=1;u<=b&&n[a-u]===d[v-u];u++);return hm=d.slice(t,1<u?1-u:void 0)}function dm(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Jp(){return!0}function Zw(){return!1}function Bi(t){function n(a,u,d,v,b){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=v,this.target=b,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(a=t[s],this[s]=a?a(v):v[s]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Jp:Zw,this.isPropagationStopped=Zw,this}return Gn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jp)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jp)},persist:function(){},isPersistent:Jp}),n}var Zu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Y0=Bi(Zu),sf=Gn({},Zu,{view:0,detail:0}),kM=Bi(sf),T_,E_,sd,bg=Gn({},sf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sd&&(sd&&t.type==="mousemove"?(T_=t.screenX-sd.screenX,E_=t.screenY-sd.screenY):E_=T_=0,sd=t),T_)},movementY:function(t){return"movementY"in t?t.movementY:E_}}),Ww=Bi(bg),IM=Gn({},bg,{dataTransfer:0}),AM=Bi(IM),PM=Gn({},sf,{relatedTarget:0}),C_=Bi(PM),MM=Gn({},Zu,{animationName:0,elapsedTime:0,pseudoElement:0}),zM=Bi(MM),OM=Gn({},Zu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LM=Bi(OM),DM=Gn({},Zu,{data:0}),Hw=Bi(DM),RM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NM(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=FM[t])?!!n[t]:!1}function K0(){return NM}var jM=Gn({},sf,{key:function(t){if(t.key){var n=RM[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=dm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K0,charCode:function(t){return t.type==="keypress"?dm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UM=Bi(jM),VM=Gn({},bg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xw=Bi(VM),$M=Gn({},sf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K0}),GM=Bi($M),qM=Gn({},Zu,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZM=Bi(qM),WM=Gn({},bg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HM=Bi(WM),XM=[9,13,27,32],J0=Pa&&"CompositionEvent"in window,Ed=null;Pa&&"documentMode"in document&&(Ed=document.documentMode);var YM=Pa&&"TextEvent"in window&&!Ed,YT=Pa&&(!J0||Ed&&8<Ed&&11>=Ed),Yw=String.fromCharCode(32),Kw=!1;function KT(t,n){switch(t){case"keyup":return XM.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mu=!1;function KM(t,n){switch(t){case"compositionend":return JT(n);case"keypress":return n.which!==32?null:(Kw=!0,Yw);case"textInput":return t=n.data,t===Yw&&Kw?null:t;default:return null}}function JM(t,n){if(mu)return t==="compositionend"||!J0&&KT(t,n)?(t=XT(),hm=X0=Ss=null,mu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return YT&&n.locale!=="ko"?null:n.data;default:return null}}var QM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jw(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!QM[t.type]:n==="textarea"}function QT(t,n,a,u){zT(u),n=zm(n,"onChange"),0<n.length&&(a=new Y0("onChange","change",null,a,u),t.push({event:a,listeners:n}))}var Cd=null,qd=null;function ez(t){iE(t,0)}function wg(t){var n=yu(t);if(ET(n))return t}function tz(t,n){if(t==="change")return n}var eE=!1;if(Pa){var k_;if(Pa){var I_="oninput"in document;if(!I_){var Qw=document.createElement("div");Qw.setAttribute("oninput","return;"),I_=typeof Qw.oninput=="function"}k_=I_}else k_=!1;eE=k_&&(!document.documentMode||9<document.documentMode)}function e2(){Cd&&(Cd.detachEvent("onpropertychange",tE),qd=Cd=null)}function tE(t){if(t.propertyName==="value"&&wg(qd)){var n=[];if(QT(n,qd,t,j0(t)),t=ez,Ul)t(n);else{Ul=!0;try{U0(t,n)}finally{Ul=!1,$0()}}}}function nz(t,n,a){t==="focusin"?(e2(),Cd=n,qd=a,Cd.attachEvent("onpropertychange",tE)):t==="focusout"&&e2()}function rz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wg(qd)}function iz(t,n){if(t==="click")return wg(n)}function oz(t,n){if(t==="input"||t==="change")return wg(n)}function az(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Yi=typeof Object.is=="function"?Object.is:az,sz=Object.prototype.hasOwnProperty;function Zd(t,n){if(Yi(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),u=Object.keys(n);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++)if(!sz.call(n,a[u])||!Yi(t[a[u]],n[a[u]]))return!1;return!0}function t2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n2(t,n){var a=t2(t);t=0;for(var u;a;){if(a.nodeType===3){if(u=t+a.textContent.length,t<=n&&u>=n)return{node:a,offset:n-t};t=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=t2(a)}}function nE(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?nE(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function r2(){for(var t=window,n=Im();n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Im(t.document)}return n}function _v(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var lz=Pa&&"documentMode"in document&&11>=document.documentMode,gu=null,vv=null,kd=null,xv=!1;function i2(t,n,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xv||gu==null||gu!==Im(u)||(u=gu,"selectionStart"in u&&_v(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kd&&Zd(kd,u)||(kd=u,u=zm(vv,"onSelect"),0<u.length&&(n=new Y0("onSelect","select",null,n,a),t.push({event:n,listeners:u}),n.target=gu)))}Z0("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Z0("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Z0(gM,2);for(var o2="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),A_=0;A_<o2.length;A_++)q0.set(o2[A_],0);Bu("onMouseEnter",["mouseout","mouseover"]);Bu("onMouseLeave",["mouseout","mouseover"]);Bu("onPointerEnter",["pointerout","pointerover"]);Bu("onPointerLeave",["pointerout","pointerover"]);tc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tc("onBeforeInput",["compositionend","keypress","textInput","paste"]);tc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rE=new Set("cancel close invalid load scroll toggle".split(" ").concat(yd));function a2(t,n,a){var u=t.type||"unknown-event";t.currentTarget=a,hM(u,n,void 0,t),t.currentTarget=null}function iE(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var u=t[a],d=u.event;u=u.listeners;e:{var v=void 0;if(n)for(var b=u.length-1;0<=b;b--){var s=u[b],I=s.instance,F=s.currentTarget;if(s=s.listener,I!==v&&d.isPropagationStopped())break e;a2(d,s,F),v=I}else for(b=0;b<u.length;b++){if(s=u[b],I=s.instance,F=s.currentTarget,s=s.listener,I!==v&&d.isPropagationStopped())break e;a2(d,s,F),v=I}}}if(Pm)throw t=mv,Pm=!1,mv=null,t}function Fn(t,n){var a=cE(n),u=t+"__bubble";a.has(u)||(aE(n,t,2,!1),a.add(u))}var s2="_reactListening"+Math.random().toString(36).slice(2);function oE(t){t[s2]||(t[s2]=!0,wT.forEach(function(n){rE.has(n)||l2(n,!1,t,null),l2(n,!0,t,null)}))}function l2(t,n,a,u){var d=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,v=a;if(t==="selectionchange"&&a.nodeType!==9&&(v=a.ownerDocument),u!==null&&!n&&rE.has(t)){if(t!=="scroll")return;d|=2,v=u}var b=cE(v),s=t+"__"+(n?"capture":"bubble");b.has(s)||(n&&(d|=4),aE(v,t,d,n),b.add(s))}function aE(t,n,a,u){var d=q0.get(n);switch(d===void 0?2:d){case 0:d=EM;break;case 1:d=CM;break;default:d=W0}a=d.bind(null,n,a,t),d=void 0,!pv||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),u?d!==void 0?t.addEventListener(n,a,{capture:!0,passive:d}):t.addEventListener(n,a,!0):d!==void 0?t.addEventListener(n,a,{passive:d}):t.addEventListener(n,a,!1)}function sE(t,n,a,u,d){var v=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var s=u.stateNode.containerInfo;if(s===d||s.nodeType===8&&s.parentNode===d)break;if(b===4)for(b=u.return;b!==null;){var I=b.tag;if((I===3||I===4)&&(I=b.stateNode.containerInfo,I===d||I.nodeType===8&&I.parentNode===d))return;b=b.return}for(;s!==null;){if(b=Vl(s),b===null)return;if(I=b.tag,I===5||I===6){u=v=b;continue e}s=s.parentNode}}u=u.return}sM(function(){var F=v,W=j0(a),j=[];e:{var Y=WT.get(t);if(Y!==void 0){var H=Y0,be=t;switch(t){case"keypress":if(dm(a)===0)break e;case"keydown":case"keyup":H=UM;break;case"focusin":be="focus",H=C_;break;case"focusout":be="blur",H=C_;break;case"beforeblur":case"afterblur":H=C_;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=AM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=GM;break;case $T:case GT:case qT:H=zM;break;case ZT:H=ZM;break;case"scroll":H=kM;break;case"wheel":H=HM;break;case"copy":case"cut":case"paste":H=LM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Xw}var ge=(n&4)!==0,Q=!ge&&t==="scroll",V=ge?Y!==null?Y+"Capture":null:Y;ge=[];for(var J=F,he;J!==null;){he=J;var pe=he.stateNode;if(he.tag===5&&pe!==null&&(he=pe,V!==null&&(pe=Ud(J,V),pe!=null&&ge.push(Wd(J,pe,he)))),Q)break;J=J.return}0<ge.length&&(Y=new H(Y,be,null,a,W),j.push({event:Y,listeners:ge}))}}if((n&7)===0){e:{if(Y=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",Y&&(n&16)===0&&(be=a.relatedTarget||a.fromElement)&&(Vl(be)||be[Wu]))break e;if((H||Y)&&(Y=W.window===W?W:(Y=W.ownerDocument)?Y.defaultView||Y.parentWindow:window,H?(be=a.relatedTarget||a.toElement,H=F,be=be?Vl(be):null,be!==null&&(Q=rc(be),be!==Q||be.tag!==5&&be.tag!==6)&&(be=null)):(H=null,be=F),H!==be)){if(ge=Ww,pe="onMouseLeave",V="onMouseEnter",J="mouse",(t==="pointerout"||t==="pointerover")&&(ge=Xw,pe="onPointerLeave",V="onPointerEnter",J="pointer"),Q=H==null?Y:yu(H),he=be==null?Y:yu(be),Y=new ge(pe,J+"leave",H,a,W),Y.target=Q,Y.relatedTarget=he,pe=null,Vl(W)===F&&(ge=new ge(V,J+"enter",be,a,W),ge.target=he,ge.relatedTarget=Q,pe=ge),Q=pe,H&&be)t:{for(ge=H,V=be,J=0,he=ge;he;he=hu(he))J++;for(he=0,pe=V;pe;pe=hu(pe))he++;for(;0<J-he;)ge=hu(ge),J--;for(;0<he-J;)V=hu(V),he--;for(;J--;){if(ge===V||V!==null&&ge===V.alternate)break t;ge=hu(ge),V=hu(V)}ge=null}else ge=null;H!==null&&c2(j,Y,H,ge,!1),be!==null&&Q!==null&&c2(j,Q,be,ge,!0)}}e:{if(Y=F?yu(F):window,H=Y.nodeName&&Y.nodeName.toLowerCase(),H==="select"||H==="input"&&Y.type==="file")var ze=tz;else if(Jw(Y))if(eE)ze=oz;else{ze=rz;var Ee=nz}else(H=Y.nodeName)&&H.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(ze=iz);if(ze&&(ze=ze(t,F))){QT(j,ze,a,W);break e}Ee&&Ee(t,Y,F),t==="focusout"&&(Ee=Y._wrapperState)&&Ee.controlled&&Y.type==="number"&&av(Y,"number",Y.value)}switch(Ee=F?yu(F):window,t){case"focusin":(Jw(Ee)||Ee.contentEditable==="true")&&(gu=Ee,vv=F,kd=null);break;case"focusout":kd=vv=gu=null;break;case"mousedown":xv=!0;break;case"contextmenu":case"mouseup":case"dragend":xv=!1,i2(j,a,W);break;case"selectionchange":if(lz)break;case"keydown":case"keyup":i2(j,a,W)}var We;if(J0)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else mu?KT(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(YT&&a.locale!=="ko"&&(mu||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&mu&&(We=XT()):(Ss=W,X0="value"in Ss?Ss.value:Ss.textContent,mu=!0)),Ee=zm(F,Be),0<Ee.length&&(Be=new Hw(Be,t,null,a,W),j.push({event:Be,listeners:Ee}),We?Be.data=We:(We=JT(a),We!==null&&(Be.data=We)))),(We=YM?KM(t,a):JM(t,a))&&(F=zm(F,"onBeforeInput"),0<F.length&&(W=new Hw("onBeforeInput","beforeinput",null,a,W),j.push({event:W,listeners:F}),W.data=We))}iE(j,n)})}function Wd(t,n,a){return{instance:t,listener:n,currentTarget:a}}function zm(t,n){for(var a=n+"Capture",u=[];t!==null;){var d=t,v=d.stateNode;d.tag===5&&v!==null&&(d=v,v=Ud(t,a),v!=null&&u.unshift(Wd(t,v,d)),v=Ud(t,n),v!=null&&u.push(Wd(t,v,d))),t=t.return}return u}function hu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c2(t,n,a,u,d){for(var v=n._reactName,b=[];a!==null&&a!==u;){var s=a,I=s.alternate,F=s.stateNode;if(I!==null&&I===u)break;s.tag===5&&F!==null&&(s=F,d?(I=Ud(a,v),I!=null&&b.unshift(Wd(a,I,s))):d||(I=Ud(a,v),I!=null&&b.push(Wd(a,I,s)))),a=a.return}b.length!==0&&t.push({event:n,listeners:b})}function Om(){}var P_=null,M_=null;function lE(t,n){switch(t){case"button":case"input":case"select":case"textarea":return!!n.autoFocus}return!1}function bv(t,n){return t==="textarea"||t==="option"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var u2=typeof setTimeout=="function"?setTimeout:void 0,cz=typeof clearTimeout=="function"?clearTimeout:void 0;function Q0(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function ku(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break}return t}function h2(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return t;n--}else a==="/$"&&n++}t=t.previousSibling}return null}var z_=0;function uz(t){return{$$typeof:F0,toString:t,valueOf:t}}var Sg=Math.random().toString(36).slice(2),Ts="__reactFiber$"+Sg,Lm="__reactProps$"+Sg,Wu="__reactContainer$"+Sg,d2="__reactEvents$"+Sg;function Vl(t){var n=t[Ts];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Wu]||a[Ts]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=h2(t);t!==null;){if(a=t[Ts])return a;t=h2(t)}return n}t=a,a=t.parentNode}return null}function lf(t){return t=t[Ts]||t[Wu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(tt(33))}function Tg(t){return t[Lm]||null}function cE(t){var n=t[d2];return n===void 0&&(n=t[d2]=new Set),n}var wv=[],_u=-1;function Ws(t){return{current:t}}function Nn(t){0>_u||(t.current=wv[_u],wv[_u]=null,_u--)}function rr(t,n){_u++,wv[_u]=t.current,t.current=n}var Us={},qr=Ws(Us),bi=Ws(!1),Hl=Us;function Fu(t,n){var a=t.type.contextTypes;if(!a)return Us;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var d={},v;for(v in a)d[v]=n[v];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=d),d}function wi(t){return t=t.childContextTypes,t!=null}function Dm(){Nn(bi),Nn(qr)}function f2(t,n,a){if(qr.current!==Us)throw Error(tt(168));rr(qr,n),rr(bi,a)}function uE(t,n,a){var u=t.stateNode;if(t=n.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var d in u)if(!(d in t))throw Error(tt(108,Su(n)||"Unknown",d));return Gn({},a,u)}function fm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Us,Hl=qr.current,rr(qr,t),rr(bi,bi.current),!0}function p2(t,n,a){var u=t.stateNode;if(!u)throw Error(tt(169));a?(t=uE(t,n,Hl),u.__reactInternalMemoizedMergedChildContext=t,Nn(bi),Nn(qr),rr(qr,t)):Nn(bi),rr(bi,a)}var e1=null,Zl=null,hz=Tr.unstable_runWithPriority,t1=Tr.unstable_scheduleCallback,Sv=Tr.unstable_cancelCallback,dz=Tr.unstable_shouldYield,m2=Tr.unstable_requestPaint,Tv=Tr.unstable_now,fz=Tr.unstable_getCurrentPriorityLevel,Eg=Tr.unstable_ImmediatePriority,hE=Tr.unstable_UserBlockingPriority,dE=Tr.unstable_NormalPriority,fE=Tr.unstable_LowPriority,pE=Tr.unstable_IdlePriority,O_={},pz=m2!==void 0?m2:function(){},Ta=null,pm=null,L_=!1,g2=Tv(),Ur=1e4>g2?Tv:function(){return Tv()-g2};function Nu(){switch(fz()){case Eg:return 99;case hE:return 98;case dE:return 97;case fE:return 96;case pE:return 95;default:throw Error(tt(332))}}function mE(t){switch(t){case 99:return Eg;case 98:return hE;case 97:return dE;case 96:return fE;case 95:return pE;default:throw Error(tt(332))}}function Xl(t,n){return t=mE(t),hz(t,n)}function Hd(t,n,a){return t=mE(t),t1(t,n,a)}function sa(){if(pm!==null){var t=pm;pm=null,Sv(t)}gE()}function gE(){if(!L_&&Ta!==null){L_=!0;var t=0;try{var n=Ta;Xl(99,function(){for(;t<n.length;t++){var a=n[t];do a=a(!0);while(a!==null)}}),Ta=null}catch(a){throw Ta!==null&&(Ta=Ta.slice(t+1)),t1(Eg,sa),a}finally{L_=!1}}}var mz=nc.ReactCurrentBatchConfig;function xo(t,n){if(t&&t.defaultProps){n=Gn({},n),t=t.defaultProps;for(var a in t)n[a]===void 0&&(n[a]=t[a]);return n}return n}var Rm=Ws(null),Bm=null,vu=null,Fm=null;function n1(){Fm=vu=Bm=null}function r1(t){var n=Rm.current;Nn(Rm),t.type._context._currentValue=n}function yE(t,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&n)===n){if(a===null||(a.childLanes&n)===n)break;a.childLanes|=n}else t.childLanes|=n,a!==null&&(a.childLanes|=n);t=t.return}}function Iu(t,n){Bm=t,Fm=vu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(bo=!0),t.firstContext=null)}function Qi(t,n){if(Fm!==t&&n!==!1&&n!==0)if((typeof n!="number"||n===1073741823)&&(Fm=t,n=1073741823),n={context:t,observedBits:n,next:null},vu===null){if(Bm===null)throw Error(tt(308));vu=n,Bm.dependencies={lanes:0,firstContext:n,responders:null}}else vu=vu.next=n;return t._currentValue}var xs=!1;function i1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function _E(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Os(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Ls(t,n){if(t=t.updateQueue,t!==null){t=t.shared;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}}function y2(t,n){var a=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var b={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?d=v=b:v=v.next=b,a=a.next}while(a!==null);v===null?d=v=n:v=v.next=n}else d=v=n;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:v,shared:u.shared,effects:u.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}function Xd(t,n,a,u){var d=t.updateQueue;xs=!1;var v=d.firstBaseUpdate,b=d.lastBaseUpdate,s=d.shared.pending;if(s!==null){d.shared.pending=null;var I=s,F=I.next;I.next=null,b===null?v=F:b.next=F,b=I;var W=t.alternate;if(W!==null){W=W.updateQueue;var j=W.lastBaseUpdate;j!==b&&(j===null?W.firstBaseUpdate=F:j.next=F,W.lastBaseUpdate=I)}}if(v!==null){j=d.baseState,b=0,W=F=I=null;do{s=v.lane;var Y=v.eventTime;if((u&s)===s){W!==null&&(W=W.next={eventTime:Y,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var H=t,be=v;switch(s=n,Y=a,be.tag){case 1:if(H=be.payload,typeof H=="function"){j=H.call(Y,j,s);break e}j=H;break e;case 3:H.flags=H.flags&-4097|64;case 0:if(H=be.payload,s=typeof H=="function"?H.call(Y,j,s):H,s==null)break e;j=Gn({},j,s);break e;case 2:xs=!0}}v.callback!==null&&(t.flags|=32,s=d.effects,s===null?d.effects=[v]:s.push(v))}else Y={eventTime:Y,lane:s,tag:v.tag,payload:v.payload,callback:v.callback,next:null},W===null?(F=W=Y,I=j):W=W.next=Y,b|=s;if(v=v.next,v===null){if(s=d.shared.pending,s===null)break;v=s.next,s.next=null,d.lastBaseUpdate=s,d.shared.pending=null}}while(1);W===null&&(I=j),d.baseState=I,d.firstBaseUpdate=F,d.lastBaseUpdate=W,uf|=b,t.lanes=b,t.memoizedState=j}}function _2(t,n,a){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var u=t[n],d=u.callback;if(d!==null){if(u.callback=null,u=a,typeof d!="function")throw Error(tt(191,d));d.call(u)}}}var vE=new gg.Component().refs;function Nm(t,n,a,u){n=t.memoizedState,a=a(u,n),a=a==null?n:Gn({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Cg={isMounted:function(t){return(t=t._reactInternals)?rc(t)===t:!1},enqueueSetState:function(t,n,a){t=t._reactInternals;var u=Li(),d=Ds(t),v=Os(u,d);v.payload=n,a!=null&&(v.callback=a),Ls(t,v),Rs(t,d,u)},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var u=Li(),d=Ds(t),v=Os(u,d);v.tag=1,v.payload=n,a!=null&&(v.callback=a),Ls(t,v),Rs(t,d,u)},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Li(),u=Ds(t),d=Os(a,u);d.tag=2,n!=null&&(d.callback=n),Ls(t,d),Rs(t,u,a)}};function v2(t,n,a,u,d,v,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,v,b):n.prototype&&n.prototype.isPureReactComponent?!Zd(a,u)||!Zd(d,v):!0}function xE(t,n,a){var u=!1,d=Us,v=n.contextType;return typeof v=="object"&&v!==null?v=Qi(v):(d=wi(n)?Hl:qr.current,u=n.contextTypes,v=(u=u!=null)?Fu(t,d):Us),n=new n(a,v),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Cg,t.stateNode=n,n._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=v),n}function x2(t,n,a,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,u),n.state!==t&&Cg.enqueueReplaceState(n,n.state,null)}function Ev(t,n,a,u){var d=t.stateNode;d.props=a,d.state=t.memoizedState,d.refs=vE,i1(t);var v=n.contextType;typeof v=="object"&&v!==null?d.context=Qi(v):(v=wi(n)?Hl:qr.current,d.context=Fu(t,v)),Xd(t,a,d,u),d.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(Nm(t,n,v,a),d.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(n=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),n!==d.state&&Cg.enqueueReplaceState(d,d.state,null),Xd(t,a,d,u),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4)}var Qp=Array.isArray;function ld(t,n,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(tt(309));var u=a.stateNode}if(!u)throw Error(tt(147,t));var d=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===d?n.ref:(n=function(v){var b=u.refs;b===vE&&(b=u.refs={}),v===null?delete b[d]:b[d]=v},n._stringRef=d,n)}if(typeof t!="string")throw Error(tt(284));if(!a._owner)throw Error(tt(290,t))}return t}function em(t,n){if(t.type!=="textarea")throw Error(tt(31,Object.prototype.toString.call(n)==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":n))}function bE(t){function n(Q,V){if(t){var J=Q.lastEffect;J!==null?(J.nextEffect=V,Q.lastEffect=V):Q.firstEffect=Q.lastEffect=V,V.nextEffect=null,V.flags=8}}function a(Q,V){if(!t)return null;for(;V!==null;)n(Q,V),V=V.sibling;return null}function u(Q,V){for(Q=new Map;V!==null;)V.key!==null?Q.set(V.key,V):Q.set(V.index,V),V=V.sibling;return Q}function d(Q,V){return Q=$s(Q,V),Q.index=0,Q.sibling=null,Q}function v(Q,V,J){return Q.index=J,t?(J=Q.alternate,J!==null?(J=J.index,J<V?(Q.flags=2,V):J):(Q.flags=2,V)):V}function b(Q){return t&&Q.alternate===null&&(Q.flags=2),Q}function s(Q,V,J,he){return V===null||V.tag!==6?(V=N_(J,Q.mode,he),V.return=Q,V):(V=d(V,J),V.return=Q,V)}function I(Q,V,J,he){return V!==null&&V.elementType===J.type?(he=d(V,J.props),he.ref=ld(Q,V,J),he.return=Q,he):(he=_m(J.type,J.key,J.props,null,Q.mode,he),he.ref=ld(Q,V,J),he.return=Q,he)}function F(Q,V,J,he){return V===null||V.tag!==4||V.stateNode.containerInfo!==J.containerInfo||V.stateNode.implementation!==J.implementation?(V=j_(J,Q.mode,he),V.return=Q,V):(V=d(V,J.children||[]),V.return=Q,V)}function W(Q,V,J,he,pe){return V===null||V.tag!==7?(V=zu(J,Q.mode,he,pe),V.return=Q,V):(V=d(V,J),V.return=Q,V)}function j(Q,V,J){if(typeof V=="string"||typeof V=="number")return V=N_(""+V,Q.mode,J),V.return=Q,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case md:return J=_m(V.type,V.key,V.props,null,Q.mode,J),J.ref=ld(Q,null,V),J.return=Q,J;case jl:return V=j_(V,Q.mode,J),V.return=Q,V}if(Qp(V)||nd(V))return V=zu(V,Q.mode,J,null),V.return=Q,V;em(Q,V)}return null}function Y(Q,V,J,he){var pe=V!==null?V.key:null;if(typeof J=="string"||typeof J=="number")return pe!==null?null:s(Q,V,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case md:return J.key===pe?J.type===ws?W(Q,V,J.props.children,he,pe):I(Q,V,J,he):null;case jl:return J.key===pe?F(Q,V,J,he):null}if(Qp(J)||nd(J))return pe!==null?null:W(Q,V,J,he,null);em(Q,J)}return null}function H(Q,V,J,he,pe){if(typeof he=="string"||typeof he=="number")return Q=Q.get(J)||null,s(V,Q,""+he,pe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case md:return Q=Q.get(he.key===null?J:he.key)||null,he.type===ws?W(V,Q,he.props.children,pe,he.key):I(V,Q,he,pe);case jl:return Q=Q.get(he.key===null?J:he.key)||null,F(V,Q,he,pe)}if(Qp(he)||nd(he))return Q=Q.get(J)||null,W(V,Q,he,pe,null);em(V,he)}return null}function be(Q,V,J,he){for(var pe=null,ze=null,Ee=V,We=V=0,Be=null;Ee!==null&&We<J.length;We++){Ee.index>We?(Be=Ee,Ee=null):Be=Ee.sibling;var Oe=Y(Q,Ee,J[We],he);if(Oe===null){Ee===null&&(Ee=Be);break}t&&Ee&&Oe.alternate===null&&n(Q,Ee),V=v(Oe,V,We),ze===null?pe=Oe:ze.sibling=Oe,ze=Oe,Ee=Be}if(We===J.length)return a(Q,Ee),pe;if(Ee===null){for(;We<J.length;We++)Ee=j(Q,J[We],he),Ee!==null&&(V=v(Ee,V,We),ze===null?pe=Ee:ze.sibling=Ee,ze=Ee);return pe}for(Ee=u(Q,Ee);We<J.length;We++)Be=H(Ee,Q,We,J[We],he),Be!==null&&(t&&Be.alternate!==null&&Ee.delete(Be.key===null?We:Be.key),V=v(Be,V,We),ze===null?pe=Be:ze.sibling=Be,ze=Be);return t&&Ee.forEach(function(it){return n(Q,it)}),pe}function ge(Q,V,J,he){var pe=nd(J);if(typeof pe!="function")throw Error(tt(150));if(J=pe.call(J),J==null)throw Error(tt(151));for(var ze=pe=null,Ee=V,We=V=0,Be=null,Oe=J.next();Ee!==null&&!Oe.done;We++,Oe=J.next()){Ee.index>We?(Be=Ee,Ee=null):Be=Ee.sibling;var it=Y(Q,Ee,Oe.value,he);if(it===null){Ee===null&&(Ee=Be);break}t&&Ee&&it.alternate===null&&n(Q,Ee),V=v(it,V,We),ze===null?pe=it:ze.sibling=it,ze=it,Ee=Be}if(Oe.done)return a(Q,Ee),pe;if(Ee===null){for(;!Oe.done;We++,Oe=J.next())Oe=j(Q,Oe.value,he),Oe!==null&&(V=v(Oe,V,We),ze===null?pe=Oe:ze.sibling=Oe,ze=Oe);return pe}for(Ee=u(Q,Ee);!Oe.done;We++,Oe=J.next())Oe=H(Ee,Q,We,Oe.value,he),Oe!==null&&(t&&Oe.alternate!==null&&Ee.delete(Oe.key===null?We:Oe.key),V=v(Oe,V,We),ze===null?pe=Oe:ze.sibling=Oe,ze=Oe);return t&&Ee.forEach(function(St){return n(Q,St)}),pe}return function(Q,V,J,he){var pe=typeof J=="object"&&J!==null&&J.type===ws&&J.key===null;pe&&(J=J.props.children);var ze=typeof J=="object"&&J!==null;if(ze)switch(J.$$typeof){case md:e:{for(ze=J.key,pe=V;pe!==null;){if(pe.key===ze){switch(pe.tag){case 7:if(J.type===ws){a(Q,pe.sibling),V=d(pe,J.props.children),V.return=Q,Q=V;break e}break;default:if(pe.elementType===J.type){a(Q,pe.sibling),V=d(pe,J.props),V.ref=ld(Q,pe,J),V.return=Q,Q=V;break e}}a(Q,pe);break}else n(Q,pe);pe=pe.sibling}J.type===ws?(V=zu(J.props.children,Q.mode,he,J.key),V.return=Q,Q=V):(he=_m(J.type,J.key,J.props,null,Q.mode,he),he.ref=ld(Q,V,J),he.return=Q,Q=he)}return b(Q);case jl:e:{for(pe=J.key;V!==null;){if(V.key===pe)if(V.tag===4&&V.stateNode.containerInfo===J.containerInfo&&V.stateNode.implementation===J.implementation){a(Q,V.sibling),V=d(V,J.children||[]),V.return=Q,Q=V;break e}else{a(Q,V);break}else n(Q,V);V=V.sibling}V=j_(J,Q.mode,he),V.return=Q,Q=V}return b(Q)}if(typeof J=="string"||typeof J=="number")return J=""+J,V!==null&&V.tag===6?(a(Q,V.sibling),V=d(V,J),V.return=Q,Q=V):(a(Q,V),V=N_(J,Q.mode,he),V.return=Q,Q=V),b(Q);if(Qp(J))return be(Q,V,J,he);if(nd(J))return ge(Q,V,J,he);if(ze&&em(Q,J),typeof J=="undefined"&&!pe)switch(Q.tag){case 1:case 22:case 0:case 11:case 15:throw Error(tt(152,Su(Q.type)||"Component"))}return a(Q,V)}}var jm=bE(!0),wE=bE(!1),cf={},ra=Ws(cf),Yd=Ws(cf),Kd=Ws(cf);function $l(t){if(t===cf)throw Error(tt(174));return t}function Cv(t,n){switch(rr(Kd,n),rr(Yd,t),rr(ra,cf),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:uv(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=uv(n,t)}Nn(ra),rr(ra,n)}function ju(){Nn(ra),Nn(Yd),Nn(Kd)}function b2(t){$l(Kd.current);var n=$l(ra.current),a=uv(n,t.type);n!==a&&(rr(Yd,t),rr(ra,a))}function o1(t){Yd.current===t&&(Nn(ra),Nn(Yd))}var nr=Ws(0);function Um(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&64)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ca=null,Es=null,ia=!1;function SE(t,n){var a=Ki(5,null,null,0);a.elementType="DELETED",a.type="DELETED",a.stateNode=n,a.return=t,a.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=a,t.lastEffect=a):t.firstEffect=t.lastEffect=a}function w2(t,n){switch(t.tag){case 5:var a=t.type;return n=n.nodeType!==1||a.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,!0):!1;case 13:return!1;default:return!1}}function kv(t){if(ia){var n=Es;if(n){var a=n;if(!w2(t,n)){if(n=ku(a.nextSibling),!n||!w2(t,n)){t.flags=t.flags&-1025|2,ia=!1,Ca=t;return}SE(Ca,a)}Ca=t,Es=ku(n.firstChild)}else t.flags=t.flags&-1025|2,ia=!1,Ca=t}}function S2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ca=t}function tm(t){if(t!==Ca)return!1;if(!ia)return S2(t),ia=!0,!1;var n=t.type;if(t.tag!==5||n!=="head"&&n!=="body"&&!bv(n,t.memoizedProps))for(n=Es;n;)SE(t,n),n=ku(n.nextSibling);if(S2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(tt(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(n===0){Es=ku(t.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++}t=t.nextSibling}Es=null}}else Es=Ca?ku(t.stateNode.nextSibling):null;return!0}function D_(){Es=Ca=null,ia=!1}var Au=[];function a1(){for(var t=0;t<Au.length;t++)Au[t]._workInProgressVersionPrimary=null;Au.length=0}var Id=nc.ReactCurrentDispatcher,Ji=nc.ReactCurrentBatchConfig,Jd=0,or=null,jr=null,Pr=null,Vm=!1,Ad=!1;function yi(){throw Error(tt(321))}function s1(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Yi(t[a],n[a]))return!1;return!0}function l1(t,n,a,u,d,v){if(Jd=v,or=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Id.current=t===null||t.memoizedState===null?yz:_z,t=a(u,d),Ad){v=0;do{if(Ad=!1,!(25>v))throw Error(tt(301));v+=1,Pr=jr=null,n.updateQueue=null,Id.current=vz,t=a(u,d)}while(Ad)}if(Id.current=Zm,n=jr!==null&&jr.next!==null,Jd=0,Pr=jr=or=null,Vm=!1,n)throw Error(tt(300));return t}function Gl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?or.memoizedState=Pr=t:Pr=Pr.next=t,Pr}function ic(){if(jr===null){var t=or.alternate;t=t!==null?t.memoizedState:null}else t=jr.next;var n=Pr===null?or.memoizedState:Pr.next;if(n!==null)Pr=n,jr=t;else{if(t===null)throw Error(tt(310));jr=t,t={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Pr===null?or.memoizedState=Pr=t:Pr=Pr.next=t}return Pr}function ea(t,n){return typeof n=="function"?n(t):n}function cd(t){var n=ic(),a=n.queue;if(a===null)throw Error(tt(311));a.lastRenderedReducer=t;var u=jr,d=u.baseQueue,v=a.pending;if(v!==null){if(d!==null){var b=d.next;d.next=v.next,v.next=b}u.baseQueue=d=v,a.pending=null}if(d!==null){d=d.next,u=u.baseState;var s=b=v=null,I=d;do{var F=I.lane;if((Jd&F)===F)s!==null&&(s=s.next={lane:0,action:I.action,eagerReducer:I.eagerReducer,eagerState:I.eagerState,next:null}),u=I.eagerReducer===t?I.eagerState:t(u,I.action);else{var W={lane:F,action:I.action,eagerReducer:I.eagerReducer,eagerState:I.eagerState,next:null};s===null?(b=s=W,v=u):s=s.next=W,or.lanes|=F,uf|=F}I=I.next}while(I!==null&&I!==d);s===null?v=u:s.next=b,Yi(u,n.memoizedState)||(bo=!0),n.memoizedState=u,n.baseState=v,n.baseQueue=s,a.lastRenderedState=u}return[n.memoizedState,a.dispatch]}function ud(t){var n=ic(),a=n.queue;if(a===null)throw Error(tt(311));a.lastRenderedReducer=t;var u=a.dispatch,d=a.pending,v=n.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do v=t(v,b.action),b=b.next;while(b!==d);Yi(v,n.memoizedState)||(bo=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),a.lastRenderedState=v}return[v,u]}function T2(t,n,a){var u=n._getVersion;u=u(n._source);var d=n._workInProgressVersionPrimary;if(d!==null?t=d===u:(t=t.mutableReadLanes,(t=(Jd&t)===t)&&(n._workInProgressVersionPrimary=u,Au.push(n))),t)return a(n._source);throw Au.push(n),Error(tt(350))}function TE(t,n,a,u){var d=ri;if(d===null)throw Error(tt(349));var v=n._getVersion,b=v(n._source),s=Id.current,I=s.useState(function(){return T2(d,n,a)}),F=I[1],W=I[0];I=Pr;var j=t.memoizedState,Y=j.refs,H=Y.getSnapshot,be=j.source;j=j.subscribe;var ge=or;return t.memoizedState={refs:Y,source:n,subscribe:u},s.useEffect(function(){Y.getSnapshot=a,Y.setSnapshot=F;var Q=v(n._source);if(!Yi(b,Q)){Q=a(n._source),Yi(W,Q)||(F(Q),Q=Ds(ge),d.mutableReadLanes|=Q&d.pendingLanes),Q=d.mutableReadLanes,d.entangledLanes|=Q;for(var V=d.entanglements,J=Q;0<J;){var he=31-js(J),pe=1<<he;V[he]|=Q,J&=~pe}}},[a,n,u]),s.useEffect(function(){return u(n._source,function(){var Q=Y.getSnapshot,V=Y.setSnapshot;try{V(Q(n._source));var J=Ds(ge);d.mutableReadLanes|=J&d.pendingLanes}catch(he){V(function(){throw he})}})},[n,u]),Yi(H,a)&&Yi(be,n)&&Yi(j,u)||(t={pending:null,dispatch:null,lastRenderedReducer:ea,lastRenderedState:W},t.dispatch=F=h1.bind(null,or,t),I.queue=t,I.baseQueue=null,W=T2(d,n,a),I.memoizedState=I.baseState=W),W}function EE(t,n,a){var u=ic();return TE(u,t,n,a)}function hd(t){var n=Gl();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},t=t.dispatch=h1.bind(null,or,t),[n.memoizedState,t]}function $m(t,n,a,u){return t={tag:t,create:n,destroy:a,deps:u,next:null},n=or.updateQueue,n===null?(n={lastEffect:null},or.updateQueue=n,n.lastEffect=t.next=t):(a=n.lastEffect,a===null?n.lastEffect=t.next=t:(u=a.next,a.next=t,t.next=u,n.lastEffect=t)),t}function E2(t){var n=Gl();return t={current:t},n.memoizedState=t}function Gm(){return ic().memoizedState}function Iv(t,n,a,u){var d=Gl();or.flags|=t,d.memoizedState=$m(1|n,a,void 0,u===void 0?null:u)}function c1(t,n,a,u){var d=ic();u=u===void 0?null:u;var v=void 0;if(jr!==null){var b=jr.memoizedState;if(v=b.destroy,u!==null&&s1(u,b.deps)){$m(n,a,v,u);return}}or.flags|=t,d.memoizedState=$m(1|n,a,v,u)}function C2(t,n){return Iv(516,4,t,n)}function qm(t,n){return c1(516,4,t,n)}function CE(t,n){return c1(4,2,t,n)}function kE(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function IE(t,n,a){return a=a!=null?a.concat([t]):null,c1(4,2,kE.bind(null,n,t),a)}function u1(){}function AE(t,n){var a=ic();n=n===void 0?null:n;var u=a.memoizedState;return u!==null&&n!==null&&s1(n,u[1])?u[0]:(a.memoizedState=[t,n],t)}function PE(t,n){var a=ic();n=n===void 0?null:n;var u=a.memoizedState;return u!==null&&n!==null&&s1(n,u[1])?u[0]:(t=t(),a.memoizedState=[t,n],t)}function gz(t,n){var a=Nu();Xl(98>a?98:a,function(){t(!0)}),Xl(97<a?97:a,function(){var u=Ji.transition;Ji.transition=1;try{t(!1),n()}finally{Ji.transition=u}})}function h1(t,n,a){var u=Li(),d=Ds(t),v={lane:d,action:a,eagerReducer:null,eagerState:null,next:null},b=n.pending;if(b===null?v.next=v:(v.next=b.next,b.next=v),n.pending=v,b=t.alternate,t===or||b!==null&&b===or)Ad=Vm=!0;else{if(t.lanes===0&&(b===null||b.lanes===0)&&(b=n.lastRenderedReducer,b!==null))try{var s=n.lastRenderedState,I=b(s,a);if(v.eagerReducer=b,v.eagerState=I,Yi(I,s))return}catch{}finally{}Rs(t,d,u)}}var Zm={readContext:Qi,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useOpaqueIdentifier:yi,unstable_isNewReconciler:!1},yz={readContext:Qi,useCallback:function(t,n){return Gl().memoizedState=[t,n===void 0?null:n],t},useContext:Qi,useEffect:C2,useImperativeHandle:function(t,n,a){return a=a!=null?a.concat([t]):null,Iv(4,2,kE.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Iv(4,2,t,n)},useMemo:function(t,n){var a=Gl();return n=n===void 0?null:n,t=t(),a.memoizedState=[t,n],t},useReducer:function(t,n,a){var u=Gl();return n=a!==void 0?a(n):n,u.memoizedState=u.baseState=n,t=u.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},t=t.dispatch=h1.bind(null,or,t),[u.memoizedState,t]},useRef:E2,useState:hd,useDebugValue:u1,useDeferredValue:function(t){var n=hd(t),a=n[0],u=n[1];return C2(function(){var d=Ji.transition;Ji.transition=1;try{u(t)}finally{Ji.transition=d}},[t]),a},useTransition:function(){var t=hd(!1),n=t[0];return t=gz.bind(null,t[1]),E2(t),[t,n]},useMutableSource:function(t,n,a){var u=Gl();return u.memoizedState={refs:{getSnapshot:n,setSnapshot:null},source:t,subscribe:a},TE(u,t,n,a)},useOpaqueIdentifier:function(){if(ia){var t=!1,n=uz(function(){throw t||(t=!0,a("r:"+(z_++).toString(36))),Error(tt(355))}),a=hd(n)[1];return(or.mode&2)===0&&(or.flags|=516,$m(5,function(){a("r:"+(z_++).toString(36))},void 0,null)),n}return n="r:"+(z_++).toString(36),hd(n),n},unstable_isNewReconciler:!1},_z={readContext:Qi,useCallback:AE,useContext:Qi,useEffect:qm,useImperativeHandle:IE,useLayoutEffect:CE,useMemo:PE,useReducer:cd,useRef:Gm,useState:function(){return cd(ea)},useDebugValue:u1,useDeferredValue:function(t){var n=cd(ea),a=n[0],u=n[1];return qm(function(){var d=Ji.transition;Ji.transition=1;try{u(t)}finally{Ji.transition=d}},[t]),a},useTransition:function(){var t=cd(ea)[0];return[Gm().current,t]},useMutableSource:EE,useOpaqueIdentifier:function(){return cd(ea)[0]},unstable_isNewReconciler:!1},vz={readContext:Qi,useCallback:AE,useContext:Qi,useEffect:qm,useImperativeHandle:IE,useLayoutEffect:CE,useMemo:PE,useReducer:ud,useRef:Gm,useState:function(){return ud(ea)},useDebugValue:u1,useDeferredValue:function(t){var n=ud(ea),a=n[0],u=n[1];return qm(function(){var d=Ji.transition;Ji.transition=1;try{u(t)}finally{Ji.transition=d}},[t]),a},useTransition:function(){var t=ud(ea)[0];return[Gm().current,t]},useMutableSource:EE,useOpaqueIdentifier:function(){return ud(ea)[0]},unstable_isNewReconciler:!1},xz=nc.ReactCurrentOwner,bo=!1;function vi(t,n,a,u){n.child=t===null?wE(n,null,a,u):jm(n,t.child,a,u)}function k2(t,n,a,u,d){a=a.render;var v=n.ref;return Iu(n,d),u=l1(t,n,a,u,v,d),t!==null&&!bo?(n.updateQueue=t.updateQueue,n.flags&=-517,t.lanes&=~d,ka(t,n,d)):(n.flags|=1,vi(t,n,u,d),n.child)}function I2(t,n,a,u,d,v){if(t===null){var b=a.type;return typeof b=="function"&&!y1(b)&&b.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(n.tag=15,n.type=b,ME(t,n,b,u,d,v)):(t=_m(a.type,null,u,n,n.mode,v),t.ref=n.ref,t.return=n,n.child=t)}return b=t.child,(d&v)===0&&(d=b.memoizedProps,a=a.compare,a=a!==null?a:Zd,a(d,u)&&t.ref===n.ref)?ka(t,n,v):(n.flags|=1,t=$s(b,u),t.ref=n.ref,t.return=n,n.child=t)}function ME(t,n,a,u,d,v){if(t!==null&&Zd(t.memoizedProps,u)&&t.ref===n.ref)if(bo=!1,(v&d)!==0)(t.flags&16384)!==0&&(bo=!0);else return n.lanes=t.lanes,ka(t,n,v);return Av(t,n,a,u,v)}function R_(t,n,a){var u=n.pendingProps,d=u.children,v=t!==null?t.memoizedState:null;if(u.mode==="hidden"||u.mode==="unstable-defer-without-hiding")if((n.mode&4)===0)n.memoizedState={baseLanes:0},rm(n,a);else if((a&1073741824)!==0)n.memoizedState={baseLanes:0},rm(n,v!==null?v.baseLanes:a);else return t=v!==null?v.baseLanes|a:a,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t},rm(n,t),null;else v!==null?(u=v.baseLanes|a,n.memoizedState=null):u=a,rm(n,u);return vi(t,n,d,a),n.child}function zE(t,n){var a=n.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(n.flags|=128)}function Av(t,n,a,u,d){var v=wi(a)?Hl:qr.current;return v=Fu(n,v),Iu(n,d),a=l1(t,n,a,u,v,d),t!==null&&!bo?(n.updateQueue=t.updateQueue,n.flags&=-517,t.lanes&=~d,ka(t,n,d)):(n.flags|=1,vi(t,n,a,d),n.child)}function A2(t,n,a,u,d){if(wi(a)){var v=!0;fm(n)}else v=!1;if(Iu(n,d),n.stateNode===null)t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),xE(n,a,u),Ev(n,a,u,d),u=!0;else if(t===null){var b=n.stateNode,s=n.memoizedProps;b.props=s;var I=b.context,F=a.contextType;typeof F=="object"&&F!==null?F=Qi(F):(F=wi(a)?Hl:qr.current,F=Fu(n,F));var W=a.getDerivedStateFromProps,j=typeof W=="function"||typeof b.getSnapshotBeforeUpdate=="function";j||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(s!==u||I!==F)&&x2(n,b,u,F),xs=!1;var Y=n.memoizedState;b.state=Y,Xd(n,u,b,d),I=n.memoizedState,s!==u||Y!==I||bi.current||xs?(typeof W=="function"&&(Nm(n,a,W,u),I=n.memoizedState),(s=xs||v2(n,a,s,u,Y,I,F))?(j||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(n.flags|=4)):(typeof b.componentDidMount=="function"&&(n.flags|=4),n.memoizedProps=u,n.memoizedState=I),b.props=u,b.state=I,b.context=F,u=s):(typeof b.componentDidMount=="function"&&(n.flags|=4),u=!1)}else{b=n.stateNode,_E(t,n),s=n.memoizedProps,F=n.type===n.elementType?s:xo(n.type,s),b.props=F,j=n.pendingProps,Y=b.context,I=a.contextType,typeof I=="object"&&I!==null?I=Qi(I):(I=wi(a)?Hl:qr.current,I=Fu(n,I));var H=a.getDerivedStateFromProps;(W=typeof H=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(s!==j||Y!==I)&&x2(n,b,u,I),xs=!1,Y=n.memoizedState,b.state=Y,Xd(n,u,b,d);var be=n.memoizedState;s!==j||Y!==be||bi.current||xs?(typeof H=="function"&&(Nm(n,a,H,u),be=n.memoizedState),(F=xs||v2(n,a,F,u,Y,be,I))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,be,I),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,be,I)),typeof b.componentDidUpdate=="function"&&(n.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(n.flags|=256)):(typeof b.componentDidUpdate!="function"||s===t.memoizedProps&&Y===t.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&Y===t.memoizedState||(n.flags|=256),n.memoizedProps=u,n.memoizedState=be),b.props=u,b.state=be,b.context=I,u=F):(typeof b.componentDidUpdate!="function"||s===t.memoizedProps&&Y===t.memoizedState||(n.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&Y===t.memoizedState||(n.flags|=256),u=!1)}return Pv(t,n,a,u,v,d)}function Pv(t,n,a,u,d,v){zE(t,n);var b=(n.flags&64)!==0;if(!u&&!b)return d&&p2(n,a,!1),ka(t,n,v);u=n.stateNode,xz.current=n;var s=b&&typeof a.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,t!==null&&b?(n.child=jm(n,t.child,null,v),n.child=jm(n,null,s,v)):vi(t,n,s,v),n.memoizedState=u.state,d&&p2(n,a,!0),n.child}function P2(t){var n=t.stateNode;n.pendingContext?f2(t,n.pendingContext,n.pendingContext!==n.context):n.context&&f2(t,n.context,!1),Cv(t,n.containerInfo)}var nm={dehydrated:null,retryLane:0};function M2(t,n,a){var u=n.pendingProps,d=nr.current,v=!1,b;return(b=(n.flags&64)!==0)||(b=t!==null&&t.memoizedState===null?!1:(d&2)!==0),b?(v=!0,n.flags&=-65):t!==null&&t.memoizedState===null||u.fallback===void 0||u.unstable_avoidThisFallback===!0||(d|=1),rr(nr,d&1),t===null?(u.fallback!==void 0&&kv(n),t=u.children,d=u.fallback,v?(t=z2(n,t,d,a),n.child.memoizedState={baseLanes:a},n.memoizedState=nm,t):typeof u.unstable_expectedLoadTime=="number"?(t=z2(n,t,d,a),n.child.memoizedState={baseLanes:a},n.memoizedState=nm,n.lanes=33554432,t):(a=_1({mode:"visible",children:t},n.mode,a,null),a.return=n,n.child=a)):t.memoizedState!==null?v?(u=L2(t,n,u.children,u.fallback,a),v=n.child,d=t.child.memoizedState,v.memoizedState=d===null?{baseLanes:a}:{baseLanes:d.baseLanes|a},v.childLanes=t.childLanes&~a,n.memoizedState=nm,u):(a=O2(t,n,u.children,a),n.memoizedState=null,a):v?(u=L2(t,n,u.children,u.fallback,a),v=n.child,d=t.child.memoizedState,v.memoizedState=d===null?{baseLanes:a}:{baseLanes:d.baseLanes|a},v.childLanes=t.childLanes&~a,n.memoizedState=nm,u):(a=O2(t,n,u.children,a),n.memoizedState=null,a)}function z2(t,n,a,u){var d=t.mode,v=t.child;return n={mode:"hidden",children:n},(d&2)===0&&v!==null?(v.childLanes=0,v.pendingProps=n):v=_1(n,d,0,null),a=zu(a,d,u,null),v.return=t,a.return=t,v.sibling=a,t.child=v,a}function O2(t,n,a,u){var d=t.child;return t=d.sibling,a=$s(d,{mode:"visible",children:a}),(n.mode&2)===0&&(a.lanes=u),a.return=n,a.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,n.firstEffect=n.lastEffect=t),n.child=a}function L2(t,n,a,u,d){var v=n.mode,b=t.child;t=b.sibling;var s={mode:"hidden",children:a};return(v&2)===0&&n.child!==b?(a=n.child,a.childLanes=0,a.pendingProps=s,b=a.lastEffect,b!==null?(n.firstEffect=a.firstEffect,n.lastEffect=b,b.nextEffect=null):n.firstEffect=n.lastEffect=null):a=$s(b,s),t!==null?u=$s(t,u):(u=zu(u,v,d,null),u.flags|=2),u.return=n,a.return=n,a.sibling=u,n.child=a,u}function D2(t,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n),yE(t.return,n)}function B_(t,n,a,u,d,v){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d,lastEffect:v}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=a,b.tailMode=d,b.lastEffect=v)}function R2(t,n,a){var u=n.pendingProps,d=u.revealOrder,v=u.tail;if(vi(t,n,u.children,a),u=nr.current,(u&2)!==0)u=u&1|2,n.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&D2(t,a);else if(t.tag===19)D2(t,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(rr(nr,u),(n.mode&2)===0)n.memoizedState=null;else switch(d){case"forwards":for(a=n.child,d=null;a!==null;)t=a.alternate,t!==null&&Um(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),B_(n,!1,d,a,v,n.lastEffect);break;case"backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(t=d.alternate,t!==null&&Um(t)===null){n.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}B_(n,!0,a,null,v,n.lastEffect);break;case"together":B_(n,!1,null,null,void 0,n.lastEffect);break;default:n.memoizedState=null}return n.child}function ka(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),uf|=n.lanes,(a&n.childLanes)!==0){if(t!==null&&n.child!==t.child)throw Error(tt(153));if(n.child!==null){for(t=n.child,a=$s(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=$s(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}return null}var OE,Mv,LE,DE;OE=function(t,n){for(var a=n.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Mv=function(){};LE=function(t,n,a,u){var d=t.memoizedProps;if(d!==u){t=n.stateNode,$l(ra.current);var v=null;switch(a){case"input":d=iv(t,d),u=iv(t,u),v=[];break;case"option":d=sv(t,d),u=sv(t,u),v=[];break;case"select":d=Gn({},d,{value:void 0}),u=Gn({},u,{value:void 0}),v=[];break;case"textarea":d=lv(t,d),u=lv(t,u),v=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Om)}hv(a,u);var b;a=null;for(F in d)if(!u.hasOwnProperty(F)&&d.hasOwnProperty(F)&&d[F]!=null)if(F==="style"){var s=d[F];for(b in s)s.hasOwnProperty(b)&&(a||(a={}),a[b]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Nd.hasOwnProperty(F)?v||(v=[]):(v=v||[]).push(F,null));for(F in u){var I=u[F];if(s=d!=null?d[F]:void 0,u.hasOwnProperty(F)&&I!==s&&(I!=null||s!=null))if(F==="style")if(s){for(b in s)!s.hasOwnProperty(b)||I&&I.hasOwnProperty(b)||(a||(a={}),a[b]="");for(b in I)I.hasOwnProperty(b)&&s[b]!==I[b]&&(a||(a={}),a[b]=I[b])}else a||(v||(v=[]),v.push(F,a)),a=I;else F==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,s=s?s.__html:void 0,I!=null&&s!==I&&(v=v||[]).push(F,I)):F==="children"?typeof I!="string"&&typeof I!="number"||(v=v||[]).push(F,""+I):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Nd.hasOwnProperty(F)?(I!=null&&F==="onScroll"&&Fn("scroll",t),v||s===I||(v=[])):typeof I=="object"&&I!==null&&I.$$typeof===F0?I.toString():(v=v||[]).push(F,I))}a&&(v=v||[]).push("style",a);var F=v;(n.updateQueue=F)&&(n.flags|=4)}};DE=function(t,n,a,u){a!==u&&(n.flags|=4)};function dd(t,n){if(!ia)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function bz(t,n,a){var u=n.pendingProps;switch(n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return wi(n.type)&&Dm(),null;case 3:return ju(),Nn(bi),Nn(qr),a1(),u=n.stateNode,u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(tm(n)?n.flags|=4:u.hydrate||(n.flags|=256)),Mv(n),null;case 5:o1(n);var d=$l(Kd.current);if(a=n.type,t!==null&&n.stateNode!=null)LE(t,n,a,u,d),t.ref!==n.ref&&(n.flags|=128);else{if(!u){if(n.stateNode===null)throw Error(tt(166));return null}if(t=$l(ra.current),tm(n)){u=n.stateNode,a=n.type;var v=n.memoizedProps;switch(u[Ts]=n,u[Lm]=v,a){case"dialog":Fn("cancel",u),Fn("close",u);break;case"iframe":case"object":case"embed":Fn("load",u);break;case"video":case"audio":for(t=0;t<yd.length;t++)Fn(yd[t],u);break;case"source":Fn("error",u);break;case"img":case"image":case"link":Fn("error",u),Fn("load",u);break;case"details":Fn("toggle",u);break;case"input":Rw(u,v),Fn("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!v.multiple},Fn("invalid",u);break;case"textarea":Fw(u,v),Fn("invalid",u)}hv(a,v),t=null;for(var b in v)v.hasOwnProperty(b)&&(d=v[b],b==="children"?typeof d=="string"?u.textContent!==d&&(t=["children",d]):typeof d=="number"&&u.textContent!==""+d&&(t=["children",""+d]):Nd.hasOwnProperty(b)&&d!=null&&b==="onScroll"&&Fn("scroll",u));switch(a){case"input":Xp(u),Bw(u,v,!0);break;case"textarea":Xp(u),Nw(u);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(u.onclick=Om)}u=t,n.updateQueue=u,u!==null&&(n.flags|=4)}else{switch(b=d.nodeType===9?d:d.ownerDocument,t===cv.html&&(t=IT(a)),t===cv.html?a==="script"?(t=b.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=b.createElement(a,{is:u.is}):(t=b.createElement(a),a==="select"&&(b=t,u.multiple?b.multiple=!0:u.size&&(b.size=u.size))):t=b.createElementNS(t,a),t[Ts]=n,t[Lm]=u,OE(t,n,!1,!1),n.stateNode=t,b=dv(a,u),a){case"dialog":Fn("cancel",t),Fn("close",t),d=u;break;case"iframe":case"object":case"embed":Fn("load",t),d=u;break;case"video":case"audio":for(d=0;d<yd.length;d++)Fn(yd[d],t);d=u;break;case"source":Fn("error",t),d=u;break;case"img":case"image":case"link":Fn("error",t),Fn("load",t),d=u;break;case"details":Fn("toggle",t),d=u;break;case"input":Rw(t,u),d=iv(t,u),Fn("invalid",t);break;case"option":d=sv(t,u);break;case"select":t._wrapperState={wasMultiple:!!u.multiple},d=Gn({},u,{value:void 0}),Fn("invalid",t);break;case"textarea":Fw(t,u),d=lv(t,u),Fn("invalid",t);break;default:d=u}hv(a,d);var s=d;for(v in s)if(s.hasOwnProperty(v)){var I=s[v];v==="style"?MT(t,I):v==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&AT(t,I)):v==="children"?typeof I=="string"?(a!=="textarea"||I!=="")&&jd(t,I):typeof I=="number"&&jd(t,""+I):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Nd.hasOwnProperty(v)?I!=null&&v==="onScroll"&&Fn("scroll",t):I!=null&&z0(t,v,I,b))}switch(a){case"input":Xp(t),Bw(t,u,!1);break;case"textarea":Xp(t),Nw(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Ns(u.value));break;case"select":t.multiple=!!u.multiple,v=u.value,v!=null?Tu(t,!!u.multiple,v,!1):u.defaultValue!=null&&Tu(t,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=Om)}lE(a,u)&&(n.flags|=4)}n.ref!==null&&(n.flags|=128)}return null;case 6:if(t&&n.stateNode!=null)DE(t,n,t.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(tt(166));a=$l(Kd.current),$l(ra.current),tm(n)?(u=n.stateNode,a=n.memoizedProps,u[Ts]=n,u.nodeValue!==a&&(n.flags|=4)):(u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[Ts]=n,n.stateNode=u)}return null;case 13:return Nn(nr),u=n.memoizedState,(n.flags&64)!==0?(n.lanes=a,n):(u=u!==null,a=!1,t===null?n.memoizedProps.fallback!==void 0&&tm(n):a=t.memoizedState!==null,u&&!a&&(n.mode&2)!==0&&(t===null&&n.memoizedProps.unstable_avoidThisFallback!==!0||(nr.current&1)!==0?Mr===0&&(Mr=3):((Mr===0||Mr===3)&&(Mr=4),ri===null||(uf&134217727)===0&&(Xu&134217727)===0||Pu(ri,$r))),(u||a)&&(n.flags|=4),null);case 4:return ju(),Mv(n),t===null&&oE(n.stateNode.containerInfo),null;case 10:return r1(n),null;case 17:return wi(n.type)&&Dm(),null;case 19:if(Nn(nr),u=n.memoizedState,u===null)return null;if(v=(n.flags&64)!==0,b=u.rendering,b===null)if(v)dd(u,!1);else{if(Mr!==0||t!==null&&(t.flags&64)!==0)for(t=n.child;t!==null;){if(b=Um(t),b!==null){for(n.flags|=64,dd(u,!1),v=b.updateQueue,v!==null&&(n.updateQueue=v,n.flags|=4),u.lastEffect===null&&(n.firstEffect=null),n.lastEffect=u.lastEffect,u=a,a=n.child;a!==null;)v=a,t=u,v.flags&=2,v.nextEffect=null,v.firstEffect=null,v.lastEffect=null,b=v.alternate,b===null?(v.childLanes=0,v.lanes=t,v.child=null,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=b.childLanes,v.lanes=b.lanes,v.child=b.child,v.memoizedProps=b.memoizedProps,v.memoizedState=b.memoizedState,v.updateQueue=b.updateQueue,v.type=b.type,t=b.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return rr(nr,nr.current&1|2),n.child}t=t.sibling}u.tail!==null&&Ur()>Bv&&(n.flags|=64,v=!0,dd(u,!1),n.lanes=33554432)}else{if(!v)if(t=Um(b),t!==null){if(n.flags|=64,v=!0,a=t.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),dd(u,!0),u.tail===null&&u.tailMode==="hidden"&&!b.alternate&&!ia)return n=n.lastEffect=u.lastEffect,n!==null&&(n.nextEffect=null),null}else 2*Ur()-u.renderingStartTime>Bv&&a!==1073741824&&(n.flags|=64,v=!0,dd(u,!1),n.lanes=33554432);u.isBackwards?(b.sibling=n.child,n.child=b):(a=u.last,a!==null?a.sibling=b:n.child=b,u.last=b)}return u.tail!==null?(a=u.tail,u.rendering=a,u.tail=a.sibling,u.lastEffect=n.lastEffect,u.renderingStartTime=Ur(),a.sibling=null,n=nr.current,rr(nr,v?n&1|2:n&1),a):null;case 23:case 24:return g1(),t!==null&&t.memoizedState!==null!=(n.memoizedState!==null)&&u.mode!=="unstable-defer-without-hiding"&&(n.flags|=4),null}throw Error(tt(156,n.tag))}function wz(t){switch(t.tag){case 1:wi(t.type)&&Dm();var n=t.flags;return n&4096?(t.flags=n&-4097|64,t):null;case 3:if(ju(),Nn(bi),Nn(qr),a1(),n=t.flags,(n&64)!==0)throw Error(tt(285));return t.flags=n&-4097|64,t;case 5:return o1(t),null;case 13:return Nn(nr),n=t.flags,n&4096?(t.flags=n&-4097|64,t):null;case 19:return Nn(nr),null;case 4:return ju(),null;case 10:return r1(t),null;case 23:case 24:return g1(),null;default:return null}}function d1(t,n){try{var a="",u=n;do a+=nM(u),u=u.return;while(u);var d=a}catch(v){d=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:n,stack:d}}function zv(t,n){try{console.error(n.value)}catch(a){setTimeout(function(){throw a})}}var Sz=typeof WeakMap=="function"?WeakMap:Map;function RE(t,n,a){a=Os(-1,a),a.tag=3,a.payload={element:null};var u=n.value;return a.callback=function(){Hm||(Hm=!0,Fv=u),zv(t,n)},a}function BE(t,n,a){a=Os(-1,a),a.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var d=n.value;a.payload=function(){return zv(t,n),u(d)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){typeof u!="function"&&(ta===null?ta=new Set([this]):ta.add(this),zv(t,n));var b=n.stack;this.componentDidCatch(n.value,{componentStack:b!==null?b:""})}),a}var Tz=typeof WeakSet=="function"?WeakSet:Set;function B2(t){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){Bs(t,a)}else n.current=null}function Ez(t,n){switch(n.tag){case 0:case 11:case 15:case 22:return;case 1:if(n.flags&256&&t!==null){var a=t.memoizedProps,u=t.memoizedState;t=n.stateNode,n=t.getSnapshotBeforeUpdate(n.elementType===n.type?a:xo(n.type,a),u),t.__reactInternalSnapshotBeforeUpdate=n}return;case 3:n.flags&256&&Q0(n.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(tt(163))}function Cz(t,n,a){switch(a.tag){case 0:case 11:case 15:case 22:if(n=a.updateQueue,n=n!==null?n.lastEffect:null,n!==null){t=n=n.next;do{if((t.tag&3)===3){var u=t.create;t.destroy=u()}t=t.next}while(t!==n)}if(n=a.updateQueue,n=n!==null?n.lastEffect:null,n!==null){t=n=n.next;do{var d=t;u=d.next,d=d.tag,(d&4)!==0&&(d&1)!==0&&(ZE(a,t),Lz(a,t)),t=u}while(t!==n)}return;case 1:t=a.stateNode,a.flags&4&&(n===null?t.componentDidMount():(u=a.elementType===a.type?n.memoizedProps:xo(a.type,n.memoizedProps),t.componentDidUpdate(u,n.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),n=a.updateQueue,n!==null&&_2(a,n,t);return;case 3:if(n=a.updateQueue,n!==null){if(t=null,a.child!==null)switch(a.child.tag){case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}_2(a,n,t)}return;case 5:t=a.stateNode,n===null&&a.flags&4&&lE(a.type,a.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:a.memoizedState===null&&(a=a.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&UT(a))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(tt(163))}function F2(t,n){for(var a=t;;){if(a.tag===5){var u=a.stateNode;if(n)u=u.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{u=a.stateNode;var d=a.memoizedProps.style;d=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=PT("display",d)}}else if(a.tag===6)a.stateNode.nodeValue=n?"":a.memoizedProps;else if((a.tag!==23&&a.tag!==24||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function N2(t,n){if(Zl&&typeof Zl.onCommitFiberUnmount=="function")try{Zl.onCommitFiberUnmount(e1,n)}catch{}switch(n.tag){case 0:case 11:case 14:case 15:case 22:if(t=n.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var a=t=t.next;do{var u=a,d=u.destroy;if(u=u.tag,d!==void 0)if((u&4)!==0)ZE(n,a);else{u=n;try{d()}catch(v){Bs(u,v)}}a=a.next}while(a!==t)}break;case 1:if(B2(n),t=n.stateNode,typeof t.componentWillUnmount=="function")try{t.props=n.memoizedProps,t.state=n.memoizedState,t.componentWillUnmount()}catch(v){Bs(n,v)}break;case 5:B2(n);break;case 4:FE(t,n)}}function j2(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function U2(t){return t.tag===5||t.tag===3||t.tag===4}function V2(t){e:{for(var n=t.return;n!==null;){if(U2(n))break e;n=n.return}throw Error(tt(160))}var a=n;switch(n=a.stateNode,a.tag){case 5:var u=!1;break;case 3:n=n.containerInfo,u=!0;break;case 4:n=n.containerInfo,u=!0;break;default:throw Error(tt(161))}a.flags&16&&(jd(n,""),a.flags&=-17);e:t:for(a=t;;){for(;a.sibling===null;){if(a.return===null||U2(a.return)){a=null;break e}a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2)){a=a.stateNode;break e}}u?Ov(t,a,n):Lv(t,a,n)}function Ov(t,n,a){var u=t.tag,d=u===5||u===6;if(d)t=d?t.stateNode:t.stateNode.instance,n?a.nodeType===8?a.parentNode.insertBefore(t,n):a.insertBefore(t,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(t,a)):(n=a,n.appendChild(t)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Om));else if(u!==4&&(t=t.child,t!==null))for(Ov(t,n,a),t=t.sibling;t!==null;)Ov(t,n,a),t=t.sibling}function Lv(t,n,a){var u=t.tag,d=u===5||u===6;if(d)t=d?t.stateNode:t.stateNode.instance,n?a.insertBefore(t,n):a.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Lv(t,n,a),t=t.sibling;t!==null;)Lv(t,n,a),t=t.sibling}function FE(t,n){for(var a=n,u=!1,d,v;;){if(!u){u=a.return;e:for(;;){if(u===null)throw Error(tt(160));switch(d=u.stateNode,u.tag){case 5:v=!1;break e;case 3:d=d.containerInfo,v=!0;break e;case 4:d=d.containerInfo,v=!0;break e}u=u.return}u=!0}if(a.tag===5||a.tag===6){e:for(var b=t,s=a,I=s;;)if(N2(b,I),I.child!==null&&I.tag!==4)I.child.return=I,I=I.child;else{if(I===s)break e;for(;I.sibling===null;){if(I.return===null||I.return===s)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}v?(b=d,s=a.stateNode,b.nodeType===8?b.parentNode.removeChild(s):b.removeChild(s)):d.removeChild(a.stateNode)}else if(a.tag===4){if(a.child!==null){d=a.stateNode.containerInfo,v=!0,a.child.return=a,a=a.child;continue}}else if(N2(t,a),a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return,a.tag===4&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function F_(t,n){switch(n.tag){case 0:case 11:case 14:case 15:case 22:var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do(u.tag&3)===3&&(t=u.destroy,u.destroy=void 0,t!==void 0&&t()),u=u.next;while(u!==a)}return;case 1:return;case 5:if(a=n.stateNode,a!=null){u=n.memoizedProps;var d=t!==null?t.memoizedProps:u;t=n.type;var v=n.updateQueue;if(n.updateQueue=null,v!==null){for(a[Lm]=u,t==="input"&&u.type==="radio"&&u.name!=null&&CT(a,u),dv(t,d),n=dv(t,u),d=0;d<v.length;d+=2){var b=v[d],s=v[d+1];b==="style"?MT(a,s):b==="dangerouslySetInnerHTML"?AT(a,s):b==="children"?jd(a,s):z0(a,b,s,n)}switch(t){case"input":ov(a,u);break;case"textarea":kT(a,u);break;case"select":t=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!u.multiple,v=u.value,v!=null?Tu(a,!!u.multiple,v,!1):t!==!!u.multiple&&(u.defaultValue!=null?Tu(a,!!u.multiple,u.defaultValue,!0):Tu(a,!!u.multiple,u.multiple?[]:"",!1))}}}return;case 6:if(n.stateNode===null)throw Error(tt(162));n.stateNode.nodeValue=n.memoizedProps;return;case 3:a=n.stateNode,a.hydrate&&(a.hydrate=!1,UT(a.containerInfo));return;case 12:return;case 13:n.memoizedState!==null&&(m1=Ur(),F2(n.child,!0)),$2(n);return;case 19:$2(n);return;case 17:return;case 23:case 24:F2(n,n.memoizedState!==null);return}throw Error(tt(163))}function $2(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new Tz),n.forEach(function(u){var d=Bz.bind(null,t,u);a.has(u)||(a.add(u),u.then(d,d))})}}function kz(t,n){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(n=n.memoizedState,n!==null&&n.dehydrated===null):!1}var Iz=Math.ceil,Wm=nc.ReactCurrentDispatcher,f1=nc.ReactCurrentOwner,Pt=0,ri=null,xr=null,$r=0,Yl=0,Dv=Ws(0),Mr=0,kg=null,Hu=0,uf=0,Xu=0,p1=0,Rv=null,m1=0,Bv=1/0;function Yu(){Bv=Ur()+500}var mt=null,Hm=!1,Fv=null,ta=null,Vs=!1,Pd=null,_d=90,Nv=[],jv=[],Ia=null,Md=0,Uv=null,mm=-1,Ea=0,gm=0,zd=null,ym=!1;function Li(){return(Pt&48)!==0?Ur():mm!==-1?mm:mm=Ur()}function Ds(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return Nu()===99?1:2;if(Ea===0&&(Ea=Hu),mz.transition!==0){gm!==0&&(gm=Rv!==null?Rv.pendingLanes:0),t=Ea;var n=4186112&~gm;return n&=-n,n===0&&(t=4186112&~t,n=t&-t,n===0&&(n=8192)),n}return t=Nu(),(Pt&4)!==0&&t===98?t=Mm(12,Ea):(t=_M(t),t=Mm(t,Ea)),t}function Rs(t,n,a){if(50<Md)throw Md=0,Uv=null,Error(tt(185));if(t=Ig(t,n),t===null)return null;xg(t,n,a),t===ri&&(Xu|=n,Mr===4&&Pu(t,$r));var u=Nu();n===1?(Pt&8)!==0&&(Pt&48)===0?Vv(t):(eo(t,a),Pt===0&&(Yu(),sa())):((Pt&4)===0||u!==98&&u!==99||(Ia===null?Ia=new Set([t]):Ia.add(t)),eo(t,a)),Rv=t}function Ig(t,n){t.lanes|=n;var a=t.alternate;for(a!==null&&(a.lanes|=n),a=t,t=t.return;t!==null;)t.childLanes|=n,a=t.alternate,a!==null&&(a.childLanes|=n),a=t,t=t.return;return a.tag===3?a.stateNode:null}function eo(t,n){for(var a=t.callbackNode,u=t.suspendedLanes,d=t.pingedLanes,v=t.expirationTimes,b=t.pendingLanes;0<b;){var s=31-js(b),I=1<<s,F=v[s];if(F===-1){if((I&u)===0||(I&d)!==0){F=n,du(I);var W=Ln;v[s]=10<=W?F+250:6<=W?F+5e3:-1}}else F<=n&&(t.expiredLanes|=I);b&=~I}if(u=Gd(t,t===ri?$r:0),n=Ln,u===0)a!==null&&(a!==O_&&Sv(a),t.callbackNode=null,t.callbackPriority=0);else{if(a!==null){if(t.callbackPriority===n)return;a!==O_&&Sv(a)}n===15?(a=Vv.bind(null,t),Ta===null?(Ta=[a],pm=t1(Eg,gE)):Ta.push(a),a=O_):n===14?a=Hd(99,Vv.bind(null,t)):(a=vM(n),a=Hd(a,NE.bind(null,t))),t.callbackPriority=n,t.callbackNode=a}}function NE(t){if(mm=-1,gm=Ea=0,(Pt&48)!==0)throw Error(tt(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var a=Gd(t,t===ri?$r:0);if(a===0)return null;var u=a,d=Pt;Pt|=16;var v=$E();(ri!==t||$r!==u)&&(Yu(),Mu(t,u));do try{Mz();break}catch(s){VE(t,s)}while(1);if(n1(),Wm.current=v,Pt=d,xr!==null?u=0:(ri=null,$r=0,u=Mr),(Hu&Xu)!==0)Mu(t,0);else if(u!==0){if(u===2&&(Pt|=64,t.hydrate&&(t.hydrate=!1,Q0(t.containerInfo)),a=HT(t),a!==0&&(u=vd(t,a))),u===1)throw n=kg,Mu(t,0),Pu(t,a),eo(t,Ur()),n;switch(t.finishedWork=t.current.alternate,t.finishedLanes=a,u){case 0:case 1:throw Error(tt(345));case 2:Nl(t);break;case 3:if(Pu(t,a),(a&62914560)===a&&(u=m1+500-Ur(),10<u)){if(Gd(t,0)!==0)break;if(d=t.suspendedLanes,(d&a)!==a){Li(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=u2(Nl.bind(null,t),u);break}Nl(t);break;case 4:if(Pu(t,a),(a&4186112)===a)break;for(u=t.eventTimes,d=-1;0<a;){var b=31-js(a);v=1<<b,b=u[b],b>d&&(d=b),a&=~v}if(a=d,a=Ur()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Iz(a/1960))-a,10<a){t.timeoutHandle=u2(Nl.bind(null,t),a);break}Nl(t);break;case 5:Nl(t);break;default:throw Error(tt(329))}}return eo(t,Ur()),t.callbackNode===n?NE.bind(null,t):null}function Pu(t,n){for(n&=~p1,n&=~Xu,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var a=31-js(n),u=1<<a;t[a]=-1,n&=~u}}function Vv(t){if((Pt&48)!==0)throw Error(tt(327));if(Hs(),t===ri&&(t.expiredLanes&$r)!==0){var n=$r,a=vd(t,n);(Hu&Xu)!==0&&(n=Gd(t,n),a=vd(t,n))}else n=Gd(t,0),a=vd(t,n);if(t.tag!==0&&a===2&&(Pt|=64,t.hydrate&&(t.hydrate=!1,Q0(t.containerInfo)),n=HT(t),n!==0&&(a=vd(t,n))),a===1)throw a=kg,Mu(t,0),Pu(t,n),eo(t,Ur()),a;return t.finishedWork=t.current.alternate,t.finishedLanes=n,Nl(t),eo(t,Ur()),null}function Az(){if(Ia!==null){var t=Ia;Ia=null,t.forEach(function(n){n.expiredLanes|=24&n.pendingLanes,eo(n,Ur())})}sa()}function jE(t,n){var a=Pt;Pt|=1;try{return t(n)}finally{Pt=a,Pt===0&&(Yu(),sa())}}function UE(t,n){var a=Pt;Pt&=-2,Pt|=8;try{return t(n)}finally{Pt=a,Pt===0&&(Yu(),sa())}}function rm(t,n){rr(Dv,Yl),Yl|=n,Hu|=n}function g1(){Yl=Dv.current,Nn(Dv)}function Mu(t,n){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,cz(a)),xr!==null)for(a=xr.return;a!==null;){var u=a;switch(u.tag){case 1:u=u.type.childContextTypes,u!=null&&Dm();break;case 3:ju(),Nn(bi),Nn(qr),a1();break;case 5:o1(u);break;case 4:ju();break;case 13:Nn(nr);break;case 19:Nn(nr);break;case 10:r1(u);break;case 23:case 24:g1()}a=a.return}ri=t,xr=$s(t.current,null),$r=Yl=Hu=n,Mr=0,kg=null,p1=Xu=uf=0}function VE(t,n){do{var a=xr;try{if(n1(),Id.current=Zm,Vm){for(var u=or.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Vm=!1}if(Jd=0,Pr=jr=or=null,Ad=!1,f1.current=null,a===null||a.return===null){Mr=1,kg=n,xr=null;break}e:{var v=t,b=a.return,s=a,I=n;if(n=$r,s.flags|=2048,s.firstEffect=s.lastEffect=null,I!==null&&typeof I=="object"&&typeof I.then=="function"){var F=I;if((s.mode&2)===0){var W=s.alternate;W?(s.updateQueue=W.updateQueue,s.memoizedState=W.memoizedState,s.lanes=W.lanes):(s.updateQueue=null,s.memoizedState=null)}var j=(nr.current&1)!==0,Y=b;do{var H;if(H=Y.tag===13){var be=Y.memoizedState;if(be!==null)H=be.dehydrated!==null;else{var ge=Y.memoizedProps;H=ge.fallback===void 0?!1:ge.unstable_avoidThisFallback!==!0?!0:!j}}if(H){var Q=Y.updateQueue;if(Q===null){var V=new Set;V.add(F),Y.updateQueue=V}else Q.add(F);if((Y.mode&2)===0){if(Y.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var J=Os(-1,1);J.tag=2,Ls(s,J)}s.lanes|=1;break e}I=void 0,s=n;var he=v.pingCache;if(he===null?(he=v.pingCache=new Sz,I=new Set,he.set(F,I)):(I=he.get(F),I===void 0&&(I=new Set,he.set(F,I))),!I.has(s)){I.add(s);var pe=Rz.bind(null,v,F,s);F.then(pe,pe)}Y.flags|=4096,Y.lanes=n;break e}Y=Y.return}while(Y!==null);I=Error((Su(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Mr!==5&&(Mr=2),I=d1(I,s),Y=b;do{switch(Y.tag){case 3:v=I,Y.flags|=4096,n&=-n,Y.lanes|=n;var ze=RE(Y,v,n);y2(Y,ze);break e;case 1:v=I;var Ee=Y.type,We=Y.stateNode;if((Y.flags&64)===0&&(typeof Ee.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(ta===null||!ta.has(We)))){Y.flags|=4096,n&=-n,Y.lanes|=n;var Be=BE(Y,v,n);y2(Y,Be);break e}}Y=Y.return}while(Y!==null)}qE(a)}catch(Oe){n=Oe,xr===a&&a!==null&&(xr=a=a.return);continue}break}while(1)}function $E(){var t=Wm.current;return Wm.current=Zm,t===null?Zm:t}function vd(t,n){var a=Pt;Pt|=16;var u=$E();ri===t&&$r===n||Mu(t,n);do try{Pz();break}catch(d){VE(t,d)}while(1);if(n1(),Pt=a,Wm.current=u,xr!==null)throw Error(tt(261));return ri=null,$r=0,Mr}function Pz(){for(;xr!==null;)GE(xr)}function Mz(){for(;xr!==null&&!dz();)GE(xr)}function GE(t){var n=WE(t.alternate,t,Yl);t.memoizedProps=t.pendingProps,n===null?qE(t):xr=n,f1.current=null}function qE(t){var n=t;do{var a=n.alternate;if(t=n.return,(n.flags&2048)===0){if(a=bz(a,n,Yl),a!==null){xr=a;return}if(a=n,a.tag!==24&&a.tag!==23||a.memoizedState===null||(Yl&1073741824)!==0||(a.mode&4)===0){for(var u=0,d=a.child;d!==null;)u|=d.lanes|d.childLanes,d=d.sibling;a.childLanes=u}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=n.firstEffect),n.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=n.firstEffect),t.lastEffect=n.lastEffect),1<n.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=n:t.firstEffect=n,t.lastEffect=n))}else{if(a=wz(n),a!==null){a.flags&=2047,xr=a;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(n=n.sibling,n!==null){xr=n;return}xr=n=t}while(n!==null);Mr===0&&(Mr=5)}function Nl(t){var n=Nu();return Xl(99,zz.bind(null,t,n)),null}function zz(t,n){do Hs();while(Pd!==null);if((Pt&48)!==0)throw Error(tt(327));var a=t.finishedWork;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(tt(177));t.callbackNode=null;var u=a.lanes|a.childLanes,d=u,v=t.pendingLanes&~d;t.pendingLanes=d,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=d,t.mutableReadLanes&=d,t.entangledLanes&=d,d=t.entanglements;for(var b=t.eventTimes,s=t.expirationTimes;0<v;){var I=31-js(v),F=1<<I;d[I]=0,b[I]=-1,s[I]=-1,v&=~F}if(Ia!==null&&(u&24)===0&&Ia.has(t)&&Ia.delete(t),t===ri&&(xr=ri=null,$r=0),1<a.flags?a.lastEffect!==null?(a.lastEffect.nextEffect=a,u=a.firstEffect):u=a:u=a.firstEffect,u!==null){if(d=Pt,Pt|=32,f1.current=null,P_=um,b=r2(),_v(b)){if("selectionStart"in b)s={start:b.selectionStart,end:b.selectionEnd};else e:if(s=(s=b.ownerDocument)&&s.defaultView||window,(F=s.getSelection&&s.getSelection())&&F.rangeCount!==0){s=F.anchorNode,v=F.anchorOffset,I=F.focusNode,F=F.focusOffset;try{s.nodeType,I.nodeType}catch{s=null;break e}var W=0,j=-1,Y=-1,H=0,be=0,ge=b,Q=null;t:for(;;){for(var V;ge!==s||v!==0&&ge.nodeType!==3||(j=W+v),ge!==I||F!==0&&ge.nodeType!==3||(Y=W+F),ge.nodeType===3&&(W+=ge.nodeValue.length),(V=ge.firstChild)!==null;)Q=ge,ge=V;for(;;){if(ge===b)break t;if(Q===s&&++H===v&&(j=W),Q===I&&++be===F&&(Y=W),(V=ge.nextSibling)!==null)break;ge=Q,Q=ge.parentNode}ge=V}s=j===-1||Y===-1?null:{start:j,end:Y}}else s=null;s=s||{start:0,end:0}}else s=null;M_={focusedElem:b,selectionRange:s},um=!1,zd=null,ym=!1,mt=u;do try{Oz()}catch(Oe){if(mt===null)throw Error(tt(330));Bs(mt,Oe),mt=mt.nextEffect}while(mt!==null);zd=null,mt=u;do try{for(b=t;mt!==null;){var J=mt.flags;if(J&16&&jd(mt.stateNode,""),J&128){var he=mt.alternate;if(he!==null){var pe=he.ref;pe!==null&&(typeof pe=="function"?pe(null):pe.current=null)}}switch(J&1038){case 2:V2(mt),mt.flags&=-3;break;case 6:V2(mt),mt.flags&=-3,F_(mt.alternate,mt);break;case 1024:mt.flags&=-1025;break;case 1028:mt.flags&=-1025,F_(mt.alternate,mt);break;case 4:F_(mt.alternate,mt);break;case 8:s=mt,FE(b,s);var ze=s.alternate;j2(s),ze!==null&&j2(ze)}mt=mt.nextEffect}}catch(Oe){if(mt===null)throw Error(tt(330));Bs(mt,Oe),mt=mt.nextEffect}while(mt!==null);if(pe=M_,he=r2(),J=pe.focusedElem,b=pe.selectionRange,he!==J&&J&&J.ownerDocument&&nE(J.ownerDocument.documentElement,J)){for(b!==null&&_v(J)&&(he=b.start,pe=b.end,pe===void 0&&(pe=he),"selectionStart"in J?(J.selectionStart=he,J.selectionEnd=Math.min(pe,J.value.length)):(pe=(he=J.ownerDocument||document)&&he.defaultView||window,pe.getSelection&&(pe=pe.getSelection(),s=J.textContent.length,ze=Math.min(b.start,s),b=b.end===void 0?ze:Math.min(b.end,s),!pe.extend&&ze>b&&(s=b,b=ze,ze=s),s=n2(J,ze),v=n2(J,b),s&&v&&(pe.rangeCount!==1||pe.anchorNode!==s.node||pe.anchorOffset!==s.offset||pe.focusNode!==v.node||pe.focusOffset!==v.offset)&&(he=he.createRange(),he.setStart(s.node,s.offset),pe.removeAllRanges(),ze>b?(pe.addRange(he),pe.extend(v.node,v.offset)):(he.setEnd(v.node,v.offset),pe.addRange(he)))))),he=[],pe=J;pe=pe.parentNode;)pe.nodeType===1&&he.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<he.length;J++)pe=he[J],pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}um=!!P_,M_=P_=null,t.current=a,mt=u;do try{for(J=t;mt!==null;){var Ee=mt.flags;if(Ee&36&&Cz(J,mt.alternate,mt),Ee&128){he=void 0;var We=mt.ref;if(We!==null){var Be=mt.stateNode;switch(mt.tag){case 5:he=Be;break;default:he=Be}typeof We=="function"?We(he):We.current=he}}mt=mt.nextEffect}}catch(Oe){if(mt===null)throw Error(tt(330));Bs(mt,Oe),mt=mt.nextEffect}while(mt!==null);mt=null,pz(),Pt=d}else t.current=a;if(Vs)Vs=!1,Pd=t,_d=n;else for(mt=u;mt!==null;)n=mt.nextEffect,mt.nextEffect=null,mt.flags&8&&(Ee=mt,Ee.sibling=null,Ee.stateNode=null),mt=n;if(u=t.pendingLanes,u===0&&(ta=null),u===1?t===Uv?Md++:(Md=0,Uv=t):Md=0,a=a.stateNode,Zl&&typeof Zl.onCommitFiberRoot=="function")try{Zl.onCommitFiberRoot(e1,a,void 0,(a.current.flags&64)===64)}catch{}if(eo(t,Ur()),Hm)throw Hm=!1,t=Fv,Fv=null,t;return(Pt&8)!==0||sa(),null}function Oz(){for(;mt!==null;){var t=mt.alternate;ym||zd===null||((mt.flags&8)!==0?Vw(mt,zd)&&(ym=!0):mt.tag===13&&kz(t,mt)&&Vw(mt,zd)&&(ym=!0));var n=mt.flags;(n&256)!==0&&Ez(t,mt),(n&512)===0||Vs||(Vs=!0,Hd(97,function(){return Hs(),null})),mt=mt.nextEffect}}function Hs(){if(_d!==90){var t=97<_d?97:_d;return _d=90,Xl(t,Dz)}return!1}function Lz(t,n){Nv.push(n,t),Vs||(Vs=!0,Hd(97,function(){return Hs(),null}))}function ZE(t,n){jv.push(n,t),Vs||(Vs=!0,Hd(97,function(){return Hs(),null}))}function Dz(){if(Pd===null)return!1;var t=Pd;if(Pd=null,(Pt&48)!==0)throw Error(tt(331));var n=Pt;Pt|=32;var a=jv;jv=[];for(var u=0;u<a.length;u+=2){var d=a[u],v=a[u+1],b=d.destroy;if(d.destroy=void 0,typeof b=="function")try{b()}catch(I){if(v===null)throw Error(tt(330));Bs(v,I)}}for(a=Nv,Nv=[],u=0;u<a.length;u+=2){d=a[u],v=a[u+1];try{var s=d.create;d.destroy=s()}catch(I){if(v===null)throw Error(tt(330));Bs(v,I)}}for(s=t.current.firstEffect;s!==null;)t=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=t;return Pt=n,sa(),!0}function G2(t,n,a){n=d1(a,n),n=RE(t,n,1),Ls(t,n),n=Li(),t=Ig(t,1),t!==null&&(xg(t,1,n),eo(t,n))}function Bs(t,n){if(t.tag===3)G2(t,t,n);else for(var a=t.return;a!==null;){if(a.tag===3){G2(a,t,n);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ta===null||!ta.has(u))){t=d1(n,t);var d=BE(a,t,1);if(Ls(a,d),d=Li(),a=Ig(a,1),a!==null)xg(a,1,d),eo(a,d);else if(typeof u.componentDidCatch=="function"&&(ta===null||!ta.has(u)))try{u.componentDidCatch(n,t)}catch{}break}}a=a.return}}function Rz(t,n,a){var u=t.pingCache;u!==null&&u.delete(n),n=Li(),t.pingedLanes|=t.suspendedLanes&a,ri===t&&($r&a)===a&&(Mr===4||Mr===3&&($r&62914560)===$r&&500>Ur()-m1?Mu(t,0):p1|=a),eo(t,n)}function Bz(t,n){var a=t.stateNode;a!==null&&a.delete(n),n=0,n===0&&(n=t.mode,(n&2)===0?n=1:(n&4)===0?n=Nu()===99?1:2:(Ea===0&&(Ea=Hu),n=fu(62914560&~Ea),n===0&&(n=4194304))),a=Li(),t=Ig(t,n),t!==null&&(xg(t,n,a),eo(t,a))}var WE;WE=function(t,n,a){var u=n.lanes;if(t!==null)if(t.memoizedProps!==n.pendingProps||bi.current)bo=!0;else if((a&u)!==0)bo=(t.flags&16384)!==0;else{switch(bo=!1,n.tag){case 3:P2(n),D_();break;case 5:b2(n);break;case 1:wi(n.type)&&fm(n);break;case 4:Cv(n,n.stateNode.containerInfo);break;case 10:u=n.memoizedProps.value;var d=n.type._context;rr(Rm,d._currentValue),d._currentValue=u;break;case 13:if(n.memoizedState!==null)return(a&n.child.childLanes)!==0?M2(t,n,a):(rr(nr,nr.current&1),n=ka(t,n,a),n!==null?n.sibling:null);rr(nr,nr.current&1);break;case 19:if(u=(a&n.childLanes)!==0,(t.flags&64)!==0){if(u)return R2(t,n,a);n.flags|=64}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),rr(nr,nr.current),u)break;return null;case 23:case 24:return n.lanes=0,R_(t,n,a)}return ka(t,n,a)}else bo=!1;switch(n.lanes=0,n.tag){case 2:if(u=n.type,t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),t=n.pendingProps,d=Fu(n,qr.current),Iu(n,a),d=l1(null,n,u,t,d,a),n.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0){if(n.tag=1,n.memoizedState=null,n.updateQueue=null,wi(u)){var v=!0;fm(n)}else v=!1;n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,i1(n);var b=u.getDerivedStateFromProps;typeof b=="function"&&Nm(n,u,b,t),d.updater=Cg,n.stateNode=d,d._reactInternals=n,Ev(n,u,t,a),n=Pv(null,n,u,!0,v,a)}else n.tag=0,vi(null,n,d,a),n=n.child;return n;case 16:d=n.elementType;e:{switch(t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),t=n.pendingProps,v=d._init,d=v(d._payload),n.type=d,v=n.tag=Nz(d),t=xo(d,t),v){case 0:n=Av(null,n,d,t,a);break e;case 1:n=A2(null,n,d,t,a);break e;case 11:n=k2(null,n,d,t,a);break e;case 14:n=I2(null,n,d,xo(d.type,t),u,a);break e}throw Error(tt(306,d,""))}return n;case 0:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:xo(u,d),Av(t,n,u,d,a);case 1:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:xo(u,d),A2(t,n,u,d,a);case 3:if(P2(n),u=n.updateQueue,t===null||u===null)throw Error(tt(282));if(u=n.pendingProps,d=n.memoizedState,d=d!==null?d.element:null,_E(t,n),Xd(n,u,null,a),u=n.memoizedState.element,u===d)D_(),n=ka(t,n,a);else{if(d=n.stateNode,(v=d.hydrate)&&(Es=ku(n.stateNode.containerInfo.firstChild),Ca=n,v=ia=!0),v){if(t=d.mutableSourceEagerHydrationData,t!=null)for(d=0;d<t.length;d+=2)v=t[d],v._workInProgressVersionPrimary=t[d+1],Au.push(v);for(a=wE(n,null,u,a),n.child=a;a;)a.flags=a.flags&-3|1024,a=a.sibling}else vi(t,n,u,a),D_();n=n.child}return n;case 5:return b2(n),t===null&&kv(n),u=n.type,d=n.pendingProps,v=t!==null?t.memoizedProps:null,b=d.children,bv(u,d)?b=null:v!==null&&bv(u,v)&&(n.flags|=16),zE(t,n),vi(t,n,b,a),n.child;case 6:return t===null&&kv(n),null;case 13:return M2(t,n,a);case 4:return Cv(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=jm(n,null,u,a):vi(t,n,u,a),n.child;case 11:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:xo(u,d),k2(t,n,u,d,a);case 7:return vi(t,n,n.pendingProps,a),n.child;case 8:return vi(t,n,n.pendingProps.children,a),n.child;case 12:return vi(t,n,n.pendingProps.children,a),n.child;case 10:e:{u=n.type._context,d=n.pendingProps,b=n.memoizedProps,v=d.value;var s=n.type._context;if(rr(Rm,s._currentValue),s._currentValue=v,b!==null)if(s=b.value,v=Yi(s,v)?0:(typeof u._calculateChangedBits=="function"?u._calculateChangedBits(s,v):1073741823)|0,v===0){if(b.children===d.children&&!bi.current){n=ka(t,n,a);break e}}else for(s=n.child,s!==null&&(s.return=n);s!==null;){var I=s.dependencies;if(I!==null){b=s.child;for(var F=I.firstContext;F!==null;){if(F.context===u&&(F.observedBits&v)!==0){s.tag===1&&(F=Os(-1,a&-a),F.tag=2,Ls(s,F)),s.lanes|=a,F=s.alternate,F!==null&&(F.lanes|=a),yE(s.return,a),I.lanes|=a;break}F=F.next}}else b=s.tag===10&&s.type===n.type?null:s.child;if(b!==null)b.return=s;else for(b=s;b!==null;){if(b===n){b=null;break}if(s=b.sibling,s!==null){s.return=b.return,b=s;break}b=b.return}s=b}vi(t,n,d.children,a),n=n.child}return n;case 9:return d=n.type,v=n.pendingProps,u=v.children,Iu(n,a),d=Qi(d,v.unstable_observedBits),u=u(d),n.flags|=1,vi(t,n,u,a),n.child;case 14:return d=n.type,v=xo(d,n.pendingProps),v=xo(d.type,v),I2(t,n,d,v,u,a);case 15:return ME(t,n,n.type,n.pendingProps,u,a);case 17:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:xo(u,d),t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2),n.tag=1,wi(u)?(t=!0,fm(n)):t=!1,Iu(n,a),xE(n,u,d),Ev(n,u,d,a),Pv(null,n,u,!0,t,a);case 19:return R2(t,n,a);case 23:return R_(t,n,a);case 24:return R_(t,n,a)}throw Error(tt(156,n.tag))};function Fz(t,n,a,u){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(t,n,a,u){return new Fz(t,n,a,u)}function y1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nz(t){if(typeof t=="function")return y1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yg)return 11;if(t===_g)return 14}return 2}function $s(t,n){var a=t.alternate;return a===null?(a=Ki(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null),a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function _m(t,n,a,u,d,v){var b=2;if(u=t,typeof t=="function")y1(t)&&(b=1);else if(typeof t=="string")b=5;else e:switch(t){case ws:return zu(a.children,d,v,n);case ST:b=8,d|=16;break;case O0:b=8,d|=1;break;case bd:return t=Ki(12,a,n,d|8),t.elementType=bd,t.type=bd,t.lanes=v,t;case wd:return t=Ki(13,a,n,d),t.type=wd,t.elementType=wd,t.lanes=v,t;case km:return t=Ki(19,a,n,d),t.elementType=km,t.lanes=v,t;case N0:return _1(a,d,v,n);case rv:return t=Ki(24,a,n,d),t.elementType=rv,t.lanes=v,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L0:b=10;break e;case D0:b=9;break e;case yg:b=11;break e;case _g:b=14;break e;case R0:b=16,u=null;break e;case B0:b=22;break e}throw Error(tt(130,t==null?t:typeof t,""))}return n=Ki(b,a,n,d),n.elementType=t,n.type=u,n.lanes=v,n}function zu(t,n,a,u){return t=Ki(7,t,u,n),t.lanes=a,t}function _1(t,n,a,u){return t=Ki(23,t,u,n),t.elementType=N0,t.lanes=a,t}function N_(t,n,a){return t=Ki(6,t,null,n),t.lanes=a,t}function j_(t,n,a){return n=Ki(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function jz(t,n,a){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=a,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=S_(0),this.expirationTimes=S_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S_(0),this.mutableSourceEagerHydrationData=null}function Uz(t,n,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jl,key:u==null?null:""+u,children:t,containerInfo:n,implementation:a}}function Xm(t,n,a,u){var d=n.current,v=Li(),b=Ds(d);e:if(a){a=a._reactInternals;t:{if(rc(a)!==a||a.tag!==1)throw Error(tt(170));var s=a;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(wi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(tt(171))}if(a.tag===1){var I=a.type;if(wi(I)){a=uE(a,I,s);break e}}a=s}else a=Us;return n.context===null?n.context=a:n.pendingContext=a,n=Os(v,b),n.payload={element:t},u=u===void 0?null:u,u!==null&&(n.callback=u),Ls(d,n),Rs(d,b,v),b}function U_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q2(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function v1(t,n){q2(t,n),(t=t.alternate)&&q2(t,n)}function Vz(){return null}function x1(t,n,a){var u=a!=null&&a.hydrationOptions!=null&&a.hydrationOptions.mutableSources||null;if(a=new jz(t,n,a!=null&&a.hydrate===!0),n=Ki(3,null,null,n===2?7:n===1?3:0),a.current=n,n.stateNode=a,i1(n),t[Wu]=a.current,oE(t.nodeType===8?t.parentNode:t),u)for(t=0;t<u.length;t++){n=u[t];var d=n._getVersion;d=d(n._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[n,d]:a.mutableSourceEagerHydrationData.push(n,d)}this._internalRoot=a}x1.prototype.render=function(t){Xm(t,this._internalRoot,null,null)};x1.prototype.unmount=function(){var t=this._internalRoot,n=t.containerInfo;Xm(null,t,null,function(){n[Wu]=null})};function hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $z(t,n){if(n||(n=t?t.nodeType===9?t.documentElement:t.firstChild:null,n=!(!n||n.nodeType!==1||!n.hasAttribute("data-reactroot"))),!n)for(var a;a=t.lastChild;)t.removeChild(a);return new x1(t,0,n?{hydrate:!0}:void 0)}function Ag(t,n,a,u,d){var v=a._reactRootContainer;if(v){var b=v._internalRoot;if(typeof d=="function"){var s=d;d=function(){var F=U_(b);s.call(F)}}Xm(n,b,t,d)}else{if(v=a._reactRootContainer=$z(a,u),b=v._internalRoot,typeof d=="function"){var I=d;d=function(){var F=U_(b);I.call(F)}}UE(function(){Xm(n,b,t,d)})}return U_(b)}FT=function(t){if(t.tag===13){var n=Li();Rs(t,4,n),v1(t,4)}};G0=function(t){if(t.tag===13){var n=Li();Rs(t,67108864,n),v1(t,67108864)}};NT=function(t){if(t.tag===13){var n=Li(),a=Ds(t);Rs(t,a,n),v1(t,a)}};jT=function(t,n){return n()};fv=function(t,n,a){switch(n){case"input":if(ov(t,a),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<a.length;n++){var u=a[n];if(u!==t&&u.form===t.form){var d=Tg(u);if(!d)throw Error(tt(90));ET(u),ov(u,d)}}}break;case"textarea":kT(t,a);break;case"select":n=a.value,n!=null&&Tu(t,!!a.multiple,n,!1)}};U0=jE;LT=function(t,n,a,u,d){var v=Pt;Pt|=4;try{return Xl(98,t.bind(null,n,a,u,d))}finally{Pt=v,Pt===0&&(Yu(),sa())}};V0=function(){(Pt&49)===0&&(Az(),Hs())};DT=function(t,n){var a=Pt;Pt|=2;try{return t(n)}finally{Pt=a,Pt===0&&(Yu(),sa())}};function HE(t,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hf(n))throw Error(tt(200));return Uz(t,n,null,a)}var Gz={Events:[lf,yu,Tg,zT,OT,Hs,{current:!1}]},fd={findFiberByHostInstance:Vl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},qz={bundleType:fd.bundleType,version:fd.version,rendererPackageName:fd.rendererPackageName,rendererConfig:fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BT(t),t===null?null:t.stateNode},findFiberByHostInstance:fd.findFiberByHostInstance||Vz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{e1=im.inject(qz),Zl=im}catch{}}no.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gz;no.createPortal=HE;no.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(tt(188)):Error(tt(268,Object.keys(t)));return t=BT(n),t=t===null?null:t.stateNode,t};no.flushSync=function(t,n){var a=Pt;if((a&48)!==0)return t(n);Pt|=1;try{if(t)return Xl(99,t.bind(null,n))}finally{Pt=a,sa()}};no.hydrate=function(t,n,a){if(!hf(n))throw Error(tt(200));return Ag(null,t,n,!0,a)};no.render=function(t,n,a){if(!hf(n))throw Error(tt(200));return Ag(null,t,n,!1,a)};no.unmountComponentAtNode=function(t){if(!hf(t))throw Error(tt(40));return t._reactRootContainer?(UE(function(){Ag(null,null,t,!1,function(){t._reactRootContainer=null,t[Wu]=null})}),!0):!1};no.unstable_batchedUpdates=jE;no.unstable_createPortal=function(t,n){return HE(t,n,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};no.unstable_renderSubtreeIntoContainer=function(t,n,a,u){if(!hf(a))throw Error(tt(200));if(t==null||t._reactInternals===void 0)throw Error(tt(38));return Ag(t,n,a,!1,u)};no.version="17.0.2";function XE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XE)}catch(t){console.error(t)}}XE(),vT.exports=no;var Zz=vT.exports;var YE="/assets/sertic_contorno.a8624762.png";var Wz={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},Hz,KE=_T.createContext();function Xz(){return Wz}var Yz=function(){function t(){Eo(this,t),this.usedNamespaces={}}return Co(t,[{key:"addUsedNamespaces",value:function(a){var u=this;a.forEach(function(d){u.usedNamespaces[d]||(u.usedNamespaces[d]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}();function Kz(){return Hz}function Jz(){if(console&&console.warn){for(var t,n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];typeof a[0]=="string"&&(a[0]="react-i18next:: ".concat(a[0])),(t=console).warn.apply(t,a)}}var Z2={};function $v(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];typeof n[0]=="string"&&Z2[n[0]]||(typeof n[0]=="string"&&(Z2[n[0]]=new Date),Jz.apply(void 0,n))}function W2(t,n,a){t.loadNamespaces(n,function(){if(t.isInitialized)a();else{var u=function d(){setTimeout(function(){t.off("initialized",d)},0),a()};t.on("initialized",u)}})}function Qz(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!n.languages||!n.languages.length)return $v("i18n.languages were undefined or empty",n.languages),!0;var u=n.languages[0],d=n.options?n.options.fallbackLng:!1,v=n.languages[n.languages.length-1];if(u.toLowerCase()==="cimode")return!0;var b=function(I,F){var W=n.services.backendConnector.state["".concat(I,"|").concat(F)];return W===-1||W===2};return a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!b(n.isLanguageChangingTo,t)?!1:!!(n.hasResourceBundle(u,t)||!n.services.backendConnector.backend||b(u,t)&&(!d||b(v,t)))}function e3(t,n){var a=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var u=[],d=!0,v=!1,b,s;try{for(a=a.call(t);!(d=(b=a.next()).done)&&(u.push(b.value),!(n&&u.length===n));d=!0);}catch(I){v=!0,s=I}finally{try{!d&&a.return!=null&&a.return()}finally{if(v)throw s}}return u}}function t3(t,n){return JS(t)||e3(t,n)||QS(t,n)||eT()}function H2(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function V_(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?H2(Object(a),!0).forEach(function(u){La(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H2(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Ku(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.i18n,u=In.exports.useContext(KE)||{},d=u.i18n,v=u.defaultNS,b=a||d||Kz();if(b&&!b.reportNamespaces&&(b.reportNamespaces=new Yz),!b){$v("You will need to pass in an i18next instance by using initReactI18next");var s=function(We){return Array.isArray(We)?We[We.length-1]:We},I=[s,{},!1];return I.t=s,I.i18n={},I.ready=!1,I}b.options.react&&b.options.react.wait!==void 0&&$v("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var F=V_(V_(V_({},Xz()),b.options.react),n),W=F.useSuspense,j=F.keyPrefix,Y=t||v||b.options&&b.options.defaultNS;Y=typeof Y=="string"?[Y]:Y||["translation"],b.reportNamespaces.addUsedNamespaces&&b.reportNamespaces.addUsedNamespaces(Y);var H=(b.isInitialized||b.initializedStoreOnce)&&Y.every(function(Ee){return Qz(Ee,b,F)});function be(){return b.getFixedT(null,F.nsMode==="fallback"?Y:Y[0],j)}var ge=In.exports.useState(be),Q=t3(ge,2),V=Q[0],J=Q[1],he=In.exports.useRef(!0);In.exports.useEffect(function(){var Ee=F.bindI18n,We=F.bindI18nStore;he.current=!0,!H&&!W&&W2(b,Y,function(){he.current&&J(be)});function Be(){he.current&&J(be)}return Ee&&b&&b.on(Ee,Be),We&&b&&b.store.on(We,Be),function(){he.current=!1,Ee&&b&&Ee.split(" ").forEach(function(Oe){return b.off(Oe,Be)}),We&&b&&We.split(" ").forEach(function(Oe){return b.store.off(Oe,Be)})}},[b,Y.join()]);var pe=In.exports.useRef(!0);In.exports.useEffect(function(){he.current&&!pe.current&&J(be),pe.current=!1},[b]);var ze=[V,b,H];if(ze.t=V,ze.i18n=b,ze.ready=H,H||!H&&!W)return ze;throw new Promise(function(Ee){W2(b,Y,function(){Ee()})})}function n3(t){var n=t.i18n,a=t.defaultNS,u=t.children,d=In.exports.useMemo(function(){return{i18n:n,defaultNS:a}},[n,a]);return In.exports.createElement(KE.Provider,{value:d},u)}var Pg={exports:{}},df={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3=In.exports,JE=60103;df.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var X2=Symbol.for;JE=X2("react.element"),df.Fragment=X2("react.fragment")}var i3=r3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o3=Object.prototype.hasOwnProperty,a3={key:!0,ref:!0,__self:!0,__source:!0};function QE(t,n,a){var u,d={},v=null,b=null;a!==void 0&&(v=""+a),n.key!==void 0&&(v=""+n.key),n.ref!==void 0&&(b=n.ref);for(u in n)o3.call(n,u)&&!a3.hasOwnProperty(u)&&(d[u]=n[u]);if(t&&t.defaultProps)for(u in n=t.defaultProps,n)d[u]===void 0&&(d[u]=n[u]);return{$$typeof:JE,type:t,key:v,ref:b,props:d,_owner:i3.current}}df.jsx=QE;df.jsxs=QE;Pg.exports=df;const Je=Pg.exports.jsx,xn=Pg.exports.jsxs,Mg=Pg.exports.Fragment,s3=()=>{const[t,n]=Ku("global"),{changeLanguage:a}=n,[u,d]=In.exports.useState("collapse navbar-collapse"),v=s=>{a(s),localStorage.setItem("language",s)},b=()=>{d(u==="collapse navbar-collapse"?"collapse navbar-collapse show":"collapse navbar-collapse")};return Je("div",{className:"fixed-top animate__animated animate__fadeInLeft",children:Je("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:xn("div",{className:"container-fluid",children:[Je("a",{className:"navbar-brand",href:"#",children:Je("img",{height:"40",src:YE,alt:"Logo SerTIC"})}),Je("button",{className:"navbar-toggler",onClick:b,type:"button",children:Je("span",{className:"navbar-toggler-icon"})}),Je("div",{className:u,id:"navbarSupportedContent",children:xn("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Je("li",{className:"nav-item",onClick:b,children:Je("a",{className:"nav-item nav-link active",href:"#inicio",children:t("sections.Home")})}),Je("li",{className:"nav-item",onClick:b,children:Je("a",{activeclassname:"active",className:"nav-item nav-link active",href:"#nosotros",children:t("sections.About")})}),Je("li",{className:"nav-item",onClick:b,children:Je("a",{activeclassname:"active",className:"nav-item nav-link active",href:"#servicios",children:t("sections.Services")})}),Je("li",{className:"nav-item",onClick:b,children:Je("a",{activeclassname:"active",className:"nav-item nav-link active",href:"#clientes",children:t("sections.Clients")})}),Je("li",{className:"nav-item",onClick:b,children:Je("a",{activeclassname:"active",className:"nav-item nav-link active",href:"#contacto",children:t("sections.Contact")})}),Je("li",{className:"nav-item",onClick:b,children:Je("a",{activeclassname:"active",className:"nav-item nav-link active",target:"blanck",href:"https://www.sertic.com.ar/glpi/",children:t("sections.Assistance")})}),xn("li",{className:"language m-3 d-flex nav-item",onClick:b,children:[Je("div",{onClick:()=>v("es"),children:"ES"}),"/",Je("div",{onClick:()=>v("en"),children:"EN"})]})]})})]})})})};const l3=()=>Je("div",{id:"inicio",className:"logo d-flex align-items-center justify-content-center vh-100",children:xn("figure",{className:"text-center",children:[Je("img",{className:"animate__animated animate__fadeInUp",src:YE,alt:"Logo SerTIC",width:"600"}),Je("hr",{style:{backgroundColor:"white"}}),Je("div",{className:"animate__animated animate__fadeInUp row",children:Je("a",{className:"m-1",href:"https://www.linkedin.com/company/sertic-soluciones-informaticas",target:"blanck",children:Je("button",{type:"button",className:"btn-primary",children:"LinkedIn"})})})]})});var c3="/assets/img-hector.0849a6e5.png",u3="/assets/sertic-image.f32475de.jpg";/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function Y2(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function ft(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Y2(Object(a),!0).forEach(function(u){f3(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y2(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Ym(t){return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ym(t)}function h3(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function K2(t,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function d3(t,n,a){return n&&K2(t.prototype,n),a&&K2(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function f3(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function b1(t,n){return m3(t)||y3(t,n)||eC(t,n)||v3()}function zg(t){return p3(t)||g3(t)||eC(t)||_3()}function p3(t){if(Array.isArray(t))return Gv(t)}function m3(t){if(Array.isArray(t))return t}function g3(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function y3(t,n){var a=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var u=[],d=!0,v=!1,b,s;try{for(a=a.call(t);!(d=(b=a.next()).done)&&(u.push(b.value),!(n&&u.length===n));d=!0);}catch(I){v=!0,s=I}finally{try{!d&&a.return!=null&&a.return()}finally{if(v)throw s}}return u}}function eC(t,n){if(!!t){if(typeof t=="string")return Gv(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Gv(t,n)}}function Gv(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,u=new Array(n);a<n;a++)u[a]=t[a];return u}function _3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J2=function(){},w1={},tC={},nC=null,rC={mark:J2,measure:J2};try{typeof window!="undefined"&&(w1=window),typeof document!="undefined"&&(tC=document),typeof MutationObserver!="undefined"&&(nC=MutationObserver),typeof performance!="undefined"&&(rC=performance)}catch{}var x3=w1.navigator||{},Q2=x3.userAgent,eS=Q2===void 0?"":Q2,Gs=w1,jn=tC,tS=nC,om=rC;Gs.document;var Ra=!!jn.documentElement&&!!jn.head&&typeof jn.addEventListener=="function"&&typeof jn.createElement=="function",iC=~eS.indexOf("MSIE")||~eS.indexOf("Trident/"),Ma="___FONT_AWESOME___",qv=16,oC="fa",aC="svg-inline--fa",Kl="data-fa-i2svg",Zv="data-fa-pseudo-element",b3="data-fa-pseudo-element-pending",S1="data-prefix",T1="data-icon",nS="fontawesome-i2svg",w3="async",S3=["HTML","HEAD","STYLE","SCRIPT"],sC=function(){try{return!0}catch{return!1}}(),E1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Km={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},lC={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},T3={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},E3=/fa[srltdbk\-\ ]/,cC="fa-layers-text",C3=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,k3={"900":"fas","400":"far",normal:"far","300":"fal","100":"fat"},uC=[1,2,3,4,5,6,7,8,9,10],I3=uC.concat([11,12,13,14,15,16,17,18,19,20]),A3=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],ql={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},P3=[].concat(zg(Object.keys(Km)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ql.GROUP,ql.SWAP_OPACITY,ql.PRIMARY,ql.SECONDARY]).concat(uC.map(function(t){return"".concat(t,"x")})).concat(I3.map(function(t){return"w-".concat(t)})),hC=Gs.FontAwesomeConfig||{};function M3(t){var n=jn.querySelector("script["+t+"]");if(n)return n.getAttribute(t)}function z3(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(jn&&typeof jn.querySelector=="function"){var O3=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];O3.forEach(function(t){var n=b1(t,2),a=n[0],u=n[1],d=z3(M3(a));d!=null&&(hC[u]=d)})}var L3={familyPrefix:oC,styleDefault:"solid",replacementClass:aC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Od=ft(ft({},L3),hC);Od.autoReplaceSvg||(Od.observeMutations=!1);var kt={};Object.keys(Od).forEach(function(t){Object.defineProperty(kt,t,{enumerable:!0,set:function(a){Od[t]=a,vm.forEach(function(u){return u(kt)})},get:function(){return Od[t]}})});Gs.FontAwesomeConfig=kt;var vm=[];function D3(t){return vm.push(t),function(){vm.splice(vm.indexOf(t),1)}}var vs=qv,na={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function R3(t){if(!(!t||!Ra)){var n=jn.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;for(var a=jn.head.childNodes,u=null,d=a.length-1;d>-1;d--){var v=a[d],b=(v.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(b)>-1&&(u=v)}return jn.head.insertBefore(n,u),t}}var B3="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Qd(){for(var t=12,n="";t-- >0;)n+=B3[Math.random()*62|0];return n}function Ju(t){for(var n=[],a=(t||[]).length>>>0;a--;)n[a]=t[a];return n}function C1(t){return t.classList?Ju(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(n){return n})}function dC(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function F3(t){return Object.keys(t||{}).reduce(function(n,a){return n+"".concat(a,'="').concat(dC(t[a]),'" ')},"").trim()}function Og(t){return Object.keys(t||{}).reduce(function(n,a){return n+"".concat(a,": ").concat(t[a].trim(),";")},"")}function k1(t){return t.size!==na.size||t.x!==na.x||t.y!==na.y||t.rotate!==na.rotate||t.flipX||t.flipY}function N3(t){var n=t.transform,a=t.containerWidth,u=t.iconWidth,d={transform:"translate(".concat(a/2," 256)")},v="translate(".concat(n.x*32,", ").concat(n.y*32,") "),b="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),s="rotate(".concat(n.rotate," 0 0)"),I={transform:"".concat(v," ").concat(b," ").concat(s)},F={transform:"translate(".concat(u/2*-1," -256)")};return{outer:d,inner:I,path:F}}function j3(t){var n=t.transform,a=t.width,u=a===void 0?qv:a,d=t.height,v=d===void 0?qv:d,b=t.startCentered,s=b===void 0?!1:b,I="";return s&&iC?I+="translate(".concat(n.x/vs-u/2,"em, ").concat(n.y/vs-v/2,"em) "):s?I+="translate(calc(-50% + ".concat(n.x/vs,"em), calc(-50% + ").concat(n.y/vs,"em)) "):I+="translate(".concat(n.x/vs,"em, ").concat(n.y/vs,"em) "),I+="scale(".concat(n.size/vs*(n.flipX?-1:1),", ").concat(n.size/vs*(n.flipY?-1:1),") "),I+="rotate(".concat(n.rotate,"deg) "),I}var U3=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function fC(){var t=oC,n=aC,a=kt.familyPrefix,u=kt.replacementClass,d=U3;if(a!==t||u!==n){var v=new RegExp("\\.".concat(t,"\\-"),"g"),b=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(n),"g");d=d.replace(v,".".concat(a,"-")).replace(b,"--".concat(a,"-")).replace(s,".".concat(u))}return d}var rS=!1;function $_(){kt.autoAddCss&&!rS&&(R3(fC()),rS=!0)}var V3={mixout:function(){return{dom:{css:fC,insertCss:$_}}},hooks:function(){return{beforeDOMElementCreation:function(){$_()},beforeI2svg:function(){$_()}}}},za=Gs||{};za[Ma]||(za[Ma]={});za[Ma].styles||(za[Ma].styles={});za[Ma].hooks||(za[Ma].hooks={});za[Ma].shims||(za[Ma].shims=[]);var wo=za[Ma],pC=[],$3=function t(){jn.removeEventListener("DOMContentLoaded",t),Jm=1,pC.map(function(n){return n()})},Jm=!1;Ra&&(Jm=(jn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(jn.readyState),Jm||jn.addEventListener("DOMContentLoaded",$3));function G3(t){!Ra||(Jm?setTimeout(t,0):pC.push(t))}function ff(t){var n=t.tag,a=t.attributes,u=a===void 0?{}:a,d=t.children,v=d===void 0?[]:d;return typeof t=="string"?dC(t):"<".concat(n," ").concat(F3(u),">").concat(v.map(ff).join(""),"</").concat(n,">")}function iS(t,n,a){if(t&&t[n]&&t[n][a])return{prefix:n,iconName:a,icon:t[n][a]}}var q3=function(n,a){return function(u,d,v,b){return n.call(a,u,d,v,b)}},G_=function(n,a,u,d){var v=Object.keys(n),b=v.length,s=d!==void 0?q3(a,d):a,I,F,W;for(u===void 0?(I=1,W=n[v[0]]):(I=0,W=u);I<b;I++)F=v[I],W=s(W,n[F],F,n);return W};function Z3(t){for(var n=[],a=0,u=t.length;a<u;){var d=t.charCodeAt(a++);if(d>=55296&&d<=56319&&a<u){var v=t.charCodeAt(a++);(v&64512)==56320?n.push(((d&1023)<<10)+(v&1023)+65536):(n.push(d),a--)}else n.push(d)}return n}function Wv(t){var n=Z3(t);return n.length===1?n[0].toString(16):null}function W3(t,n){var a=t.length,u=t.charCodeAt(n),d;return u>=55296&&u<=56319&&a>n+1&&(d=t.charCodeAt(n+1),d>=56320&&d<=57343)?(u-55296)*1024+d-56320+65536:u}function oS(t){return Object.keys(t).reduce(function(n,a){var u=t[a],d=!!u.icon;return d?n[u.iconName]=u.icon:n[a]=u,n},{})}function Hv(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=a.skipHooks,d=u===void 0?!1:u,v=oS(n);typeof wo.hooks.addPack=="function"&&!d?wo.hooks.addPack(t,oS(n)):wo.styles[t]=ft(ft({},wo.styles[t]||{}),v),t==="fas"&&Hv("fa",n)}var Ld=wo.styles,H3=wo.shims,X3=Object.values(lC),I1=null,mC={},gC={},yC={},_C={},vC={},Y3=Object.keys(E1);function K3(t){return~P3.indexOf(t)}function J3(t,n){var a=n.split("-"),u=a[0],d=a.slice(1).join("-");return u===t&&d!==""&&!K3(d)?d:null}var xC=function(){var n=function(v){return G_(Ld,function(b,s,I){return b[I]=G_(s,v,{}),b},{})};mC=n(function(d,v,b){if(v[3]&&(d[v[3]]=b),v[2]){var s=v[2].filter(function(I){return typeof I=="number"});s.forEach(function(I){d[I.toString(16)]=b})}return d}),gC=n(function(d,v,b){if(d[b]=b,v[2]){var s=v[2].filter(function(I){return typeof I=="string"});s.forEach(function(I){d[I]=b})}return d}),vC=n(function(d,v,b){var s=v[2];return d[b]=b,s.forEach(function(I){d[I]=b}),d});var a="far"in Ld||kt.autoFetchSvg,u=G_(H3,function(d,v){var b=v[0],s=v[1],I=v[2];return s==="far"&&!a&&(s="fas"),typeof b=="string"&&(d.names[b]={prefix:s,iconName:I}),typeof b=="number"&&(d.unicodes[b.toString(16)]={prefix:s,iconName:I}),d},{names:{},unicodes:{}});yC=u.names,_C=u.unicodes,I1=Lg(kt.styleDefault)};D3(function(t){I1=Lg(t.styleDefault)});xC();function A1(t,n){return(mC[t]||{})[n]}function Q3(t,n){return(gC[t]||{})[n]}function xu(t,n){return(vC[t]||{})[n]}function bC(t){return yC[t]||{prefix:null,iconName:null}}function eO(t){var n=_C[t],a=A1("fas",t);return n||(a?{prefix:"fas",iconName:a}:null)||{prefix:null,iconName:null}}function qs(){return I1}var P1=function(){return{prefix:null,iconName:null,rest:[]}};function Lg(t){var n=E1[t],a=Km[t]||Km[n],u=t in wo.styles?t:null;return a||u||null}function Dg(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.skipLookups,u=a===void 0?!1:a,d=null,v=t.reduce(function(b,s){var I=J3(kt.familyPrefix,s);if(Ld[s]?(s=X3.includes(s)?T3[s]:s,d=s,b.prefix=s):Y3.indexOf(s)>-1?(d=s,b.prefix=Lg(s)):I?b.iconName=I:s!==kt.replacementClass&&b.rest.push(s),!u&&b.prefix&&b.iconName){var F=d==="fa"?bC(b.iconName):{},W=xu(b.prefix,b.iconName);F.prefix&&(d=null),b.iconName=F.iconName||W||b.iconName,b.prefix=F.prefix||b.prefix,b.prefix==="far"&&!Ld.far&&Ld.fas&&!kt.autoFetchSvg&&(b.prefix="fas")}return b},P1());return(v.prefix==="fa"||d==="fa")&&(v.prefix=qs()||"fas"),v}var tO=function(){function t(){h3(this,t),this.definitions={}}return d3(t,[{key:"add",value:function(){for(var a=this,u=arguments.length,d=new Array(u),v=0;v<u;v++)d[v]=arguments[v];var b=d.reduce(this._pullDefinitions,{});Object.keys(b).forEach(function(s){a.definitions[s]=ft(ft({},a.definitions[s]||{}),b[s]),Hv(s,b[s]);var I=lC[s];I&&Hv(I,b[s]),xC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(a,u){var d=u.prefix&&u.iconName&&u.icon?{0:u}:u;return Object.keys(d).map(function(v){var b=d[v],s=b.prefix,I=b.iconName,F=b.icon,W=F[2];a[s]||(a[s]={}),W.length>0&&W.forEach(function(j){typeof j=="string"&&(a[s][j]=F)}),a[s][I]=F}),a}}]),t}(),aS=[],bu={},Ou={},nO=Object.keys(Ou);function rO(t,n){var a=n.mixoutsTo;return aS=t,bu={},Object.keys(Ou).forEach(function(u){nO.indexOf(u)===-1&&delete Ou[u]}),aS.forEach(function(u){var d=u.mixout?u.mixout():{};if(Object.keys(d).forEach(function(b){typeof d[b]=="function"&&(a[b]=d[b]),Ym(d[b])==="object"&&Object.keys(d[b]).forEach(function(s){a[b]||(a[b]={}),a[b][s]=d[b][s]})}),u.hooks){var v=u.hooks();Object.keys(v).forEach(function(b){bu[b]||(bu[b]=[]),bu[b].push(v[b])})}u.provides&&u.provides(Ou)}),a}function Xv(t,n){for(var a=arguments.length,u=new Array(a>2?a-2:0),d=2;d<a;d++)u[d-2]=arguments[d];var v=bu[t]||[];return v.forEach(function(b){n=b.apply(null,[n].concat(u))}),n}function Jl(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),u=1;u<n;u++)a[u-1]=arguments[u];var d=bu[t]||[];d.forEach(function(v){v.apply(null,a)})}function Oa(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);return Ou[t]?Ou[t].apply(null,n):void 0}function Yv(t){t.prefix==="fa"&&(t.prefix="fas");var n=t.iconName,a=t.prefix||qs();if(!!n)return n=xu(a,n)||n,iS(wC.definitions,a,n)||iS(wo.styles,a,n)}var wC=new tO,iO=function(){kt.autoReplaceSvg=!1,kt.observeMutations=!1,Jl("noAuto")},oO={i2svg:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ra?(Jl("beforeI2svg",n),Oa("pseudoElements2svg",n),Oa("i2svg",n)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.autoReplaceSvgRoot;kt.autoReplaceSvg===!1&&(kt.autoReplaceSvg=!0),kt.observeMutations=!0,G3(function(){sO({autoReplaceSvgRoot:a}),Jl("watch",n)})}},aO={icon:function(n){if(n===null)return null;if(Ym(n)==="object"&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:xu(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&n.length===2){var a=n[1].indexOf("fa-")===0?n[1].slice(3):n[1],u=Lg(n[0]);return{prefix:u,iconName:xu(u,a)||a}}if(typeof n=="string"&&(n.indexOf("".concat(kt.familyPrefix,"-"))>-1||n.match(E3))){var d=Dg(n.split(" "),{skipLookups:!0});return{prefix:d.prefix||qs(),iconName:xu(d.prefix,d.iconName)||d.iconName}}if(typeof n=="string"){var v=qs();return{prefix:v,iconName:xu(v,n)||n}}}},Fi={noAuto:iO,config:kt,dom:oO,parse:aO,library:wC,findIconDefinition:Yv,toHtml:ff},sO=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.autoReplaceSvgRoot,u=a===void 0?jn:a;(Object.keys(wo.styles).length>0||kt.autoFetchSvg)&&Ra&&kt.autoReplaceSvg&&Fi.dom.i2svg({node:u})};function Rg(t,n){return Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(u){return ff(u)})}}),Object.defineProperty(t,"node",{get:function(){if(!!Ra){var u=jn.createElement("div");return u.innerHTML=t.html,u.children}}}),t}function lO(t){var n=t.children,a=t.main,u=t.mask,d=t.attributes,v=t.styles,b=t.transform;if(k1(b)&&a.found&&!u.found){var s=a.width,I=a.height,F={x:s/I/2,y:.5};d.style=Og(ft(ft({},v),{},{"transform-origin":"".concat(F.x+b.x/16,"em ").concat(F.y+b.y/16,"em")}))}return[{tag:"svg",attributes:d,children:n}]}function cO(t){var n=t.prefix,a=t.iconName,u=t.children,d=t.attributes,v=t.symbol,b=v===!0?"".concat(n,"-").concat(kt.familyPrefix,"-").concat(a):v;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ft(ft({},d),{},{id:b}),children:u}]}]}function M1(t){var n=t.icons,a=n.main,u=n.mask,d=t.prefix,v=t.iconName,b=t.transform,s=t.symbol,I=t.title,F=t.maskId,W=t.titleId,j=t.extra,Y=t.watchable,H=Y===void 0?!1:Y,be=u.found?u:a,ge=be.width,Q=be.height,V=d==="fak",J=[kt.replacementClass,v?"".concat(kt.familyPrefix,"-").concat(v):""].filter(function(Oe){return j.classes.indexOf(Oe)===-1}).filter(function(Oe){return Oe!==""||!!Oe}).concat(j.classes).join(" "),he={children:[],attributes:ft(ft({},j.attributes),{},{"data-prefix":d,"data-icon":v,class:J,role:j.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(ge," ").concat(Q)})},pe=V&&!~j.classes.indexOf("fa-fw")?{width:"".concat(ge/Q*16*.0625,"em")}:{};H&&(he.attributes[Kl]=""),I&&(he.children.push({tag:"title",attributes:{id:he.attributes["aria-labelledby"]||"title-".concat(W||Qd())},children:[I]}),delete he.attributes.title);var ze=ft(ft({},he),{},{prefix:d,iconName:v,main:a,mask:u,maskId:F,transform:b,symbol:s,styles:ft(ft({},pe),j.styles)}),Ee=u.found&&a.found?Oa("generateAbstractMask",ze)||{children:[],attributes:{}}:Oa("generateAbstractIcon",ze)||{children:[],attributes:{}},We=Ee.children,Be=Ee.attributes;return ze.children=We,ze.attributes=Be,s?cO(ze):lO(ze)}function sS(t){var n=t.content,a=t.width,u=t.height,d=t.transform,v=t.title,b=t.extra,s=t.watchable,I=s===void 0?!1:s,F=ft(ft(ft({},b.attributes),v?{title:v}:{}),{},{class:b.classes.join(" ")});I&&(F[Kl]="");var W=ft({},b.styles);k1(d)&&(W.transform=j3({transform:d,startCentered:!0,width:a,height:u}),W["-webkit-transform"]=W.transform);var j=Og(W);j.length>0&&(F.style=j);var Y=[];return Y.push({tag:"span",attributes:F,children:[n]}),v&&Y.push({tag:"span",attributes:{class:"sr-only"},children:[v]}),Y}function uO(t){var n=t.content,a=t.title,u=t.extra,d=ft(ft(ft({},u.attributes),a?{title:a}:{}),{},{class:u.classes.join(" ")}),v=Og(u.styles);v.length>0&&(d.style=v);var b=[];return b.push({tag:"span",attributes:d,children:[n]}),a&&b.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),b}var q_=wo.styles;function Kv(t){var n=t[0],a=t[1],u=t.slice(4),d=b1(u,1),v=d[0],b=null;return Array.isArray(v)?b={tag:"g",attributes:{class:"".concat(kt.familyPrefix,"-").concat(ql.GROUP)},children:[{tag:"path",attributes:{class:"".concat(kt.familyPrefix,"-").concat(ql.SECONDARY),fill:"currentColor",d:v[0]}},{tag:"path",attributes:{class:"".concat(kt.familyPrefix,"-").concat(ql.PRIMARY),fill:"currentColor",d:v[1]}}]}:b={tag:"path",attributes:{fill:"currentColor",d:v}},{found:!0,width:n,height:a,icon:b}}var hO={found:!1,width:512,height:512};function dO(t,n){!sC&&!kt.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(n,'" is missing.'))}function Jv(t,n){var a=n;return n==="fa"&&kt.styleDefault!==null&&(n=qs()),new Promise(function(u,d){if(Oa("missingIconAbstract"),a==="fa"){var v=bC(t)||{};t=v.iconName||t,n=v.prefix||n}if(t&&n&&q_[n]&&q_[n][t]){var b=q_[n][t];return u(Kv(b))}dO(t,n),u(ft(ft({},hO),{},{icon:kt.showMissingIcons&&t?Oa("missingIconAbstract")||{}:{}}))})}var lS=function(){},Qv=kt.measurePerformance&&om&&om.mark&&om.measure?om:{mark:lS,measure:lS},xd='FA "6.1.1"',fO=function(n){return Qv.mark("".concat(xd," ").concat(n," begins")),function(){return SC(n)}},SC=function(n){Qv.mark("".concat(xd," ").concat(n," ends")),Qv.measure("".concat(xd," ").concat(n),"".concat(xd," ").concat(n," begins"),"".concat(xd," ").concat(n," ends"))},z1={begin:fO,end:SC},xm=function(){};function cS(t){var n=t.getAttribute?t.getAttribute(Kl):null;return typeof n=="string"}function pO(t){var n=t.getAttribute?t.getAttribute(S1):null,a=t.getAttribute?t.getAttribute(T1):null;return n&&a}function mO(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(kt.replacementClass)}function gO(){if(kt.autoReplaceSvg===!0)return bm.replace;var t=bm[kt.autoReplaceSvg];return t||bm.replace}function yO(t){return jn.createElementNS("http://www.w3.org/2000/svg",t)}function _O(t){return jn.createElement(t)}function TC(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.ceFn,u=a===void 0?t.tag==="svg"?yO:_O:a;if(typeof t=="string")return jn.createTextNode(t);var d=u(t.tag);Object.keys(t.attributes||[]).forEach(function(b){d.setAttribute(b,t.attributes[b])});var v=t.children||[];return v.forEach(function(b){d.appendChild(TC(b,{ceFn:u}))}),d}function vO(t){var n=" ".concat(t.outerHTML," ");return n="".concat(n,"Font Awesome fontawesome.com "),n}var bm={replace:function(n){var a=n[0];if(a.parentNode)if(n[1].forEach(function(d){a.parentNode.insertBefore(TC(d),a)}),a.getAttribute(Kl)===null&&kt.keepOriginalSource){var u=jn.createComment(vO(a));a.parentNode.replaceChild(u,a)}else a.remove()},nest:function(n){var a=n[0],u=n[1];if(~C1(a).indexOf(kt.replacementClass))return bm.replace(n);var d=new RegExp("".concat(kt.familyPrefix,"-.*"));if(delete u[0].attributes.id,u[0].attributes.class){var v=u[0].attributes.class.split(" ").reduce(function(s,I){return I===kt.replacementClass||I.match(d)?s.toSvg.push(I):s.toNode.push(I),s},{toNode:[],toSvg:[]});u[0].attributes.class=v.toSvg.join(" "),v.toNode.length===0?a.removeAttribute("class"):a.setAttribute("class",v.toNode.join(" "))}var b=u.map(function(s){return ff(s)}).join(`
`);a.setAttribute(Kl,""),a.innerHTML=b}};function uS(t){t()}function EC(t,n){var a=typeof n=="function"?n:xm;if(t.length===0)a();else{var u=uS;kt.mutateApproach===w3&&(u=Gs.requestAnimationFrame||uS),u(function(){var d=gO(),v=z1.begin("mutate");t.map(d),v(),a()})}}var O1=!1;function CC(){O1=!0}function e0(){O1=!1}var Qm=null;function hS(t){if(!!tS&&!!kt.observeMutations){var n=t.treeCallback,a=n===void 0?xm:n,u=t.nodeCallback,d=u===void 0?xm:u,v=t.pseudoElementsCallback,b=v===void 0?xm:v,s=t.observeMutationsRoot,I=s===void 0?jn:s;Qm=new tS(function(F){if(!O1){var W=qs();Ju(F).forEach(function(j){if(j.type==="childList"&&j.addedNodes.length>0&&!cS(j.addedNodes[0])&&(kt.searchPseudoElements&&b(j.target),a(j.target)),j.type==="attributes"&&j.target.parentNode&&kt.searchPseudoElements&&b(j.target.parentNode),j.type==="attributes"&&cS(j.target)&&~A3.indexOf(j.attributeName))if(j.attributeName==="class"&&pO(j.target)){var Y=Dg(C1(j.target)),H=Y.prefix,be=Y.iconName;j.target.setAttribute(S1,H||W),be&&j.target.setAttribute(T1,be)}else mO(j.target)&&d(j.target)})}}),Ra&&Qm.observe(I,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function xO(){!Qm||Qm.disconnect()}function bO(t){var n=t.getAttribute("style"),a=[];return n&&(a=n.split(";").reduce(function(u,d){var v=d.split(":"),b=v[0],s=v.slice(1);return b&&s.length>0&&(u[b]=s.join(":").trim()),u},{})),a}function wO(t){var n=t.getAttribute("data-prefix"),a=t.getAttribute("data-icon"),u=t.innerText!==void 0?t.innerText.trim():"",d=Dg(C1(t));return d.prefix||(d.prefix=qs()),n&&a&&(d.prefix=n,d.iconName=a),d.iconName&&d.prefix||d.prefix&&u.length>0&&(d.iconName=Q3(d.prefix,t.innerText)||A1(d.prefix,Wv(t.innerText))),d}function SO(t){var n=Ju(t.attributes).reduce(function(d,v){return d.name!=="class"&&d.name!=="style"&&(d[v.name]=v.value),d},{}),a=t.getAttribute("title"),u=t.getAttribute("data-fa-title-id");return kt.autoA11y&&(a?n["aria-labelledby"]="".concat(kt.replacementClass,"-title-").concat(u||Qd()):(n["aria-hidden"]="true",n.focusable="false")),n}function TO(){return{iconName:null,title:null,titleId:null,prefix:null,transform:na,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function dS(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},a=wO(t),u=a.iconName,d=a.prefix,v=a.rest,b=SO(t),s=Xv("parseNodeAttributes",{},t),I=n.styleParser?bO(t):[];return ft({iconName:u,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:d,transform:na,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:v,styles:I,attributes:b}},s)}var EO=wo.styles;function kC(t){var n=kt.autoReplaceSvg==="nest"?dS(t,{styleParser:!1}):dS(t);return~n.extra.classes.indexOf(cC)?Oa("generateLayersText",t,n):Oa("generateSvgReplacementMutation",t,n)}function fS(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ra)return Promise.resolve();var a=jn.documentElement.classList,u=function(j){return a.add("".concat(nS,"-").concat(j))},d=function(j){return a.remove("".concat(nS,"-").concat(j))},v=kt.autoFetchSvg?Object.keys(E1):Object.keys(EO),b=[".".concat(cC,":not([").concat(Kl,"])")].concat(v.map(function(W){return".".concat(W,":not([").concat(Kl,"])")})).join(", ");if(b.length===0)return Promise.resolve();var s=[];try{s=Ju(t.querySelectorAll(b))}catch{}if(s.length>0)u("pending"),d("complete");else return Promise.resolve();var I=z1.begin("onTree"),F=s.reduce(function(W,j){try{var Y=kC(j);Y&&W.push(Y)}catch(H){sC||H.name==="MissingIcon"&&console.error(H)}return W},[]);return new Promise(function(W,j){Promise.all(F).then(function(Y){EC(Y,function(){u("active"),u("complete"),d("pending"),typeof n=="function"&&n(),I(),W()})}).catch(function(Y){I(),j(Y)})})}function CO(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;kC(t).then(function(a){a&&EC([a],n)})}function kO(t){return function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=(n||{}).icon?n:Yv(n||{}),d=a.mask;return d&&(d=(d||{}).icon?d:Yv(d||{})),t(u,ft(ft({},a),{},{mask:d}))}}var IO=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=a.transform,d=u===void 0?na:u,v=a.symbol,b=v===void 0?!1:v,s=a.mask,I=s===void 0?null:s,F=a.maskId,W=F===void 0?null:F,j=a.title,Y=j===void 0?null:j,H=a.titleId,be=H===void 0?null:H,ge=a.classes,Q=ge===void 0?[]:ge,V=a.attributes,J=V===void 0?{}:V,he=a.styles,pe=he===void 0?{}:he;if(!!n){var ze=n.prefix,Ee=n.iconName,We=n.icon;return Rg(ft({type:"icon"},n),function(){return Jl("beforeDOMElementCreation",{iconDefinition:n,params:a}),kt.autoA11y&&(Y?J["aria-labelledby"]="".concat(kt.replacementClass,"-title-").concat(be||Qd()):(J["aria-hidden"]="true",J.focusable="false")),M1({icons:{main:Kv(We),mask:I?Kv(I.icon):{found:!1,width:null,height:null,icon:{}}},prefix:ze,iconName:Ee,transform:ft(ft({},na),d),symbol:b,title:Y,maskId:W,titleId:be,extra:{attributes:J,styles:pe,classes:Q}})})}},AO={mixout:function(){return{icon:kO(IO)}},hooks:function(){return{mutationObserverCallbacks:function(a){return a.treeCallback=fS,a.nodeCallback=CO,a}}},provides:function(n){n.i2svg=function(a){var u=a.node,d=u===void 0?jn:u,v=a.callback,b=v===void 0?function(){}:v;return fS(d,b)},n.generateSvgReplacementMutation=function(a,u){var d=u.iconName,v=u.title,b=u.titleId,s=u.prefix,I=u.transform,F=u.symbol,W=u.mask,j=u.maskId,Y=u.extra;return new Promise(function(H,be){Promise.all([Jv(d,s),W.iconName?Jv(W.iconName,W.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(ge){var Q=b1(ge,2),V=Q[0],J=Q[1];H([a,M1({icons:{main:V,mask:J},prefix:s,iconName:d,transform:I,symbol:F,maskId:j,title:v,titleId:b,extra:Y,watchable:!0})])}).catch(be)})},n.generateAbstractIcon=function(a){var u=a.children,d=a.attributes,v=a.main,b=a.transform,s=a.styles,I=Og(s);I.length>0&&(d.style=I);var F;return k1(b)&&(F=Oa("generateAbstractTransformGrouping",{main:v,transform:b,containerWidth:v.width,iconWidth:v.width})),u.push(F||v.icon),{children:u,attributes:d}}}},PO={mixout:function(){return{layer:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=u.classes,v=d===void 0?[]:d;return Rg({type:"layer"},function(){Jl("beforeDOMElementCreation",{assembler:a,params:u});var b=[];return a(function(s){Array.isArray(s)?s.map(function(I){b=b.concat(I.abstract)}):b=b.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(kt.familyPrefix,"-layers")].concat(zg(v)).join(" ")},children:b}]})}}}},MO={mixout:function(){return{counter:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=u.title,v=d===void 0?null:d,b=u.classes,s=b===void 0?[]:b,I=u.attributes,F=I===void 0?{}:I,W=u.styles,j=W===void 0?{}:W;return Rg({type:"counter",content:a},function(){return Jl("beforeDOMElementCreation",{content:a,params:u}),uO({content:a.toString(),title:v,extra:{attributes:F,styles:j,classes:["".concat(kt.familyPrefix,"-layers-counter")].concat(zg(s))}})})}}}},zO={mixout:function(){return{text:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=u.transform,v=d===void 0?na:d,b=u.title,s=b===void 0?null:b,I=u.classes,F=I===void 0?[]:I,W=u.attributes,j=W===void 0?{}:W,Y=u.styles,H=Y===void 0?{}:Y;return Rg({type:"text",content:a},function(){return Jl("beforeDOMElementCreation",{content:a,params:u}),sS({content:a,transform:ft(ft({},na),v),title:s,extra:{attributes:j,styles:H,classes:["".concat(kt.familyPrefix,"-layers-text")].concat(zg(F))}})})}}},provides:function(n){n.generateLayersText=function(a,u){var d=u.title,v=u.transform,b=u.extra,s=null,I=null;if(iC){var F=parseInt(getComputedStyle(a).fontSize,10),W=a.getBoundingClientRect();s=W.width/F,I=W.height/F}return kt.autoA11y&&!d&&(b.attributes["aria-hidden"]="true"),Promise.resolve([a,sS({content:a.innerHTML,width:s,height:I,transform:v,title:d,extra:b,watchable:!0})])}}},OO=new RegExp('"',"ug"),pS=[1105920,1112319];function LO(t){var n=t.replace(OO,""),a=W3(n,0),u=a>=pS[0]&&a<=pS[1],d=n.length===2?n[0]===n[1]:!1;return{value:Wv(d?n[0]:n),isSecondary:u||d}}function mS(t,n){var a="".concat(b3).concat(n.replace(":","-"));return new Promise(function(u,d){if(t.getAttribute(a)!==null)return u();var v=Ju(t.children),b=v.filter(function(Ee){return Ee.getAttribute(Zv)===n})[0],s=Gs.getComputedStyle(t,n),I=s.getPropertyValue("font-family").match(C3),F=s.getPropertyValue("font-weight"),W=s.getPropertyValue("content");if(b&&!I)return t.removeChild(b),u();if(I&&W!=="none"&&W!==""){var j=s.getPropertyValue("content"),Y=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(I[2])?Km[I[2].toLowerCase()]:k3[F],H=LO(j),be=H.value,ge=H.isSecondary,Q=I[0].startsWith("FontAwesome"),V=A1(Y,be),J=V;if(Q){var he=eO(be);he.iconName&&he.prefix&&(V=he.iconName,Y=he.prefix)}if(V&&!ge&&(!b||b.getAttribute(S1)!==Y||b.getAttribute(T1)!==J)){t.setAttribute(a,J),b&&t.removeChild(b);var pe=TO(),ze=pe.extra;ze.attributes[Zv]=n,Jv(V,Y).then(function(Ee){var We=M1(ft(ft({},pe),{},{icons:{main:Ee,mask:P1()},prefix:Y,iconName:J,extra:ze,watchable:!0})),Be=jn.createElement("svg");n==="::before"?t.insertBefore(Be,t.firstChild):t.appendChild(Be),Be.outerHTML=We.map(function(Oe){return ff(Oe)}).join(`
`),t.removeAttribute(a),u()}).catch(d)}else u()}else u()})}function DO(t){return Promise.all([mS(t,"::before"),mS(t,"::after")])}function RO(t){return t.parentNode!==document.head&&!~S3.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(Zv)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function gS(t){if(!!Ra)return new Promise(function(n,a){var u=Ju(t.querySelectorAll("*")).filter(RO).map(DO),d=z1.begin("searchPseudoElements");CC(),Promise.all(u).then(function(){d(),e0(),n()}).catch(function(){d(),e0(),a()})})}var BO={hooks:function(){return{mutationObserverCallbacks:function(a){return a.pseudoElementsCallback=gS,a}}},provides:function(n){n.pseudoElements2svg=function(a){var u=a.node,d=u===void 0?jn:u;kt.searchPseudoElements&&gS(d)}}},yS=!1,FO={mixout:function(){return{dom:{unwatch:function(){CC(),yS=!0}}}},hooks:function(){return{bootstrap:function(){hS(Xv("mutationObserverCallbacks",{}))},noAuto:function(){xO()},watch:function(a){var u=a.observeMutationsRoot;yS?e0():hS(Xv("mutationObserverCallbacks",{observeMutationsRoot:u}))}}}},_S=function(n){var a={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n.toLowerCase().split(" ").reduce(function(u,d){var v=d.toLowerCase().split("-"),b=v[0],s=v.slice(1).join("-");if(b&&s==="h")return u.flipX=!0,u;if(b&&s==="v")return u.flipY=!0,u;if(s=parseFloat(s),isNaN(s))return u;switch(b){case"grow":u.size=u.size+s;break;case"shrink":u.size=u.size-s;break;case"left":u.x=u.x-s;break;case"right":u.x=u.x+s;break;case"up":u.y=u.y-s;break;case"down":u.y=u.y+s;break;case"rotate":u.rotate=u.rotate+s;break}return u},a)},NO={mixout:function(){return{parse:{transform:function(a){return _S(a)}}}},hooks:function(){return{parseNodeAttributes:function(a,u){var d=u.getAttribute("data-fa-transform");return d&&(a.transform=_S(d)),a}}},provides:function(n){n.generateAbstractTransformGrouping=function(a){var u=a.main,d=a.transform,v=a.containerWidth,b=a.iconWidth,s={transform:"translate(".concat(v/2," 256)")},I="translate(".concat(d.x*32,", ").concat(d.y*32,") "),F="scale(".concat(d.size/16*(d.flipX?-1:1),", ").concat(d.size/16*(d.flipY?-1:1),") "),W="rotate(".concat(d.rotate," 0 0)"),j={transform:"".concat(I," ").concat(F," ").concat(W)},Y={transform:"translate(".concat(b/2*-1," -256)")},H={outer:s,inner:j,path:Y};return{tag:"g",attributes:ft({},H.outer),children:[{tag:"g",attributes:ft({},H.inner),children:[{tag:u.icon.tag,children:u.icon.children,attributes:ft(ft({},u.icon.attributes),H.path)}]}]}}}},Z_={x:0,y:0,width:"100%",height:"100%"};function vS(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||n)&&(t.attributes.fill="black"),t}function jO(t){return t.tag==="g"?t.children:[t]}var UO={hooks:function(){return{parseNodeAttributes:function(a,u){var d=u.getAttribute("data-fa-mask"),v=d?Dg(d.split(" ").map(function(b){return b.trim()})):P1();return v.prefix||(v.prefix=qs()),a.mask=v,a.maskId=u.getAttribute("data-fa-mask-id"),a}}},provides:function(n){n.generateAbstractMask=function(a){var u=a.children,d=a.attributes,v=a.main,b=a.mask,s=a.maskId,I=a.transform,F=v.width,W=v.icon,j=b.width,Y=b.icon,H=N3({transform:I,containerWidth:j,iconWidth:F}),be={tag:"rect",attributes:ft(ft({},Z_),{},{fill:"white"})},ge=W.children?{children:W.children.map(vS)}:{},Q={tag:"g",attributes:ft({},H.inner),children:[vS(ft({tag:W.tag,attributes:ft(ft({},W.attributes),H.path)},ge))]},V={tag:"g",attributes:ft({},H.outer),children:[Q]},J="mask-".concat(s||Qd()),he="clip-".concat(s||Qd()),pe={tag:"mask",attributes:ft(ft({},Z_),{},{id:J,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[be,V]},ze={tag:"defs",children:[{tag:"clipPath",attributes:{id:he},children:jO(Y)},pe]};return u.push(ze,{tag:"rect",attributes:ft({fill:"currentColor","clip-path":"url(#".concat(he,")"),mask:"url(#".concat(J,")")},Z_)}),{children:u,attributes:d}}}},VO={provides:function(n){var a=!1;Gs.matchMedia&&(a=Gs.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){var u=[],d={fill:"currentColor"},v={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};u.push({tag:"path",attributes:ft(ft({},d),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var b=ft(ft({},v),{},{attributeName:"opacity"}),s={tag:"circle",attributes:ft(ft({},d),{},{cx:"256",cy:"364",r:"28"}),children:[]};return a||s.children.push({tag:"animate",attributes:ft(ft({},v),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ft(ft({},b),{},{values:"1;0;1;1;0;1;"})}),u.push(s),u.push({tag:"path",attributes:ft(ft({},d),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:a?[]:[{tag:"animate",attributes:ft(ft({},b),{},{values:"1;0;0;0;0;1;"})}]}),a||u.push({tag:"path",attributes:ft(ft({},d),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ft(ft({},b),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:u}}}},$O={hooks:function(){return{parseNodeAttributes:function(a,u){var d=u.getAttribute("data-fa-symbol"),v=d===null?!1:d===""?!0:d;return a.symbol=v,a}}}},GO=[V3,AO,PO,MO,zO,BO,FO,NO,UO,VO,$O];rO(GO,{mixoutsTo:Fi});Fi.noAuto;Fi.config;Fi.library;Fi.dom;var t0=Fi.parse;Fi.findIconDefinition;Fi.toHtml;var qO=Fi.icon;Fi.layer;Fi.text;Fi.counter;var IC={exports:{}},ZO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WO=ZO,HO=WO;function AC(){}function PC(){}PC.resetWarningCache=AC;var XO=function(){function t(u,d,v,b,s,I){if(I!==HO){var F=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw F.name="Invariant Violation",F}}t.isRequired=t;function n(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,elementType:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:PC,resetWarningCache:AC};return a.PropTypes=a,a};IC.exports=XO();var nn=IC.exports;function xS(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Cs(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?xS(Object(a),!0).forEach(function(u){wu(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xS(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function eg(t){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},eg(t)}function wu(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function YO(t,n){if(t==null)return{};var a={},u=Object.keys(t),d,v;for(v=0;v<u.length;v++)d=u[v],!(n.indexOf(d)>=0)&&(a[d]=t[d]);return a}function MC(t,n){if(t==null)return{};var a=YO(t,n),u,d;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(d=0;d<v.length;d++)u=v[d],!(n.indexOf(u)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,u)||(a[u]=t[u]))}return a}function n0(t){return KO(t)||JO(t)||QO(t)||eL()}function KO(t){if(Array.isArray(t))return r0(t)}function JO(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QO(t,n){if(!!t){if(typeof t=="string")return r0(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r0(t,n)}}function r0(t,n){(n==null||n>t.length)&&(n=t.length);for(var a=0,u=new Array(n);a<n;a++)u[a]=t[a];return u}function eL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tL(t){var n,a=t.beat,u=t.fade,d=t.beatFade,v=t.bounce,b=t.shake,s=t.flash,I=t.spin,F=t.spinPulse,W=t.spinReverse,j=t.pulse,Y=t.fixedWidth,H=t.inverse,be=t.border,ge=t.listItem,Q=t.flip,V=t.size,J=t.rotation,he=t.pull,pe=(n={"fa-beat":a,"fa-fade":u,"fa-beat-fade":d,"fa-bounce":v,"fa-shake":b,"fa-flash":s,"fa-spin":I,"fa-spin-reverse":W,"fa-spin-pulse":F,"fa-pulse":j,"fa-fw":Y,"fa-inverse":H,"fa-border":be,"fa-li":ge,"fa-flip-horizontal":Q==="horizontal"||Q==="both","fa-flip-vertical":Q==="vertical"||Q==="both"},wu(n,"fa-".concat(V),typeof V!="undefined"&&V!==null),wu(n,"fa-rotate-".concat(J),typeof J!="undefined"&&J!==null&&J!==0),wu(n,"fa-pull-".concat(he),typeof he!="undefined"&&he!==null),wu(n,"fa-swap-opacity",t.swapOpacity),n);return Object.keys(pe).map(function(ze){return pe[ze]?ze:null}).filter(function(ze){return ze})}function nL(t){return t=t-0,t===t}function zC(t){return nL(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(n,a){return a?a.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var rL=["style"];function iL(t){return t.charAt(0).toUpperCase()+t.slice(1)}function oL(t){return t.split(";").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,a){var u=a.indexOf(":"),d=zC(a.slice(0,u)),v=a.slice(u+1).trim();return d.startsWith("webkit")?n[iL(d)]=v:n[d]=v,n},{})}function OC(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n=="string")return n;var u=(n.children||[]).map(function(I){return OC(t,I)}),d=Object.keys(n.attributes||{}).reduce(function(I,F){var W=n.attributes[F];switch(F){case"class":I.attrs.className=W,delete n.attributes.class;break;case"style":I.attrs.style=oL(W);break;default:F.indexOf("aria-")===0||F.indexOf("data-")===0?I.attrs[F.toLowerCase()]=W:I.attrs[zC(F)]=W}return I},{attrs:{}}),v=a.style,b=v===void 0?{}:v,s=MC(a,rL);return d.attrs.style=Cs(Cs({},d.attrs.style),b),t.apply(void 0,[n.tag,Cs(Cs({},d.attrs),s)].concat(n0(u)))}var LC=!1;try{LC=!0}catch{}function aL(){if(!LC&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function bS(t){if(t&&eg(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(t0.icon)return t0.icon(t);if(t===null)return null;if(t&&eg(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function W_(t,n){return Array.isArray(n)&&n.length>0||!Array.isArray(n)&&n?wu({},t,n):{}}var sL=["forwardedRef"];function So(t){var n=t.forwardedRef,a=MC(t,sL),u=a.icon,d=a.mask,v=a.symbol,b=a.className,s=a.title,I=a.titleId,F=a.maskId,W=bS(u),j=W_("classes",[].concat(n0(tL(a)),n0(b.split(" ")))),Y=W_("transform",typeof a.transform=="string"?t0.transform(a.transform):a.transform),H=W_("mask",bS(d)),be=qO(W,Cs(Cs(Cs(Cs({},j),Y),H),{},{symbol:v,title:s,titleId:I,maskId:F}));if(!be)return aL("Could not find icon",W),null;var ge=be.abstract,Q={ref:n};return Object.keys(a).forEach(function(V){So.defaultProps.hasOwnProperty(V)||(Q[V]=a[V])}),lL(ge[0],Q)}So.displayName="FontAwesomeIcon";So.propTypes={beat:nn.bool,border:nn.bool,bounce:nn.bool,className:nn.string,fade:nn.bool,flash:nn.bool,mask:nn.oneOfType([nn.object,nn.array,nn.string]),maskId:nn.string,fixedWidth:nn.bool,inverse:nn.bool,flip:nn.oneOf(["horizontal","vertical","both"]),icon:nn.oneOfType([nn.object,nn.array,nn.string]),listItem:nn.bool,pull:nn.oneOf(["right","left"]),pulse:nn.bool,rotation:nn.oneOf([0,90,180,270]),shake:nn.bool,size:nn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:nn.bool,spinPulse:nn.bool,spinReverse:nn.bool,symbol:nn.oneOfType([nn.bool,nn.string]),title:nn.string,titleId:nn.string,transform:nn.oneOfType([nn.string,nn.object]),swapOpacity:nn.bool};So.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var lL=OC.bind(null,_T.createElement);/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var cL={prefix:"fas",iconName:"briefcase",icon:[512,512,[128188],"f0b1","M320 336c0 8.844-7.156 16-16 16h-96C199.2 352 192 344.8 192 336V288H0v144C0 457.6 22.41 480 48 480h416c25.59 0 48-22.41 48-48V288h-192V336zM464 96H384V48C384 22.41 361.6 0 336 0h-160C150.4 0 128 22.41 128 48V96H48C22.41 96 0 118.4 0 144V256h512V144C512 118.4 489.6 96 464 96zM336 96h-160V48h160V96z"]},uL={prefix:"fas",iconName:"cloud",icon:[640,512,[9729],"f0c2","M96.2 200.1C96.07 197.4 96 194.7 96 192C96 103.6 167.6 32 256 32C315.3 32 367 64.25 394.7 112.2C409.9 101.1 428.3 96 448 96C501 96 544 138.1 544 192C544 204.2 541.7 215.8 537.6 226.6C596 238.4 640 290.1 640 352C640 422.7 582.7 480 512 480H144C64.47 480 0 415.5 0 336C0 273.2 40.17 219.8 96.2 200.1z"]},hL={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M414.8 40.79L286.8 488.8C281.9 505.8 264.2 515.6 247.2 510.8C230.2 505.9 220.4 488.2 225.2 471.2L353.2 23.21C358.1 6.216 375.8-3.624 392.8 1.232C409.8 6.087 419.6 23.8 414.8 40.79H414.8zM518.6 121.4L630.6 233.4C643.1 245.9 643.1 266.1 630.6 278.6L518.6 390.6C506.1 403.1 485.9 403.1 473.4 390.6C460.9 378.1 460.9 357.9 473.4 345.4L562.7 256L473.4 166.6C460.9 154.1 460.9 133.9 473.4 121.4C485.9 108.9 506.1 108.9 518.6 121.4V121.4zM166.6 166.6L77.25 256L166.6 345.4C179.1 357.9 179.1 378.1 166.6 390.6C154.1 403.1 133.9 403.1 121.4 390.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4L121.4 121.4C133.9 108.9 154.1 108.9 166.6 121.4C179.1 133.9 179.1 154.1 166.6 166.6V166.6z"]},dL={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,61443,9993],"f0e0","M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z"]},fL={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"]},pL={prefix:"fas",iconName:"map-location-dot",icon:[576,512,["map-marked-alt"],"f5a0","M408 120C408 174.6 334.9 271.9 302.8 311.1C295.1 321.6 280.9 321.6 273.2 311.1C241.1 271.9 168 174.6 168 120C168 53.73 221.7 0 288 0C354.3 0 408 53.73 408 120zM288 152C310.1 152 328 134.1 328 112C328 89.91 310.1 72 288 72C265.9 72 248 89.91 248 112C248 134.1 265.9 152 288 152zM425.6 179.8C426.1 178.6 426.6 177.4 427.1 176.1L543.1 129.7C558.9 123.4 576 135 576 152V422.8C576 432.6 570 441.4 560.9 445.1L416 503V200.4C419.5 193.5 422.7 186.7 425.6 179.8zM150.4 179.8C153.3 186.7 156.5 193.5 160 200.4V451.8L32.91 502.7C17.15 508.1 0 497.4 0 480.4V209.6C0 199.8 5.975 190.1 15.09 187.3L137.6 138.3C140 152.5 144.9 166.6 150.4 179.8H150.4zM327.8 331.1C341.7 314.6 363.5 286.3 384 255V504.3L192 449.4V255C212.5 286.3 234.3 314.6 248.2 331.1C268.7 357.6 307.3 357.6 327.8 331.1L327.8 331.1z"]},mL=pL,gL={prefix:"fas",iconName:"people-group",icon:[640,512,[],"e533","M184 88C184 118.9 158.9 144 128 144C97.07 144 72 118.9 72 88C72 57.07 97.07 32 128 32C158.9 32 184 57.07 184 88zM208.4 196.3C178.7 222.7 160 261.2 160 304C160 338.3 171.1 369.8 192 394.5V416C192 433.7 177.7 448 160 448H96C78.33 448 64 433.7 64 416V389.2C26.16 371.2 0 332.7 0 288C0 226.1 50.14 176 112 176H144C167.1 176 190.2 183.5 208.4 196.3V196.3zM64 245.7C54.04 256.9 48 271.8 48 288C48 304.2 54.04 319.1 64 330.3V245.7zM448 416V394.5C468 369.8 480 338.3 480 304C480 261.2 461.3 222.7 431.6 196.3C449.8 183.5 472 176 496 176H528C589.9 176 640 226.1 640 288C640 332.7 613.8 371.2 576 389.2V416C576 433.7 561.7 448 544 448H480C462.3 448 448 433.7 448 416zM576 330.3C585.1 319.1 592 304.2 592 288C592 271.8 585.1 256.9 576 245.7V330.3zM568 88C568 118.9 542.9 144 512 144C481.1 144 456 118.9 456 88C456 57.07 481.1 32 512 32C542.9 32 568 57.07 568 88zM256 96C256 60.65 284.7 32 320 32C355.3 32 384 60.65 384 96C384 131.3 355.3 160 320 160C284.7 160 256 131.3 256 96zM448 304C448 348.7 421.8 387.2 384 405.2V448C384 465.7 369.7 480 352 480H288C270.3 480 256 465.7 256 448V405.2C218.2 387.2 192 348.7 192 304C192 242.1 242.1 192 304 192H336C397.9 192 448 242.1 448 304zM256 346.3V261.7C246 272.9 240 287.8 240 304C240 320.2 246 335.1 256 346.3zM384 261.7V346.3C393.1 335 400 320.2 400 304C400 287.8 393.1 272.9 384 261.7z"]},yL={prefix:"fas",iconName:"phone-flip",icon:[512,512,[128381,"phone-alt"],"f879","M18.92 351.2l108.5-46.52c12.78-5.531 27.77-1.801 36.45 8.98l44.09 53.82c69.25-34 125.5-90.31 159.5-159.5l-53.81-44.04c-10.75-8.781-14.41-23.69-8.974-36.47l46.51-108.5c6.094-13.91 21.1-21.52 35.79-18.11l100.8 23.25c14.25 3.25 24.22 15.8 24.22 30.46c0 252.3-205.2 457.5-457.5 457.5c-14.67 0-27.18-9.968-30.45-24.22l-23.25-100.8C-2.571 372.4 5.018 357.2 18.92 351.2z"]},_L=yL,vL={prefix:"fas",iconName:"server",icon:[512,512,[],"f233","M480 288H32c-17.62 0-32 14.38-32 32v128c0 17.62 14.38 32 32 32h448c17.62 0 32-14.38 32-32v-128C512 302.4 497.6 288 480 288zM352 408c-13.25 0-24-10.75-24-24s10.75-24 24-24s24 10.75 24 24S365.3 408 352 408zM416 408c-13.25 0-24-10.75-24-24s10.75-24 24-24s24 10.75 24 24S429.3 408 416 408zM480 32H32C14.38 32 0 46.38 0 64v128c0 17.62 14.38 32 32 32h448c17.62 0 32-14.38 32-32V64C512 46.38 497.6 32 480 32zM352 152c-13.25 0-24-10.75-24-24S338.8 104 352 104S376 114.8 376 128S365.3 152 352 152zM416 152c-13.25 0-24-10.75-24-24S402.8 104 416 104S440 114.8 440 128S429.3 152 416 152z"]},xL={prefix:"fas",iconName:"stopwatch",icon:[448,512,[9201],"f2f2","M272 0C289.7 0 304 14.33 304 32C304 49.67 289.7 64 272 64H256V98.45C293.5 104.2 327.7 120 355.7 143L377.4 121.4C389.9 108.9 410.1 108.9 422.6 121.4C435.1 133.9 435.1 154.1 422.6 166.6L398.5 190.8C419.7 223.3 432 262.2 432 304C432 418.9 338.9 512 224 512C109.1 512 16 418.9 16 304C16 200 92.32 113.8 192 98.45V64H176C158.3 64 144 49.67 144 32C144 14.33 158.3 0 176 0L272 0zM248 192C248 178.7 237.3 168 224 168C210.7 168 200 178.7 200 192V320C200 333.3 210.7 344 224 344C237.3 344 248 333.3 248 320V192z"]},bL={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M507.6 122.8c-2.904-12.09-18.25-16.13-27.04-7.338l-76.55 76.56l-83.1-.0002l0-83.1l76.55-76.56c8.791-8.789 4.75-24.14-7.336-27.04c-23.69-5.693-49.34-6.111-75.92 .2484c-61.45 14.7-109.4 66.9-119.2 129.3C189.8 160.8 192.3 186.7 200.1 210.1l-178.1 178.1c-28.12 28.12-28.12 73.69 0 101.8C35.16 504.1 53.56 512 71.1 512s36.84-7.031 50.91-21.09l178.1-178.1c23.46 7.736 49.31 10.24 76.17 6.004c62.41-9.84 114.6-57.8 129.3-119.2C513.7 172.1 513.3 146.5 507.6 122.8zM80 456c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24s24 10.74 24 24C104 445.3 93.25 456 80 456z"]};const wL=()=>{const[t]=Ku("global");return Je("div",{id:"nosotros",className:"py-5",children:xn("section",{className:"nosotros d-flex align-items-center flex-column py-5 mx-5",children:[Je("h1",{children:t("aboutUs.title")}),Je("img",{className:"mt-4 mb-2 img-hector",src:c3,alt:"Hector A. Garcia - CEO SysAdmin y Especialista en Seguridad Inform\xE1tica.",title:"Hector A. Garcia - CEO SysAdmin y Especialista en Seguridad Inform\xE1tica.",width:450}),Je("p",{className:"mb-5 px-5 d-flex justify-content-center",children:t("aboutUs.img-text")}),xn("div",{children:[Je("hr",{}),xn("p",{className:"blockquote",children:[`"${t("aboutUs.description.text1")}`,Je("br",{}),Je("br",{}),Je("b",{children:t("aboutUs.description.text2")}),Je("br",{}),Je("br",{}),Je(So,{className:"icons",icon:fL}),t("aboutUs.description.text3"),Je("br",{}),Je("br",{}),Je(So,{className:"icons",icon:gL}),t("aboutUs.description.text4"),Je("br",{}),Je("br",{}),Je(So,{className:"icons",icon:xL}),`${t("aboutUs.description.text5")}"`,Je("br",{}),Je("br",{}),t("aboutUs.description.text6")]})]}),Je("img",{className:"mt-4 mb-2 sertic-img",src:u3,alt:"SerTIC - Soluciones Inform\xE1ticas",title:"SerTIC - Soluciones Inform\xE1ticas"})]})})};const SL=({title:t,icon:n,description:a})=>xn("div",{className:"rounded-3 service-box",children:[xn("div",{children:[Je("h2",{className:"service-tittle",children:t}),Je("span",{className:"fa-stack fa-4x icons2",children:Je(So,{icon:n,className:"icon"})})]}),Je("div",{className:"service-box-content blockquote d-flex flex-column align-items-center justify-content-center",children:a})]}),TL=[{index:1,icon:uL,nItems:[1,2,3,4]},{index:2,icon:bL,nItems:[1,2,3,4]},{index:3,icon:cL,nItems:[1,2]},{index:4,icon:vL,nItems:[1,2,3]},{index:5,icon:hL,nItems:[1,2]}],EL=()=>{const[t]=Ku("global");return console.log(t("services.services1.descr[0]")),Je("div",{id:"servicios",children:xn("section",{className:"text-center",children:[Je("h1",{className:"m-5",children:t("services.title")}),Je("div",{className:"d-flex flex-wrap justify-content-center",children:TL.map(n=>Je(SL,{title:t(`services.service${n.index}.title`),icon:n.icon,description:n.nItems.map(a=>xn(Mg,{children:[Je("p",{children:t(`services.service${n.index}.descr${a}`)}),Je("br",{}),Je("br",{})]}))},n.index))})]})})};var DC={},RC={},Bg={},BC={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0},a=n;t.default=a})(BC);var CL="Expected a function",wS=0/0,kL="[object Symbol]",IL=/^\s+|\s+$/g,AL=/^[-+]0x[0-9a-f]+$/i,PL=/^0b[01]+$/i,ML=/^0o[0-7]+$/i,zL=parseInt,OL=typeof pd=="object"&&pd&&pd.Object===Object&&pd,LL=typeof self=="object"&&self&&self.Object===Object&&self,DL=OL||LL||Function("return this")(),RL=Object.prototype,BL=RL.toString,FL=Math.max,NL=Math.min,H_=function(){return DL.Date.now()};function jL(t,n,a){var u,d,v,b,s,I,F=0,W=!1,j=!1,Y=!0;if(typeof t!="function")throw new TypeError(CL);n=SS(n)||0,i0(a)&&(W=!!a.leading,j="maxWait"in a,v=j?FL(SS(a.maxWait)||0,n):v,Y="trailing"in a?!!a.trailing:Y);function H(Ee){var We=u,Be=d;return u=d=void 0,F=Ee,b=t.apply(Be,We),b}function be(Ee){return F=Ee,s=setTimeout(V,n),W?H(Ee):b}function ge(Ee){var We=Ee-I,Be=Ee-F,Oe=n-We;return j?NL(Oe,v-Be):Oe}function Q(Ee){var We=Ee-I,Be=Ee-F;return I===void 0||We>=n||We<0||j&&Be>=v}function V(){var Ee=H_();if(Q(Ee))return J(Ee);s=setTimeout(V,ge(Ee))}function J(Ee){return s=void 0,Y&&u?H(Ee):(u=d=void 0,b)}function he(){s!==void 0&&clearTimeout(s),F=0,u=I=d=s=void 0}function pe(){return s===void 0?b:J(H_())}function ze(){var Ee=H_(),We=Q(Ee);if(u=arguments,d=this,I=Ee,We){if(s===void 0)return be(I);if(j)return s=setTimeout(V,n),H(I)}return s===void 0&&(s=setTimeout(V,n)),b}return ze.cancel=he,ze.flush=pe,ze}function i0(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function UL(t){return!!t&&typeof t=="object"}function VL(t){return typeof t=="symbol"||UL(t)&&BL.call(t)==kL}function SS(t){if(typeof t=="number")return t;if(VL(t))return wS;if(i0(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=i0(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(IL,"");var a=PL.test(t);return a||ML.test(t)?zL(t.slice(2),a?2:8):AL.test(t)?wS:+t}var $L=jL,pf={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(t){(function(){var n={}.hasOwnProperty;function a(){for(var u=[],d=0;d<arguments.length;d++){var v=arguments[d];if(!!v){var b=typeof v;if(b==="string"||b==="number")u.push(v);else if(Array.isArray(v)){if(v.length){var s=a.apply(null,v);s&&u.push(s)}}else if(b==="object")if(v.toString===Object.prototype.toString)for(var I in v)n.call(v,I)&&v[I]&&u.push(I);else u.push(v.toString())}}return u.join(" ")}t.exports?(a.default=a,t.exports=a):window.classNames=a})()})(pf);var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.clamp=FC;ut.canUseDOM=ut.slidesOnLeft=ut.slidesOnRight=ut.siblingDirection=ut.getTotalSlides=ut.getPostClones=ut.getPreClones=ut.getTrackLeft=ut.getTrackAnimateCSS=ut.getTrackCSS=ut.checkSpecKeys=ut.getSlideCount=ut.checkNavigable=ut.getNavigableIndexes=ut.swipeEnd=ut.swipeMove=ut.swipeStart=ut.keyHandler=ut.changeSlide=ut.slideHandler=ut.initializedState=ut.extractObject=ut.canGoNext=ut.getSwipeDirection=ut.getHeight=ut.getWidth=ut.lazySlidesOnRight=ut.lazySlidesOnLeft=ut.lazyEndIndex=ut.lazyStartIndex=ut.getRequiredLazySlides=ut.getOnDemandLazySlides=ut.safePreventDefault=void 0;var GL=qL(In.exports);function qL(t){return t&&t.__esModule?t:{default:t}}function TS(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function $n(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?TS(Object(a),!0).forEach(function(u){ZL(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):TS(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function ZL(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function FC(t,n,a){return Math.max(n,Math.min(t,a))}var Wl=function(n){var a=["onTouchStart","onTouchMove","onWheel"];a.includes(n._reactName)||n.preventDefault()};ut.safePreventDefault=Wl;var L1=function(n){for(var a=[],u=D1(n),d=R1(n),v=u;v<d;v++)n.lazyLoadedList.indexOf(v)<0&&a.push(v);return a};ut.getOnDemandLazySlides=L1;var WL=function(n){for(var a=[],u=D1(n),d=R1(n),v=u;v<d;v++)a.push(v);return a};ut.getRequiredLazySlides=WL;var D1=function(n){return n.currentSlide-NC(n)};ut.lazyStartIndex=D1;var R1=function(n){return n.currentSlide+jC(n)};ut.lazyEndIndex=R1;var NC=function(n){return n.centerMode?Math.floor(n.slidesToShow/2)+(parseInt(n.centerPadding)>0?1:0):0};ut.lazySlidesOnLeft=NC;var jC=function(n){return n.centerMode?Math.floor((n.slidesToShow-1)/2)+1+(parseInt(n.centerPadding)>0?1:0):n.slidesToShow};ut.lazySlidesOnRight=jC;var tg=function(n){return n&&n.offsetWidth||0};ut.getWidth=tg;var B1=function(n){return n&&n.offsetHeight||0};ut.getHeight=B1;var F1=function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u,d,v,b;return u=n.startX-n.curX,d=n.startY-n.curY,v=Math.atan2(d,u),b=Math.round(v*180/Math.PI),b<0&&(b=360-Math.abs(b)),b<=45&&b>=0||b<=360&&b>=315?"left":b>=135&&b<=225?"right":a===!0?b>=35&&b<=135?"up":"down":"vertical"};ut.getSwipeDirection=F1;var N1=function(n){var a=!0;return n.infinite||(n.centerMode&&n.currentSlide>=n.slideCount-1||n.slideCount<=n.slidesToShow||n.currentSlide>=n.slideCount-n.slidesToShow)&&(a=!1),a};ut.canGoNext=N1;var HL=function(n,a){var u={};return a.forEach(function(d){return u[d]=n[d]}),u};ut.extractObject=HL;var XL=function(n){var a=GL.default.Children.count(n.children),u=n.listRef,d=Math.ceil(tg(u)),v=n.trackRef&&n.trackRef.node,b=Math.ceil(tg(v)),s;if(n.vertical)s=d;else{var I=n.centerMode&&parseInt(n.centerPadding)*2;typeof n.centerPadding=="string"&&n.centerPadding.slice(-1)==="%"&&(I*=d/100),s=Math.ceil((d-I)/n.slidesToShow)}var F=u&&B1(u.querySelector('[data-index="0"]')),W=F*n.slidesToShow,j=n.currentSlide===void 0?n.initialSlide:n.currentSlide;n.rtl&&n.currentSlide===void 0&&(j=a-1-n.initialSlide);var Y=n.lazyLoadedList||[],H=L1($n($n({},n),{},{currentSlide:j,lazyLoadedList:Y}));Y=Y.concat(H);var be={slideCount:a,slideWidth:s,listWidth:d,trackWidth:b,currentSlide:j,slideHeight:F,listHeight:W,lazyLoadedList:Y};return n.autoplaying===null&&n.autoplay&&(be.autoplaying="playing"),be};ut.initializedState=XL;var YL=function(n){var a=n.waitForAnimate,u=n.animating,d=n.fade,v=n.infinite,b=n.index,s=n.slideCount,I=n.lazyLoad,F=n.currentSlide,W=n.centerMode,j=n.slidesToScroll,Y=n.slidesToShow,H=n.useCSS,be=n.lazyLoadedList;if(a&&u)return{};var ge=b,Q,V,J,he={},pe={},ze=v?b:FC(b,0,s-1);if(d){if(!v&&(b<0||b>=s))return{};b<0?ge=b+s:b>=s&&(ge=b-s),I&&be.indexOf(ge)<0&&(be=be.concat(ge)),he={animating:!0,currentSlide:ge,lazyLoadedList:be,targetSlide:ge},pe={animating:!1,targetSlide:ge}}else Q=ge,ge<0?(Q=ge+s,v?s%j!==0&&(Q=s-s%j):Q=0):!N1(n)&&ge>F?ge=Q=F:W&&ge>=s?(ge=v?s:s-1,Q=v?0:s-1):ge>=s&&(Q=ge-s,v?s%j!==0&&(Q=0):Q=s-Y),!v&&ge+Y>=s&&(Q=s-Y),V=tf($n($n({},n),{},{slideIndex:ge})),J=tf($n($n({},n),{},{slideIndex:Q})),v||(V===J&&(ge=Q),V=J),I&&(be=be.concat(L1($n($n({},n),{},{currentSlide:ge})))),H?(he={animating:!0,currentSlide:Q,trackStyle:j1($n($n({},n),{},{left:V})),lazyLoadedList:be,targetSlide:ze},pe={animating:!1,currentSlide:Q,trackStyle:ef($n($n({},n),{},{left:J})),swipeLeft:null,targetSlide:ze}):he={currentSlide:Q,trackStyle:ef($n($n({},n),{},{left:J})),lazyLoadedList:be,targetSlide:ze};return{state:he,nextState:pe}};ut.slideHandler=YL;var KL=function(n,a){var u,d,v,b,s,I=n.slidesToScroll,F=n.slidesToShow,W=n.slideCount,j=n.currentSlide,Y=n.targetSlide,H=n.lazyLoad,be=n.infinite;if(b=W%I!==0,u=b?0:(W-j)%I,a.message==="previous")v=u===0?I:F-u,s=j-v,H&&!be&&(d=j-v,s=d===-1?W-1:d),be||(s=Y-I);else if(a.message==="next")v=u===0?I:u,s=j+v,H&&!be&&(s=(j+I)%W+u),be||(s=Y+I);else if(a.message==="dots")s=a.index*a.slidesToScroll;else if(a.message==="children"){if(s=a.index,be){var ge=GC($n($n({},n),{},{targetSlide:s}));s>a.currentSlide&&ge==="left"?s=s-W:s<a.currentSlide&&ge==="right"&&(s=s+W)}}else a.message==="index"&&(s=Number(a.index));return s};ut.changeSlide=KL;var JL=function(n,a,u){return n.target.tagName.match("TEXTAREA|INPUT|SELECT")||!a?"":n.keyCode===37?u?"next":"previous":n.keyCode===39?u?"previous":"next":""};ut.keyHandler=JL;var QL=function(n,a,u){return n.target.tagName==="IMG"&&Wl(n),!a||!u&&n.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:n.touches?n.touches[0].pageX:n.clientX,startY:n.touches?n.touches[0].pageY:n.clientY,curX:n.touches?n.touches[0].pageX:n.clientX,curY:n.touches?n.touches[0].pageY:n.clientY}}};ut.swipeStart=QL;var eD=function(n,a){var u=a.scrolling,d=a.animating,v=a.vertical,b=a.swipeToSlide,s=a.verticalSwiping,I=a.rtl,F=a.currentSlide,W=a.edgeFriction,j=a.edgeDragged,Y=a.onEdge,H=a.swiped,be=a.swiping,ge=a.slideCount,Q=a.slidesToScroll,V=a.infinite,J=a.touchObject,he=a.swipeEvent,pe=a.listHeight,ze=a.listWidth;if(!u){if(d)return Wl(n);v&&b&&s&&Wl(n);var Ee,We={},Be=tf(a);J.curX=n.touches?n.touches[0].pageX:n.clientX,J.curY=n.touches?n.touches[0].pageY:n.clientY,J.swipeLength=Math.round(Math.sqrt(Math.pow(J.curX-J.startX,2)));var Oe=Math.round(Math.sqrt(Math.pow(J.curY-J.startY,2)));if(!s&&!be&&Oe>10)return{scrolling:!0};s&&(J.swipeLength=Oe);var it=(I?-1:1)*(J.curX>J.startX?1:-1);s&&(it=J.curY>J.startY?1:-1);var St=Math.ceil(ge/Q),ct=F1(a.touchObject,s),at=J.swipeLength;return V||(F===0&&(ct==="right"||ct==="down")||F+1>=St&&(ct==="left"||ct==="up")||!N1(a)&&(ct==="left"||ct==="up"))&&(at=J.swipeLength*W,j===!1&&Y&&(Y(ct),We.edgeDragged=!0)),!H&&he&&(he(ct),We.swiped=!0),v?Ee=Be+at*(pe/ze)*it:I?Ee=Be-at*it:Ee=Be+at*it,s&&(Ee=Be+at*it),We=$n($n({},We),{},{touchObject:J,swipeLeft:Ee,trackStyle:ef($n($n({},a),{},{left:Ee}))}),Math.abs(J.curX-J.startX)<Math.abs(J.curY-J.startY)*.8||J.swipeLength>10&&(We.swiping=!0,Wl(n)),We}};ut.swipeMove=eD;var tD=function(n,a){var u=a.dragging,d=a.swipe,v=a.touchObject,b=a.listWidth,s=a.touchThreshold,I=a.verticalSwiping,F=a.listHeight,W=a.swipeToSlide,j=a.scrolling,Y=a.onSwipe,H=a.targetSlide,be=a.currentSlide,ge=a.infinite;if(!u)return d&&Wl(n),{};var Q=I?F/s:b/s,V=F1(v,I),J={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(j||!v.swipeLength)return J;if(v.swipeLength>Q){Wl(n),Y&&Y(V);var he,pe,ze=ge?be:H;switch(V){case"left":case"up":pe=ze+a0(a),he=W?o0(a,pe):pe,J.currentDirection=0;break;case"right":case"down":pe=ze-a0(a),he=W?o0(a,pe):pe,J.currentDirection=1;break;default:he=ze}J.triggerSlideHandler=he}else{var Ee=tf(a);J.trackStyle=j1($n($n({},a),{},{left:Ee}))}return J};ut.swipeEnd=tD;var UC=function(n){for(var a=n.infinite?n.slideCount*2:n.slideCount,u=n.infinite?n.slidesToShow*-1:0,d=n.infinite?n.slidesToShow*-1:0,v=[];u<a;)v.push(u),u=d+n.slidesToScroll,d+=Math.min(n.slidesToScroll,n.slidesToShow);return v};ut.getNavigableIndexes=UC;var o0=function(n,a){var u=UC(n),d=0;if(a>u[u.length-1])a=u[u.length-1];else for(var v in u){if(a<u[v]){a=d;break}d=u[v]}return a};ut.checkNavigable=o0;var a0=function(n){var a=n.centerMode?n.slideWidth*Math.floor(n.slidesToShow/2):0;if(n.swipeToSlide){var u,d=n.listRef,v=d.querySelectorAll&&d.querySelectorAll(".slick-slide")||[];if(Array.from(v).every(function(I){if(n.vertical){if(I.offsetTop+B1(I)/2>n.swipeLeft*-1)return u=I,!1}else if(I.offsetLeft-a+tg(I)/2>n.swipeLeft*-1)return u=I,!1;return!0}),!u)return 0;var b=n.rtl===!0?n.slideCount-n.currentSlide:n.currentSlide,s=Math.abs(u.dataset.index-b)||1;return s}else return n.slidesToScroll};ut.getSlideCount=a0;var Fg=function(n,a){return a.reduce(function(u,d){return u&&n.hasOwnProperty(d)},!0)?null:console.error("Keys Missing:",n)};ut.checkSpecKeys=Fg;var ef=function(n){Fg(n,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var a,u,d=n.slideCount+2*n.slidesToShow;n.vertical?u=d*n.slideHeight:a=$C(n)*n.slideWidth;var v={opacity:1,transition:"",WebkitTransition:""};if(n.useTransform){var b=n.vertical?"translate3d(0px, "+n.left+"px, 0px)":"translate3d("+n.left+"px, 0px, 0px)",s=n.vertical?"translate3d(0px, "+n.left+"px, 0px)":"translate3d("+n.left+"px, 0px, 0px)",I=n.vertical?"translateY("+n.left+"px)":"translateX("+n.left+"px)";v=$n($n({},v),{},{WebkitTransform:b,transform:s,msTransform:I})}else n.vertical?v.top=n.left:v.left=n.left;return n.fade&&(v={opacity:1}),a&&(v.width=a),u&&(v.height=u),window&&!window.addEventListener&&window.attachEvent&&(n.vertical?v.marginTop=n.left+"px":v.marginLeft=n.left+"px"),v};ut.getTrackCSS=ef;var j1=function(n){Fg(n,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var a=ef(n);return n.useTransform?(a.WebkitTransition="-webkit-transform "+n.speed+"ms "+n.cssEase,a.transition="transform "+n.speed+"ms "+n.cssEase):n.vertical?a.transition="top "+n.speed+"ms "+n.cssEase:a.transition="left "+n.speed+"ms "+n.cssEase,a};ut.getTrackAnimateCSS=j1;var tf=function(n){if(n.unslick)return 0;Fg(n,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var a=n.slideIndex,u=n.trackRef,d=n.infinite,v=n.centerMode,b=n.slideCount,s=n.slidesToShow,I=n.slidesToScroll,F=n.slideWidth,W=n.listWidth,j=n.variableWidth,Y=n.slideHeight,H=n.fade,be=n.vertical,ge=0,Q,V,J=0;if(H||n.slideCount===1)return 0;var he=0;if(d?(he=-Dd(n),b%I!==0&&a+I>b&&(he=-(a>b?s-(a-b):b%I)),v&&(he+=parseInt(s/2))):(b%I!==0&&a+I>b&&(he=s-b%I),v&&(he=parseInt(s/2))),ge=he*F,J=he*Y,be?Q=a*Y*-1+J:Q=a*F*-1+ge,j===!0){var pe,ze=u&&u.node;if(pe=a+Dd(n),V=ze&&ze.childNodes[pe],Q=V?V.offsetLeft*-1:0,v===!0){pe=d?a+Dd(n):a,V=ze&&ze.children[pe],Q=0;for(var Ee=0;Ee<pe;Ee++)Q-=ze&&ze.children[Ee]&&ze.children[Ee].offsetWidth;Q-=parseInt(n.centerPadding),Q+=V&&(W-V.offsetWidth)/2}}return Q};ut.getTrackLeft=tf;var Dd=function(n){return n.unslick||!n.infinite?0:n.variableWidth?n.slideCount:n.slidesToShow+(n.centerMode?1:0)};ut.getPreClones=Dd;var VC=function(n){return n.unslick||!n.infinite?0:n.slideCount};ut.getPostClones=VC;var $C=function(n){return n.slideCount===1?1:Dd(n)+n.slideCount+VC(n)};ut.getTotalSlides=$C;var GC=function(n){return n.targetSlide>n.currentSlide?n.targetSlide>n.currentSlide+qC(n)?"left":"right":n.targetSlide<n.currentSlide-ZC(n)?"right":"left"};ut.siblingDirection=GC;var qC=function(n){var a=n.slidesToShow,u=n.centerMode,d=n.rtl,v=n.centerPadding;if(u){var b=(a-1)/2+1;return parseInt(v)>0&&(b+=1),d&&a%2===0&&(b+=1),b}return d?0:a-1};ut.slidesOnRight=qC;var ZC=function(n){var a=n.slidesToShow,u=n.centerMode,d=n.rtl,v=n.centerPadding;if(u){var b=(a-1)/2+1;return parseInt(v)>0&&(b+=1),!d&&a%2===0&&(b+=1),b}return d?a-1:0};ut.slidesOnLeft=ZC;var nD=function(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)};ut.canUseDOM=nD;var Ng={};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.Track=void 0;var bs=WC(In.exports),X_=WC(pf.exports),Y_=ut;function WC(t){return t&&t.__esModule?t:{default:t}}function wm(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wm=function(a){return typeof a}:wm=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},wm(t)}function s0(){return s0=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},s0.apply(this,arguments)}function rD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function ES(t,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function iD(t,n,a){return n&&ES(t.prototype,n),a&&ES(t,a),t}function oD(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&l0(t,n)}function l0(t,n){return l0=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},l0(t,n)}function aD(t){var n=lD();return function(){var u=ng(t),d;if(n){var v=ng(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return sD(this,d)}}function sD(t,n){return n&&(wm(n)==="object"||typeof n=="function")?n:c0(t)}function c0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ng(t){return ng=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},ng(t)}function CS(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function _i(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?CS(Object(a),!0).forEach(function(u){u0(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):CS(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function u0(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}var K_=function(n){var a,u,d,v,b;n.rtl?b=n.slideCount-1-n.index:b=n.index,d=b<0||b>=n.slideCount,n.centerMode?(v=Math.floor(n.slidesToShow/2),u=(b-n.currentSlide)%n.slideCount===0,b>n.currentSlide-v-1&&b<=n.currentSlide+v&&(a=!0)):a=n.currentSlide<=b&&b<n.currentSlide+n.slidesToShow;var s;n.targetSlide<0?s=n.targetSlide+n.slideCount:n.targetSlide>=n.slideCount?s=n.targetSlide-n.slideCount:s=n.targetSlide;var I=b===s;return{"slick-slide":!0,"slick-active":a,"slick-center":u,"slick-cloned":d,"slick-current":I}},cD=function(n){var a={};return(n.variableWidth===void 0||n.variableWidth===!1)&&(a.width=n.slideWidth),n.fade&&(a.position="relative",n.vertical?a.top=-n.index*parseInt(n.slideHeight):a.left=-n.index*parseInt(n.slideWidth),a.opacity=n.currentSlide===n.index?1:0,n.useCSS&&(a.transition="opacity "+n.speed+"ms "+n.cssEase+", visibility "+n.speed+"ms "+n.cssEase)),a},J_=function(n,a){return n.key||a},uD=function(n){var a,u=[],d=[],v=[],b=bs.default.Children.count(n.children),s=(0,Y_.lazyStartIndex)(n),I=(0,Y_.lazyEndIndex)(n);return bs.default.Children.forEach(n.children,function(F,W){var j,Y={message:"children",index:W,slidesToScroll:n.slidesToScroll,currentSlide:n.currentSlide};!n.lazyLoad||n.lazyLoad&&n.lazyLoadedList.indexOf(W)>=0?j=F:j=bs.default.createElement("div",null);var H=cD(_i(_i({},n),{},{index:W})),be=j.props.className||"",ge=K_(_i(_i({},n),{},{index:W}));if(u.push(bs.default.cloneElement(j,{key:"original"+J_(j,W),"data-index":W,className:(0,X_.default)(ge,be),tabIndex:"-1","aria-hidden":!ge["slick-active"],style:_i(_i({outline:"none"},j.props.style||{}),H),onClick:function(J){j.props&&j.props.onClick&&j.props.onClick(J),n.focusOnSelect&&n.focusOnSelect(Y)}})),n.infinite&&n.fade===!1){var Q=b-W;Q<=(0,Y_.getPreClones)(n)&&b!==n.slidesToShow&&(a=-Q,a>=s&&(j=F),ge=K_(_i(_i({},n),{},{index:a})),d.push(bs.default.cloneElement(j,{key:"precloned"+J_(j,a),"data-index":a,tabIndex:"-1",className:(0,X_.default)(ge,be),"aria-hidden":!ge["slick-active"],style:_i(_i({},j.props.style||{}),H),onClick:function(J){j.props&&j.props.onClick&&j.props.onClick(J),n.focusOnSelect&&n.focusOnSelect(Y)}}))),b!==n.slidesToShow&&(a=b+W,a<I&&(j=F),ge=K_(_i(_i({},n),{},{index:a})),v.push(bs.default.cloneElement(j,{key:"postcloned"+J_(j,a),"data-index":a,tabIndex:"-1",className:(0,X_.default)(ge,be),"aria-hidden":!ge["slick-active"],style:_i(_i({},j.props.style||{}),H),onClick:function(J){j.props&&j.props.onClick&&j.props.onClick(J),n.focusOnSelect&&n.focusOnSelect(Y)}})))}}),n.rtl?d.concat(u,v).reverse():d.concat(u,v)},hD=function(t){oD(a,t);var n=aD(a);function a(){var u;rD(this,a);for(var d=arguments.length,v=new Array(d),b=0;b<d;b++)v[b]=arguments[b];return u=n.call.apply(n,[this].concat(v)),u0(c0(u),"node",null),u0(c0(u),"handleRef",function(s){u.node=s}),u}return iD(a,[{key:"render",value:function(){var d=uD(this.props),v=this.props,b=v.onMouseEnter,s=v.onMouseOver,I=v.onMouseLeave,F={onMouseEnter:b,onMouseOver:s,onMouseLeave:I};return bs.default.createElement("div",s0({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},F),d)}}]),a}(bs.default.PureComponent);Ng.Track=hD;var jg={};Object.defineProperty(jg,"__esModule",{value:!0});jg.Dots=void 0;var am=HC(In.exports),dD=HC(pf.exports),kS=ut;function HC(t){return t&&t.__esModule?t:{default:t}}function Sm(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sm=function(a){return typeof a}:Sm=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Sm(t)}function IS(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function fD(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?IS(Object(a),!0).forEach(function(u){pD(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IS(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function pD(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function mD(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function AS(t,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function gD(t,n,a){return n&&AS(t.prototype,n),a&&AS(t,a),t}function yD(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&h0(t,n)}function h0(t,n){return h0=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},h0(t,n)}function _D(t){var n=bD();return function(){var u=rg(t),d;if(n){var v=rg(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return vD(this,d)}}function vD(t,n){return n&&(Sm(n)==="object"||typeof n=="function")?n:xD(t)}function xD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function rg(t){return rg=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},rg(t)}var wD=function(n){var a;return n.infinite?a=Math.ceil(n.slideCount/n.slidesToScroll):a=Math.ceil((n.slideCount-n.slidesToShow)/n.slidesToScroll)+1,a},SD=function(t){yD(a,t);var n=_D(a);function a(){return mD(this,a),n.apply(this,arguments)}return gD(a,[{key:"clickHandler",value:function(d,v){v.preventDefault(),this.props.clickHandler(d)}},{key:"render",value:function(){for(var d=this.props,v=d.onMouseEnter,b=d.onMouseOver,s=d.onMouseLeave,I=d.infinite,F=d.slidesToScroll,W=d.slidesToShow,j=d.slideCount,Y=d.currentSlide,H=wD({slideCount:j,slidesToScroll:F,slidesToShow:W,infinite:I}),be={onMouseEnter:v,onMouseOver:b,onMouseLeave:s},ge=[],Q=0;Q<H;Q++){var V=(Q+1)*F-1,J=I?V:(0,kS.clamp)(V,0,j-1),he=J-(F-1),pe=I?he:(0,kS.clamp)(he,0,j-1),ze=(0,dD.default)({"slick-active":I?Y>=pe&&Y<=J:Y===pe}),Ee={message:"dots",index:Q,slidesToScroll:F,currentSlide:Y},We=this.clickHandler.bind(this,Ee);ge=ge.concat(am.default.createElement("li",{key:Q,className:ze},am.default.cloneElement(this.props.customPaging(Q),{onClick:We})))}return am.default.cloneElement(this.props.appendDots(ge),fD({className:this.props.dotsClass},be))}}]),a}(am.default.PureComponent);jg.Dots=SD;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.NextArrow=Uu.PrevArrow=void 0;var Lu=YC(In.exports),XC=YC(pf.exports),TD=ut;function YC(t){return t&&t.__esModule?t:{default:t}}function Tm(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tm=function(a){return typeof a}:Tm=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Tm(t)}function ig(){return ig=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},ig.apply(this,arguments)}function PS(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function og(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?PS(Object(a),!0).forEach(function(u){ED(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):PS(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function ED(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function KC(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function MS(t,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function JC(t,n,a){return n&&MS(t.prototype,n),a&&MS(t,a),t}function QC(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&d0(t,n)}function d0(t,n){return d0=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},d0(t,n)}function ek(t){var n=ID();return function(){var u=ag(t),d;if(n){var v=ag(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return CD(this,d)}}function CD(t,n){return n&&(Tm(n)==="object"||typeof n=="function")?n:kD(t)}function kD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ID(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ag(t){return ag=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},ag(t)}var AD=function(t){QC(a,t);var n=ek(a);function a(){return KC(this,a),n.apply(this,arguments)}return JC(a,[{key:"clickHandler",value:function(d,v){v&&v.preventDefault(),this.props.clickHandler(d,v)}},{key:"render",value:function(){var d={"slick-arrow":!0,"slick-prev":!0},v=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(d["slick-disabled"]=!0,v=null);var b={key:"0","data-role":"none",className:(0,XC.default)(d),style:{display:"block"},onClick:v},s={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},I;return this.props.prevArrow?I=Lu.default.cloneElement(this.props.prevArrow,og(og({},b),s)):I=Lu.default.createElement("button",ig({key:"0",type:"button"},b)," ","Previous"),I}}]),a}(Lu.default.PureComponent);Uu.PrevArrow=AD;var PD=function(t){QC(a,t);var n=ek(a);function a(){return KC(this,a),n.apply(this,arguments)}return JC(a,[{key:"clickHandler",value:function(d,v){v&&v.preventDefault(),this.props.clickHandler(d,v)}},{key:"render",value:function(){var d={"slick-arrow":!0,"slick-next":!0},v=this.clickHandler.bind(this,{message:"next"});(0,TD.canGoNext)(this.props)||(d["slick-disabled"]=!0,v=null);var b={key:"1","data-role":"none",className:(0,XC.default)(d),style:{display:"block"},onClick:v},s={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},I;return this.props.nextArrow?I=Lu.default.cloneElement(this.props.nextArrow,og(og({},b),s)):I=Lu.default.createElement("button",ig({key:"1",type:"button"},b)," ","Next"),I}}]),a}(Lu.default.PureComponent);Uu.NextArrow=PD;var tk=function(){if(typeof Map!="undefined")return Map;function t(n,a){var u=-1;return n.some(function(d,v){return d[0]===a?(u=v,!0):!1}),u}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(a){var u=t(this.__entries__,a),d=this.__entries__[u];return d&&d[1]},n.prototype.set=function(a,u){var d=t(this.__entries__,a);~d?this.__entries__[d][1]=u:this.__entries__.push([a,u])},n.prototype.delete=function(a){var u=this.__entries__,d=t(u,a);~d&&u.splice(d,1)},n.prototype.has=function(a){return!!~t(this.__entries__,a)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(a,u){u===void 0&&(u=null);for(var d=0,v=this.__entries__;d<v.length;d++){var b=v[d];a.call(u,b[1],b[0])}},n}()}(),f0=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,sg=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),MD=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(sg):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),zD=2;function OD(t,n){var a=!1,u=!1,d=0;function v(){a&&(a=!1,t()),u&&s()}function b(){MD(v)}function s(){var I=Date.now();if(a){if(I-d<zD)return;u=!0}else a=!0,u=!1,setTimeout(b,n);d=I}return s}var LD=20,DD=["top","right","bottom","left","width","height","size","weight"],RD=typeof MutationObserver!="undefined",BD=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=OD(this.refresh.bind(this),LD)}return t.prototype.addObserver=function(n){~this.observers_.indexOf(n)||this.observers_.push(n),this.connected_||this.connect_()},t.prototype.removeObserver=function(n){var a=this.observers_,u=a.indexOf(n);~u&&a.splice(u,1),!a.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var n=this.updateObservers_();n&&this.refresh()},t.prototype.updateObservers_=function(){var n=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return n.forEach(function(a){return a.broadcastActive()}),n.length>0},t.prototype.connect_=function(){!f0||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),RD?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!f0||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(n){var a=n.propertyName,u=a===void 0?"":a,d=DD.some(function(v){return!!~u.indexOf(v)});d&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),nk=function(t,n){for(var a=0,u=Object.keys(n);a<u.length;a++){var d=u[a];Object.defineProperty(t,d,{value:n[d],enumerable:!1,writable:!1,configurable:!0})}return t},Vu=function(t){var n=t&&t.ownerDocument&&t.ownerDocument.defaultView;return n||sg},rk=Ug(0,0,0,0);function lg(t){return parseFloat(t)||0}function zS(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return n.reduce(function(u,d){var v=t["border-"+d+"-width"];return u+lg(v)},0)}function FD(t){for(var n=["top","right","bottom","left"],a={},u=0,d=n;u<d.length;u++){var v=d[u],b=t["padding-"+v];a[v]=lg(b)}return a}function ND(t){var n=t.getBBox();return Ug(0,0,n.width,n.height)}function jD(t){var n=t.clientWidth,a=t.clientHeight;if(!n&&!a)return rk;var u=Vu(t).getComputedStyle(t),d=FD(u),v=d.left+d.right,b=d.top+d.bottom,s=lg(u.width),I=lg(u.height);if(u.boxSizing==="border-box"&&(Math.round(s+v)!==n&&(s-=zS(u,"left","right")+v),Math.round(I+b)!==a&&(I-=zS(u,"top","bottom")+b)),!VD(t)){var F=Math.round(s+v)-n,W=Math.round(I+b)-a;Math.abs(F)!==1&&(s-=F),Math.abs(W)!==1&&(I-=W)}return Ug(d.left,d.top,s,I)}var UD=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof Vu(t).SVGGraphicsElement}:function(t){return t instanceof Vu(t).SVGElement&&typeof t.getBBox=="function"}}();function VD(t){return t===Vu(t).document.documentElement}function $D(t){return f0?UD(t)?ND(t):jD(t):rk}function GD(t){var n=t.x,a=t.y,u=t.width,d=t.height,v=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,b=Object.create(v.prototype);return nk(b,{x:n,y:a,width:u,height:d,top:a,right:n+u,bottom:d+a,left:n}),b}function Ug(t,n,a,u){return{x:t,y:n,width:a,height:u}}var qD=function(){function t(n){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ug(0,0,0,0),this.target=n}return t.prototype.isActive=function(){var n=$D(this.target);return this.contentRect_=n,n.width!==this.broadcastWidth||n.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var n=this.contentRect_;return this.broadcastWidth=n.width,this.broadcastHeight=n.height,n},t}(),ZD=function(){function t(n,a){var u=GD(a);nk(this,{target:n,contentRect:u})}return t}(),WD=function(){function t(n,a,u){if(this.activeObservations_=[],this.observations_=new tk,typeof n!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=n,this.controller_=a,this.callbackCtx_=u}return t.prototype.observe=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(n instanceof Vu(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(n)||(a.set(n,new qD(n)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(n){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(n instanceof Vu(n).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;!a.has(n)||(a.delete(n),a.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var n=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&n.activeObservations_.push(a)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var n=this.callbackCtx_,a=this.activeObservations_.map(function(u){return new ZD(u.target,u.broadcastRect())});this.callback_.call(n,a,n),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),ik=typeof WeakMap!="undefined"?new WeakMap:new tk,ok=function(){function t(n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=BD.getInstance(),u=new WD(n,a,this);ik.set(this,u)}return t}();["observe","unobserve","disconnect"].forEach(function(t){ok.prototype[t]=function(){var n;return(n=ik.get(this))[t].apply(n,arguments)}});var HD=function(){return typeof sg.ResizeObserver!="undefined"?sg.ResizeObserver:ok}(),XD=Object.freeze(Object.defineProperty({__proto__:null,default:HD},Symbol.toStringTag,{value:"Module"})),YD=VP(XD);Object.defineProperty(Bg,"__esModule",{value:!0});Bg.InnerSlider=void 0;var ni=mf(In.exports),KD=mf(BC),JD=mf($L),QD=mf(pf.exports),Qn=ut,e4=Ng,t4=jg,OS=Uu,n4=mf(YD);function mf(t){return t&&t.__esModule?t:{default:t}}function Rd(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rd=function(a){return typeof a}:Rd=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Rd(t)}function cg(){return cg=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},cg.apply(this,arguments)}function r4(t,n){if(t==null)return{};var a=i4(t,n),u,d;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(d=0;d<v.length;d++)u=v[d],!(n.indexOf(u)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,u)||(a[u]=t[u]))}return a}function i4(t,n){if(t==null)return{};var a={},u=Object.keys(t),d,v;for(v=0;v<u.length;v++)d=u[v],!(n.indexOf(d)>=0)&&(a[d]=t[d]);return a}function LS(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);n&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function It(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?LS(Object(a),!0).forEach(function(u){Kt(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):LS(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function o4(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function DS(t,n){for(var a=0;a<n.length;a++){var u=n[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function a4(t,n,a){return n&&DS(t.prototype,n),a&&DS(t,a),t}function s4(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&p0(t,n)}function p0(t,n){return p0=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u},p0(t,n)}function l4(t){var n=u4();return function(){var u=ug(t),d;if(n){var v=ug(this).constructor;d=Reflect.construct(u,arguments,v)}else d=u.apply(this,arguments);return c4(this,d)}}function c4(t,n){return n&&(Rd(n)==="object"||typeof n=="function")?n:Yt(t)}function Yt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ug(t){return ug=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},ug(t)}function Kt(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}var h4=function(t){s4(a,t);var n=l4(a);function a(u){var d;o4(this,a),d=n.call(this,u),Kt(Yt(d),"listRefHandler",function(b){return d.list=b}),Kt(Yt(d),"trackRefHandler",function(b){return d.track=b}),Kt(Yt(d),"adaptHeight",function(){if(d.props.adaptiveHeight&&d.list){var b=d.list.querySelector('[data-index="'.concat(d.state.currentSlide,'"]'));d.list.style.height=(0,Qn.getHeight)(b)+"px"}}),Kt(Yt(d),"componentDidMount",function(){if(d.props.onInit&&d.props.onInit(),d.props.lazyLoad){var b=(0,Qn.getOnDemandLazySlides)(It(It({},d.props),d.state));b.length>0&&(d.setState(function(I){return{lazyLoadedList:I.lazyLoadedList.concat(b)}}),d.props.onLazyLoad&&d.props.onLazyLoad(b))}var s=It({listRef:d.list,trackRef:d.track},d.props);d.updateState(s,!0,function(){d.adaptHeight(),d.props.autoplay&&d.autoPlay("update")}),d.props.lazyLoad==="progressive"&&(d.lazyLoadTimer=setInterval(d.progressiveLazyLoad,1e3)),d.ro=new n4.default(function(){d.state.animating?(d.onWindowResized(!1),d.callbackTimers.push(setTimeout(function(){return d.onWindowResized()},d.props.speed))):d.onWindowResized()}),d.ro.observe(d.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(I){I.onfocus=d.props.pauseOnFocus?d.onSlideFocus:null,I.onblur=d.props.pauseOnFocus?d.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",d.onWindowResized):window.attachEvent("onresize",d.onWindowResized)}),Kt(Yt(d),"componentWillUnmount",function(){d.animationEndCallback&&clearTimeout(d.animationEndCallback),d.lazyLoadTimer&&clearInterval(d.lazyLoadTimer),d.callbackTimers.length&&(d.callbackTimers.forEach(function(b){return clearTimeout(b)}),d.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",d.onWindowResized):window.detachEvent("onresize",d.onWindowResized),d.autoplayTimer&&clearInterval(d.autoplayTimer),d.ro.disconnect()}),Kt(Yt(d),"componentDidUpdate",function(b){if(d.checkImagesLoad(),d.props.onReInit&&d.props.onReInit(),d.props.lazyLoad){var s=(0,Qn.getOnDemandLazySlides)(It(It({},d.props),d.state));s.length>0&&(d.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(s)}}),d.props.onLazyLoad&&d.props.onLazyLoad(s))}d.adaptHeight();var I=It(It({listRef:d.list,trackRef:d.track},d.props),d.state),F=d.didPropsChange(b);F&&d.updateState(I,F,function(){d.state.currentSlide>=ni.default.Children.count(d.props.children)&&d.changeSlide({message:"index",index:ni.default.Children.count(d.props.children)-d.props.slidesToShow,currentSlide:d.state.currentSlide}),d.props.autoplay?d.autoPlay("update"):d.pause("paused")})}),Kt(Yt(d),"onWindowResized",function(b){d.debouncedResize&&d.debouncedResize.cancel(),d.debouncedResize=(0,JD.default)(function(){return d.resizeWindow(b)},50),d.debouncedResize()}),Kt(Yt(d),"resizeWindow",function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,s=Boolean(d.track&&d.track.node);if(!!s){var I=It(It({listRef:d.list,trackRef:d.track},d.props),d.state);d.updateState(I,b,function(){d.props.autoplay?d.autoPlay("update"):d.pause("paused")}),d.setState({animating:!1}),clearTimeout(d.animationEndCallback),delete d.animationEndCallback}}),Kt(Yt(d),"updateState",function(b,s,I){var F=(0,Qn.initializedState)(b);b=It(It(It({},b),F),{},{slideIndex:F.currentSlide});var W=(0,Qn.getTrackLeft)(b);b=It(It({},b),{},{left:W});var j=(0,Qn.getTrackCSS)(b);(s||ni.default.Children.count(d.props.children)!==ni.default.Children.count(b.children))&&(F.trackStyle=j),d.setState(F,I)}),Kt(Yt(d),"ssrInit",function(){if(d.props.variableWidth){var b=0,s=0,I=[],F=(0,Qn.getPreClones)(It(It(It({},d.props),d.state),{},{slideCount:d.props.children.length})),W=(0,Qn.getPostClones)(It(It(It({},d.props),d.state),{},{slideCount:d.props.children.length}));d.props.children.forEach(function(We){I.push(We.props.style.width),b+=We.props.style.width});for(var j=0;j<F;j++)s+=I[I.length-1-j],b+=I[I.length-1-j];for(var Y=0;Y<W;Y++)b+=I[Y];for(var H=0;H<d.state.currentSlide;H++)s+=I[H];var be={width:b+"px",left:-s+"px"};if(d.props.centerMode){var ge="".concat(I[d.state.currentSlide],"px");be.left="calc(".concat(be.left," + (100% - ").concat(ge,") / 2 ) ")}return{trackStyle:be}}var Q=ni.default.Children.count(d.props.children),V=It(It(It({},d.props),d.state),{},{slideCount:Q}),J=(0,Qn.getPreClones)(V)+(0,Qn.getPostClones)(V)+Q,he=100/d.props.slidesToShow*J,pe=100/J,ze=-pe*((0,Qn.getPreClones)(V)+d.state.currentSlide)*he/100;d.props.centerMode&&(ze+=(100-pe*he/100)/2);var Ee={width:he+"%",left:ze+"%"};return{slideWidth:pe+"%",trackStyle:Ee}}),Kt(Yt(d),"checkImagesLoad",function(){var b=d.list&&d.list.querySelectorAll&&d.list.querySelectorAll(".slick-slide img")||[],s=b.length,I=0;Array.prototype.forEach.call(b,function(F){var W=function(){return++I&&I>=s&&d.onWindowResized()};if(!F.onclick)F.onclick=function(){return F.parentNode.focus()};else{var j=F.onclick;F.onclick=function(){j(),F.parentNode.focus()}}F.onload||(d.props.lazyLoad?F.onload=function(){d.adaptHeight(),d.callbackTimers.push(setTimeout(d.onWindowResized,d.props.speed))}:(F.onload=W,F.onerror=function(){W(),d.props.onLazyLoadError&&d.props.onLazyLoadError()}))})}),Kt(Yt(d),"progressiveLazyLoad",function(){for(var b=[],s=It(It({},d.props),d.state),I=d.state.currentSlide;I<d.state.slideCount+(0,Qn.getPostClones)(s);I++)if(d.state.lazyLoadedList.indexOf(I)<0){b.push(I);break}for(var F=d.state.currentSlide-1;F>=-(0,Qn.getPreClones)(s);F--)if(d.state.lazyLoadedList.indexOf(F)<0){b.push(F);break}b.length>0?(d.setState(function(W){return{lazyLoadedList:W.lazyLoadedList.concat(b)}}),d.props.onLazyLoad&&d.props.onLazyLoad(b)):d.lazyLoadTimer&&(clearInterval(d.lazyLoadTimer),delete d.lazyLoadTimer)}),Kt(Yt(d),"slideHandler",function(b){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=d.props,F=I.asNavFor,W=I.beforeChange,j=I.onLazyLoad,Y=I.speed,H=I.afterChange,be=d.state.currentSlide,ge=(0,Qn.slideHandler)(It(It(It({index:b},d.props),d.state),{},{trackRef:d.track,useCSS:d.props.useCSS&&!s})),Q=ge.state,V=ge.nextState;if(!!Q){W&&W(be,Q.currentSlide);var J=Q.lazyLoadedList.filter(function(he){return d.state.lazyLoadedList.indexOf(he)<0});j&&J.length>0&&j(J),!d.props.waitForAnimate&&d.animationEndCallback&&(clearTimeout(d.animationEndCallback),H&&H(be),delete d.animationEndCallback),d.setState(Q,function(){F&&d.asNavForIndex!==b&&(d.asNavForIndex=b,F.innerSlider.slideHandler(b)),V&&(d.animationEndCallback=setTimeout(function(){var he=V.animating,pe=r4(V,["animating"]);d.setState(pe,function(){d.callbackTimers.push(setTimeout(function(){return d.setState({animating:he})},10)),H&&H(Q.currentSlide),delete d.animationEndCallback})},Y))})}}),Kt(Yt(d),"changeSlide",function(b){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=It(It({},d.props),d.state),F=(0,Qn.changeSlide)(I,b);if(!(F!==0&&!F)&&(s===!0?d.slideHandler(F,s):d.slideHandler(F),d.props.autoplay&&d.autoPlay("update"),d.props.focusOnSelect)){var W=d.list.querySelectorAll(".slick-current");W[0]&&W[0].focus()}}),Kt(Yt(d),"clickHandler",function(b){d.clickable===!1&&(b.stopPropagation(),b.preventDefault()),d.clickable=!0}),Kt(Yt(d),"keyHandler",function(b){var s=(0,Qn.keyHandler)(b,d.props.accessibility,d.props.rtl);s!==""&&d.changeSlide({message:s})}),Kt(Yt(d),"selectHandler",function(b){d.changeSlide(b)}),Kt(Yt(d),"disableBodyScroll",function(){var b=function(I){I=I||window.event,I.preventDefault&&I.preventDefault(),I.returnValue=!1};window.ontouchmove=b}),Kt(Yt(d),"enableBodyScroll",function(){window.ontouchmove=null}),Kt(Yt(d),"swipeStart",function(b){d.props.verticalSwiping&&d.disableBodyScroll();var s=(0,Qn.swipeStart)(b,d.props.swipe,d.props.draggable);s!==""&&d.setState(s)}),Kt(Yt(d),"swipeMove",function(b){var s=(0,Qn.swipeMove)(b,It(It(It({},d.props),d.state),{},{trackRef:d.track,listRef:d.list,slideIndex:d.state.currentSlide}));!s||(s.swiping&&(d.clickable=!1),d.setState(s))}),Kt(Yt(d),"swipeEnd",function(b){var s=(0,Qn.swipeEnd)(b,It(It(It({},d.props),d.state),{},{trackRef:d.track,listRef:d.list,slideIndex:d.state.currentSlide}));if(!!s){var I=s.triggerSlideHandler;delete s.triggerSlideHandler,d.setState(s),I!==void 0&&(d.slideHandler(I),d.props.verticalSwiping&&d.enableBodyScroll())}}),Kt(Yt(d),"touchEnd",function(b){d.swipeEnd(b),d.clickable=!0}),Kt(Yt(d),"slickPrev",function(){d.callbackTimers.push(setTimeout(function(){return d.changeSlide({message:"previous"})},0))}),Kt(Yt(d),"slickNext",function(){d.callbackTimers.push(setTimeout(function(){return d.changeSlide({message:"next"})},0))}),Kt(Yt(d),"slickGoTo",function(b){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(b=Number(b),isNaN(b))return"";d.callbackTimers.push(setTimeout(function(){return d.changeSlide({message:"index",index:b,currentSlide:d.state.currentSlide},s)},0))}),Kt(Yt(d),"play",function(){var b;if(d.props.rtl)b=d.state.currentSlide-d.props.slidesToScroll;else if((0,Qn.canGoNext)(It(It({},d.props),d.state)))b=d.state.currentSlide+d.props.slidesToScroll;else return!1;d.slideHandler(b)}),Kt(Yt(d),"autoPlay",function(b){d.autoplayTimer&&clearInterval(d.autoplayTimer);var s=d.state.autoplaying;if(b==="update"){if(s==="hovered"||s==="focused"||s==="paused")return}else if(b==="leave"){if(s==="paused"||s==="focused")return}else if(b==="blur"&&(s==="paused"||s==="hovered"))return;d.autoplayTimer=setInterval(d.play,d.props.autoplaySpeed+50),d.setState({autoplaying:"playing"})}),Kt(Yt(d),"pause",function(b){d.autoplayTimer&&(clearInterval(d.autoplayTimer),d.autoplayTimer=null);var s=d.state.autoplaying;b==="paused"?d.setState({autoplaying:"paused"}):b==="focused"?(s==="hovered"||s==="playing")&&d.setState({autoplaying:"focused"}):s==="playing"&&d.setState({autoplaying:"hovered"})}),Kt(Yt(d),"onDotsOver",function(){return d.props.autoplay&&d.pause("hovered")}),Kt(Yt(d),"onDotsLeave",function(){return d.props.autoplay&&d.state.autoplaying==="hovered"&&d.autoPlay("leave")}),Kt(Yt(d),"onTrackOver",function(){return d.props.autoplay&&d.pause("hovered")}),Kt(Yt(d),"onTrackLeave",function(){return d.props.autoplay&&d.state.autoplaying==="hovered"&&d.autoPlay("leave")}),Kt(Yt(d),"onSlideFocus",function(){return d.props.autoplay&&d.pause("focused")}),Kt(Yt(d),"onSlideBlur",function(){return d.props.autoplay&&d.state.autoplaying==="focused"&&d.autoPlay("blur")}),Kt(Yt(d),"render",function(){var b=(0,QD.default)("slick-slider",d.props.className,{"slick-vertical":d.props.vertical,"slick-initialized":!0}),s=It(It({},d.props),d.state),I=(0,Qn.extractObject)(s,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),F=d.props.pauseOnHover;I=It(It({},I),{},{onMouseEnter:F?d.onTrackOver:null,onMouseLeave:F?d.onTrackLeave:null,onMouseOver:F?d.onTrackOver:null,focusOnSelect:d.props.focusOnSelect&&d.clickable?d.selectHandler:null});var W;if(d.props.dots===!0&&d.state.slideCount>=d.props.slidesToShow){var j=(0,Qn.extractObject)(s,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),Y=d.props.pauseOnDotsHover;j=It(It({},j),{},{clickHandler:d.changeSlide,onMouseEnter:Y?d.onDotsLeave:null,onMouseOver:Y?d.onDotsOver:null,onMouseLeave:Y?d.onDotsLeave:null}),W=ni.default.createElement(t4.Dots,j)}var H,be,ge=(0,Qn.extractObject)(s,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);ge.clickHandler=d.changeSlide,d.props.arrows&&(H=ni.default.createElement(OS.PrevArrow,ge),be=ni.default.createElement(OS.NextArrow,ge));var Q=null;d.props.vertical&&(Q={height:d.state.listHeight});var V=null;d.props.vertical===!1?d.props.centerMode===!0&&(V={padding:"0px "+d.props.centerPadding}):d.props.centerMode===!0&&(V={padding:d.props.centerPadding+" 0px"});var J=It(It({},Q),V),he=d.props.touchMove,pe={className:"slick-list",style:J,onClick:d.clickHandler,onMouseDown:he?d.swipeStart:null,onMouseMove:d.state.dragging&&he?d.swipeMove:null,onMouseUp:he?d.swipeEnd:null,onMouseLeave:d.state.dragging&&he?d.swipeEnd:null,onTouchStart:he?d.swipeStart:null,onTouchMove:d.state.dragging&&he?d.swipeMove:null,onTouchEnd:he?d.touchEnd:null,onTouchCancel:d.state.dragging&&he?d.swipeEnd:null,onKeyDown:d.props.accessibility?d.keyHandler:null},ze={className:b,dir:"ltr",style:d.props.style};return d.props.unslick&&(pe={className:"slick-list"},ze={className:b}),ni.default.createElement("div",ze,d.props.unslick?"":H,ni.default.createElement("div",cg({ref:d.listRefHandler},pe),ni.default.createElement(e4.Track,cg({ref:d.trackRefHandler},I),d.props.children)),d.props.unslick?"":be,d.props.unslick?"":W)}),d.list=null,d.track=null,d.state=It(It({},KD.default),{},{currentSlide:d.props.initialSlide,slideCount:ni.default.Children.count(d.props.children)}),d.callbackTimers=[],d.clickable=!0,d.debouncedResize=null;var v=d.ssrInit();return d.state=It(It({},d.state),v),d}return a4(a,[{key:"didPropsChange",value:function(d){for(var v=!1,b=0,s=Object.keys(this.props);b<s.length;b++){var I=s[b];if(!d.hasOwnProperty(I)){v=!0;break}if(!(Rd(d[I])==="object"||typeof d[I]=="function")&&d[I]!==this.props[I]){v=!0;break}}return v||ni.default.Children.count(this.props.children)!==ni.default.Children.count(d.children)}}]),a}(ni.default.Component);Bg.InnerSlider=h4;var d4=function(t){return t.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}).toLowerCase()},f4=d4,p4=f4,m4=function(t){var n=/[height|width]$/;return n.test(t)},RS=function(t){var n="",a=Object.keys(t);return a.forEach(function(u,d){var v=t[u];u=p4(u),m4(u)&&typeof v=="number"&&(v=v+"px"),v===!0?n+=u:v===!1?n+="not "+u:n+="("+u+": "+v+")",d<a.length-1&&(n+=" and ")}),n},g4=function(t){var n="";return typeof t=="string"?t:t instanceof Array?(t.forEach(function(a,u){n+=RS(a),u<t.length-1&&(n+=", ")}),n):RS(t)},y4=g4,ak={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(In.exports);function a(v){return v&&v.__esModule?v:{default:v}}var u={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(b){return n.default.createElement("ul",{style:{display:"block"}},b)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(b){return n.default.createElement("button",null,b+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},d=u;t.default=d})(ak);function m0(t){this.options=t,!t.deferSetup&&this.setup()}m0.prototype={constructor:m0,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}};var _4=m0;function v4(t,n){var a=0,u=t.length,d;for(a;a<u&&(d=n(t[a],a),d!==!1);a++);}function x4(t){return Object.prototype.toString.apply(t)==="[object Array]"}function b4(t){return typeof t=="function"}var sk={isFunction:b4,isArray:x4,each:v4},w4=_4,Q_=sk.each;function g0(t,n){this.query=t,this.isUnconditional=n,this.handlers=[],this.mql=window.matchMedia(t);var a=this;this.listener=function(u){a.mql=u.currentTarget||u,a.assess()},this.mql.addListener(this.listener)}g0.prototype={constuctor:g0,addHandler:function(t){var n=new w4(t);this.handlers.push(n),this.matches()&&n.on()},removeHandler:function(t){var n=this.handlers;Q_(n,function(a,u){if(a.equals(t))return a.destroy(),!n.splice(u,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){Q_(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";Q_(this.handlers,function(n){n[t]()})}};var S4=g0,T4=S4,U1=sk,E4=U1.each,BS=U1.isFunction,C4=U1.isArray;function y0(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}y0.prototype={constructor:y0,register:function(t,n,a){var u=this.queries,d=a&&this.browserIsIncapable;return u[t]||(u[t]=new T4(t,d)),BS(n)&&(n={match:n}),C4(n)||(n=[n]),E4(n,function(v){BS(v)&&(v={match:v}),u[t].addHandler(v)}),this},unregister:function(t,n){var a=this.queries[t];return a&&(n?a.removeHandler(n):(a.clear(),delete this.queries[t])),this}};var k4=y0,I4=k4,A4=new I4;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=b(In.exports),a=Bg,u=b(y4),d=b(ak),v=ut;function b(Be){return Be&&Be.__esModule?Be:{default:Be}}function s(Be){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(it){return typeof it}:s=function(it){return it&&typeof Symbol=="function"&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it},s(Be)}function I(){return I=Object.assign||function(Be){for(var Oe=1;Oe<arguments.length;Oe++){var it=arguments[Oe];for(var St in it)Object.prototype.hasOwnProperty.call(it,St)&&(Be[St]=it[St])}return Be},I.apply(this,arguments)}function F(Be,Oe){var it=Object.keys(Be);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(Be);Oe&&(St=St.filter(function(ct){return Object.getOwnPropertyDescriptor(Be,ct).enumerable})),it.push.apply(it,St)}return it}function W(Be){for(var Oe=1;Oe<arguments.length;Oe++){var it=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?F(Object(it),!0).forEach(function(St){ze(Be,St,it[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Be,Object.getOwnPropertyDescriptors(it)):F(Object(it)).forEach(function(St){Object.defineProperty(Be,St,Object.getOwnPropertyDescriptor(it,St))})}return Be}function j(Be,Oe){if(!(Be instanceof Oe))throw new TypeError("Cannot call a class as a function")}function Y(Be,Oe){for(var it=0;it<Oe.length;it++){var St=Oe[it];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(Be,St.key,St)}}function H(Be,Oe,it){return Oe&&Y(Be.prototype,Oe),it&&Y(Be,it),Be}function be(Be,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Super expression must either be null or a function");Be.prototype=Object.create(Oe&&Oe.prototype,{constructor:{value:Be,writable:!0,configurable:!0}}),Oe&&ge(Be,Oe)}function ge(Be,Oe){return ge=Object.setPrototypeOf||function(St,ct){return St.__proto__=ct,St},ge(Be,Oe)}function Q(Be){var Oe=he();return function(){var St=pe(Be),ct;if(Oe){var at=pe(this).constructor;ct=Reflect.construct(St,arguments,at)}else ct=St.apply(this,arguments);return V(this,ct)}}function V(Be,Oe){return Oe&&(s(Oe)==="object"||typeof Oe=="function")?Oe:J(Be)}function J(Be){if(Be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Be}function he(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function pe(Be){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(it){return it.__proto__||Object.getPrototypeOf(it)},pe(Be)}function ze(Be,Oe,it){return Oe in Be?Object.defineProperty(Be,Oe,{value:it,enumerable:!0,configurable:!0,writable:!0}):Be[Oe]=it,Be}var Ee=(0,v.canUseDOM)()&&A4,We=function(Be){be(it,Be);var Oe=Q(it);function it(St){var ct;return j(this,it),ct=Oe.call(this,St),ze(J(ct),"innerSliderRefHandler",function(at){return ct.innerSlider=at}),ze(J(ct),"slickPrev",function(){return ct.innerSlider.slickPrev()}),ze(J(ct),"slickNext",function(){return ct.innerSlider.slickNext()}),ze(J(ct),"slickGoTo",function(at){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ct.innerSlider.slickGoTo(at,An)}),ze(J(ct),"slickPause",function(){return ct.innerSlider.pause("paused")}),ze(J(ct),"slickPlay",function(){return ct.innerSlider.autoPlay("play")}),ct.state={breakpoint:null},ct._responsiveMediaHandlers=[],ct}return H(it,[{key:"media",value:function(ct,at){Ee.register(ct,at),this._responsiveMediaHandlers.push({query:ct,handler:at})}},{key:"componentDidMount",value:function(){var ct=this;if(this.props.responsive){var at=this.props.responsive.map(function(Jt){return Jt.breakpoint});at.sort(function(Jt,hn){return Jt-hn}),at.forEach(function(Jt,hn){var _n;hn===0?_n=(0,u.default)({minWidth:0,maxWidth:Jt}):_n=(0,u.default)({minWidth:at[hn-1]+1,maxWidth:Jt}),(0,v.canUseDOM)()&&ct.media(_n,function(){ct.setState({breakpoint:Jt})})});var An=(0,u.default)({minWidth:at.slice(-1)[0]});(0,v.canUseDOM)()&&this.media(An,function(){ct.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(ct){Ee.unregister(ct.query,ct.handler)})}},{key:"render",value:function(){var ct=this,at,An;this.state.breakpoint?(An=this.props.responsive.filter(function(Dt){return Dt.breakpoint===ct.state.breakpoint}),at=An[0].settings==="unslick"?"unslick":W(W(W({},d.default),this.props),An[0].settings)):at=W(W({},d.default),this.props),at.centerMode&&(at.slidesToScroll>1,at.slidesToScroll=1),at.fade&&(at.slidesToShow>1,at.slidesToScroll>1,at.slidesToShow=1,at.slidesToScroll=1);var Jt=n.default.Children.toArray(this.props.children);Jt=Jt.filter(function(Dt){return typeof Dt=="string"?!!Dt.trim():!!Dt}),at.variableWidth&&(at.rows>1||at.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),at.variableWidth=!1);for(var hn=[],_n=null,qn=0;qn<Jt.length;qn+=at.rows*at.slidesPerRow){for(var Pn=[],mr=qn;mr<qn+at.rows*at.slidesPerRow;mr+=at.slidesPerRow){for(var Ve=[],pt=mr;pt<mr+at.slidesPerRow&&(at.variableWidth&&Jt[pt].props.style&&(_n=Jt[pt].props.style.width),!(pt>=Jt.length));pt+=1)Ve.push(n.default.cloneElement(Jt[pt],{key:100*qn+10*mr+pt,tabIndex:-1,style:{width:"".concat(100/at.slidesPerRow,"%"),display:"inline-block"}}));Pn.push(n.default.createElement("div",{key:10*qn+mr},Ve))}at.variableWidth?hn.push(n.default.createElement("div",{key:qn,style:{width:_n}},Pn)):hn.push(n.default.createElement("div",{key:qn},Pn))}if(at==="unslick"){var Tt="regular slider "+(this.props.className||"");return n.default.createElement("div",{className:Tt},Jt)}else hn.length<=at.slidesToShow&&(at.unslick=!0);return n.default.createElement(a.InnerSlider,I({style:this.props.style,ref:this.innerSliderRefHandler},at),hn)}}]),it}(n.default.Component);t.default=We})(RC);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(RC);function a(d){return d&&d.__esModule?d:{default:d}}var u=n.default;t.default=u})(DC);var P4=UP(DC);const M4=({link:t,img:n,name:a})=>(console.log(n),Je("div",{className:"box-client",children:xn("a",{className:"client",href:t,target:"blanck",children:[Je("img",{width:"200",src:n,alt:a}),Je("h4",{className:"animate__animated animate__fadeInUp",children:a})]})}));var z4="/assets/inta.2878b6ed.png",O4="/assets/konecta.31e849bf.svg",L4="/assets/mec.021f07e7.png",D4="/assets/leti.46ff35cc.png",R4="/assets/polo.382ae1f9.png",B4="/assets/autopista.63fc68ca.png",F4="/assets/logo-motorx.32cf5a7c.svg",N4="/assets/expoagro_logo.6f3c5797.png",j4="/assets/swipro.b7f305e5.jpg",U4="/assets/faro.61ef2826.png",V4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAAAvCAYAAAA8VlI5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABeRJREFUeNrsXF1y4jgQdqi8L3uCMSdY53kfYk4wcIKBEwROAJwA5gQmJwg5AZ6HfY5zgmFOsOwJdtWp9pRWI6m7ZUESoq5yuRKsdqv1qX8+G7IsSZIkSZIkOatcJRdcjnz6c/GgTv0Yun78tRrqf18n914MSJbqNIqkbpUiymWCpFCnp0jqGhVNbsx/9pKbL0LWEXVNbf9MQHn/0WSmTmWslKOiSZOK2csDSY4pJ0YBa005qZi9DIHitWFeS0WdeWqPU+SZEXXMRkUTL1BSjfIx0tPCc8nB1g6TqUcpLk9hsEJs7ZhIH8MitHi/4RnC6T94rtXYI6M97HPujddCyP6EY57RWTvqPpb72XwF9zooXYcILS8cuV5HYC0h0V0RNcyUM+8ri4H7iFX0T+eZTB8C8i7jkURbdXx1VeSUzWrcFe6synPdEav+jWNXgp2fBb4BW+9t+jzggAWdoF9ynz/R1vrUKccHFDD2e6RKul2Am3YXoP4qC2MRrRNjgBuq+T1zTr/cQ+n/t8P8Yd5jF8iNCPJAAMQGmLEtIjA7oh03ovQsu+/oIl069OY6SPZZONU8UzqeUI9E9gLgzyzpt+4wf1iwPQLBBZIJLmou1A12fnforhhzHqFtfTFQECw7RFuMlLMxQFJ01NnuPIlIgWUWf48dbW6jqA0kI9dnAt3/W2whCVfgusiB0hY5GDa7pJyp4fwiUpQq8SHYqaQ0dlkdQWeBoDDTfBVBd7/dPIwux2XbMggoWgqqHQdF9OgpB4yfRV7Mu4AUJI1crS8aY9PU2FLqB4f4+mz8vY5YC5aYMidtt5jxybiXjYzrxGuPLW2lq61deyJEY1T7C0b0masxW22nzYhxbYfA7SpA930LMkadZDptrqVlmyyx1qg4OrUOx+uTtm3HRZwQPlmY3aVRLC+Ied9lDoY2iJlF5Pry2o1e5avr//bsHHDI0NYVMBz/8nyC0fVAdFsKO6VfxjB98+RLsdCqM+bWxSe/+7oYNb7yABT4n4E4ohAkjs/BDZcM8/EjEGHU+C+eBeXWPLaocy/li7DGuHXct0HyrmHadev5bE745Naz2AVRU80xqtjWJIdIZwPadcCOWXrauMayC6kcTBWK3gX1tZ1GvWXjNyQRtCLa11Loytxj75YY++gBSunzKaaxnRRoPSFICiJHhvAvVMFFLegpC9o21O8DOI5Q4RSgx473+CEdIH0oyE45Id2FdOdFcpoPJHkW9+2xGP4gzY50TRhQMOUUgpTDXcgvwpbSDKXNCRdtlNEU+AAKVCxSbzI+UXkkUl2oT0Y+2gA/G0kjWo8JkuCUgwvpA8vEVWdg8SieVETxLQiwzmP9SS7O9Zmp+5vns7VrsdFXMyIV+6Kgj7s5uDombkTpmnKoXQYU9Kx1DpyRhqao+vvs9cS10H8wx++I9LM3CTAGLaFvvr0emUAXfu9nEmLTNSOaLIm8CYzewtPmbXBBJ4xdADuJu1BHJNFeS24DIqAeaQ/q+ppo/eGBXxuRc2FBDXpLgT9fqIogoDBSDiUAoi0wvHAmwCKVFfdFoxNJiaTdVy1NSecHnAb1fZziTPNZ+V6IolJP1wdW+kOvecSaYit5IaiDPDJ27QMe4k2AKXuevb40FAvd65By2J0DhGTc/cMIYAGQTM/kwO0p228EyyZCCj105G2GQe0xFlF3Ef2x1qjhYRb+rsvqjCBpGd2xACzHkLnhnOYdQAJt+SpgLNg6DHrDTUs5MRnPvK11wChoKwWAaYvWQchDughgqdHWmhF9BoL22BZZBgFAm6JPlwIep0aAjLl13lUg4RMiR8fTUP0t/La9fNa4ijp7I4LFfWlsogPaeYh4nzzjvcxtTcMaqQZ6zG8bBNmavgD2hoV4ZeGIUfYsnV/6AtjbBQnVTEzPSQ+kiPI2QUL93kntepMtRZSPJRVR3E/PbVACyvtLOauYhXNKPZeZcry/YZIiSko5PwvY1zIsAeV9pZwmASWlHOo3TDbJU0mSJEmS5APJfwIMAPaqlD3sCYsJAAAAAElFTkSuQmCC";const $4=[{link:"https://www.argentina.gob.ar/inta",img:z4,name:"Inta"},{link:"https://www.grupokonecta.com/somos-globales/argentina/",img:O4,name:"Konecta"},{link:"https://www.meconsul.com/",img:L4,name:"MEC"},{link:"http://www.letis.org/",img:D4,name:"Letis"},{link:"https://polotecnologico.net/",img:R4,name:"PoloTecnologico"},{link:"https://autopista.santafe.gov.ar/",img:B4,name:"Autopista"},{link:"https://reba.motorx.la/",img:F4,name:"Motor X"},{link:"https://www.expoagro.com.ar/",img:N4,name:"Expoagro"},{link:"https://www.linkedin.com/company/sinax-medica/?originalSubdomain=ar",img:j4,name:"Swiss Protech"},{link:"https://faro.org.ar/",img:U4,name:"Faro"},{link:"https://zona93.com.ar/",img:V4,name:"Zona 93"}];console.log(window.innerWidth);const G4={dots:!1,infinite:!0,slidesToShow:window.innerWidth>1200?3:2,slidesToScroll:3,autoplay:!0,speed:3e3,autoplaySpeed:2e3},q4=()=>{const[t]=Ku("global");return Je("div",{id:"clientes",className:"container",children:xn("section",{className:"clientes",children:[xn("h1",{children:[t("Clients.title"),Je("br",{})," SerTIC",Je("hr",{})]}),Je(P4,uw(cw({},G4),{children:$4.map(({link:n,img:a,name:u})=>Je(M4,{link:n,img:a,name:u},n))}))]})})},lk="SweetAlert2:",Z4=t=>{const n=[];for(let a=0;a<t.length;a++)n.indexOf(t[a])===-1&&n.push(t[a]);return n},V1=t=>t.charAt(0).toUpperCase()+t.slice(1),Ri=t=>Array.prototype.slice.call(t),Si=t=>{console.warn(`${lk} ${typeof t=="object"?t.join(" "):t}`)},oc=t=>{console.error(`${lk} ${t}`)},FS=[],W4=t=>{FS.includes(t)||(FS.push(t),Si(t))},H4=(t,n)=>{W4(`"${t}" is deprecated and will be removed in the next major release. Please use "${n}" instead.`)},Vg=t=>typeof t=="function"?t():t,$1=t=>t&&typeof t.toPromise=="function",gf=t=>$1(t)?t.toPromise():Promise.resolve(t),G1=t=>t&&Promise.resolve(t)===t,Du={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},X4=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Y4={},K4=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ck=t=>Object.prototype.hasOwnProperty.call(Du,t),uk=t=>X4.indexOf(t)!==-1,_0=t=>Y4[t],J4=t=>{ck(t)||Si(`Unknown parameter "${t}"`)},Q4=t=>{K4.includes(t)&&Si(`The parameter "${t}" is incompatible with toasts`)},e5=t=>{_0(t)&&H4(t,_0(t))},t5=t=>{!t.backdrop&&t.allowOutsideClick&&Si('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const n in t)J4(n),t.toast&&Q4(n),e5(n)},n5="swal2-",hk=t=>{const n={};for(const a in t)n[t[a]]=n5+t[a];return n},Re=hk(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Bd=hk(["success","warning","info","question","error"]),Zr=()=>document.body.querySelector(`.${Re.container}`),yf=t=>{const n=Zr();return n?n.querySelector(t):null},ro=t=>yf(`.${t}`),yn=()=>ro(Re.popup),_f=()=>ro(Re.icon),dk=()=>ro(Re.title),hg=()=>ro(Re["html-container"]),fk=()=>ro(Re.image),pk=()=>ro(Re["progress-steps"]),$g=()=>ro(Re["validation-message"]),To=()=>yf(`.${Re.actions} .${Re.confirm}`),Zs=()=>yf(`.${Re.actions} .${Re.deny}`),r5=()=>ro(Re["input-label"]),Qu=()=>yf(`.${Re.loader}`),Ql=()=>yf(`.${Re.actions} .${Re.cancel}`),vf=()=>ro(Re.actions),mk=()=>ro(Re.footer),Gg=()=>ro(Re["timer-progress-bar"]),q1=()=>ro(Re.close),i5=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Z1=()=>{const t=Ri(yn().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((a,u)=>{const d=parseInt(a.getAttribute("tabindex")),v=parseInt(u.getAttribute("tabindex"));return d>v?1:d<v?-1:0}),n=Ri(yn().querySelectorAll(i5)).filter(a=>a.getAttribute("tabindex")!=="-1");return Z4(t.concat(n)).filter(a=>Di(a))},W1=()=>Aa(document.body,Re.shown)&&!Aa(document.body,Re["toast-shown"])&&!Aa(document.body,Re["no-backdrop"]),qg=()=>yn()&&Aa(yn(),Re.toast),o5=()=>yn().hasAttribute("data-loading"),Ru={previousBodyPadding:null},Vr=(t,n)=>{if(t.textContent="",n){const u=new DOMParser().parseFromString(n,"text/html");Ri(u.querySelector("head").childNodes).forEach(d=>{t.appendChild(d)}),Ri(u.querySelector("body").childNodes).forEach(d=>{t.appendChild(d)})}},Aa=(t,n)=>{if(!n)return!1;const a=n.split(/\s+/);for(let u=0;u<a.length;u++)if(!t.classList.contains(a[u]))return!1;return!0},a5=(t,n)=>{Ri(t.classList).forEach(a=>{!Object.values(Re).includes(a)&&!Object.values(Bd).includes(a)&&!Object.values(n.showClass).includes(a)&&t.classList.remove(a)})},to=(t,n,a)=>{if(a5(t,n),n.customClass&&n.customClass[a]){if(typeof n.customClass[a]!="string"&&!n.customClass[a].forEach)return Si(`Invalid type of customClass.${a}! Expected string or iterable object, got "${typeof n.customClass[a]}"`);an(t,n.customClass[a])}},H1=(t,n)=>{if(!n)return null;switch(n){case"select":case"textarea":case"file":return t.querySelector(`.${Re.popup} > .${Re[n]}`);case"checkbox":return t.querySelector(`.${Re.popup} > .${Re.checkbox} input`);case"radio":return t.querySelector(`.${Re.popup} > .${Re.radio} input:checked`)||t.querySelector(`.${Re.popup} > .${Re.radio} input:first-child`);case"range":return t.querySelector(`.${Re.popup} > .${Re.range} input`);default:return t.querySelector(`.${Re.popup} > .${Re.input}`)}},gk=t=>{if(t.focus(),t.type!=="file"){const n=t.value;t.value="",t.value=n}},yk=(t,n,a)=>{!t||!n||(typeof n=="string"&&(n=n.split(/\s+/).filter(Boolean)),n.forEach(u=>{Array.isArray(t)?t.forEach(d=>{a?d.classList.add(u):d.classList.remove(u)}):a?t.classList.add(u):t.classList.remove(u)}))},an=(t,n)=>{yk(t,n,!0)},aa=(t,n)=>{yk(t,n,!1)},ks=(t,n)=>{const a=Ri(t.childNodes);for(let u=0;u<a.length;u++)if(Aa(a[u],n))return a[u]},Fd=(t,n,a)=>{a===`${parseInt(a)}`&&(a=parseInt(a)),a||parseInt(a)===0?t.style[n]=typeof a=="number"?`${a}px`:a:t.style.removeProperty(n)},Or=(t,n="flex")=>{t.style.display=n},Wr=t=>{t.style.display="none"},NS=(t,n,a,u)=>{const d=t.querySelector(n);d&&(d.style[a]=u)},Zg=(t,n,a)=>{n?Or(t,a):Wr(t)},Di=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),s5=()=>!Di(To())&&!Di(Zs())&&!Di(Ql()),jS=t=>t.scrollHeight>t.clientHeight,_k=t=>{const n=window.getComputedStyle(t),a=parseFloat(n.getPropertyValue("animation-duration")||"0"),u=parseFloat(n.getPropertyValue("transition-duration")||"0");return a>0||u>0},X1=(t,n=!1)=>{const a=Gg();Di(a)&&(n&&(a.style.transition="none",a.style.width="100%"),setTimeout(()=>{a.style.transition=`width ${t/1e3}s linear`,a.style.width="0%"},10))},l5=()=>{const t=Gg(),n=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const a=parseInt(window.getComputedStyle(t).width),u=n/a*100;t.style.removeProperty("transition"),t.style.width=`${u}%`},vk=()=>typeof window=="undefined"||typeof document=="undefined",c5=100,Lt={},u5=()=>{Lt.previousActiveElement&&Lt.previousActiveElement.focus?(Lt.previousActiveElement.focus(),Lt.previousActiveElement=null):document.body&&document.body.focus()},h5=t=>new Promise(n=>{if(!t)return n();const a=window.scrollX,u=window.scrollY;Lt.restoreFocusTimeout=setTimeout(()=>{u5(),n()},c5),window.scrollTo(a,u)}),d5=`
 <div aria-labelledby="${Re.title}" aria-describedby="${Re["html-container"]}" class="${Re.popup}" tabindex="-1">
   <button type="button" class="${Re.close}"></button>
   <ul class="${Re["progress-steps"]}"></ul>
   <div class="${Re.icon}"></div>
   <img class="${Re.image}" />
   <h2 class="${Re.title}" id="${Re.title}"></h2>
   <div class="${Re["html-container"]}" id="${Re["html-container"]}"></div>
   <input class="${Re.input}" />
   <input type="file" class="${Re.file}" />
   <div class="${Re.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Re.select}"></select>
   <div class="${Re.radio}"></div>
   <label for="${Re.checkbox}" class="${Re.checkbox}">
     <input type="checkbox" />
     <span class="${Re.label}"></span>
   </label>
   <textarea class="${Re.textarea}"></textarea>
   <div class="${Re["validation-message"]}" id="${Re["validation-message"]}"></div>
   <div class="${Re.actions}">
     <div class="${Re.loader}"></div>
     <button type="button" class="${Re.confirm}"></button>
     <button type="button" class="${Re.deny}"></button>
     <button type="button" class="${Re.cancel}"></button>
   </div>
   <div class="${Re.footer}"></div>
   <div class="${Re["timer-progress-bar-container"]}">
     <div class="${Re["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),f5=()=>{const t=Zr();return t?(t.remove(),aa([document.documentElement,document.body],[Re["no-backdrop"],Re["toast-shown"],Re["has-column"]]),!0):!1},Fl=()=>{Lt.currentInstance.resetValidationMessage()},p5=()=>{const t=yn(),n=ks(t,Re.input),a=ks(t,Re.file),u=t.querySelector(`.${Re.range} input`),d=t.querySelector(`.${Re.range} output`),v=ks(t,Re.select),b=t.querySelector(`.${Re.checkbox} input`),s=ks(t,Re.textarea);n.oninput=Fl,a.onchange=Fl,v.onchange=Fl,b.onchange=Fl,s.oninput=Fl,u.oninput=()=>{Fl(),d.value=u.value},u.onchange=()=>{Fl(),u.nextSibling.value=u.value}},m5=t=>typeof t=="string"?document.querySelector(t):t,g5=t=>{const n=yn();n.setAttribute("role",t.toast?"alert":"dialog"),n.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||n.setAttribute("aria-modal","true")},y5=t=>{window.getComputedStyle(t).direction==="rtl"&&an(Zr(),Re.rtl)},_5=t=>{const n=f5();if(vk()){oc("SweetAlert2 requires document to initialize");return}const a=document.createElement("div");a.className=Re.container,n&&an(a,Re["no-transition"]),Vr(a,d5);const u=m5(t.target);u.appendChild(a),g5(t),y5(u),p5()},Y1=(t,n)=>{t instanceof HTMLElement?n.appendChild(t):typeof t=="object"?v5(t,n):t&&Vr(n,t)},v5=(t,n)=>{t.jquery?x5(n,t):Vr(n,t.toString())},x5=(t,n)=>{if(t.textContent="",0 in n)for(let a=0;a in n;a++)t.appendChild(n[a].cloneNode(!0));else t.appendChild(n.cloneNode(!0))},nf=(()=>{if(vk())return!1;const t=document.createElement("div"),n={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const a in n)if(Object.prototype.hasOwnProperty.call(n,a)&&typeof t.style[a]!="undefined")return n[a];return!1})(),b5=()=>{const t=document.createElement("div");t.className=Re["scrollbar-measure"],document.body.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),n},w5=(t,n)=>{const a=vf(),u=Qu();!n.showConfirmButton&&!n.showDenyButton&&!n.showCancelButton?Wr(a):Or(a),to(a,n,"actions"),S5(a,u,n),Vr(u,n.loaderHtml),to(u,n,"loader")};function S5(t,n,a){const u=To(),d=Zs(),v=Ql();ev(u,"confirm",a),ev(d,"deny",a),ev(v,"cancel",a),T5(u,d,v,a),a.reverseButtons&&(a.toast?(t.insertBefore(v,u),t.insertBefore(d,u)):(t.insertBefore(v,n),t.insertBefore(d,n),t.insertBefore(u,n)))}function T5(t,n,a,u){if(!u.buttonsStyling)return aa([t,n,a],Re.styled);an([t,n,a],Re.styled),u.confirmButtonColor&&(t.style.backgroundColor=u.confirmButtonColor,an(t,Re["default-outline"])),u.denyButtonColor&&(n.style.backgroundColor=u.denyButtonColor,an(n,Re["default-outline"])),u.cancelButtonColor&&(a.style.backgroundColor=u.cancelButtonColor,an(a,Re["default-outline"]))}function ev(t,n,a){Zg(t,a[`show${V1(n)}Button`],"inline-block"),Vr(t,a[`${n}ButtonText`]),t.setAttribute("aria-label",a[`${n}ButtonAriaLabel`]),t.className=Re[n],to(t,a,`${n}Button`),an(t,a[`${n}ButtonClass`])}function E5(t,n){typeof n=="string"?t.style.background=n:n||an([document.documentElement,document.body],Re["no-backdrop"])}function C5(t,n){n in Re?an(t,Re[n]):(Si('The "position" parameter is not valid, defaulting to "center"'),an(t,Re.center))}function k5(t,n){if(n&&typeof n=="string"){const a=`grow-${n}`;a in Re&&an(t,Re[a])}}const I5=(t,n)=>{const a=Zr();!a||(E5(a,n.backdrop),C5(a,n.position),k5(a,n.grow),to(a,n,"container"))};var Wt={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const A5=["input","file","range","select","radio","checkbox","textarea"],P5=(t,n)=>{const a=yn(),u=Wt.innerParams.get(t),d=!u||n.input!==u.input;A5.forEach(v=>{const b=Re[v],s=ks(a,b);O5(v,n.inputAttributes),s.className=b,d&&Wr(s)}),n.input&&(d&&M5(n),L5(n))},M5=t=>{if(!xi[t.input])return oc(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${t.input}"`);const n=xk(t.input),a=xi[t.input](n,t);Or(a),setTimeout(()=>{gk(a)})},z5=t=>{for(let n=0;n<t.attributes.length;n++){const a=t.attributes[n].name;["type","value","style"].includes(a)||t.removeAttribute(a)}},O5=(t,n)=>{const a=H1(yn(),t);if(!!a){z5(a);for(const u in n)a.setAttribute(u,n[u])}},L5=t=>{const n=xk(t.input);t.customClass&&an(n,t.customClass.input)},K1=(t,n)=>{(!t.placeholder||n.inputPlaceholder)&&(t.placeholder=n.inputPlaceholder)},xf=(t,n,a)=>{if(a.inputLabel){t.id=Re.input;const u=document.createElement("label"),d=Re["input-label"];u.setAttribute("for",t.id),u.className=d,an(u,a.customClass.inputLabel),u.innerText=a.inputLabel,n.insertAdjacentElement("beforebegin",u)}},xk=t=>{const n=Re[t]?Re[t]:Re.input;return ks(yn(),n)},xi={};xi.text=xi.email=xi.password=xi.number=xi.tel=xi.url=(t,n)=>(typeof n.inputValue=="string"||typeof n.inputValue=="number"?t.value=n.inputValue:G1(n.inputValue)||Si(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof n.inputValue}"`),xf(t,t,n),K1(t,n),t.type=n.input,t);xi.file=(t,n)=>(xf(t,t,n),K1(t,n),t);xi.range=(t,n)=>{const a=t.querySelector("input"),u=t.querySelector("output");return a.value=n.inputValue,a.type=n.input,u.value=n.inputValue,xf(a,t,n),t};xi.select=(t,n)=>{if(t.textContent="",n.inputPlaceholder){const a=document.createElement("option");Vr(a,n.inputPlaceholder),a.value="",a.disabled=!0,a.selected=!0,t.appendChild(a)}return xf(t,t,n),t};xi.radio=t=>(t.textContent="",t);xi.checkbox=(t,n)=>{const a=H1(yn(),"checkbox");a.value="1",a.id=Re.checkbox,a.checked=Boolean(n.inputValue);const u=t.querySelector("span");return Vr(u,n.inputPlaceholder),t};xi.textarea=(t,n)=>{t.value=n.inputValue,K1(t,n),xf(t,t,n);const a=u=>parseInt(window.getComputedStyle(u).marginLeft)+parseInt(window.getComputedStyle(u).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const u=parseInt(window.getComputedStyle(yn()).width),d=()=>{const v=t.offsetWidth+a(t);v>u?yn().style.width=`${v}px`:yn().style.width=null};new MutationObserver(d).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const D5=(t,n)=>{const a=hg();to(a,n,"htmlContainer"),n.html?(Y1(n.html,a),Or(a,"block")):n.text?(a.textContent=n.text,Or(a,"block")):Wr(a),P5(t,n)},R5=(t,n)=>{const a=mk();Zg(a,n.footer),n.footer&&Y1(n.footer,a),to(a,n,"footer")},B5=(t,n)=>{const a=q1();Vr(a,n.closeButtonHtml),to(a,n,"closeButton"),Zg(a,n.showCloseButton),a.setAttribute("aria-label",n.closeButtonAriaLabel)},F5=(t,n)=>{const a=Wt.innerParams.get(t),u=_f();if(a&&n.icon===a.icon){VS(u,n),US(u,n);return}if(!n.icon&&!n.iconHtml)return Wr(u);if(n.icon&&Object.keys(Bd).indexOf(n.icon)===-1)return oc(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${n.icon}"`),Wr(u);Or(u),VS(u,n),US(u,n),an(u,n.showClass.icon)},US=(t,n)=>{for(const a in Bd)n.icon!==a&&aa(t,Bd[a]);an(t,Bd[n.icon]),V5(t,n),N5(),to(t,n,"icon")},N5=()=>{const t=yn(),n=window.getComputedStyle(t).getPropertyValue("background-color"),a=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let u=0;u<a.length;u++)a[u].style.backgroundColor=n},j5=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,U5=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,VS=(t,n)=>{t.textContent="",n.iconHtml?Vr(t,$S(n.iconHtml)):n.icon==="success"?Vr(t,j5):n.icon==="error"?Vr(t,U5):Vr(t,$S({question:"?",warning:"!",info:"i"}[n.icon]))},V5=(t,n)=>{if(!!n.iconColor){t.style.color=n.iconColor,t.style.borderColor=n.iconColor;for(const a of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])NS(t,a,"backgroundColor",n.iconColor);NS(t,".swal2-success-ring","borderColor",n.iconColor)}},$S=t=>`<div class="${Re["icon-content"]}">${t}</div>`,$5=(t,n)=>{const a=fk();if(!n.imageUrl)return Wr(a);Or(a,""),a.setAttribute("src",n.imageUrl),a.setAttribute("alt",n.imageAlt),Fd(a,"width",n.imageWidth),Fd(a,"height",n.imageHeight),a.className=Re.image,to(a,n,"image")},G5=t=>{const n=document.createElement("li");return an(n,Re["progress-step"]),Vr(n,t),n},q5=t=>{const n=document.createElement("li");return an(n,Re["progress-step-line"]),t.progressStepsDistance&&(n.style.width=t.progressStepsDistance),n},Z5=(t,n)=>{const a=pk();if(!n.progressSteps||n.progressSteps.length===0)return Wr(a);Or(a),a.textContent="",n.currentProgressStep>=n.progressSteps.length&&Si("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.progressSteps.forEach((u,d)=>{const v=G5(u);if(a.appendChild(v),d===n.currentProgressStep&&an(v,Re["active-progress-step"]),d!==n.progressSteps.length-1){const b=q5(n);a.appendChild(b)}})},W5=(t,n)=>{const a=dk();Zg(a,n.title||n.titleText,"block"),n.title&&Y1(n.title,a),n.titleText&&(a.innerText=n.titleText),to(a,n,"title")},H5=(t,n)=>{const a=Zr(),u=yn();n.toast?(Fd(a,"width",n.width),u.style.width="100%",u.insertBefore(Qu(),_f())):Fd(u,"width",n.width),Fd(u,"padding",n.padding),n.color&&(u.style.color=n.color),n.background&&(u.style.background=n.background),Wr($g()),X5(u,n)},X5=(t,n)=>{t.className=`${Re.popup} ${Di(t)?n.showClass.popup:""}`,n.toast?(an([document.documentElement,document.body],Re["toast-shown"]),an(t,Re.toast)):an(t,Re.modal),to(t,n,"popup"),typeof n.customClass=="string"&&an(t,n.customClass),n.icon&&an(t,Re[`icon-${n.icon}`])},bk=(t,n)=>{H5(t,n),I5(t,n),Z5(t,n),F5(t,n),$5(t,n),W5(t,n),B5(t,n),D5(t,n),w5(t,n),R5(t,n),typeof n.didRender=="function"&&n.didRender(yn())},eh=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Y5=()=>{Ri(document.body.children).forEach(n=>{n===Zr()||n.contains(Zr())||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))})},wk=()=>{Ri(document.body.children).forEach(n=>{n.hasAttribute("data-previous-aria-hidden")?(n.setAttribute("aria-hidden",n.getAttribute("data-previous-aria-hidden")),n.removeAttribute("data-previous-aria-hidden")):n.removeAttribute("aria-hidden")})},Sk=["swal-title","swal-html","swal-footer"],K5=t=>{const n=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!n)return{};const a=n.content;return iR(a),Object.assign(J5(a),Q5(a),eR(a),tR(a),nR(a),rR(a,Sk))},J5=t=>{const n={};return Ri(t.querySelectorAll("swal-param")).forEach(a=>{ec(a,["name","value"]);const u=a.getAttribute("name"),d=a.getAttribute("value");typeof Du[u]=="boolean"&&d==="false"&&(n[u]=!1),typeof Du[u]=="object"&&(n[u]=JSON.parse(d))}),n},Q5=t=>{const n={};return Ri(t.querySelectorAll("swal-button")).forEach(a=>{ec(a,["type","color","aria-label"]);const u=a.getAttribute("type");n[`${u}ButtonText`]=a.innerHTML,n[`show${V1(u)}Button`]=!0,a.hasAttribute("color")&&(n[`${u}ButtonColor`]=a.getAttribute("color")),a.hasAttribute("aria-label")&&(n[`${u}ButtonAriaLabel`]=a.getAttribute("aria-label"))}),n},eR=t=>{const n={},a=t.querySelector("swal-image");return a&&(ec(a,["src","width","height","alt"]),a.hasAttribute("src")&&(n.imageUrl=a.getAttribute("src")),a.hasAttribute("width")&&(n.imageWidth=a.getAttribute("width")),a.hasAttribute("height")&&(n.imageHeight=a.getAttribute("height")),a.hasAttribute("alt")&&(n.imageAlt=a.getAttribute("alt"))),n},tR=t=>{const n={},a=t.querySelector("swal-icon");return a&&(ec(a,["type","color"]),a.hasAttribute("type")&&(n.icon=a.getAttribute("type")),a.hasAttribute("color")&&(n.iconColor=a.getAttribute("color")),n.iconHtml=a.innerHTML),n},nR=t=>{const n={},a=t.querySelector("swal-input");a&&(ec(a,["type","label","placeholder","value"]),n.input=a.getAttribute("type")||"text",a.hasAttribute("label")&&(n.inputLabel=a.getAttribute("label")),a.hasAttribute("placeholder")&&(n.inputPlaceholder=a.getAttribute("placeholder")),a.hasAttribute("value")&&(n.inputValue=a.getAttribute("value")));const u=t.querySelectorAll("swal-input-option");return u.length&&(n.inputOptions={},Ri(u).forEach(d=>{ec(d,["value"]);const v=d.getAttribute("value"),b=d.innerHTML;n.inputOptions[v]=b})),n},rR=(t,n)=>{const a={};for(const u in n){const d=n[u],v=t.querySelector(d);v&&(ec(v,[]),a[d.replace(/^swal-/,"")]=v.innerHTML.trim())}return a},iR=t=>{const n=Sk.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Ri(t.children).forEach(a=>{const u=a.tagName.toLowerCase();n.indexOf(u)===-1&&Si(`Unrecognized element <${u}>`)})},ec=(t,n)=>{Ri(t.attributes).forEach(a=>{n.indexOf(a.name)===-1&&Si([`Unrecognized attribute "${a.name}" on <${t.tagName.toLowerCase()}>.`,`${n.length?`Allowed attributes are: ${n.join(", ")}`:"To set the value, use HTML within the element."}`])})};var GS={email:(t,n)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(n||"Invalid email address"),url:(t,n)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(n||"Invalid URL")};function oR(t){t.inputValidator||Object.keys(GS).forEach(n=>{t.input===n&&(t.inputValidator=GS[n])})}function aR(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Si('Target parameter is not valid, defaulting to "body"'),t.target="body")}function sR(t){oR(t),t.showLoaderOnConfirm&&!t.preConfirm&&Si(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),aR(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),_5(t)}class lR{constructor(n,a){this.callback=n,this.remaining=a,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(n){const a=this.running;return a&&this.stop(),this.remaining+=n,a&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const cR=()=>{Ru.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(Ru.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Ru.previousBodyPadding+b5()}px`)},uR=()=>{Ru.previousBodyPadding!==null&&(document.body.style.paddingRight=`${Ru.previousBodyPadding}px`,Ru.previousBodyPadding=null)},hR=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!Aa(document.body,Re.iosfix)){const n=document.body.scrollTop;document.body.style.top=`${n*-1}px`,an(document.body,Re.iosfix),fR(),dR()}},dR=()=>{const t=navigator.userAgent,n=!!t.match(/iPad/i)||!!t.match(/iPhone/i),a=!!t.match(/WebKit/i);n&&a&&!t.match(/CriOS/i)&&yn().scrollHeight>window.innerHeight-44&&(Zr().style.paddingBottom=`${44}px`)},fR=()=>{const t=Zr();let n;t.ontouchstart=a=>{n=pR(a)},t.ontouchmove=a=>{n&&(a.preventDefault(),a.stopPropagation())}},pR=t=>{const n=t.target,a=Zr();return mR(t)||gR(t)?!1:n===a||!jS(a)&&n.tagName!=="INPUT"&&n.tagName!=="TEXTAREA"&&!(jS(hg())&&hg().contains(n))},mR=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",gR=t=>t.touches&&t.touches.length>1,yR=()=>{if(Aa(document.body,Re.iosfix)){const t=parseInt(document.body.style.top,10);aa(document.body,Re.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},Tk=10,_R=t=>{const n=Zr(),a=yn();typeof t.willOpen=="function"&&t.willOpen(a);const d=window.getComputedStyle(document.body).overflowY;bR(n,a,t),setTimeout(()=>{vR(n,a)},Tk),W1()&&(xR(n,t.scrollbarPadding,d),Y5()),!qg()&&!Lt.previousActiveElement&&(Lt.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(a)),aa(n,Re["no-transition"])},Ek=t=>{const n=yn();if(t.target!==n)return;const a=Zr();n.removeEventListener(nf,Ek),a.style.overflowY="auto"},vR=(t,n)=>{nf&&_k(n)?(t.style.overflowY="hidden",n.addEventListener(nf,Ek)):t.style.overflowY="auto"},xR=(t,n,a)=>{hR(),n&&a!=="hidden"&&cR(),setTimeout(()=>{t.scrollTop=0})},bR=(t,n,a)=>{an(t,a.showClass.backdrop),n.style.setProperty("opacity","0","important"),Or(n,"grid"),setTimeout(()=>{an(n,a.showClass.popup),n.style.removeProperty("opacity")},Tk),an([document.documentElement,document.body],Re.shown),a.heightAuto&&a.backdrop&&!a.toast&&an([document.documentElement,document.body],Re["height-auto"])},$u=t=>{let n=yn();n||new fg,n=yn();const a=Qu();qg()?Wr(_f()):wR(n,t),Or(a),n.setAttribute("data-loading",!0),n.setAttribute("aria-busy",!0),n.focus()},wR=(t,n)=>{const a=vf(),u=Qu();!n&&Di(To())&&(n=To()),Or(a),n&&(Wr(n),u.setAttribute("data-button-to-replace",n.className)),u.parentNode.insertBefore(u,n),an([t,a],Re.loading)},SR=(t,n)=>{n.input==="select"||n.input==="radio"?IR(t,n):["text","email","number","tel","textarea"].includes(n.input)&&($1(n.inputValue)||G1(n.inputValue))&&($u(To()),AR(t,n))},TR=(t,n)=>{const a=t.getInput();if(!a)return null;switch(n.input){case"checkbox":return ER(a);case"radio":return CR(a);case"file":return kR(a);default:return n.inputAutoTrim?a.value.trim():a.value}},ER=t=>t.checked?1:0,CR=t=>t.checked?t.value:null,kR=t=>t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,IR=(t,n)=>{const a=yn(),u=d=>PR[n.input](a,v0(d),n);$1(n.inputOptions)||G1(n.inputOptions)?($u(To()),gf(n.inputOptions).then(d=>{t.hideLoading(),u(d)})):typeof n.inputOptions=="object"?u(n.inputOptions):oc(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof n.inputOptions}`)},AR=(t,n)=>{const a=t.getInput();Wr(a),gf(n.inputValue).then(u=>{a.value=n.input==="number"?parseFloat(u)||0:`${u}`,Or(a),a.focus(),t.hideLoading()}).catch(u=>{oc(`Error in inputValue promise: ${u}`),a.value="",Or(a),a.focus(),t.hideLoading()})},PR={select:(t,n,a)=>{const u=ks(t,Re.select),d=(v,b,s)=>{const I=document.createElement("option");I.value=s,Vr(I,b),I.selected=qS(s,a.inputValue),v.appendChild(I)};n.forEach(v=>{const b=v[0],s=v[1];if(Array.isArray(s)){const I=document.createElement("optgroup");I.label=b,I.disabled=!1,u.appendChild(I),s.forEach(F=>d(I,F[1],F[0]))}else d(u,s,b)}),u.focus()},radio:(t,n,a)=>{const u=ks(t,Re.radio);n.forEach(v=>{const b=v[0],s=v[1],I=document.createElement("input"),F=document.createElement("label");I.type="radio",I.name=Re.radio,I.value=b,qS(b,a.inputValue)&&(I.checked=!0);const W=document.createElement("span");Vr(W,s),W.className=Re.label,F.appendChild(I),F.appendChild(W),u.appendChild(F)});const d=u.querySelectorAll("input");d.length&&d[0].focus()}},v0=t=>{const n=[];return typeof Map!="undefined"&&t instanceof Map?t.forEach((a,u)=>{let d=a;typeof d=="object"&&(d=v0(d)),n.push([u,d])}):Object.keys(t).forEach(a=>{let u=t[a];typeof u=="object"&&(u=v0(u)),n.push([a,u])}),n},qS=(t,n)=>n&&n.toString()===t.toString();function ZS(){const t=Wt.innerParams.get(this);if(!t)return;const n=Wt.domCache.get(this);Wr(n.loader),qg()?t.icon&&Or(_f()):MR(n),aa([n.popup,n.actions],Re.loading),n.popup.removeAttribute("aria-busy"),n.popup.removeAttribute("data-loading"),n.confirmButton.disabled=!1,n.denyButton.disabled=!1,n.cancelButton.disabled=!1}const MR=t=>{const n=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));n.length?Or(n[0],"inline-block"):s5()&&Wr(t.actions)};function zR(t){const n=Wt.innerParams.get(t||this),a=Wt.domCache.get(t||this);return a?H1(a.popup,n.input):null}var rf={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function Ck(t,n,a,u){qg()?WS(t,u):(h5(a).then(()=>WS(t,u)),Lt.keydownTarget.removeEventListener("keydown",Lt.keydownHandler,{capture:Lt.keydownListenerCapture}),Lt.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(n.setAttribute("style","display:none !important"),n.removeAttribute("class"),n.innerHTML=""):n.remove(),W1()&&(uR(),yR(),wk()),OR()}function OR(){aa([document.documentElement,document.body],[Re.shown,Re["height-auto"],Re["no-backdrop"],Re["toast-shown"]])}function sm(t){t=BR(t);const n=rf.swalPromiseResolve.get(this),a=DR(this);this.isAwaitingPromise()?t.isDismissed||(bf(this),n(t)):a&&n(t)}function LR(){return!!Wt.awaitingPromise.get(this)}const DR=t=>{const n=yn();if(!n)return!1;const a=Wt.innerParams.get(t);if(!a||Aa(n,a.hideClass.popup))return!1;aa(n,a.showClass.popup),an(n,a.hideClass.popup);const u=Zr();return aa(u,a.showClass.backdrop),an(u,a.hideClass.backdrop),FR(t,n,a),!0};function RR(t){const n=rf.swalPromiseReject.get(this);bf(this),n&&n(t)}const bf=t=>{t.isAwaitingPromise()&&(Wt.awaitingPromise.delete(t),Wt.innerParams.get(t)||t._destroy())},BR=t=>typeof t=="undefined"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),FR=(t,n,a)=>{const u=Zr(),d=nf&&_k(n);typeof a.willClose=="function"&&a.willClose(n),d?NR(t,n,u,a.returnFocus,a.didClose):Ck(t,u,a.returnFocus,a.didClose)},NR=(t,n,a,u,d)=>{Lt.swalCloseEventFinishedCallback=Ck.bind(null,t,a,u,d),n.addEventListener(nf,function(v){v.target===n&&(Lt.swalCloseEventFinishedCallback(),delete Lt.swalCloseEventFinishedCallback)})},WS=(t,n)=>{setTimeout(()=>{typeof n=="function"&&n.bind(t.params)(),t._destroy()})};function kk(t,n,a){const u=Wt.domCache.get(t);n.forEach(d=>{u[d].disabled=a})}function Ik(t,n){if(!t)return!1;if(t.type==="radio"){const u=t.parentNode.parentNode.querySelectorAll("input");for(let d=0;d<u.length;d++)u[d].disabled=n}else t.disabled=n}function jR(){kk(this,["confirmButton","denyButton","cancelButton"],!1)}function UR(){kk(this,["confirmButton","denyButton","cancelButton"],!0)}function VR(){return Ik(this.getInput(),!1)}function $R(){return Ik(this.getInput(),!0)}function GR(t){const n=Wt.domCache.get(this),a=Wt.innerParams.get(this);Vr(n.validationMessage,t),n.validationMessage.className=Re["validation-message"],a.customClass&&a.customClass.validationMessage&&an(n.validationMessage,a.customClass.validationMessage),Or(n.validationMessage);const u=this.getInput();u&&(u.setAttribute("aria-invalid",!0),u.setAttribute("aria-describedby",Re["validation-message"]),gk(u),an(u,Re.inputerror))}function qR(){const t=Wt.domCache.get(this);t.validationMessage&&Wr(t.validationMessage);const n=this.getInput();n&&(n.removeAttribute("aria-invalid"),n.removeAttribute("aria-describedby"),aa(n,Re.inputerror))}function ZR(){return Wt.domCache.get(this).progressSteps}function WR(t){const n=yn(),a=Wt.innerParams.get(this);if(!n||Aa(n,a.hideClass.popup))return Si("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const u=HR(t),d=Object.assign({},a,u);bk(this,d),Wt.innerParams.set(this,d),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const HR=t=>{const n={};return Object.keys(t).forEach(a=>{uk(a)?n[a]=t[a]:Si(`Invalid parameter to update: "${a}". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js

If you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md`)}),n};function XR(){const t=Wt.domCache.get(this),n=Wt.innerParams.get(this);if(!n){Ak(this);return}t.popup&&Lt.swalCloseEventFinishedCallback&&(Lt.swalCloseEventFinishedCallback(),delete Lt.swalCloseEventFinishedCallback),Lt.deferDisposalTimer&&(clearTimeout(Lt.deferDisposalTimer),delete Lt.deferDisposalTimer),typeof n.didDestroy=="function"&&n.didDestroy(),YR(this)}const YR=t=>{Ak(t),delete t.params,delete Lt.keydownHandler,delete Lt.keydownTarget,delete Lt.currentInstance},Ak=t=>{t.isAwaitingPromise()?(tv(Wt,t),Wt.awaitingPromise.set(t,!0)):(tv(rf,t),tv(Wt,t))},tv=(t,n)=>{for(const a in t)t[a].delete(n)};var Pk=Object.freeze(Object.defineProperty({__proto__:null,hideLoading:ZS,disableLoading:ZS,getInput:zR,close:sm,isAwaitingPromise:LR,rejectPromise:RR,handleAwaitingPromise:bf,closePopup:sm,closeModal:sm,closeToast:sm,enableButtons:jR,disableButtons:UR,enableInput:VR,disableInput:$R,showValidationMessage:GR,resetValidationMessage:qR,getProgressSteps:ZR,update:WR,_destroy:XR},Symbol.toStringTag,{value:"Module"}));const KR=t=>{const n=Wt.innerParams.get(t);t.disableButtons(),n.input?Mk(t,"confirm"):Q1(t,!0)},JR=t=>{const n=Wt.innerParams.get(t);t.disableButtons(),n.returnInputValueOnDeny?Mk(t,"deny"):J1(t,!1)},QR=(t,n)=>{t.disableButtons(),n(eh.cancel)},Mk=(t,n)=>{const a=Wt.innerParams.get(t);if(!a.input)return oc(`The "input" parameter is needed to be set when using returnInputValueOn${V1(n)}`);const u=TR(t,a);a.inputValidator?eB(t,u,n):t.getInput().checkValidity()?n==="deny"?J1(t,u):Q1(t,u):(t.enableButtons(),t.showValidationMessage(a.validationMessage))},eB=(t,n,a)=>{const u=Wt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>gf(u.inputValidator(n,u.validationMessage))).then(v=>{t.enableButtons(),t.enableInput(),v?t.showValidationMessage(v):a==="deny"?J1(t,n):Q1(t,n)})},J1=(t,n)=>{const a=Wt.innerParams.get(t||globalThis);a.showLoaderOnDeny&&$u(Zs()),a.preDeny?(Wt.awaitingPromise.set(t||globalThis,!0),Promise.resolve().then(()=>gf(a.preDeny(n,a.validationMessage))).then(d=>{d===!1?(t.hideLoading(),bf(t)):t.closePopup({isDenied:!0,value:typeof d=="undefined"?n:d})}).catch(d=>zk(t||globalThis,d))):t.closePopup({isDenied:!0,value:n})},HS=(t,n)=>{t.closePopup({isConfirmed:!0,value:n})},zk=(t,n)=>{t.rejectPromise(n)},Q1=(t,n)=>{const a=Wt.innerParams.get(t||globalThis);a.showLoaderOnConfirm&&$u(),a.preConfirm?(t.resetValidationMessage(),Wt.awaitingPromise.set(t||globalThis,!0),Promise.resolve().then(()=>gf(a.preConfirm(n,a.validationMessage))).then(d=>{Di($g())||d===!1?(t.hideLoading(),bf(t)):HS(t,typeof d=="undefined"?n:d)}).catch(d=>zk(t||globalThis,d))):HS(t,n)},tB=(t,n,a)=>{Wt.innerParams.get(t).toast?nB(t,n,a):(iB(n),oB(n),aB(t,n,a))},nB=(t,n,a)=>{n.popup.onclick=()=>{const u=Wt.innerParams.get(t);u&&(rB(u)||u.timer||u.input)||a(eh.close)}},rB=t=>t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton;let dg=!1;const iB=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(n){t.container.onmouseup=void 0,n.target===t.container&&(dg=!0)}}},oB=t=>{t.container.onmousedown=()=>{t.popup.onmouseup=function(n){t.popup.onmouseup=void 0,(n.target===t.popup||t.popup.contains(n.target))&&(dg=!0)}}},aB=(t,n,a)=>{n.container.onclick=u=>{const d=Wt.innerParams.get(t);if(dg){dg=!1;return}u.target===n.container&&Vg(d.allowOutsideClick)&&a(eh.backdrop)}},sB=()=>Di(yn()),Ok=()=>To()&&To().click(),lB=()=>Zs()&&Zs().click(),cB=()=>Ql()&&Ql().click(),uB=(t,n,a,u)=>{n.keydownTarget&&n.keydownHandlerAdded&&(n.keydownTarget.removeEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!1),a.toast||(n.keydownHandler=d=>dB(t,d,u),n.keydownTarget=a.keydownListenerCapture?window:yn(),n.keydownListenerCapture=a.keydownListenerCapture,n.keydownTarget.addEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!0)},x0=(t,n,a)=>{const u=Z1();if(u.length)return n=n+a,n===u.length?n=0:n===-1&&(n=u.length-1),u[n].focus();yn().focus()},Lk=["ArrowRight","ArrowDown"],hB=["ArrowLeft","ArrowUp"],dB=(t,n,a)=>{const u=Wt.innerParams.get(t);!u||n.isComposing||n.keyCode===229||(u.stopKeydownPropagation&&n.stopPropagation(),n.key==="Enter"?fB(t,n,u):n.key==="Tab"?pB(n,u):[...Lk,...hB].includes(n.key)?mB(n.key):n.key==="Escape"&&gB(n,u,a))},fB=(t,n,a)=>{if(!!Vg(a.allowEnterKey)&&n.target&&t.getInput()&&n.target.outerHTML===t.getInput().outerHTML){if(["textarea","file"].includes(a.input))return;Ok(),n.preventDefault()}},pB=(t,n)=>{const a=t.target,u=Z1();let d=-1;for(let v=0;v<u.length;v++)if(a===u[v]){d=v;break}t.shiftKey?x0(n,d,-1):x0(n,d,1),t.stopPropagation(),t.preventDefault()},mB=t=>{const n=To(),a=Zs(),u=Ql();if(![n,a,u].includes(document.activeElement))return;const d=Lk.includes(t)?"nextElementSibling":"previousElementSibling";let v=document.activeElement;for(let b=0;b<vf().children.length;b++){if(v=v[d],!v)return;if(Di(v)&&v instanceof HTMLButtonElement)break}v instanceof HTMLButtonElement&&v.focus()},gB=(t,n,a)=>{Vg(n.allowEscapeKey)&&(t.preventDefault(),a(eh.esc))},yB=t=>typeof t=="object"&&t.jquery,XS=t=>t instanceof Element||yB(t),_B=t=>{const n={};return typeof t[0]=="object"&&!XS(t[0])?Object.assign(n,t[0]):["title","html","icon"].forEach((a,u)=>{const d=t[u];typeof d=="string"||XS(d)?n[a]=d:d!==void 0&&oc(`Unexpected type of ${a}! Expected "string" or "Element", got ${typeof d}`)}),n};function vB(...t){const n=this;return new n(...t)}function xB(t){class n extends this{_main(u,d){return super._main(u,Object.assign({},t,d))}}return n}const bB=()=>Lt.timeout&&Lt.timeout.getTimerLeft(),Dk=()=>{if(Lt.timeout)return l5(),Lt.timeout.stop()},Rk=()=>{if(Lt.timeout){const t=Lt.timeout.start();return X1(t),t}},wB=()=>{const t=Lt.timeout;return t&&(t.running?Dk():Rk())},SB=t=>{if(Lt.timeout){const n=Lt.timeout.increase(t);return X1(n,!0),n}},TB=()=>Lt.timeout&&Lt.timeout.isRunning();let YS=!1;const b0={};function EB(t="data-swal-template"){b0[t]=this,YS||(document.body.addEventListener("click",CB),YS=!0)}const CB=t=>{for(let n=t.target;n&&n!==document;n=n.parentNode)for(const a in b0){const u=n.getAttribute(a);if(u){b0[a].fire({template:u});return}}};var kB=Object.freeze(Object.defineProperty({__proto__:null,isValidParameter:ck,isUpdatableParameter:uk,isDeprecatedParameter:_0,argsToParams:_B,getContainer:Zr,getPopup:yn,getTitle:dk,getHtmlContainer:hg,getImage:fk,getIcon:_f,getInputLabel:r5,getCloseButton:q1,getActions:vf,getConfirmButton:To,getDenyButton:Zs,getCancelButton:Ql,getLoader:Qu,getFooter:mk,getTimerProgressBar:Gg,getFocusableElements:Z1,getValidationMessage:$g,isLoading:o5,isVisible:sB,clickConfirm:Ok,clickDeny:lB,clickCancel:cB,fire:vB,mixin:xB,showLoading:$u,enableLoading:$u,getTimerLeft:bB,stopTimer:Dk,resumeTimer:Rk,toggleTimer:wB,increaseTimer:SB,isTimerRunning:TB,bindClickHandler:EB},Symbol.toStringTag,{value:"Module"}));let w0;class th{constructor(...n){if(typeof window=="undefined")return;w0=this;const a=Object.freeze(this.constructor.argsToParams(n));Object.defineProperties(this,{params:{value:a,writable:!1,enumerable:!0,configurable:!0}});const u=this._main(this.params);Wt.promise.set(this,u)}_main(n,a={}){t5(Object.assign({},a,n)),Lt.currentInstance&&(Lt.currentInstance._destroy(),W1()&&wk()),Lt.currentInstance=this;const u=AB(n,a);sR(u),Object.freeze(u),Lt.timeout&&(Lt.timeout.stop(),delete Lt.timeout),clearTimeout(Lt.restoreFocusTimeout);const d=PB(this);return bk(this,u),Wt.innerParams.set(this,u),IB(this,d,u)}then(n){return Wt.promise.get(this).then(n)}finally(n){return Wt.promise.get(this).finally(n)}}const IB=(t,n,a)=>new Promise((u,d)=>{const v=b=>{t.closePopup({isDismissed:!0,dismiss:b})};rf.swalPromiseResolve.set(t,u),rf.swalPromiseReject.set(t,d),n.confirmButton.onclick=()=>KR(t),n.denyButton.onclick=()=>JR(t),n.cancelButton.onclick=()=>QR(t,v),n.closeButton.onclick=()=>v(eh.close),tB(t,n,v),uB(t,Lt,a,v),SR(t,a),_R(a),MB(Lt,a,v),zB(n,a),setTimeout(()=>{n.container.scrollTop=0})}),AB=(t,n)=>{const a=K5(t),u=Object.assign({},Du,n,a,t);return u.showClass=Object.assign({},Du.showClass,u.showClass),u.hideClass=Object.assign({},Du.hideClass,u.hideClass),u},PB=t=>{const n={popup:yn(),container:Zr(),actions:vf(),confirmButton:To(),denyButton:Zs(),cancelButton:Ql(),loader:Qu(),closeButton:q1(),validationMessage:$g(),progressSteps:pk()};return Wt.domCache.set(t,n),n},MB=(t,n,a)=>{const u=Gg();Wr(u),n.timer&&(t.timeout=new lR(()=>{a("timer"),delete t.timeout},n.timer),n.timerProgressBar&&(Or(u),to(u,n,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&X1(n.timer)})))},zB=(t,n)=>{if(!n.toast){if(!Vg(n.allowEnterKey))return LB();OB(t,n)||x0(n,-1,1)}},OB=(t,n)=>n.focusDeny&&Di(t.denyButton)?(t.denyButton.focus(),!0):n.focusCancel&&Di(t.cancelButton)?(t.cancelButton.focus(),!0):n.focusConfirm&&Di(t.confirmButton)?(t.confirmButton.focus(),!0):!1,LB=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Object.assign(th.prototype,Pk);Object.assign(th,kB);Object.keys(Pk).forEach(t=>{th[t]=function(...n){if(w0)return w0[t](...n)}});th.DismissReason=eh;th.version="11.4.4";const fg=th;fg.default=fg;const DB="http://www.sertic.com.ar/api/sendemail";console.log(`Backend en ${DB}`);const RB=()=>{const[t]=Ku("global"),[n,a]=In.exports.useState(!1);return In.exports.useEffect(()=>{n&&fg.mixin({toast:!0,position:"top-end",showConfirmButton:!1}).fire({icon:"info",title:t("Contact.waiting")})},[n]),In.exports.useState({name:"",email:"",text:"",phone:""}),xn("section",{id:"contacto",className:"d-flex justify-content-center align-items-center",children:[Je("div",{className:"background-image"}),xn("div",{className:"form-container d-flex flex-column justify-content-center align-items-center",children:[Je("h2",{children:t("Contact.title")}),Je("a",{className:"form-button",href:"mailto:contacto@sertic.com.ar?subject=Contacto%20desde%20Pagina%20Sertic&body=Por%20favor%20ingrese%20su%20consulta%20aqui",children:Je("button",{children:t("Contact.button")})})]})]})};var Bk={exports:{}};(function(t,n){(function(a,u){t.exports=u()})(pd,function(){var a,u,d;function v(s,I){if(!a)a=I;else if(!u)u=I;else{var F="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+u+")(sharedChunk); self.onerror = null;",W={};a(W),d=I(W),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(d.workerUrl=window.URL.createObjectURL(new Blob([F],{type:"text/javascript"})))}}v(["exports"],function(s){var I="2.7.0",F=W;function W(r,e,o,l){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(l-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=l,this.p2x=o,this.p2y=l}W.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},W.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},W.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},W.prototype.solveCurveX=function(r,e){var o,l,h,f,g;for(e===void 0&&(e=1e-6),h=r,g=0;g<8;g++){if(f=this.sampleCurveX(h)-r,Math.abs(f)<e)return h;var _=this.sampleCurveDerivativeX(h);if(Math.abs(_)<1e-6)break;h-=f/_}if((h=r)<(o=0))return o;if(h>(l=1))return l;for(;o<l;){if(f=this.sampleCurveX(h),Math.abs(f-r)<e)return h;r>f?o=h:l=h,h=.5*(l-o)+o}return h},W.prototype.solve=function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))};var j=Y;function Y(r,e){this.x=r,this.y=e}Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,o=r.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),o=Math.sin(r),l=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=l,this},_rotateAround:function(r,e){var o=Math.cos(r),l=Math.sin(r),h=e.y+l*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-l*(this.y-e.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Y.convert=function(r){return r instanceof Y?r:Array.isArray(r)?new Y(r[0],r[1]):r};var H=typeof self!="undefined"?self:{},be=1e-6,ge=typeof Float32Array!="undefined"?Float32Array:Array;function Q(){var r=new ge(9);return ge!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function V(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function J(r,e,o){var l=e[0],h=e[1],f=e[2],g=e[3],_=e[4],w=e[5],T=e[6],C=e[7],k=e[8],A=e[9],L=e[10],R=e[11],U=e[12],G=e[13],te=e[14],se=e[15],de=o[0],me=o[1],ye=o[2],_e=o[3];return r[0]=de*l+me*_+ye*k+_e*U,r[1]=de*h+me*w+ye*A+_e*G,r[2]=de*f+me*T+ye*L+_e*te,r[3]=de*g+me*C+ye*R+_e*se,r[4]=(de=o[4])*l+(me=o[5])*_+(ye=o[6])*k+(_e=o[7])*U,r[5]=de*h+me*w+ye*A+_e*G,r[6]=de*f+me*T+ye*L+_e*te,r[7]=de*g+me*C+ye*R+_e*se,r[8]=(de=o[8])*l+(me=o[9])*_+(ye=o[10])*k+(_e=o[11])*U,r[9]=de*h+me*w+ye*A+_e*G,r[10]=de*f+me*T+ye*L+_e*te,r[11]=de*g+me*C+ye*R+_e*se,r[12]=(de=o[12])*l+(me=o[13])*_+(ye=o[14])*k+(_e=o[15])*U,r[13]=de*h+me*w+ye*A+_e*G,r[14]=de*f+me*T+ye*L+_e*te,r[15]=de*g+me*C+ye*R+_e*se,r}function he(r,e,o){var l,h,f,g,_,w,T,C,k,A,L,R,U=o[0],G=o[1],te=o[2];return e===r?(r[12]=e[0]*U+e[4]*G+e[8]*te+e[12],r[13]=e[1]*U+e[5]*G+e[9]*te+e[13],r[14]=e[2]*U+e[6]*G+e[10]*te+e[14],r[15]=e[3]*U+e[7]*G+e[11]*te+e[15]):(h=e[1],f=e[2],g=e[3],_=e[4],w=e[5],T=e[6],C=e[7],k=e[8],A=e[9],L=e[10],R=e[11],r[0]=l=e[0],r[1]=h,r[2]=f,r[3]=g,r[4]=_,r[5]=w,r[6]=T,r[7]=C,r[8]=k,r[9]=A,r[10]=L,r[11]=R,r[12]=l*U+_*G+k*te+e[12],r[13]=h*U+w*G+A*te+e[13],r[14]=f*U+T*G+L*te+e[14],r[15]=g*U+C*G+R*te+e[15]),r}function pe(r,e,o){var l=o[0],h=o[1],f=o[2];return r[0]=e[0]*l,r[1]=e[1]*l,r[2]=e[2]*l,r[3]=e[3]*l,r[4]=e[4]*h,r[5]=e[5]*h,r[6]=e[6]*h,r[7]=e[7]*h,r[8]=e[8]*f,r[9]=e[9]*f,r[10]=e[10]*f,r[11]=e[11]*f,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function ze(r,e,o){var l=Math.sin(o),h=Math.cos(o),f=e[4],g=e[5],_=e[6],w=e[7],T=e[8],C=e[9],k=e[10],A=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=f*h+T*l,r[5]=g*h+C*l,r[6]=_*h+k*l,r[7]=w*h+A*l,r[8]=T*h-f*l,r[9]=C*h-g*l,r[10]=k*h-_*l,r[11]=A*h-w*l,r}function Ee(r,e,o){var l=Math.sin(o),h=Math.cos(o),f=e[0],g=e[1],_=e[2],w=e[3],T=e[8],C=e[9],k=e[10],A=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=f*h-T*l,r[1]=g*h-C*l,r[2]=_*h-k*l,r[3]=w*h-A*l,r[8]=f*l+T*h,r[9]=g*l+C*h,r[10]=_*l+k*h,r[11]=w*l+A*h,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var We=J;function Be(){var r=new ge(3);return ge!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Oe(r){var e=new ge(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function it(r){return Math.hypot(r[0],r[1],r[2])}function St(r,e,o){var l=new ge(3);return l[0]=r,l[1]=e,l[2]=o,l}function ct(r,e,o){return r[0]=e[0]+o[0],r[1]=e[1]+o[1],r[2]=e[2]+o[2],r}function at(r,e,o){return r[0]=e[0]-o[0],r[1]=e[1]-o[1],r[2]=e[2]-o[2],r}function An(r,e,o){return r[0]=e[0]*o[0],r[1]=e[1]*o[1],r[2]=e[2]*o[2],r}function Jt(r,e,o){return r[0]=Math.max(e[0],o[0]),r[1]=Math.max(e[1],o[1]),r[2]=Math.max(e[2],o[2]),r}function hn(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r}function _n(r,e,o,l){return r[0]=e[0]+o[0]*l,r[1]=e[1]+o[1]*l,r[2]=e[2]+o[2]*l,r}function qn(r,e){var o=e[0],l=e[1],h=e[2],f=o*o+l*l+h*h;return f>0&&(f=1/Math.sqrt(f)),r[0]=e[0]*f,r[1]=e[1]*f,r[2]=e[2]*f,r}function Pn(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function mr(r,e,o){var l=e[0],h=e[1],f=e[2],g=o[0],_=o[1],w=o[2];return r[0]=h*w-f*_,r[1]=f*g-l*w,r[2]=l*_-h*g,r}function Ve(r,e,o){var l=e[0],h=e[1],f=e[2],g=o[3]*l+o[7]*h+o[11]*f+o[15];return r[0]=(o[0]*l+o[4]*h+o[8]*f+o[12])/(g=g||1),r[1]=(o[1]*l+o[5]*h+o[9]*f+o[13])/g,r[2]=(o[2]*l+o[6]*h+o[10]*f+o[14])/g,r}function pt(r,e,o){var l=o[0],h=o[1],f=o[2],g=e[0],_=e[1],w=e[2],T=h*w-f*_,C=f*g-l*w,k=l*_-h*g,A=h*k-f*C,L=f*T-l*k,R=l*C-h*T,U=2*o[3];return C*=U,k*=U,L*=2,R*=2,r[0]=g+(T*=U)+(A*=2),r[1]=_+C+L,r[2]=w+k+R,r}var Tt,Dt=at,bn=An,ar=it;function Zn(r,e,o){var l=e[0],h=e[1],f=e[2],g=e[3];return r[0]=o[0]*l+o[4]*h+o[8]*f+o[12]*g,r[1]=o[1]*l+o[5]*h+o[9]*f+o[13]*g,r[2]=o[2]*l+o[6]*h+o[10]*f+o[14]*g,r[3]=o[3]*l+o[7]*h+o[11]*f+o[15]*g,r}function Er(){var r=new ge(4);return ge!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function sr(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function ko(r,e,o){o*=.5;var l=e[0],h=e[1],f=e[2],g=e[3],_=Math.sin(o),w=Math.cos(o);return r[0]=l*w+g*_,r[1]=h*w+f*_,r[2]=f*w-h*_,r[3]=g*w-l*_,r}function Io(r,e){return r[0]===e[0]&&r[1]===e[1]}Be(),Tt=new ge(4),ge!=Float32Array&&(Tt[0]=0,Tt[1]=0,Tt[2]=0,Tt[3]=0),Be(),St(1,0,0),St(0,1,0),Er(),Er(),Q(),function(){var r;r=new ge(2),ge!=Float32Array&&(r[0]=0,r[1]=0)}();const la=Math.PI/180,Ba=180/Math.PI;function Ft(r){return r*la}function Hr(r){return r*Ba}const ca=[[0,0],[1,0],[1,1],[0,1]];function Xs(r){if(r<=0)return 0;if(r>=1)return 1;const e=r*r,o=e*r;return 4*(r<.5?o:3*(r-e)+o-.75)}function Ys(r,e,o,l){const h=new F(r,e,o,l);return function(f){return h.solve(f)}}const Ks=Ys(.25,.1,.25,1);function sn(r,e,o){return Math.min(o,Math.max(e,r))}function Ao(r,e,o){return(o=sn((o-r)/(e-r),0,1))*o*(3-2*o)}function io(r,e,o){const l=o-e,h=((r-e)%l+l)%l+e;return h===e?o:h}function ua(r,e,o){if(!r.length)return o(null,[]);let l=r.length;const h=new Array(r.length);let f=null;r.forEach((g,_)=>{e(g,(w,T)=>{w&&(f=w),h[_]=T,--l==0&&o(f,h)})})}function Fa(r){const e=[];for(const o in r)e.push(r[o]);return e}function Dn(r,...e){for(const o of e)for(const l in o)r[l]=o[l];return r}let Js=1;function Qs(){return Js++}function el(){return function r(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function oi(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function ac(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function Na(r,e){r.forEach(o=>{e[o]&&(e[o]=e[o].bind(e))})}function ja(r,e){return r.indexOf(e,r.length-e.length)!==-1}function Po(r,e,o){const l={};for(const h in r)l[h]=e.call(o||this,r[h],h,r);return l}function Ua(r,e,o){const l={};for(const h in r)e.call(o||this,r[h],h,r)&&(l[h]=r[h]);return l}function ai(r){return Array.isArray(r)?r.map(ai):typeof r=="object"&&r?Po(r,ai):r}const sc={};function Mn(r){sc[r]||(typeof console!="undefined"&&console.warn(r),sc[r]=!0)}function si(r,e,o){return(o.y-r.y)*(e.x-r.x)>(e.y-r.y)*(o.x-r.x)}function Va(r){let e=0;for(let o,l,h=0,f=r.length,g=f-1;h<f;g=h++)o=r[h],l=r[g],e+=(l.x-o.x)*(o.y+l.y);return e}function Ni(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function $a(r){const e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,h,f)=>{const g=h||f;return e[l]=!g||g.toLowerCase(),""}),e["max-age"]){const o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}let ha,oo,Ti,Mo=null;function ji(r){if(Mo==null){const e=r.navigator?r.navigator.userAgent:null;Mo=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Mo}function Ga(r){try{const e=H[r];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}const Xr={now:()=>Ti!==void 0?Ti:H.performance.now(),setNow(r){Ti=r},restoreNow(){Ti=void 0},frame(r){const e=H.requestAnimationFrame(r);return{cancel:()=>H.cancelAnimationFrame(e)}},getImageData(r,e=0){const o=H.document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return o.width=r.width,o.height=r.height,l.drawImage(r,0,0,r.width,r.height),l.getImageData(-e,-e,r.width+2*e,r.height+2*e)},resolveURL:r=>(ha||(ha=H.document.createElement("a")),ha.href=r,ha.href),get devicePixelRatio(){return H.devicePixelRatio},get prefersReducedMotion(){return!!H.matchMedia&&(oo==null&&(oo=H.matchMedia("(prefers-reduced-motion: reduce)")),oo.matches)}};let ee;const O={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(ee==null){const r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ee={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):r}catch{ee=r}}return ee},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},B={supported:!1,testSupport:function(r){!ue&&ne&&(ve?xe(r):K=r)}};let K,ne,ue=!1,ve=!1;function xe(r){const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,ne),r.isContextLost())return;B.supported=!0}catch{}r.deleteTexture(e),ue=!0}H.document&&(ne=H.document.createElement("img"),ne.onload=function(){K&&xe(K),K=null,ve=!0},ne.onerror=function(){ue=!0,K=null},ne.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const fe="01",Se="NO_ACCESS_TOKEN";function Le(r){return r.indexOf("mapbox:")===0}function Fe(r){return O.API_URL_REGEX.test(r)}const $e=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ht(r){const e=r.match($e);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function _t(r){const e=r.params.length?`?${r.params.join("&")}`:"";return`${r.protocol}://${r.authority}${r.path}${e}`}function vt(r){if(!r)return null;const e=r.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(H.atob(e[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class bt{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const o=vt(O.ACCESS_TOKEN);let l="";return l=o&&o.u?H.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(h,f)=>String.fromCharCode(Number("0x"+f)))):O.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${l}`:`mapbox.eventData:${l}`}fetchEventData(){const e=Ga("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{const h=H.localStorage.getItem(o);h&&(this.eventData=JSON.parse(h));const f=H.localStorage.getItem(l);f&&(this.anonId=f)}catch{Mn("Unable to read from LocalStorage")}}saveEventData(){const e=Ga("localStorage"),o=this.getStorageKey(),l=this.getStorageKey("uuid");if(e)try{H.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&H.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{Mn("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,o,l,h){if(!O.EVENTS_URL)return;const f=ht(O.EVENTS_URL);f.params.push(`access_token=${h||O.ACCESS_TOKEN||""}`);const g={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:I,skuId:fe,userId:this.anonId},_=o?Dn(g,o):g,w={url:_t(f),headers:{"Content-Type":"text/plain"},body:JSON.stringify([_])};this.pendingRequest=Vi(w,T=>{this.pendingRequest=null,l(T),this.saveEventData(),this.processRequests(h)})}queueRequest(e,o){this.queue.push(e),this.processRequests(o)}}const Rt=new class extends bt{constructor(r){super("appUserTurnstile"),this._customAccessToken=r}postTurnstileEvent(r,e){O.EVENTS_URL&&O.ACCESS_TOKEN&&Array.isArray(r)&&r.some(o=>Le(o)||Fe(o))&&this.queueRequest(Date.now(),e)}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=vt(O.ACCESS_TOKEN),o=e?e.u:O.ACCESS_TOKEN;let l=o!==this.eventData.tokenU;ac(this.anonId)||(this.anonId=el(),l=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const f=new Date(this.eventData.lastSuccess),g=new Date(h),_=(h-this.eventData.lastSuccess)/864e5;l=l||_>=1||_<-1||f.getDate()!==g.getDate()}else l=!0;if(!l)return this.processRequests();this.postEvent(h,{"enabled.telemetry":!1},f=>{f||(this.eventData.lastSuccess=h,this.eventData.tokenU=o)},r)}},gn=Rt.postTurnstileEvent.bind(Rt),wn=new class extends bt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(r,e,o,l){this.skuToken=e,this.errorCb=l,O.EVENTS_URL&&(o||O.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(Se)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),ac(this.anonId)||(this.anonId=el()),this.postEvent(o,{skuToken:this.skuToken},l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},r))}},dn=wn.postMapLoadEvent.bind(wn),Sn=new class extends bt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(r,e,o,l){if(!O.API_URL||!O.SESSION_PATH)return;const h=ht(O.API_URL+O.SESSION_PATH);h.params.push(`sku=${e||""}`),h.params.push(`access_token=${l||O.ACCESS_TOKEN||""}`);const f={url:_t(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Wg(f,g=>{this.pendingRequest=null,o(g),this.saveEventData(),this.processRequests(l)})}getSessionAPI(r,e,o,l){this.skuToken=e,this.errorCb=l,O.SESSION_PATH&&O.API_URL&&(o||O.ACCESS_TOKEN?this.queueRequest({id:r,timestamp:Date.now()},o):this.errorCb(new Error(Se)))}processRequests(r){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:o}=this.queue.shift();e&&this.success[e]||this.getSession(o,this.skuToken,l=>{l?this.errorCb(l):e&&(this.success[e]=!0)},r)}},zo=Sn.getSessionAPI.bind(Sn),ao=new Set,gr="mapbox-tiles";let Ui,lc,wf=500,nh=50;function tl(){H.caches&&!Ui&&(Ui=H.caches.open(gr))}function rh(r){const e=r.indexOf("?");return e<0?r:r.slice(0,e)}let cc=1/0;const uc={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(uc);class nl extends Error{constructor(e,o,l){o===401&&Fe(l)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=o,this.url=l}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ih=Ni()?()=>self.worker&&self.worker.referrer:()=>(H.location.protocol==="blob:"?H.parent:H).location.href,Ei=function(r,e){if(!(/^file:/.test(o=r.url)||/^file:/.test(ih())&&!/^\w+:/.test(o))){if(H.fetch&&H.Request&&H.AbortController&&H.Request.prototype.hasOwnProperty("signal"))return function(l,h){const f=new H.AbortController,g=new H.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:ih(),signal:f.signal});let _=!1,w=!1;const T=(C=g.url).indexOf("sku=")>0&&Fe(C);var C;l.type==="json"&&g.headers.set("Accept","application/json");const k=(L,R,U)=>{if(w)return;if(L&&L.message!=="SecurityError"&&Mn(L),R&&U)return A(R);const G=Date.now();H.fetch(g).then(te=>{if(te.ok){const se=T?te.clone():null;return A(te,se,G)}return h(new nl(te.statusText,te.status,l.url))}).catch(te=>{te.code!==20&&h(new Error(te.message))})},A=(L,R,U)=>{(l.type==="arrayBuffer"?L.arrayBuffer():l.type==="json"?L.json():L.text()).then(G=>{w||(R&&U&&function(te,se,de){if(tl(),!Ui)return;const me={status:se.status,statusText:se.statusText,headers:new H.Headers};se.headers.forEach((_e,Me)=>me.headers.set(Me,_e));const ye=$a(se.headers.get("Cache-Control")||"");ye["no-store"]||(ye["max-age"]&&me.headers.set("Expires",new Date(de+1e3*ye["max-age"]).toUTCString()),new Date(me.headers.get("Expires")).getTime()-de<42e4||function(_e,Me){if(lc===void 0)try{new Response(new ReadableStream),lc=!0}catch{lc=!1}lc?Me(_e.body):_e.blob().then(Me)}(se,_e=>{const Me=new H.Response(_e,me);tl(),Ui&&Ui.then(Ae=>Ae.put(rh(te.url),Me)).catch(Ae=>Mn(Ae.message))}))}(g,R,U),_=!0,h(null,G,L.headers.get("Cache-Control"),L.headers.get("Expires")))}).catch(G=>{w||h(new Error(G.message))})};return T?function(L,R){if(tl(),!Ui)return R(null);const U=rh(L.url);Ui.then(G=>{G.match(U).then(te=>{const se=function(de){if(!de)return!1;const me=new Date(de.headers.get("Expires")||0),ye=$a(de.headers.get("Cache-Control")||"");return me>Date.now()&&!ye["no-cache"]}(te);G.delete(U),se&&G.put(U,te.clone()),R(null,te,se)}).catch(R)}).catch(R)}(g,k):k(null,null),{cancel:()=>{w=!0,_||f.abort()}}}(r,e);if(Ni()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e,void 0,!0)}var o;return function(l,h){const f=new H.XMLHttpRequest;f.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const g in l.headers)f.setRequestHeader(g,l.headers[g]);return l.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=l.credentials==="include",f.onerror=()=>{h(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let g=f.response;if(l.type==="json")try{g=JSON.parse(f.response)}catch(_){return h(_)}h(null,g,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else h(new nl(f.statusText,f.status,l.url))},f.send(l.body),{cancel:()=>f.abort()}}(r,e)},rl=function(r,e){return Ei(Dn(r,{type:"arrayBuffer"}),e)},Vi=function(r,e){return Ei(Dn(r,{method:"POST"}),e)},Wg=function(r,e){return Ei(Dn(r,{method:"GET"}),e)};function Sf(r){const e=H.document.createElement("a");return e.href=r,e.protocol===H.document.location.protocol&&e.host===H.document.location.host}const qa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Za,il;Za=[],il=0;const Tf=function(r,e){if(B.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),il>=O.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:r,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Za.push(f),f}il++;let o=!1;const l=()=>{if(!o)for(o=!0,il--;Za.length&&il<O.MAX_PARALLEL_IMAGE_REQUESTS;){const f=Za.shift(),{requestParameters:g,callback:_,cancelled:w}=f;w||(f.cancel=Tf(g,_).cancel)}},h=rl(r,(f,g,_,w)=>{l(),f?e(f):g&&(H.createImageBitmap?function(T,C){const k=new H.Blob([new Uint8Array(T)],{type:"image/png"});H.createImageBitmap(k).then(A=>{C(null,A)}).catch(A=>{C(new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(g,(T,C)=>e(T,C,_,w)):function(T,C){const k=new H.Image,A=H.URL;k.onload=()=>{C(null,k),A.revokeObjectURL(k.src),k.onload=null,H.requestAnimationFrame(()=>{k.src=qa})},k.onerror=()=>C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new H.Blob([new Uint8Array(T)],{type:"image/png"});k.src=T.byteLength?A.createObjectURL(L):qa}(g,(T,C)=>e(T,C,_,w)))});return{cancel:()=>{h.cancel(),l()}}};function Ef(r,e,o){o[r]&&o[r].indexOf(e)!==-1||(o[r]=o[r]||[],o[r].push(e))}function hc(r,e,o){if(o&&o[r]){const l=o[r].indexOf(e);l!==-1&&o[r].splice(l,1)}}class Oo{constructor(e,o={}){Dn(this,o),this.type=e}}class dc extends Oo{constructor(e,o={}){super("error",Dn({error:e},o))}}class Lo{on(e,o){return this._listeners=this._listeners||{},Ef(e,o,this._listeners),this}off(e,o){return hc(e,o,this._listeners),hc(e,o,this._oneTimeListeners),this}once(e,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Ef(e,o,this._oneTimeListeners),this):new Promise(l=>this.once(e,l))}fire(e,o){typeof e=="string"&&(e=new Oo(e,o||{}));const l=e.type;if(this.listens(l)){e.target=this;const h=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const _ of h)_.call(this,e);const f=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const _ of f)hc(l,_,this._oneTimeListeners),_.call(this,e);const g=this._eventedParent;g&&(Dn(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),g.fire(e))}else e instanceof dc&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var ke=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');class nt{constructor(e,o,l,h){this.message=(e?`${e}: `:"")+l,h&&(this.identifier=h),o!=null&&o.__line__&&(this.line=o.__line__)}}function Cf(r){const e=r.value;return e?[new nt(r.key,e,"constants have been deprecated as of v8")]:[]}function Do(r,...e){for(const o of e)for(const l in o)r[l]=o[l];return r}function Un(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function so(r){if(Array.isArray(r))return r.map(so);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const o in r)e[o]=so(r[o]);return e}return Un(r)}class $i extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}class fc{constructor(e,o=[]){this.parent=e,this.bindings={};for(const[l,h]of o)this.bindings[l]=h}concat(e){return new fc(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Ro={kind:"null"},et={kind:"number"},jt={kind:"string"},zt={kind:"boolean"},Gi={kind:"color"},Wa={kind:"object"},Ot={kind:"value"},ol={kind:"collator"},Bo={kind:"formatted"},al={kind:"resolvedImage"};function li(r,e){return{kind:"array",itemType:r,N:e}}function zn(r){if(r.kind==="array"){const e=zn(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}const Hg=[Ro,et,jt,zt,Gi,Bo,Wa,li(Ot),al];function Lr(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Lr(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const o of Hg)if(!Lr(o,e))return null}}return`Expected ${zn(r)} but found ${zn(e)} instead.`}function pc(r,e){return e.some(o=>o.kind===r.kind)}function Ha(r,e){return e.some(o=>o==="null"?r===null:o==="array"?Array.isArray(r):o==="object"?r&&!Array.isArray(r)&&typeof r=="object":o===typeof r)}function Xa(r){var e={exports:{}};return r(e,e.exports),e.exports}var Ya=Xa(function(r,e){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(_){return(_=Math.round(_))<0?0:_>255?255:_}function h(_){return l(_[_.length-1]==="%"?parseFloat(_)/100*255:parseInt(_))}function f(_){return(w=_[_.length-1]==="%"?parseFloat(_)/100:parseFloat(_))<0?0:w>1?1:w;var w}function g(_,w,T){return T<0?T+=1:T>1&&(T-=1),6*T<1?_+(w-_)*T*6:2*T<1?w:3*T<2?_+(w-_)*(2/3-T)*6:_}try{e.parseCSSColor=function(_){var w,T=_.replace(/ /g,"").toLowerCase();if(T in o)return o[T].slice();if(T[0]==="#")return T.length===4?(w=parseInt(T.substr(1),16))>=0&&w<=4095?[(3840&w)>>4|(3840&w)>>8,240&w|(240&w)>>4,15&w|(15&w)<<4,1]:null:T.length===7&&(w=parseInt(T.substr(1),16))>=0&&w<=16777215?[(16711680&w)>>16,(65280&w)>>8,255&w,1]:null;var C=T.indexOf("("),k=T.indexOf(")");if(C!==-1&&k+1===T.length){var A=T.substr(0,C),L=T.substr(C+1,k-(C+1)).split(","),R=1;switch(A){case"rgba":if(L.length!==4)return null;R=f(L.pop());case"rgb":return L.length!==3?null:[h(L[0]),h(L[1]),h(L[2]),R];case"hsla":if(L.length!==4)return null;R=f(L.pop());case"hsl":if(L.length!==3)return null;var U=(parseFloat(L[0])%360+360)%360/360,G=f(L[1]),te=f(L[2]),se=te<=.5?te*(G+1):te+G-te*G,de=2*te-se;return[l(255*g(de,se,U+1/3)),l(255*g(de,se,U)),l(255*g(de,se,U-1/3)),R];default:return null}}return null}}catch{}});class Ht{constructor(e,o,l,h=1){this.r=e,this.g=o,this.b=l,this.a=h}static parse(e){if(!e)return;if(e instanceof Ht)return e;if(typeof e!="string")return;const o=Ya.parseCSSColor(e);return o?new Ht(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[e,o,l,h]=this.toArray();return`rgba(${Math.round(e)},${Math.round(o)},${Math.round(l)},${h})`}toArray(){const{r:e,g:o,b:l,a:h}=this;return h===0?[0,0,0,0]:[255*e/h,255*o/h,255*l/h,h]}}Ht.black=new Ht(0,0,0,1),Ht.white=new Ht(1,1,1,1),Ht.transparent=new Ht(0,0,0,0),Ht.red=new Ht(1,0,0,1),Ht.blue=new Ht(0,0,1,1);class mc{constructor(e,o,l){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class oh{constructor(e,o,l,h,f){this.text=e.normalize?e.normalize():e,this.image=o,this.scale=l,this.fontStack=h,this.textColor=f}}class At{constructor(e){this.sections=e}static fromString(e){return new At([new oh(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof At?e:At.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const o of this.sections){if(o.image){e.push(["image",o.image.name]);continue}e.push(o.text);const l={};o.fontStack&&(l["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(l["font-scale"]=o.scale),o.textColor&&(l["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(l)}return e}}class ci{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ci({name:e,available:!1}):null}serialize(){return["image",this.name]}}function kf(r,e,o,l){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof o=="number"&&o>=0&&o<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[r,e,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[r,e,o,l]:[r,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function gc(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Ht||r instanceof mc||r instanceof At||r instanceof ci)return!0;if(Array.isArray(r)){for(const e of r)if(!gc(e))return!1;return!0}if(typeof r=="object"){for(const e in r)if(!gc(r[e]))return!1;return!0}return!1}function Wn(r){if(r===null)return Ro;if(typeof r=="string")return jt;if(typeof r=="boolean")return zt;if(typeof r=="number")return et;if(r instanceof Ht)return Gi;if(r instanceof mc)return ol;if(r instanceof At)return Bo;if(r instanceof ci)return al;if(Array.isArray(r)){const e=r.length;let o;for(const l of r){const h=Wn(l);if(o){if(o===h)continue;o=Ot;break}o=h}return li(o||Ot,e)}return Wa}function sl(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Ht||r instanceof At||r instanceof ci?r.toString():JSON.stringify(r)}class Fo{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(e.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!gc(e[1]))return o.error("invalid value");const l=e[1];let h=Wn(l);const f=o.expectedType;return h.kind!=="array"||h.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(h=f),new Fo(h,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ht?["rgba"].concat(this.value.toArray()):this.value instanceof At?this.value.serialize():this.value}}class lr{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const yc={string:jt,number:et,boolean:zt,object:Wa};class ui{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let l,h=1;const f=e[0];if(f==="array"){let _,w;if(e.length>2){const T=e[1];if(typeof T!="string"||!(T in yc)||T==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);_=yc[T],h++}else _=Ot;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);w=e[2],h++}l=li(_,w)}else l=yc[f];const g=[];for(;h<e.length;h++){const _=o.parse(e[h],h,Ot);if(!_)return null;g.push(_)}return new ui(l,g)}evaluate(e){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(e);if(!Lr(this.type,Wn(l)))return l;if(o===this.args.length-1)throw new lr(`Expected value to be of type ${zn(this.type)}, but found ${zn(Wn(l))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,o=[e.kind];if(e.kind==="array"){const l=e.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){o.push(l.kind);const h=e.N;(typeof h=="number"||this.args.length>1)&&o.push(h)}}return o.concat(this.args.map(l=>l.serialize()))}}class qi{constructor(e){this.type=Bo,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const h=[];let f=!1;for(let g=1;g<=e.length-1;++g){const _=e[g];if(f&&typeof _=="object"&&!Array.isArray(_)){f=!1;let w=null;if(_["font-scale"]&&(w=o.parse(_["font-scale"],1,et),!w))return null;let T=null;if(_["text-font"]&&(T=o.parse(_["text-font"],1,li(jt)),!T))return null;let C=null;if(_["text-color"]&&(C=o.parse(_["text-color"],1,Gi),!C))return null;const k=h[h.length-1];k.scale=w,k.font=T,k.textColor=C}else{const w=o.parse(e[g],1,Ot);if(!w)return null;const T=w.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,h.push({content:w,scale:null,font:null,textColor:null})}}return new qi(h)}evaluate(e){return new At(this.sections.map(o=>{const l=o.content.evaluate(e);return Wn(l)===al?new oh("",l,null,null,null):new oh(sl(l),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(const o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const o of this.sections){e.push(o.content.serialize());const l={};o.scale&&(l["font-scale"]=o.scale.serialize()),o.font&&(l["text-font"]=o.font.serialize()),o.textColor&&(l["text-color"]=o.textColor.serialize()),e.push(l)}return e}}class da{constructor(e){this.type=al,this.input=e}static parse(e,o){if(e.length!==2)return o.error("Expected two arguments.");const l=o.parse(e[1],1,jt);return l?new da(l):o.error("No image name provided.")}evaluate(e){const o=this.input.evaluate(e),l=ci.fromString(o);return l&&e.availableImages&&(l.available=e.availableImages.indexOf(o)>-1),l}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xg={"to-boolean":zt,"to-color":Gi,"to-number":et,"to-string":jt};class Zi{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const l=e[0];if((l==="to-boolean"||l==="to-string")&&e.length!==2)return o.error("Expected one argument.");const h=Xg[l],f=[];for(let g=1;g<e.length;g++){const _=o.parse(e[g],g,Ot);if(!_)return null;f.push(_)}return new Zi(h,f)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let o,l;for(const h of this.args){if(o=h.evaluate(e),l=null,o instanceof Ht)return o;if(typeof o=="string"){const f=e.parseColor(o);if(f)return f}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:kf(o[0],o[1],o[2],o[3]),!l))return new Ht(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new lr(l||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const l of this.args){if(o=l.evaluate(e),o===null)return 0;const h=Number(o);if(!isNaN(h))return h}throw new lr(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?At.fromString(sl(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ci.fromString(sl(this.args[0].evaluate(e))):sl(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new qi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new da(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(o=>{e.push(o.serialize())}),e}}const If=["Unknown","Point","LineString","Polygon"];class Af{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?If[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:l,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*o-e[0])+this.featureDistanceData.bearing[1]*(h*o-e[1])}return 0}parseColor(e){let o=this._parseColorCache[e];return o||(o=this._parseColorCache[e]=Ht.parse(e)),o}}class Yr{constructor(e,o,l,h){this.name=e,this.type=o,this._evaluate=l,this.args=h}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,o){const l=e[0],h=Yr.definitions[l];if(!h)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(h)?h[0]:h.type,g=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,_=g.filter(([T])=>!Array.isArray(T)||T.length===e.length-1);let w=null;for(const[T,C]of _){w=new xc(o.registry,o.path,null,o.scope);const k=[];let A=!1;for(let L=1;L<e.length;L++){const R=e[L],U=Array.isArray(T)?T[L-1]:T.type,G=w.parse(R,1+k.length,U);if(!G){A=!0;break}k.push(G)}if(!A)if(Array.isArray(T)&&T.length!==k.length)w.error(`Expected ${T.length} arguments, but found ${k.length} instead.`);else{for(let L=0;L<k.length;L++){const R=Array.isArray(T)?T[L]:T.type,U=k[L];w.concat(L+1).checkSubtype(R,U.type)}if(w.errors.length===0)return new Yr(l,f,C,k)}}if(_.length===1)o.errors.push(...w.errors);else{const T=(_.length?_:g).map(([k])=>{return A=k,Array.isArray(A)?`(${A.map(zn).join(", ")})`:`(${zn(A.type)}...)`;var A}).join(" | "),C=[];for(let k=1;k<e.length;k++){const A=o.parse(e[k],1+C.length);if(!A)return null;C.push(zn(A.type))}o.error(`Expected arguments of type ${T}, but found (${C.join(", ")}) instead.`)}return null}static register(e,o){Yr.definitions=o;for(const l in o)e[l]=Yr}}class ll{constructor(e,o,l){this.type=ol,this.locale=l,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(e.length!==2)return o.error("Expected one argument.");const l=e[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const h=o.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,zt);if(!h)return null;const f=o.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,zt);if(!f)return null;let g=null;return l.locale&&(g=o.parse(l.locale,1,jt),!g)?null:new ll(h,f,g)}evaluate(e){return new mc(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const No=8192;function _c(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function cl(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Pf(r,e){const o=(180+r[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,h=Math.pow(2,e.z);return[Math.round(o*h*No),Math.round(l*h*No)]}function Mf(r,e,o){const l=r[0]-e[0],h=r[1]-e[1],f=r[0]-o[0],g=r[1]-o[1];return l*g-f*h==0&&l*f<=0&&h*g<=0}function ah(r,e){let o=!1;for(let g=0,_=e.length;g<_;g++){const w=e[g];for(let T=0,C=w.length;T<C-1;T++){if(Mf(r,w[T],w[T+1]))return!1;(h=w[T])[1]>(l=r)[1]!=(f=w[T+1])[1]>l[1]&&l[0]<(f[0]-h[0])*(l[1]-h[1])/(f[1]-h[1])+h[0]&&(o=!o)}}var l,h,f;return o}function zf(r,e){for(let o=0;o<e.length;o++)if(ah(r,e[o]))return!0;return!1}function sh(r,e,o,l){const h=l[0]-o[0],f=l[1]-o[1],g=(r[0]-o[0])*f-h*(r[1]-o[1]),_=(e[0]-o[0])*f-h*(e[1]-o[1]);return g>0&&_<0||g<0&&_>0}function Yg(r,e,o){for(const T of o)for(let C=0;C<T.length-1;++C)if((_=[(g=T[C+1])[0]-(f=T[C])[0],g[1]-f[1]])[0]*(w=[(h=e)[0]-(l=r)[0],h[1]-l[1]])[1]-_[1]*w[0]!=0&&sh(l,h,f,g)&&sh(f,g,l,h))return!0;var l,h,f,g,_,w;return!1}function Of(r,e){for(let o=0;o<r.length;++o)if(!ah(r[o],e))return!1;for(let o=0;o<r.length-1;++o)if(Yg(r[o],r[o+1],e))return!1;return!0}function Kg(r,e){for(let o=0;o<e.length;o++)if(Of(r,e[o]))return!0;return!1}function lh(r,e,o){const l=[];for(let h=0;h<r.length;h++){const f=[];for(let g=0;g<r[h].length;g++){const _=Pf(r[h][g],o);_c(e,_),f.push(_)}l.push(f)}return l}function Lf(r,e,o){const l=[];for(let h=0;h<r.length;h++){const f=lh(r[h],e,o);l.push(f)}return l}function ch(r,e,o,l){if(r[0]<o[0]||r[0]>o[2]){const h=.5*l;let f=r[0]-o[0]>h?-l:o[0]-r[0]>h?l:0;f===0&&(f=r[0]-o[2]>h?-l:o[2]-r[0]>h?l:0),r[0]+=f}_c(e,r)}function Df(r,e,o,l){const h=Math.pow(2,l.z)*No,f=[l.x*No,l.y*No],g=[];for(const _ of r)for(const w of _){const T=[w.x+f[0],w.y+f[1]];ch(T,e,o,h),g.push(T)}return g}function Rf(r,e,o,l){const h=Math.pow(2,l.z)*No,f=[l.x*No,l.y*No],g=[];for(const w of r){const T=[];for(const C of w){const k=[C.x+f[0],C.y+f[1]];_c(e,k),T.push(k)}g.push(T)}if(e[2]-e[0]<=h/2){(_=e)[0]=_[1]=1/0,_[2]=_[3]=-1/0;for(const w of g)for(const T of w)ch(T,e,o,h)}var _;return g}class fa{constructor(e,o){this.type=zt,this.geojson=e,this.geometries=o}static parse(e,o){if(e.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(gc(e[1])){const l=e[1];if(l.type==="FeatureCollection")for(let h=0;h<l.features.length;++h){const f=l.features[h].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new fa(l,l.features[h].geometry)}else if(l.type==="Feature"){const h=l.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new fa(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new fa(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(o,l){const h=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],g=o.canonicalID();if(l.type==="Polygon"){const _=lh(l.coordinates,f,g),w=Df(o.geometry(),h,f,g);if(!cl(h,f))return!1;for(const T of w)if(!ah(T,_))return!1}if(l.type==="MultiPolygon"){const _=Lf(l.coordinates,f,g),w=Df(o.geometry(),h,f,g);if(!cl(h,f))return!1;for(const T of w)if(!zf(T,_))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(o,l){const h=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],g=o.canonicalID();if(l.type==="Polygon"){const _=lh(l.coordinates,f,g),w=Rf(o.geometry(),h,f,g);if(!cl(h,f))return!1;for(const T of w)if(!Of(T,_))return!1}if(l.type==="MultiPolygon"){const _=Lf(l.coordinates,f,g),w=Rf(o.geometry(),h,f,g);if(!cl(h,f))return!1;for(const T of w)if(!Kg(T,_))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ka(r){if(r instanceof Yr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof fa)return!1;let e=!0;return r.eachChild(o=>{e&&!Ka(o)&&(e=!1)}),e}function ul(r){if(r instanceof Yr&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(o=>{e&&!ul(o)&&(e=!1)}),e}function hl(r,e){if(r instanceof Yr&&e.indexOf(r.name)>=0)return!1;let o=!0;return r.eachChild(l=>{o&&!hl(l,e)&&(o=!1)}),o}class vc{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(e.length!==2||typeof e[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=e[1];return o.scope.has(l)?new vc(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class xc{constructor(e,o=[],l,h=new fc,f=[]){this.registry=e,this.path=o,this.key=o.map(g=>`[${g}]`).join(""),this.scope=h,this.errors=f,this.expectedType=l}parse(e,o,l,h,f={}){return o?this.concat(o,l,h)._parse(e,f):this._parse(e,f)}_parse(e,o){function l(h,f,g){return g==="assert"?new ui(f,[h]):g==="coerce"?new Zi(f,[h]):h}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=e[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const f=this.registry[h];if(f){let g=f.parse(e,this);if(!g)return null;if(this.expectedType){const _=this.expectedType,w=g.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||w.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(_,w))return null}else g=l(g,_,o.typeAnnotation||"coerce");else g=l(g,_,o.typeAnnotation||"assert")}if(!(g instanceof Fo)&&g.type.kind!=="resolvedImage"&&bc(g)){const _=new Af;try{g=new Fo(g.type,g.evaluate(_))}catch(w){return this.error(w.message),null}}return g}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,l){const h=typeof e=="number"?this.path.concat(e):this.path,f=l?this.scope.concat(l):this.scope;return new xc(this.registry,h,o||null,f,this.errors)}error(e,...o){const l=`${this.key}${o.map(h=>`[${h}]`).join("")}`;this.errors.push(new $i(l,e))}checkSubtype(e,o){const l=Lr(e,o);return l&&this.error(l),l}}function bc(r){if(r instanceof vc)return bc(r.boundExpression);if(r instanceof Yr&&r.name==="error"||r instanceof ll||r instanceof fa)return!1;const e=r instanceof Zi||r instanceof ui;let o=!0;return r.eachChild(l=>{o=e?o&&bc(l):o&&l instanceof Fo}),!!o&&Ka(r)&&hl(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function dl(r,e){const o=r.length-1;let l,h,f=0,g=o,_=0;for(;f<=g;)if(_=Math.floor((f+g)/2),l=r[_],h=r[_+1],l<=e){if(_===o||e<h)return _;f=_+1}else{if(!(l>e))throw new lr("Input is not a number.");g=_-1}return 0}class fl{constructor(e,o,l){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(const[h,f]of l)this.labels.push(h),this.outputs.push(f)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(e[1],1,et);if(!l)return null;const h=[];let f=null;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);for(let g=1;g<e.length;g+=2){const _=g===1?-1/0:e[g],w=e[g+1],T=g,C=g+1;if(typeof _!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(h.length&&h[h.length-1][0]>=_)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const k=o.parse(w,C,f);if(!k)return null;f=f||k.type,h.push([_,k])}return new fl(f,l,h)}evaluate(e){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(e);const h=this.input.evaluate(e);if(h<=o[0])return l[0].evaluate(e);const f=o.length;return h>=o[f-1]?l[f-1].evaluate(e):l[dl(o,h)].evaluate(e)}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&e.push(this.labels[o]),e.push(this.outputs[o].serialize());return e}}function rn(r,e,o){return r*(1-o)+e*o}var wc=Object.freeze({__proto__:null,number:rn,color:function(r,e,o){return new Ht(rn(r.r,e.r,o),rn(r.g,e.g,o),rn(r.b,e.b,o),rn(r.a,e.a,o))},array:function(r,e,o){return r.map((l,h)=>rn(l,e[h],o))}});const Bf=.95047,pl=1.08883,uh=4/29,Sc=6/29,Ff=3*Sc*Sc,Jg=Math.PI/180,Qg=180/Math.PI;function Tc(r){return r>.008856451679035631?Math.pow(r,1/3):r/Ff+uh}function Ec(r){return r>Sc?r*r*r:Ff*(r-uh)}function Cc(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function ml(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Nf(r){const e=ml(r.r),o=ml(r.g),l=ml(r.b),h=Tc((.4124564*e+.3575761*o+.1804375*l)/Bf),f=Tc((.2126729*e+.7151522*o+.072175*l)/1);return{l:116*f-16,a:500*(h-f),b:200*(f-Tc((.0193339*e+.119192*o+.9503041*l)/pl)),alpha:r.a}}function jf(r){let e=(r.l+16)/116,o=isNaN(r.a)?e:e+r.a/500,l=isNaN(r.b)?e:e-r.b/200;return e=1*Ec(e),o=Bf*Ec(o),l=pl*Ec(l),new Ht(Cc(3.2404542*o-1.5371385*e-.4985314*l),Cc(-.969266*o+1.8760108*e+.041556*l),Cc(.0556434*o-.2040259*e+1.0572252*l),r.alpha)}function ey(r,e,o){const l=e-r;return r+o*(l>180||l<-180?l-360*Math.round(l/360):l)}const gl={forward:Nf,reverse:jf,interpolate:function(r,e,o){return{l:rn(r.l,e.l,o),a:rn(r.a,e.a,o),b:rn(r.b,e.b,o),alpha:rn(r.alpha,e.alpha,o)}}},yl={forward:function(r){const{l:e,a:o,b:l}=Nf(r),h=Math.atan2(l,o)*Qg;return{h:h<0?h+360:h,c:Math.sqrt(o*o+l*l),l:e,alpha:r.a}},reverse:function(r){const e=r.h*Jg,o=r.c;return jf({l:r.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:r.alpha})},interpolate:function(r,e,o){return{h:ey(r.h,e.h,o),c:rn(r.c,e.c,o),l:rn(r.l,e.l,o),alpha:rn(r.alpha,e.alpha,o)}}};var Uf=Object.freeze({__proto__:null,lab:gl,hcl:yl});class Dr{constructor(e,o,l,h,f){this.type=e,this.operator=o,this.interpolation=l,this.input=h,this.labels=[],this.outputs=[];for(const[g,_]of f)this.labels.push(g),this.outputs.push(_)}static interpolationFactor(e,o,l,h){let f=0;if(e.name==="exponential")f=kc(o,e.base,l,h);else if(e.name==="linear")f=kc(o,1,l,h);else if(e.name==="cubic-bezier"){const g=e.controlPoints;f=new F(g[0],g[1],g[2],g[3]).solve(kc(o,1,l,h))}return f}static parse(e,o){let[l,h,f,...g]=e;if(!Array.isArray(h)||h.length===0)return o.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const T=h[1];if(typeof T!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:T}}else{if(h[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const T=h.slice(1);if(T.length!==4||T.some(C=>typeof C!="number"||C<0||C>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:T}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(f=o.parse(f,2,et),!f)return null;const _=[];let w=null;l==="interpolate-hcl"||l==="interpolate-lab"?w=Gi:o.expectedType&&o.expectedType.kind!=="value"&&(w=o.expectedType);for(let T=0;T<g.length;T+=2){const C=g[T],k=g[T+1],A=T+3,L=T+4;if(typeof C!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(_.length&&_[_.length-1][0]>=C)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',A);const R=o.parse(k,L,w);if(!R)return null;w=w||R.type,_.push([C,R])}return w.kind==="number"||w.kind==="color"||w.kind==="array"&&w.itemType.kind==="number"&&typeof w.N=="number"?new Dr(w,l,h,f,_):o.error(`Type ${zn(w)} is not interpolatable.`)}evaluate(e){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(e);const h=this.input.evaluate(e);if(h<=o[0])return l[0].evaluate(e);const f=o.length;if(h>=o[f-1])return l[f-1].evaluate(e);const g=dl(o,h),_=Dr.interpolationFactor(this.interpolation,h,o[g],o[g+1]),w=l[g].evaluate(e),T=l[g+1].evaluate(e);return this.operator==="interpolate"?wc[this.type.kind.toLowerCase()](w,T,_):this.operator==="interpolate-hcl"?yl.reverse(yl.interpolate(yl.forward(w),yl.forward(T),_)):gl.reverse(gl.interpolate(gl.forward(w),gl.forward(T),_))}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,e,this.input.serialize()];for(let l=0;l<this.labels.length;l++)o.push(this.labels[l],this.outputs[l].serialize());return o}}function kc(r,e,o,l){const h=l-o,f=r-o;return h===0?0:e===1?f/h:(Math.pow(e,f)-1)/(Math.pow(e,h)-1)}class pa{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let l=null;const h=o.expectedType;h&&h.kind!=="value"&&(l=h);const f=[];for(const _ of e.slice(1)){const w=o.parse(_,1+f.length,l,void 0,{typeAnnotation:"omit"});if(!w)return null;l=l||w.type,f.push(w)}const g=h&&f.some(_=>Lr(h,_.type));return new pa(g?Ot:l,f)}evaluate(e){let o,l=null,h=0;for(const f of this.args){if(h++,l=f.evaluate(e),l&&l instanceof ci&&!l.available&&(o||(o=l),l=null,h===this.args.length))return o;if(l!==null)break}return l}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class Ic{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const l=[];for(let f=1;f<e.length-1;f+=2){const g=e[f];if(typeof g!="string")return o.error(`Expected string, but found ${typeof g} instead.`,f);if(/[^a-zA-Z0-9_]/.test(g))return o.error("Variable names must contain only alphanumeric characters or '_'.",f);const _=o.parse(e[f+1],f+1);if(!_)return null;l.push([g,_])}const h=o.parse(e[e.length-1],e.length-1,o.expectedType,l);return h?new Ic(l,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[o,l]of this.bindings)e.push(o,l.serialize());return e.push(this.result.serialize()),e}}class hh{constructor(e,o,l){this.type=e,this.index=o,this.input=l}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,et),h=o.parse(e[2],2,li(o.expectedType||Ot));return l&&h?new hh(h.type.itemType,l,h):null}evaluate(e){const o=this.index.evaluate(e),l=this.input.evaluate(e);if(o<0)throw new lr(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new lr(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new lr(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class dh{constructor(e,o){this.type=zt,this.needle=e,this.haystack=o}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,Ot),h=o.parse(e[2],2,Ot);return l&&h?pc(l.type,[zt,jt,et,Ro,Ot])?new dh(l,h):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(l.type)} instead`):null}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!l)return!1;if(!Ha(o,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Wn(o))} instead.`);if(!Ha(l,["string","array"]))throw new lr(`Expected second argument to be of type array or string, but found ${zn(Wn(l))} instead.`);return l.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ci{constructor(e,o,l){this.type=et,this.needle=e,this.haystack=o,this.fromIndex=l}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,Ot),h=o.parse(e[2],2,Ot);if(!l||!h)return null;if(!pc(l.type,[zt,jt,et,Ro,Ot]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${zn(l.type)} instead`);if(e.length===4){const f=o.parse(e[3],3,et);return f?new Ci(l,h,f):null}return new Ci(l,h)}evaluate(e){const o=this.needle.evaluate(e),l=this.haystack.evaluate(e);if(!Ha(o,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${zn(Wn(o))} instead.`);if(!Ha(l,["string","array"]))throw new lr(`Expected second argument to be of type array or string, but found ${zn(Wn(l))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(e);return l.indexOf(o,h)}return l.indexOf(o)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ac{constructor(e,o,l,h,f,g){this.inputType=e,this.type=o,this.input=l,this.cases=h,this.outputs=f,this.otherwise=g}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let l,h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const f={},g=[];for(let T=2;T<e.length-1;T+=2){let C=e[T];const k=e[T+1];Array.isArray(C)||(C=[C]);const A=o.concat(T);if(C.length===0)return A.error("Expected at least one branch label.");for(const R of C){if(typeof R!="number"&&typeof R!="string")return A.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return A.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return A.error("Numeric branch labels must be integer values.");if(l){if(A.checkSubtype(l,Wn(R)))return null}else l=Wn(R);if(f[String(R)]!==void 0)return A.error("Branch labels must be unique.");f[String(R)]=g.length}const L=o.parse(k,T,h);if(!L)return null;h=h||L.type,g.push(L)}const _=o.parse(e[1],1,Ot);if(!_)return null;const w=o.parse(e[e.length-1],e.length-1,h);return w?_.type.kind!=="value"&&o.concat(1).checkSubtype(l,_.type)?null:new Ac(l,h,_,f,g,w):null}evaluate(e){const o=this.input.evaluate(e);return(Wn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),l=[],h={};for(const g of o){const _=h[this.cases[g]];_===void 0?(h[this.cases[g]]=l.length,l.push([this.cases[g],[g]])):l[_][1].push(g)}const f=g=>this.inputType.kind==="number"?Number(g):g;for(const[g,_]of l)e.push(_.length===1?f(_[0]):_.map(f)),e.push(this.outputs[g].serialize());return e.push(this.otherwise.serialize()),e}}class jo{constructor(e,o,l){this.type=e,this.branches=o,this.otherwise=l}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const h=[];for(let g=1;g<e.length-1;g+=2){const _=o.parse(e[g],g,zt);if(!_)return null;const w=o.parse(e[g+1],g+1,l);if(!w)return null;h.push([_,w]),l=l||w.type}const f=o.parse(e[e.length-1],e.length-1,l);return f?new jo(l,h,f):null}evaluate(e){for(const[o,l]of this.branches)if(o.evaluate(e))return l.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[o,l]of this.branches)e(o),e(l);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class _l{constructor(e,o,l,h){this.type=e,this.input=o,this.beginIndex=l,this.endIndex=h}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const l=o.parse(e[1],1,Ot),h=o.parse(e[2],2,et);if(!l||!h)return null;if(!pc(l.type,[li(Ot),jt,Ot]))return o.error(`Expected first argument to be of type array or string, but found ${zn(l.type)} instead`);if(e.length===4){const f=o.parse(e[3],3,et);return f?new _l(l.type,l,h,f):null}return new _l(l.type,l,h)}evaluate(e){const o=this.input.evaluate(e),l=this.beginIndex.evaluate(e);if(!Ha(o,["string","array"]))throw new lr(`Expected first argument to be of type array or string, but found ${zn(Wn(o))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(e);return o.slice(l,h)}return o.slice(l)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Vf(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Pc(r,e,o,l){return l.compare(e,o)===0}function Uo(r,e,o){const l=r!=="=="&&r!=="!=";return class Fk{constructor(f,g,_){this.type=zt,this.lhs=f,this.rhs=g,this.collator=_,this.hasUntypedArgument=f.type.kind==="value"||g.type.kind==="value"}static parse(f,g){if(f.length!==3&&f.length!==4)return g.error("Expected two or three arguments.");const _=f[0];let w=g.parse(f[1],1,Ot);if(!w)return null;if(!Vf(_,w.type))return g.concat(1).error(`"${_}" comparisons are not supported for type '${zn(w.type)}'.`);let T=g.parse(f[2],2,Ot);if(!T)return null;if(!Vf(_,T.type))return g.concat(2).error(`"${_}" comparisons are not supported for type '${zn(T.type)}'.`);if(w.type.kind!==T.type.kind&&w.type.kind!=="value"&&T.type.kind!=="value")return g.error(`Cannot compare types '${zn(w.type)}' and '${zn(T.type)}'.`);l&&(w.type.kind==="value"&&T.type.kind!=="value"?w=new ui(T.type,[w]):w.type.kind!=="value"&&T.type.kind==="value"&&(T=new ui(w.type,[T])));let C=null;if(f.length===4){if(w.type.kind!=="string"&&T.type.kind!=="string"&&w.type.kind!=="value"&&T.type.kind!=="value")return g.error("Cannot use collator to compare non-string types.");if(C=g.parse(f[3],3,ol),!C)return null}return new Fk(w,T,C)}evaluate(f){const g=this.lhs.evaluate(f),_=this.rhs.evaluate(f);if(l&&this.hasUntypedArgument){const w=Wn(g),T=Wn(_);if(w.kind!==T.kind||w.kind!=="string"&&w.kind!=="number")throw new lr(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${w.kind}, ${T.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const w=Wn(g),T=Wn(_);if(w.kind!=="string"||T.kind!=="string")return e(f,g,_)}return this.collator?o(f,g,_,this.collator.evaluate(f)):e(f,g,_)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[r];return this.eachChild(g=>{f.push(g.serialize())}),f}}}const $f=Uo("==",function(r,e,o){return e===o},Pc),fh=Uo("!=",function(r,e,o){return e!==o},function(r,e,o,l){return!Pc(0,e,o,l)}),ph=Uo("<",function(r,e,o){return e<o},function(r,e,o,l){return l.compare(e,o)<0}),Gf=Uo(">",function(r,e,o){return e>o},function(r,e,o,l){return l.compare(e,o)>0}),mh=Uo("<=",function(r,e,o){return e<=o},function(r,e,o,l){return l.compare(e,o)<=0}),qf=Uo(">=",function(r,e,o){return e>=o},function(r,e,o,l){return l.compare(e,o)>=0});class Mc{constructor(e,o,l,h,f){this.type=jt,this.number=e,this.locale=o,this.currency=l,this.minFractionDigits=h,this.maxFractionDigits=f}static parse(e,o){if(e.length!==3)return o.error("Expected two arguments.");const l=o.parse(e[1],1,et);if(!l)return null;const h=e[2];if(typeof h!="object"||Array.isArray(h))return o.error("NumberFormat options argument must be an object.");let f=null;if(h.locale&&(f=o.parse(h.locale,1,jt),!f))return null;let g=null;if(h.currency&&(g=o.parse(h.currency,1,jt),!g))return null;let _=null;if(h["min-fraction-digits"]&&(_=o.parse(h["min-fraction-digits"],1,et),!_))return null;let w=null;return h["max-fraction-digits"]&&(w=o.parse(h["max-fraction-digits"],1,et),!w)?null:new Mc(l,f,g,_,w)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class zc{constructor(e){this.type=et,this.input=e}static parse(e,o){if(e.length!==2)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);const l=o.parse(e[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${zn(l.type)} instead.`):new zc(l):null}evaluate(e){const o=this.input.evaluate(e);if(typeof o=="string"||Array.isArray(o))return o.length;throw new lr(`Expected value to be of type string or array, but found ${zn(Wn(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(o=>{e.push(o.serialize())}),e}}const ki={"==":$f,"!=":fh,">":Gf,"<":ph,">=":qf,"<=":mh,array:ui,at:hh,boolean:ui,case:jo,coalesce:pa,collator:ll,format:qi,image:da,in:dh,"index-of":Ci,interpolate:Dr,"interpolate-hcl":Dr,"interpolate-lab":Dr,length:zc,let:Ic,literal:Fo,match:Ac,number:ui,"number-format":Mc,object:ui,slice:_l,step:fl,string:ui,"to-boolean":Zi,"to-color":Zi,"to-number":Zi,"to-string":Zi,var:vc,within:fa};function gh(r,[e,o,l,h]){e=e.evaluate(r),o=o.evaluate(r),l=l.evaluate(r);const f=h?h.evaluate(r):1,g=kf(e,o,l,f);if(g)throw new lr(g);return new Ht(e/255*f,o/255*f,l/255*f,f)}function yh(r,e){return r in e}function vl(r,e){const o=e[r];return o===void 0?null:o}function Vo(r){return{type:r}}function Zf(r){return{result:"success",value:r}}function lo(r){return{result:"error",value:r}}function Ja(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Wf(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function _h(r){return!!r.expression&&r.expression.interpolated}function Qt(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Oc(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Lc(r){return r}function xl(r,e){const o=e.type==="color",l=r.stops&&typeof r.stops[0][0]=="object",h=l||!(l||r.property!==void 0),f=r.type||(_h(e)?"exponential":"interval");if(o&&((r=Do({},r)).stops&&(r.stops=r.stops.map(T=>[T[0],Ht.parse(T[1])])),r.default=Ht.parse(r.default?r.default:e.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!Uf[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let g,_,w;if(f==="exponential")g=Hf;else if(f==="interval")g=ty;else if(f==="categorical"){g=Dc,_=Object.create(null);for(const T of r.stops)_[T[0]]=T[1];w=typeof r.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);g=ny}if(l){const T={},C=[];for(let L=0;L<r.stops.length;L++){const R=r.stops[L],U=R[0].zoom;T[U]===void 0&&(T[U]={zoom:U,type:r.type,property:r.property,default:r.default,stops:[]},C.push(U)),T[U].stops.push([R[0].value,R[1]])}const k=[];for(const L of C)k.push([T[L].zoom,xl(T[L],e)]);const A={name:"linear"};return{kind:"composite",interpolationType:A,interpolationFactor:Dr.interpolationFactor.bind(void 0,A),zoomStops:k.map(L=>L[0]),evaluate:({zoom:L},R)=>Hf({stops:k,base:r.base},e,L).evaluate(L,R)}}if(h){const T=f==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Dr.interpolationFactor.bind(void 0,T),zoomStops:r.stops.map(C=>C[0]),evaluate:({zoom:C})=>g(r,e,C,_,w)}}return{kind:"source",evaluate(T,C){const k=C&&C.properties?C.properties[r.property]:void 0;return k===void 0?yr(r.default,e.default):g(r,e,k,_,w)}}}function yr(r,e,o){return r!==void 0?r:e!==void 0?e:o!==void 0?o:void 0}function Dc(r,e,o,l,h){return yr(typeof o===h?l[o]:void 0,r.default,e.default)}function ty(r,e,o){if(Qt(o)!=="number")return yr(r.default,e.default);const l=r.stops.length;if(l===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[l-1][0])return r.stops[l-1][1];const h=dl(r.stops.map(f=>f[0]),o);return r.stops[h][1]}function Hf(r,e,o){const l=r.base!==void 0?r.base:1;if(Qt(o)!=="number")return yr(r.default,e.default);const h=r.stops.length;if(h===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[h-1][0])return r.stops[h-1][1];const f=dl(r.stops.map(C=>C[0]),o),g=function(C,k,A,L){const R=L-A,U=C-A;return R===0?0:k===1?U/R:(Math.pow(k,U)-1)/(Math.pow(k,R)-1)}(o,l,r.stops[f][0],r.stops[f+1][0]),_=r.stops[f][1],w=r.stops[f+1][1];let T=wc[e.type]||Lc;if(r.colorSpace&&r.colorSpace!=="rgb"){const C=Uf[r.colorSpace];T=(k,A)=>C.reverse(C.interpolate(C.forward(k),C.forward(A),g))}return typeof _.evaluate=="function"?{evaluate(...C){const k=_.evaluate.apply(void 0,C),A=w.evaluate.apply(void 0,C);if(k!==void 0&&A!==void 0)return T(k,A,g)}}:T(_,w,g)}function ny(r,e,o){return e.type==="color"?o=Ht.parse(o):e.type==="formatted"?o=At.fromString(o.toString()):e.type==="resolvedImage"?o=ci.fromString(o.toString()):Qt(o)===e.type||e.type==="enum"&&e.values[o]||(o=void 0),yr(o,r.default,e.default)}Yr.register(ki,{error:[{kind:"error"},[jt],(r,[e])=>{throw new lr(e.evaluate(r))}],typeof:[jt,[Ot],(r,[e])=>zn(Wn(e.evaluate(r)))],"to-rgba":[li(et,4),[Gi],(r,[e])=>e.evaluate(r).toArray()],rgb:[Gi,[et,et,et],gh],rgba:[Gi,[et,et,et,et],gh],has:{type:zt,overloads:[[[jt],(r,[e])=>yh(e.evaluate(r),r.properties())],[[jt,Wa],(r,[e,o])=>yh(e.evaluate(r),o.evaluate(r))]]},get:{type:Ot,overloads:[[[jt],(r,[e])=>vl(e.evaluate(r),r.properties())],[[jt,Wa],(r,[e,o])=>vl(e.evaluate(r),o.evaluate(r))]]},"feature-state":[Ot,[jt],(r,[e])=>vl(e.evaluate(r),r.featureState||{})],properties:[Wa,[],r=>r.properties()],"geometry-type":[jt,[],r=>r.geometryType()],id:[Ot,[],r=>r.id()],zoom:[et,[],r=>r.globals.zoom],pitch:[et,[],r=>r.globals.pitch||0],"distance-from-center":[et,[],r=>r.distanceFromCenter()],"heatmap-density":[et,[],r=>r.globals.heatmapDensity||0],"line-progress":[et,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[et,[],r=>r.globals.skyRadialProgress||0],accumulated:[Ot,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[et,Vo(et),(r,e)=>{let o=0;for(const l of e)o+=l.evaluate(r);return o}],"*":[et,Vo(et),(r,e)=>{let o=1;for(const l of e)o*=l.evaluate(r);return o}],"-":{type:et,overloads:[[[et,et],(r,[e,o])=>e.evaluate(r)-o.evaluate(r)],[[et],(r,[e])=>-e.evaluate(r)]]},"/":[et,[et,et],(r,[e,o])=>e.evaluate(r)/o.evaluate(r)],"%":[et,[et,et],(r,[e,o])=>e.evaluate(r)%o.evaluate(r)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(r,[e,o])=>Math.pow(e.evaluate(r),o.evaluate(r))],sqrt:[et,[et],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[et,[et],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[et,[et],(r,[e])=>Math.log(e.evaluate(r))],log2:[et,[et],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[et,[et],(r,[e])=>Math.sin(e.evaluate(r))],cos:[et,[et],(r,[e])=>Math.cos(e.evaluate(r))],tan:[et,[et],(r,[e])=>Math.tan(e.evaluate(r))],asin:[et,[et],(r,[e])=>Math.asin(e.evaluate(r))],acos:[et,[et],(r,[e])=>Math.acos(e.evaluate(r))],atan:[et,[et],(r,[e])=>Math.atan(e.evaluate(r))],min:[et,Vo(et),(r,e)=>Math.min(...e.map(o=>o.evaluate(r)))],max:[et,Vo(et),(r,e)=>Math.max(...e.map(o=>o.evaluate(r)))],abs:[et,[et],(r,[e])=>Math.abs(e.evaluate(r))],round:[et,[et],(r,[e])=>{const o=e.evaluate(r);return o<0?-Math.round(-o):Math.round(o)}],floor:[et,[et],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[et,[et],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[zt,[jt,Ot],(r,[e,o])=>r.properties()[e.value]===o.value],"filter-id-==":[zt,[Ot],(r,[e])=>r.id()===e.value],"filter-type-==":[zt,[jt],(r,[e])=>r.geometryType()===e.value],"filter-<":[zt,[jt,Ot],(r,[e,o])=>{const l=r.properties()[e.value],h=o.value;return typeof l==typeof h&&l<h}],"filter-id-<":[zt,[Ot],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o<l}],"filter->":[zt,[jt,Ot],(r,[e,o])=>{const l=r.properties()[e.value],h=o.value;return typeof l==typeof h&&l>h}],"filter-id->":[zt,[Ot],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o>l}],"filter-<=":[zt,[jt,Ot],(r,[e,o])=>{const l=r.properties()[e.value],h=o.value;return typeof l==typeof h&&l<=h}],"filter-id-<=":[zt,[Ot],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o<=l}],"filter->=":[zt,[jt,Ot],(r,[e,o])=>{const l=r.properties()[e.value],h=o.value;return typeof l==typeof h&&l>=h}],"filter-id->=":[zt,[Ot],(r,[e])=>{const o=r.id(),l=e.value;return typeof o==typeof l&&o>=l}],"filter-has":[zt,[Ot],(r,[e])=>e.value in r.properties()],"filter-has-id":[zt,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[zt,[li(jt)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[zt,[li(Ot)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[zt,[jt,li(Ot)],(r,[e,o])=>o.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[zt,[jt,li(Ot)],(r,[e,o])=>function(l,h,f,g){for(;f<=g;){const _=f+g>>1;if(h[_]===l)return!0;h[_]>l?g=_-1:f=_+1}return!1}(r.properties()[e.value],o.value,0,o.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(r,[e,o])=>e.evaluate(r)&&o.evaluate(r)],[Vo(zt),(r,e)=>{for(const o of e)if(!o.evaluate(r))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(r,[e,o])=>e.evaluate(r)||o.evaluate(r)],[Vo(zt),(r,e)=>{for(const o of e)if(o.evaluate(r))return!0;return!1}]]},"!":[zt,[zt],(r,[e])=>!e.evaluate(r)],"is-supported-script":[zt,[jt],(r,[e])=>{const o=r.globals&&r.globals.isSupportedScript;return!o||o(e.evaluate(r))}],upcase:[jt,[jt],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[jt,[jt],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[jt,Vo(Ot),(r,e)=>e.map(o=>sl(o.evaluate(r))).join("")],"resolved-locale":[jt,[ol],(r,[e])=>e.evaluate(r).resolvedLocale()]});class vh{constructor(e,o){this.expression=e,this._warningHistory={},this._evaluator=new Af,this._defaultValue=o?function(l){return l.type==="color"&&Oc(l.default)?new Ht(0,0,0,0):l.type==="color"?Ht.parse(l.default)||null:l.default===void 0?null:l.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(e,o,l,h,f,g,_,w){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=h,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=g,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=w||null,this.expression.evaluate(this._evaluator)}evaluate(e,o,l,h,f,g,_,w){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=h,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=g||null,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new lr(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console!="undefined"&&console.warn(T.message)),this._defaultValue}}}function Qa(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in ki}function bl(r,e){const o=new xc(ki,[],e?function(h){const f={color:Gi,string:jt,number:et,enum:jt,boolean:zt,formatted:Bo,resolvedImage:al};return h.type==="array"?li(f[h.value]||Ot,h.length):f[h.type]}(e):void 0),l=o.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Zf(new vh(l,e)):lo(o.errors)}class wl{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent=e!=="constant"&&!ul(o.expression)}evaluateWithoutErrorHandling(e,o,l,h,f,g){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,h,f,g)}evaluate(e,o,l,h,f,g){return this._styleExpression.evaluate(e,o,l,h,f,g)}}class xh{constructor(e,o,l,h){this.kind=e,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=e!=="camera"&&!ul(o.expression),this.interpolationType=h}evaluateWithoutErrorHandling(e,o,l,h,f,g){return this._styleExpression.evaluateWithoutErrorHandling(e,o,l,h,f,g)}evaluate(e,o,l,h,f,g){return this._styleExpression.evaluate(e,o,l,h,f,g)}interpolationFactor(e,o,l){return this.interpolationType?Dr.interpolationFactor(this.interpolationType,e,o,l):0}}function Xf(r,e){if((r=bl(r,e)).result==="error")return r;const o=r.value.expression,l=Ka(o);if(!l&&!Ja(e))return lo([new $i("","data expressions not supported")]);const h=hl(o,["zoom","pitch","distance-from-center"]);if(!h&&!Wf(e))return lo([new $i("","zoom expressions not supported")]);const f=Rc(o);return f||h?f instanceof $i?lo([f]):f instanceof Dr&&!_h(e)?lo([new $i("",'"interpolate" expressions cannot be used with this property')]):Zf(f?new xh(l?"camera":"composite",r.value,f.labels,f instanceof Dr?f.interpolation:void 0):new wl(l?"constant":"source",r.value)):lo([new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class es{constructor(e,o){this._parameters=e,this._specification=o,Do(this,xl(this._parameters,this._specification))}static deserialize(e){return new es(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Rc(r){let e=null;if(r instanceof Ic)e=Rc(r.result);else if(r instanceof pa){for(const o of r.args)if(e=Rc(o),e)break}else(r instanceof fl||r instanceof Dr)&&r.input instanceof Yr&&r.input.name==="zoom"&&(e=r);return e instanceof $i||r.eachChild(o=>{const l=Rc(o);l instanceof $i?e=l:!e&&l?e=new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&l&&e!==l&&(e=new $i("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function hi(r){const e=r.key,o=r.value,l=r.valueSpec||{},h=r.objectElementValidators||{},f=r.style,g=r.styleSpec;let _=[];const w=Qt(o);if(w!=="object")return[new nt(e,o,`object expected, ${w} found`)];for(const T in o){const C=T.split(".")[0],k=l[C]||l["*"];let A;if(h[C])A=h[C];else if(l[C])A=cr;else if(h["*"])A=h["*"];else{if(!l["*"]){_.push(new nt(e,o[T],`unknown property "${T}"`));continue}A=cr}_=_.concat(A({key:(e&&`${e}.`)+T,value:o[T],valueSpec:k,style:f,styleSpec:g,object:o,objectKey:T},o))}for(const T in l)h[T]||l[T].required&&l[T].default===void 0&&o[T]===void 0&&_.push(new nt(e,o,`missing required property "${T}"`));return _}function bh(r){const e=r.value,o=r.valueSpec,l=r.style,h=r.styleSpec,f=r.key,g=r.arrayElementValidator||cr;if(Qt(e)!=="array")return[new nt(f,e,`array expected, ${Qt(e)} found`)];if(o.length&&e.length!==o.length)return[new nt(f,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new nt(f,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let _={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum};h.$version<7&&(_.function=o.function),Qt(o.value)==="object"&&(_=o.value);let w=[];for(let T=0;T<e.length;T++)w=w.concat(g({array:e,arrayIndex:T,value:e[T],valueSpec:_,style:l,styleSpec:h,key:`${f}[${T}]`}));return w}function Yf(r){const e=r.key,o=r.value,l=r.valueSpec;let h=Qt(o);if(h==="number"&&o!=o&&(h="NaN"),h!=="number")return[new nt(e,o,`number expected, ${h} found`)];if("minimum"in l){let f=l.minimum;if(Qt(l.minimum)==="array"&&(f=l.minimum[r.arrayIndex]),o<f)return[new nt(e,o,`${o} is less than the minimum value ${f}`)]}if("maximum"in l){let f=l.maximum;if(Qt(l.maximum)==="array"&&(f=l.maximum[r.arrayIndex]),o>f)return[new nt(e,o,`${o} is greater than the maximum value ${f}`)]}return[]}function Bc(r){const e=r.valueSpec,o=Un(r.value.type);let l,h,f,g={};const _=o!=="categorical"&&r.value.property===void 0,w=!_,T=Qt(r.value.stops)==="array"&&Qt(r.value.stops[0])==="array"&&Qt(r.value.stops[0][0])==="object",C=hi({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(L){if(o==="identity")return[new nt(L.key,L.value,'identity function may not have a "stops" property')];let R=[];const U=L.value;return R=R.concat(bh({key:L.key,value:U,valueSpec:L.valueSpec,style:L.style,styleSpec:L.styleSpec,arrayElementValidator:k})),Qt(U)==="array"&&U.length===0&&R.push(new nt(L.key,U,"array must have at least one stop")),R},default:function(L){return cr({key:L.key,value:L.value,valueSpec:e,style:L.style,styleSpec:L.styleSpec})}}});return o==="identity"&&_&&C.push(new nt(r.key,r.value,'missing required property "property"')),o==="identity"||r.value.stops||C.push(new nt(r.key,r.value,'missing required property "stops"')),o==="exponential"&&r.valueSpec.expression&&!_h(r.valueSpec)&&C.push(new nt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(w&&!Ja(r.valueSpec)?C.push(new nt(r.key,r.value,"property functions not supported")):_&&!Wf(r.valueSpec)&&C.push(new nt(r.key,r.value,"zoom functions not supported"))),o!=="categorical"&&!T||r.value.property!==void 0||C.push(new nt(r.key,r.value,'"property" property is required')),C;function k(L){let R=[];const U=L.value,G=L.key;if(Qt(U)!=="array")return[new nt(G,U,`array expected, ${Qt(U)} found`)];if(U.length!==2)return[new nt(G,U,`array length 2 expected, length ${U.length} found`)];if(T){if(Qt(U[0])!=="object")return[new nt(G,U,`object expected, ${Qt(U[0])} found`)];if(U[0].zoom===void 0)return[new nt(G,U,"object stop key must have zoom")];if(U[0].value===void 0)return[new nt(G,U,"object stop key must have value")];if(f&&f>Un(U[0].zoom))return[new nt(G,U[0].zoom,"stop zoom values must appear in ascending order")];Un(U[0].zoom)!==f&&(f=Un(U[0].zoom),h=void 0,g={}),R=R.concat(hi({key:`${G}[0]`,value:U[0],valueSpec:{zoom:{}},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{zoom:Yf,value:A}}))}else R=R.concat(A({key:`${G}[0]`,value:U[0],valueSpec:{},style:L.style,styleSpec:L.styleSpec},U));return Qa(so(U[1]))?R.concat([new nt(`${G}[1]`,U[1],"expressions are not allowed in function stops.")]):R.concat(cr({key:`${G}[1]`,value:U[1],valueSpec:e,style:L.style,styleSpec:L.styleSpec}))}function A(L,R){const U=Qt(L.value),G=Un(L.value),te=L.value!==null?L.value:R;if(l){if(U!==l)return[new nt(L.key,te,`${U} stop domain type must match previous stop domain type ${l}`)]}else l=U;if(U!=="number"&&U!=="string"&&U!=="boolean")return[new nt(L.key,te,"stop domain value must be a number, string, or boolean")];if(U!=="number"&&o!=="categorical"){let se=`number expected, ${U} found`;return Ja(e)&&o===void 0&&(se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(L.key,te,se)]}return o!=="categorical"||U!=="number"||isFinite(G)&&Math.floor(G)===G?o!=="categorical"&&U==="number"&&h!==void 0&&G<h?[new nt(L.key,te,"stop domain values must appear in ascending order")]:(h=G,o==="categorical"&&G in g?[new nt(L.key,te,"stop domain values must be unique")]:(g[G]=!0,[])):[new nt(L.key,te,`integer expected, found ${G}`)]}}function co(r){const e=(r.expressionContext==="property"?Xf:bl)(so(r.value),r.valueSpec);if(e.result==="error")return e.value.map(l=>new nt(`${r.key}${l.key}`,r.value,l.message));const o=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!o.outputDefined())return[new nt(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ul(o))return[new nt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter")return wh(o,r);if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!hl(o,["zoom","feature-state"]))return[new nt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Ka(o))return[new nt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wh(r,e){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);for(const h of e.valueSpec.expression.parameters)o.delete(h);if(o.size===0)return[];const l=[];return r instanceof Yr&&o.has(r.name)?[new nt(e.key,e.value,`["${r.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(r.eachChild(h=>{l.push(...wh(h,e))}),l)}function Fc(r){const e=r.key,o=r.value,l=r.valueSpec,h=[];return Array.isArray(l.values)?l.values.indexOf(Un(o))===-1&&h.push(new nt(e,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(l.values).indexOf(Un(o))===-1&&h.push(new nt(e,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),h}function Nc(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!Nc(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function jc(r,e="fill"){if(r==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Nc(r)||(r=Vc(r));const o=r;let l=!0;try{l=function(T){if(!ts(T))return T;let C=so(T);return Kf(C),C=Uc(C),C}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const h=ke[`filter_${e}`],f=bl(l,h);let g=null;if(f.result==="error")throw new Error(f.value.map(T=>`${T.key}: ${T.message}`).join(", "));g=(T,C,k)=>f.value.evaluate(T,C,{},k);let _=null,w=null;if(l!==o){const T=bl(o,h);if(T.result==="error")throw new Error(T.value.map(C=>`${C.key}: ${C.message}`).join(", "));_=(C,k,A,L,R)=>T.value.evaluate(C,k,{},A,void 0,void 0,L,R),w=!Ka(T.value.expression)}return g=g,{filter:g,dynamicFilter:_||void 0,needGeometry:Sh(l),needFeature:!!w}}function Uc(r){if(!Array.isArray(r))return r;const e=function(o){if(ry.has(o[0])){for(let l=1;l<o.length;l++)if(ts(o[l]))return!0}return o}(r);return e===!0?e:e.map(o=>Uc(o))}function Kf(r){let e=!1;const o=[];if(r[0]==="case"){for(let l=1;l<r.length-1;l+=2)e=e||ts(r[l]),o.push(r[l+1]);o.push(r[r.length-1])}else if(r[0]==="match"){e=e||ts(r[1]);for(let l=2;l<r.length-1;l+=2)o.push(r[l+1]);o.push(r[r.length-1])}else if(r[0]==="step"){e=e||ts(r[1]);for(let l=1;l<r.length-1;l+=2)o.push(r[l+1])}e&&(r.length=0,r.push("any",...o));for(let l=1;l<r.length;l++)Kf(r[l])}function ts(r){if(!Array.isArray(r))return!1;if((e=r[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let o=1;o<r.length;o++)if(ts(r[o]))return!0;return!1}const ry=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function iy(r,e){return r<e?-1:r>e?1:0}function Sh(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let e=1;e<r.length;e++)if(Sh(r[e]))return!0;return!1}function Vc(r){if(!r)return!0;const e=r[0];return r.length<=1?e!=="any":e==="=="?Th(r[1],r[2],"=="):e==="!="?$c(Th(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Th(r[1],r[2],e):e==="any"?(o=r.slice(1),["any"].concat(o.map(Vc))):e==="all"?["all"].concat(r.slice(1).map(Vc)):e==="none"?["all"].concat(r.slice(1).map(Vc).map($c)):e==="in"?Jf(r[1],r.slice(2)):e==="!in"?$c(Jf(r[1],r.slice(2))):e==="has"?Qf(r[1]):e==="!has"?$c(Qf(r[1])):e!=="within"||r;var o}function Th(r,e,o){switch(r){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,r,e]}}function Jf(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",r,["literal",e.sort(iy)]]:["filter-in-small",r,["literal",e]]}}function Qf(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function $c(r){return["!",r]}function Eh(r){if(Nc(so(r.value))){const e=so(r.layerType);return co(Do({},r,{expressionContext:"filter",valueSpec:r.styleSpec[`filter_${e||"fill"}`]}))}return ep(r)}function ep(r){const e=r.value,o=r.key;if(Qt(e)!=="array")return[new nt(o,e,`array expected, ${Qt(e)} found`)];const l=r.styleSpec;let h,f=[];if(e.length<1)return[new nt(o,e,"filter array must have at least 1 element")];switch(f=f.concat(Fc({key:`${o}[0]`,value:e[0],valueSpec:l.filter_operator,style:r.style,styleSpec:r.styleSpec})),Un(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Un(e[1])==="$type"&&f.push(new nt(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&f.push(new nt(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(h=Qt(e[1]),h!=="string"&&f.push(new nt(`${o}[1]`,e[1],`string expected, ${h} found`)));for(let g=2;g<e.length;g++)h=Qt(e[g]),Un(e[1])==="$type"?f=f.concat(Fc({key:`${o}[${g}]`,value:e[g],valueSpec:l.geometry_type,style:r.style,styleSpec:r.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&f.push(new nt(`${o}[${g}]`,e[g],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let g=1;g<e.length;g++)f=f.concat(ep({key:`${o}[${g}]`,value:e[g],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":h=Qt(e[1]),e.length!==2?f.push(new nt(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):h!=="string"&&f.push(new nt(`${o}[1]`,e[1],`string expected, ${h} found`));break;case"within":h=Qt(e[1]),e.length!==2?f.push(new nt(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):h!=="object"&&f.push(new nt(`${o}[1]`,e[1],`object expected, ${h} found`))}return f}function Sl(r,e){const o=r.key,l=r.style,h=r.styleSpec,f=r.value,g=r.objectKey,_=h[`${e}_${r.layerType}`];if(!_)return[];const w=g.match(/^(.*)-transition$/);if(e==="paint"&&w&&_[w[1]]&&_[w[1]].transition)return cr({key:o,value:f,valueSpec:h.transition,style:l,styleSpec:h});const T=r.valueSpec||_[g];if(!T)return[new nt(o,f,`unknown property "${g}"`)];let C;if(Qt(f)==="string"&&Ja(T)&&!T.tokens&&(C=/^{([^}]+)}$/.exec(f)))return[new nt(o,f,`"${g}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(C[1])} }\`.`)];const k=[];return r.layerType==="symbol"&&(g==="text-field"&&l&&!l.glyphs&&k.push(new nt(o,f,'use of "text-field" requires a style "glyphs" property')),g==="text-font"&&Oc(so(f))&&Un(f.type)==="identity"&&k.push(new nt(o,f,'"text-font" does not support identity functions'))),k.concat(cr({key:r.key,value:f,valueSpec:T,style:l,styleSpec:h,expressionContext:"property",propertyType:e,propertyKey:g}))}function tp(r){return Sl(r,"paint")}function np(r){return Sl(r,"layout")}function Tl(r){let e=[];const o=r.value,l=r.key,h=r.style,f=r.styleSpec;o.type||o.ref||e.push(new nt(l,o,'either "type" or "ref" is required'));let g=Un(o.type);const _=Un(o.ref);if(o.id){const w=Un(o.id);for(let T=0;T<r.arrayIndex;T++){const C=h.layers[T];Un(C.id)===w&&e.push(new nt(l,o.id,`duplicate layer id "${o.id}", previously used at line ${C.id.__line__}`))}}if("ref"in o){let w;["type","source","source-layer","filter","layout"].forEach(T=>{T in o&&e.push(new nt(l,o[T],`"${T}" is prohibited for ref layers`))}),h.layers.forEach(T=>{Un(T.id)===_&&(w=T)}),w?w.ref?e.push(new nt(l,o.ref,"ref cannot reference another ref layer")):g=Un(w.type):e.push(new nt(l,o.ref,`ref layer "${_}" not found`))}else if(g!=="background"&&g!=="sky")if(o.source){const w=h.sources&&h.sources[o.source],T=w&&Un(w.type);w?T==="vector"&&g==="raster"?e.push(new nt(l,o.source,`layer "${o.id}" requires a raster source`)):T==="raster"&&g!=="raster"?e.push(new nt(l,o.source,`layer "${o.id}" requires a vector source`)):T!=="vector"||o["source-layer"]?T==="raster-dem"&&g!=="hillshade"?e.push(new nt(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):g!=="line"||!o.paint||!o.paint["line-gradient"]||T==="geojson"&&w.lineMetrics||e.push(new nt(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new nt(l,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new nt(l,o.source,`source "${o.source}" not found`))}else e.push(new nt(l,o,'missing required property "source"'));return e=e.concat(hi({key:l,value:o,valueSpec:f.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>cr({key:`${l}.type`,value:o.type,valueSpec:f.layer.type,style:r.style,styleSpec:r.styleSpec,object:o,objectKey:"type"}),filter:w=>Eh(Do({layerType:g},w)),layout:w=>hi({layer:o,key:w.key,value:w.value,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":T=>np(Do({layerType:g},T))}}),paint:w=>hi({layer:o,key:w.key,value:w.value,style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":T=>tp(Do({layerType:g},T))}})}})),e}function ns(r){const e=r.value,o=r.key,l=Qt(e);return l!=="string"?[new nt(o,e,`string expected, ${l} found`)]:[]}const Ch={promoteId:function({key:r,value:e}){if(Qt(e)==="string")return ns({key:r,value:e});{const o=[];for(const l in e)o.push(...ns({key:`${r}.${l}`,value:e[l]}));return o}}};function rp(r){const e=r.value,o=r.key,l=r.styleSpec,h=r.style;if(!e.type)return[new nt(o,e,'"type" is required')];const f=Un(e.type);let g;switch(f){case"vector":case"raster":case"raster-dem":return g=hi({key:o,value:e,valueSpec:l[`source_${f.replace("-","_")}`],style:r.style,styleSpec:l,objectElementValidators:Ch}),g;case"geojson":if(g=hi({key:o,value:e,valueSpec:l.source_geojson,style:h,styleSpec:l,objectElementValidators:Ch}),e.cluster)for(const _ in e.clusterProperties){const[w,T]=e.clusterProperties[_],C=typeof w=="string"?[w,["accumulated"],["get",_]]:w;g.push(...co({key:`${o}.${_}.map`,value:T,expressionContext:"cluster-map"})),g.push(...co({key:`${o}.${_}.reduce`,value:C,expressionContext:"cluster-reduce"}))}return g;case"video":return hi({key:o,value:e,valueSpec:l.source_video,style:h,styleSpec:l});case"image":return hi({key:o,value:e,valueSpec:l.source_image,style:h,styleSpec:l});case"canvas":return[new nt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fc({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:l})}}function kh(r){const e=r.value,o=r.styleSpec,l=o.light,h=r.style;let f=[];const g=Qt(e);if(e===void 0)return f;if(g!=="object")return f=f.concat([new nt("light",e,`object expected, ${g} found`)]),f;for(const _ in e){const w=_.match(/^(.*)-transition$/);f=f.concat(w&&l[w[1]]&&l[w[1]].transition?cr({key:_,value:e[_],valueSpec:o.transition,style:h,styleSpec:o}):l[_]?cr({key:_,value:e[_],valueSpec:l[_],style:h,styleSpec:o}):[new nt(_,e[_],`unknown property "${_}"`)])}return f}function Ih(r){const e=r.value,o=r.key,l=r.style,h=r.styleSpec,f=h.terrain;let g=[];const _=Qt(e);if(e===void 0)return g;if(_!=="object")return g=g.concat([new nt("terrain",e,`object expected, ${_} found`)]),g;for(const w in e){const T=w.match(/^(.*)-transition$/);g=g.concat(T&&f[T[1]]&&f[T[1]].transition?cr({key:w,value:e[w],valueSpec:h.transition,style:l,styleSpec:h}):f[w]?cr({key:w,value:e[w],valueSpec:f[w],style:l,styleSpec:h}):[new nt(w,e[w],`unknown property "${w}"`)])}if(e.source){const w=l.sources&&l.sources[e.source],T=w&&Un(w.type);w?T!=="raster-dem"&&g.push(new nt(o,e.source,`terrain cannot be used with a source of type ${T}, it only be used with a "raster-dem" source type`)):g.push(new nt(o,e.source,`source "${e.source}" not found`))}else g.push(new nt(o,e,'terrain is missing required property "source"'));return g}function Ah(r){const e=r.value,o=r.style,l=r.styleSpec,h=l.fog;let f=[];const g=Qt(e);if(e===void 0)return f;if(g!=="object")return f=f.concat([new nt("fog",e,`object expected, ${g} found`)]),f;for(const _ in e){const w=_.match(/^(.*)-transition$/);f=f.concat(w&&h[w[1]]&&h[w[1]].transition?cr({key:_,value:e[_],valueSpec:l.transition,style:o,styleSpec:l}):h[_]?cr({key:_,value:e[_],valueSpec:h[_],style:o,styleSpec:l}):[new nt(_,e[_],`unknown property "${_}"`)])}return f}const Ph={"*":()=>[],array:bh,boolean:function(r){const e=r.value,o=r.key,l=Qt(e);return l!=="boolean"?[new nt(o,e,`boolean expected, ${l} found`)]:[]},number:Yf,color:function(r){const e=r.key,o=r.value,l=Qt(o);return l!=="string"?[new nt(e,o,`color expected, ${l} found`)]:Ya.parseCSSColor(o)===null?[new nt(e,o,`color expected, "${o}" found`)]:[]},constants:Cf,enum:Fc,filter:Eh,function:Bc,layer:Tl,object:hi,source:rp,light:kh,terrain:Ih,fog:Ah,string:ns,formatted:function(r){return ns(r).length===0?[]:co(r)},resolvedImage:function(r){return ns(r).length===0?[]:co(r)},projection:function(r){const e=r.value,o=r.styleSpec,l=o.projection,h=r.style;let f=[];const g=Qt(e);if(g==="object")for(const _ in e)f=f.concat(cr({key:_,value:e[_],valueSpec:l[_],style:h,styleSpec:o}));else g!=="string"&&(f=f.concat([new nt("projection",e,`object or string expected, ${g} found`)]));return f}};function cr(r){const e=r.value,o=r.valueSpec,l=r.styleSpec;return o.expression&&Oc(Un(e))?Bc(r):o.expression&&Qa(so(e))?co(r):o.type&&Ph[o.type]?Ph[o.type](r):hi(Do({},r,{valueSpec:o.type?l[o.type]:o}))}function Mh(r){const e=r.value,o=r.key,l=ns(r);return l.length||(e.indexOf("{fontstack}")===-1&&l.push(new nt(o,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&l.push(new nt(o,e,'"glyphs" url must include a "{range}" token'))),l}function uo(r,e=ke){let o=[];return o=o.concat(cr({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,objectElementValidators:{glyphs:Mh,"*":()=>[]}})),r.constants&&(o=o.concat(Cf({key:"constants",value:r.constants,style:r,styleSpec:e}))),ip(o)}function ip(r){return[].concat(r).sort((e,o)=>e.line-o.line)}function Ii(r){return function(...e){return ip(r.apply(this,e))}}uo.source=Ii(rp),uo.light=Ii(kh),uo.terrain=Ii(Ih),uo.fog=Ii(Ah),uo.layer=Ii(Tl),uo.filter=Ii(Eh),uo.paintProperty=Ii(tp),uo.layoutProperty=Ii(np);const rs=uo,is=rs.light,oy=rs.fog,zh=rs.paintProperty,ay=rs.layoutProperty;function op(r,e){let o=!1;if(e&&e.length)for(const l of e)r.fire(new dc(new Error(l.message))),o=!0;return o}var El=Cr;function Cr(r,e,o){var l=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var h=new Int32Array(this.arrayBuffer);r=h[0],this.d=(e=h[1])+2*(o=h[2]);for(var f=0;f<this.d*this.d;f++){var g=h[3+f],_=h[3+f+1];l.push(g===_?null:h.subarray(g,_))}var w=h[3+l.length+1];this.keys=h.subarray(h[3+l.length],w),this.bboxes=h.subarray(w),this.insert=this._insertReadonly}else{this.d=e+2*o;for(var T=0;T<this.d*this.d;T++)l.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=r,this.padding=o,this.scale=e/r,this.uid=0;var C=o/e*r;this.min=-C,this.max=r+C}Cr.prototype.insert=function(r,e,o,l,h){this._forEachCell(e,o,l,h,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(e),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(h)},Cr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Cr.prototype._insertCell=function(r,e,o,l,h,f){this.cells[h].push(f)},Cr.prototype.query=function(r,e,o,l,h){var f=this.min,g=this.max;if(r<=f&&e<=f&&g<=o&&g<=l&&!h)return Array.prototype.slice.call(this.keys);var _=[];return this._forEachCell(r,e,o,l,this._queryCell,_,{},h),_},Cr.prototype._queryCell=function(r,e,o,l,h,f,g,_){var w=this.cells[h];if(w!==null)for(var T=this.keys,C=this.bboxes,k=0;k<w.length;k++){var A=w[k];if(g[A]===void 0){var L=4*A;(_?_(C[L+0],C[L+1],C[L+2],C[L+3]):r<=C[L+2]&&e<=C[L+3]&&o>=C[L+0]&&l>=C[L+1])?(g[A]=!0,f.push(T[A])):g[A]=!1}}},Cr.prototype._forEachCell=function(r,e,o,l,h,f,g,_){for(var w=this._convertToCellCoord(r),T=this._convertToCellCoord(e),C=this._convertToCellCoord(o),k=this._convertToCellCoord(l),A=w;A<=C;A++)for(var L=T;L<=k;L++){var R=this.d*L+A;if((!_||_(this._convertFromCellCoord(A),this._convertFromCellCoord(L),this._convertFromCellCoord(A+1),this._convertFromCellCoord(L+1)))&&h.call(this,r,e,o,l,R,f,g,_))return}},Cr.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Cr.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Cr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,e=3+this.cells.length+1+1,o=0,l=0;l<this.cells.length;l++)o+=this.cells[l].length;var h=new Int32Array(e+o+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var f=e,g=0;g<r.length;g++){var _=r[g];h[3+g]=f,h.set(_,f),f+=_.length}return h[3+r.length]=f,h.set(this.keys,f),h[3+r.length+1]=f+=this.keys.length,h.set(this.bboxes,f),f+=this.bboxes.length,h.buffer};const{ImageData:Cl,ImageBitmap:os}=H,kl={};function ot(r,e,o={}){Object.defineProperty(e,"_classRegistryKey",{value:r,writeable:!1}),kl[r]={klass:e,omit:o.omit||[],shallow:o.shallow||[]}}ot("Object",Object),El.serialize=function(r,e){const o=r.toArrayBuffer();return e&&e.push(o),{buffer:o}},El.deserialize=function(r){return new El(r.buffer)},ot("Grid",El),ot("Color",Ht),ot("Error",Error),ot("ResolvedImage",ci),ot("StylePropertyFunction",es),ot("StyleExpression",vh,{omit:["_evaluator"]}),ot("ZoomDependentExpression",xh),ot("ZoomConstantExpression",wl),ot("CompoundExpression",Yr,{omit:["_evaluate"]});for(const r in ki)ki[r]._classRegistryKey||ot(`Expression_${r}`,ki[r]);function as(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function ap(r){return os&&r instanceof os}function Il(r,e){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(as(r)||ap(r))return e&&e.push(r),r;if(ArrayBuffer.isView(r)){const o=r;return e&&e.push(o.buffer),o}if(r instanceof Cl)return e&&e.push(r.data.buffer),r;if(Array.isArray(r)){const o=[];for(const l of r)o.push(Il(l,e));return o}if(typeof r=="object"){const o=r.constructor,l=o._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");const h=o.serialize?o.serialize(r,e):{};if(!o.serialize){for(const f in r){if(!r.hasOwnProperty(f)||kl[l].omit.indexOf(f)>=0)continue;const g=r[f];h[f]=kl[l].shallow.indexOf(f)>=0?g:Il(g,e)}r instanceof Error&&(h.message=r.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(h.$name=l),h}throw new Error("can't serialize object of type "+typeof r)}function $o(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||as(r)||ap(r)||ArrayBuffer.isView(r)||r instanceof Cl)return r;if(Array.isArray(r))return r.map($o);if(typeof r=="object"){const e=r.$name||"Object",{klass:o}=kl[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(r);const l=Object.create(o.prototype);for(const h of Object.keys(r)){if(h==="$name")continue;const f=r[h];l[h]=kl[e].shallow.indexOf(h)>=0?f:$o(f)}return l}throw new Error("can't deserialize object of type "+typeof r)}class p{constructor(){this.first=!0}update(e,o){const l=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=l,!0))}}const i=r=>r>=1536&&r<=1791,c=r=>r>=1872&&r<=1919,m=r=>r>=2208&&r<=2303,y=r=>r>=11904&&r<=12031,x=r=>r>=12032&&r<=12255,S=r=>r>=12272&&r<=12287,E=r=>r>=12288&&r<=12351,P=r=>r>=12352&&r<=12447,M=r=>r>=12448&&r<=12543,z=r=>r>=12544&&r<=12591,D=r=>r>=12704&&r<=12735,N=r=>r>=12736&&r<=12783,Z=r=>r>=12784&&r<=12799,$=r=>r>=12800&&r<=13055,X=r=>r>=13056&&r<=13311,le=r=>r>=13312&&r<=19903,q=r=>r>=19968&&r<=40959,oe=r=>r>=40960&&r<=42127,ae=r=>r>=42128&&r<=42191,re=r=>r>=44032&&r<=55215,ie=r=>r>=63744&&r<=64255,ce=r=>r>=64336&&r<=65023,we=r=>r>=65040&&r<=65055,Ce=r=>r>=65072&&r<=65103,Ye=r=>r>=65104&&r<=65135,Ge=r=>r>=65136&&r<=65279,Ue=r=>r>=65280&&r<=65519;function Ie(r){for(const e of r)if(De(e.charCodeAt(0)))return!0;return!1}function Te(r){for(const e of r)if(!je(e.charCodeAt(0)))return!1;return!0}function je(r){return!(i(r)||c(r)||m(r)||ce(r)||Ge(r))}function De(r){return!(r!==746&&r!==747&&(r<4352||!(D(r)||z(r)||Ce(r)&&!(r>=65097&&r<=65103)||ie(r)||X(r)||y(r)||N(r)||!(!E(r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||le(r)||q(r)||$(r)||(e=>e>=12592&&e<=12687)(r)||(e=>e>=43360&&e<=43391)(r)||(e=>e>=55216&&e<=55295)(r)||(e=>e>=4352&&e<=4607)(r)||re(r)||P(r)||S(r)||(e=>e>=12688&&e<=12703)(r)||x(r)||Z(r)||M(r)&&r!==12540||!(!Ue(r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!Ye(r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||(e=>e>=5120&&e<=5759)(r)||(e=>e>=6320&&e<=6399)(r)||we(r)||(e=>e>=19904&&e<=19967)(r)||oe(r)||ae(r))))}function dt(r){return!(De(r)||function(e){return!!((o=>o>=128&&o<=255)(e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||(o=>o>=8192&&o<=8303)(e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||(o=>o>=8448&&o<=8527)(e)||(o=>o>=8528&&o<=8591)(e)||(o=>o>=8960&&o<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||(o=>o>=9216&&o<=9279)(e)&&e!==9251||(o=>o>=9280&&o<=9311)(e)||(o=>o>=9312&&o<=9471)(e)||(o=>o>=9632&&o<=9727)(e)||(o=>o>=9728&&o<=9983)(e)&&!(e>=9754&&e<=9759)||(o=>o>=11008&&o<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||E(e)||M(e)||(o=>o>=57344&&o<=63743)(e)||Ce(e)||Ye(e)||Ue(e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(r))}function xt(r){return r>=1424&&r<=2303||ce(r)||Ge(r)}function Mt(r,e){return!(!e&&xt(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||(o=>o>=6016&&o<=6143)(r))}function Xe(r){for(const e of r)if(xt(e.charCodeAt(0)))return!0;return!1}const gt="deferred",Et="loading",on="loaded";let fn=null,wt="unavailable",Bt=null;const Tn=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(wt="error"),fn&&fn(r)};function er(){Rr.fire(new Oo("pluginStateChange",{pluginStatus:wt,pluginURL:Bt}))}const Rr=new Lo,di=function(){return wt},Ai=function(){if(wt!==gt||!Bt)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");wt=Et,er(),Bt&&rl({url:Bt},r=>{r?Tn(r):(wt=on,er())})},Gt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>wt===on||Gt.applyArabicShaping!=null,isLoading:()=>wt===Et,setState(r){wt=r.pluginStatus,Bt=r.pluginURL},isParsed:()=>Gt.applyArabicShaping!=null&&Gt.processBidirectionalText!=null&&Gt.processStyledBidirectionalText!=null,getPluginURL:()=>Bt};class Ct{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new p,this.transition={},this.pitch=0)}isSupportedScript(e){return function(o,l){for(const h of o)if(!Mt(h.charCodeAt(0),l))return!1;return!0}(e,Gt.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,o=e-Math.floor(e),l=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class Ut{constructor(e,o){this.property=e,this.value=o,this.expression=function(l,h){if(Oc(l))return new es(l,h);if(Qa(l)){const f=Xf(l,h);if(f.result==="error")throw new Error(f.value.map(g=>`${g.key}: ${g.message}`).join(", "));return f.value}{let f=l;return typeof l=="string"&&h.type==="color"&&(f=Ht.parse(l)),{kind:"constant",evaluate:()=>f}}}(o===void 0?e.specification.default:o,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,o,l){return this.property.possiblyEvaluate(this,e,o,l)}}class Rn{constructor(e){this.property=e,this.value=new Ut(e,void 0)}transitioned(e,o){return new vn(this.property,this.value,o,Dn({},e.transition,this.transition),e.now)}untransitioned(){return new vn(this.property,this.value,null,{},0)}}class Kr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return ai(this._values[e].value.value)}setValue(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new Rn(this._values[e].property)),this._values[e].value=new Ut(this._values[e].property,o===null?void 0:ai(o))}getTransition(e){return ai(this._values[e].transition)}setTransition(e,o){this._values.hasOwnProperty(e)||(this._values[e]=new Rn(this._values[e].property)),this._values[e].transition=ai(o)||void 0}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(e[o]=l);const h=this.getTransition(o);h!==void 0&&(e[`${o}-transition`]=h)}return e}transitioned(e,o){const l=new Jr(this._properties);for(const h of Object.keys(this._values))l._values[h]=this._values[h].transitioned(e,o._values[h]);return l}untransitioned(){const e=new Jr(this._properties);for(const o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class vn{constructor(e,o,l,h,f){const g=h.delay||0,_=h.duration||0;f=f||0,this.property=e,this.value=o,this.begin=f+g,this.end=this.begin+_,e.specification.transition&&(h.delay||h.duration)&&(this.prior=l)}possiblyEvaluate(e,o,l){const h=e.now||0,f=this.value.possiblyEvaluate(e,o,l),g=this.prior;if(g){if(h>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(h<this.begin)return g.possiblyEvaluate(e,o,l);{const _=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(e,o,l),f,Xs(_))}}return f}}class Jr{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,l){const h=new ma(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].possiblyEvaluate(e,o,l);return h}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Al{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return ai(this._values[e].value)}setValue(e,o){this._values[e]=new Ut(this._values[e].property,o===null?void 0:ai(o))}serialize(){const e={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(e[o]=l)}return e}possiblyEvaluate(e,o,l){const h=new ma(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].possiblyEvaluate(e,o,l);return h}}class Br{constructor(e,o,l){this.property=e,this.value=o,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,o,l,h){return this.property.evaluate(this.value,this.parameters,e,o,l,h)}}class ma{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class st{constructor(e){this.specification=e}possiblyEvaluate(e,o){return e.expression.evaluate(o)}interpolate(e,o,l){const h=wc[this.specification.type];return h?h(e,o,l):e}}class yt{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,l,h){return new Br(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(o,null,{},l,h)}:e.expression,o)}interpolate(e,o,l){if(e.value.kind!=="constant"||o.value.kind!=="constant")return e;if(e.value.value===void 0||o.value.value===void 0)return new Br(this,{kind:"constant",value:void 0},e.parameters);const h=wc[this.specification.type];return h?new Br(this,{kind:"constant",value:h(e.value.value,o.value.value,l)},e.parameters):e}evaluate(e,o,l,h,f,g){return e.kind==="constant"?e.value:e.evaluate(o,l,h,f,g)}}class ur extends yt{possiblyEvaluate(e,o,l,h){if(e.value===void 0)return new Br(this,{kind:"constant",value:void 0},o);if(e.expression.kind==="constant"){const f=e.expression.evaluate(o,null,{},l,h),g=e.property.specification.type==="resolvedImage"&&typeof f!="string"?f.name:f,_=this._calculate(g,g,g,o);return new Br(this,{kind:"constant",value:_},o)}if(e.expression.kind==="camera"){const f=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new Br(this,{kind:"constant",value:f},o)}return new Br(this,e.expression,o)}evaluate(e,o,l,h,f,g){if(e.kind==="source"){const _=e.evaluate(o,l,h,f,g);return this._calculate(_,_,_,o)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},l,h),e.evaluate({zoom:Math.floor(o.zoom)},l,h),e.evaluate({zoom:Math.floor(o.zoom)+1},l,h),o):e.value}_calculate(e,o,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:o,other:l}:{from:l,to:o,other:e}}interpolate(e){return e}}class ga{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,h){if(e.value!==void 0){if(e.expression.kind==="constant"){const f=e.expression.evaluate(o,null,{},l,h);return this._calculate(f,f,f,o)}return this._calculate(e.expression.evaluate(new Ct(Math.floor(o.zoom-1),o)),e.expression.evaluate(new Ct(Math.floor(o.zoom),o)),e.expression.evaluate(new Ct(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,l,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:l,to:o}}interpolate(e){return e}}class Go{constructor(e){this.specification=e}possiblyEvaluate(e,o,l,h){return!!e.expression.evaluate(o,null,{},l,h)}interpolate(){return!1}}class _r{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in e){const l=e[o];l.specification.overridable&&this.overridableProperties.push(o);const h=this.defaultPropertyValues[o]=new Ut(l,void 0),f=this.defaultTransitionablePropertyValues[o]=new Rn(l);this.defaultTransitioningPropertyValues[o]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=h.possiblyEvaluate({})}}}function ex(r,e){return 256*(r=sn(Math.floor(r),0,255))+sn(Math.floor(e),0,255)}ot("DataDrivenProperty",yt),ot("DataConstantProperty",st),ot("CrossFadedDataDrivenProperty",ur),ot("CrossFadedProperty",ga),ot("ColorRampProperty",Go);const Nk={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Oh{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Hn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function On(r,e=1){let o=0,l=0;return{members:r.map(h=>{const f=Nk[h.type].BYTES_PER_ELEMENT,g=o=tx(o,Math.max(e,f)),_=h.components||1;return l=Math.max(l,f),o+=f*_,{name:h.name,type:h.type,components:_,offset:g}}),size:tx(o,Math.max(l,e)),alignment:e}}function tx(r,e){return Math.ceil(r/e)*e}class Gc extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const h=2*e;return this.int16[h+0]=o,this.int16[h+1]=l,e}}Gc.prototype.bytesPerElement=4,ot("StructArrayLayout2i4",Gc);class qc extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,h)}emplace(e,o,l,h,f){const g=4*e;return this.int16[g+0]=o,this.int16[g+1]=l,this.int16[g+2]=h,this.int16[g+3]=f,e}}qc.prototype.bytesPerElement=8,ot("StructArrayLayout4i8",qc);class sy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,h,f,g,_)}emplace(e,o,l,h,f,g,_,w){const T=6*e,C=12*e,k=3*e;return this.int16[T+0]=o,this.int16[T+1]=l,this.uint8[C+4]=h,this.uint8[C+5]=f,this.uint8[C+6]=g,this.uint8[C+7]=_,this.float32[k+2]=w,e}}sy.prototype.bytesPerElement=12,ot("StructArrayLayout2i4ub1f12",sy);class Zc extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l){const h=this.length;return this.resize(h+1),this.emplace(h,e,o,l)}emplace(e,o,l,h){const f=3*e;return this.float32[f+0]=o,this.float32[f+1]=l,this.float32[f+2]=h,e}}Zc.prototype.bytesPerElement=12,ot("StructArrayLayout3f12",Zc);class ss extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_,w,T,C){const k=this.length;return this.resize(k+1),this.emplace(k,e,o,l,h,f,g,_,w,T,C)}emplace(e,o,l,h,f,g,_,w,T,C,k){const A=10*e;return this.uint16[A+0]=o,this.uint16[A+1]=l,this.uint16[A+2]=h,this.uint16[A+3]=f,this.uint16[A+4]=g,this.uint16[A+5]=_,this.uint16[A+6]=w,this.uint16[A+7]=T,this.uint16[A+8]=C,this.uint16[A+9]=k,e}}ss.prototype.bytesPerElement=20,ot("StructArrayLayout10ui20",ss);class sp extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_,w){const T=this.length;return this.resize(T+1),this.emplace(T,e,o,l,h,f,g,_,w)}emplace(e,o,l,h,f,g,_,w,T){const C=8*e;return this.uint16[C+0]=o,this.uint16[C+1]=l,this.uint16[C+2]=h,this.uint16[C+3]=f,this.uint16[C+4]=g,this.uint16[C+5]=_,this.uint16[C+6]=w,this.uint16[C+7]=T,e}}sp.prototype.bytesPerElement=16,ot("StructArrayLayout8ui16",sp);class ly extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G){const te=this.length;return this.resize(te+1),this.emplace(te,e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G)}emplace(e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G,te){const se=16*e;return this.int16[se+0]=o,this.int16[se+1]=l,this.int16[se+2]=h,this.int16[se+3]=f,this.uint16[se+4]=g,this.uint16[se+5]=_,this.uint16[se+6]=w,this.uint16[se+7]=T,this.int16[se+8]=C,this.int16[se+9]=k,this.int16[se+10]=A,this.int16[se+11]=L,this.int16[se+12]=R,this.int16[se+13]=U,this.int16[se+14]=G,this.int16[se+15]=te,e}}ly.prototype.bytesPerElement=32,ot("StructArrayLayout4i4ui4i4i32",ly);class cy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}cy.prototype.bytesPerElement=4,ot("StructArrayLayout1ul4",cy);class uy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_,w,T,C,k,A,L){const R=this.length;return this.resize(R+1),this.emplace(R,e,o,l,h,f,g,_,w,T,C,k,A,L)}emplace(e,o,l,h,f,g,_,w,T,C,k,A,L,R){const U=20*e,G=10*e;return this.int16[U+0]=o,this.int16[U+1]=l,this.int16[U+2]=h,this.int16[U+3]=f,this.int16[U+4]=g,this.float32[G+3]=_,this.float32[G+4]=w,this.float32[G+5]=T,this.float32[G+6]=C,this.int16[U+14]=k,this.uint32[G+8]=A,this.uint16[U+18]=L,this.uint16[U+19]=R,e}}uy.prototype.bytesPerElement=40,ot("StructArrayLayout5i4f1i1ul2ui40",uy);class lp extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,h,f,g,_)}emplace(e,o,l,h,f,g,_,w){const T=8*e;return this.int16[T+0]=o,this.int16[T+1]=l,this.int16[T+2]=h,this.int16[T+4]=f,this.int16[T+5]=g,this.int16[T+6]=_,this.int16[T+7]=w,e}}lp.prototype.bytesPerElement=16,ot("StructArrayLayout3i2i2i16",lp);class hy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f){const g=this.length;return this.resize(g+1),this.emplace(g,e,o,l,h,f)}emplace(e,o,l,h,f,g){const _=4*e,w=8*e;return this.float32[_+0]=o,this.float32[_+1]=l,this.float32[_+2]=h,this.int16[w+6]=f,this.int16[w+7]=g,e}}hy.prototype.bytesPerElement=16,ot("StructArrayLayout2f1f2i16",hy);class dy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,h)}emplace(e,o,l,h,f){const g=12*e,_=3*e;return this.uint8[g+0]=o,this.uint8[g+1]=l,this.float32[_+1]=h,this.float32[_+2]=f,e}}dy.prototype.bytesPerElement=12,ot("StructArrayLayout2ub2f12",dy);class Pi extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l){const h=this.length;return this.resize(h+1),this.emplace(h,e,o,l)}emplace(e,o,l,h){const f=3*e;return this.uint16[f+0]=o,this.uint16[f+1]=l,this.uint16[f+2]=h,e}}Pi.prototype.bytesPerElement=6,ot("StructArrayLayout3ui6",Pi);class fy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G,te,se,de,me,ye){const _e=this.length;return this.resize(_e+1),this.emplace(_e,e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G,te,se,de,me,ye)}emplace(e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G,te,se,de,me,ye,_e){const Me=30*e,Ae=15*e,Ke=60*e;return this.int16[Me+0]=o,this.int16[Me+1]=l,this.int16[Me+2]=h,this.float32[Ae+2]=f,this.float32[Ae+3]=g,this.uint16[Me+8]=_,this.uint16[Me+9]=w,this.uint32[Ae+5]=T,this.uint32[Ae+6]=C,this.uint32[Ae+7]=k,this.uint16[Me+16]=A,this.uint16[Me+17]=L,this.uint16[Me+18]=R,this.float32[Ae+10]=U,this.float32[Ae+11]=G,this.uint8[Ke+48]=te,this.uint8[Ke+49]=se,this.uint8[Ke+50]=de,this.uint32[Ae+13]=me,this.int16[Me+28]=ye,this.uint8[Ke+58]=_e,e}}fy.prototype.bytesPerElement=60,ot("StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60",fy);class py extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G,te,se,de,me,ye,_e,Me,Ae,Ke,Ze,Pe,He,Qe,Ne){const rt=this.length;return this.resize(rt+1),this.emplace(rt,e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G,te,se,de,me,ye,_e,Me,Ae,Ke,Ze,Pe,He,Qe,Ne)}emplace(e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G,te,se,de,me,ye,_e,Me,Ae,Ke,Ze,Pe,He,Qe,Ne,rt){const lt=38*e,$t=19*e;return this.int16[lt+0]=o,this.int16[lt+1]=l,this.int16[lt+2]=h,this.float32[$t+2]=f,this.float32[$t+3]=g,this.int16[lt+8]=_,this.int16[lt+9]=w,this.int16[lt+10]=T,this.int16[lt+11]=C,this.int16[lt+12]=k,this.int16[lt+13]=A,this.uint16[lt+14]=L,this.uint16[lt+15]=R,this.uint16[lt+16]=U,this.uint16[lt+17]=G,this.uint16[lt+18]=te,this.uint16[lt+19]=se,this.uint16[lt+20]=de,this.uint16[lt+21]=me,this.uint16[lt+22]=ye,this.uint16[lt+23]=_e,this.uint16[lt+24]=Me,this.uint16[lt+25]=Ae,this.uint16[lt+26]=Ke,this.uint16[lt+27]=Ze,this.uint16[lt+28]=Pe,this.uint32[$t+15]=He,this.float32[$t+16]=Qe,this.float32[$t+17]=Ne,this.float32[$t+18]=rt,e}}py.prototype.bytesPerElement=76,ot("StructArrayLayout3i2f6i15ui1ul3f76",py);class cp extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}cp.prototype.bytesPerElement=4,ot("StructArrayLayout1f4",cp);class my extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,l){const h=this.length;return this.resize(h+1),this.emplace(h,e,o,l)}emplace(e,o,l,h){const f=3*e;return this.int16[f+0]=o,this.int16[f+1]=l,this.int16[f+2]=h,e}}my.prototype.bytesPerElement=6,ot("StructArrayLayout3i6",my);class Lh extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,h,f,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,o,l,h,f,g,_)}emplace(e,o,l,h,f,g,_,w){const T=7*e;return this.float32[T+0]=o,this.float32[T+1]=l,this.float32[T+2]=h,this.float32[T+3]=f,this.float32[T+4]=g,this.float32[T+5]=_,this.float32[T+6]=w,e}}Lh.prototype.bytesPerElement=28,ot("StructArrayLayout7f28",Lh);class gy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,h)}emplace(e,o,l,h,f){const g=6*e;return this.uint32[3*e+0]=o,this.uint16[g+2]=l,this.uint16[g+3]=h,this.uint16[g+4]=f,e}}gy.prototype.bytesPerElement=12,ot("StructArrayLayout1ul3ui12",gy);class ls extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const h=2*e;return this.uint16[h+0]=o,this.uint16[h+1]=l,e}}ls.prototype.bytesPerElement=4,ot("StructArrayLayout2ui4",ls);class up extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}up.prototype.bytesPerElement=2,ot("StructArrayLayout1ui2",up);class hp extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){const l=this.length;return this.resize(l+1),this.emplace(l,e,o)}emplace(e,o,l){const h=2*e;return this.float32[h+0]=o,this.float32[h+1]=l,e}}hp.prototype.bytesPerElement=8,ot("StructArrayLayout2f8",hp);class yy extends Hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,l,h){const f=this.length;return this.resize(f+1),this.emplace(f,e,o,l,h)}emplace(e,o,l,h,f){const g=4*e;return this.float32[g+0]=o,this.float32[g+1]=l,this.float32[g+2]=h,this.float32[g+3]=f,e}}yy.prototype.bytesPerElement=16,ot("StructArrayLayout4f16",yy);class nx extends Oh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}nx.prototype.size=40;class _y extends uy{get(e){return new nx(this,e)}}ot("CollisionBoxArray",_y);class rx extends Oh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}rx.prototype.size=60;class ix extends fy{get(e){return new rx(this,e)}}ot("PlacedSymbolArray",ix);class ox extends Oh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ox.prototype.size=76;class ax extends py{get(e){return new ox(this,e)}}ot("SymbolInstanceArray",ax);class sx extends cp{getoffsetX(e){return this.float32[1*e+0]}}ot("GlyphOffsetArray",sx);class lx extends my{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}ot("SymbolLineVertexArray",lx);class cx extends Oh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}cx.prototype.size=12;class ux extends gy{get(e){return new cx(this,e)}}ot("FeatureIndexArray",ux);class hx extends Oh{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}hx.prototype.size=4;class dx extends ls{get(e){return new hx(this,e)}}ot("FillExtrusionCentroidArray",dx);const jk=On([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Uk=On([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var fx=Xa(function(r){r.exports=function(e,o){var l,h,f,g,_,w,T,C;for(h=e.length-(l=3&e.length),f=o,_=3432918353,w=461845907,C=0;C<h;)T=255&e.charCodeAt(C)|(255&e.charCodeAt(++C))<<8|(255&e.charCodeAt(++C))<<16|(255&e.charCodeAt(++C))<<24,++C,f=27492+(65535&(g=5*(65535&(f=(f^=T=(65535&(T=(T=(65535&T)*_+(((T>>>16)*_&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(T=0,l){case 3:T^=(255&e.charCodeAt(C+2))<<16;case 2:T^=(255&e.charCodeAt(C+1))<<8;case 1:f^=T=(65535&(T=(T=(65535&(T^=255&e.charCodeAt(C)))*_+(((T>>>16)*_&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295}return f^=e.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0}}),Vk=Xa(function(r){r.exports=function(e,o){for(var l,h=e.length,f=o^h,g=0;h>=4;)l=1540483477*(65535&(l=255&e.charCodeAt(g)|(255&e.charCodeAt(++g))<<8|(255&e.charCodeAt(++g))<<16|(255&e.charCodeAt(++g))<<24))+((1540483477*(l>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++g;switch(h){case 3:f^=(255&e.charCodeAt(g+2))<<16;case 2:f^=(255&e.charCodeAt(g+1))<<8;case 1:f=1540483477*(65535&(f^=255&e.charCodeAt(g)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0}}),Dh=fx,$k=Vk;Dh.murmur3=fx,Dh.murmur2=$k;class dp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,l,h){this.ids.push(px(e)),this.positions.push(o,l,h)}getPositions(e){const o=px(e);let l=0,h=this.ids.length-1;for(;l<h;){const g=l+h>>1;this.ids[g]>=o?h=g:l=g+1}const f=[];for(;this.ids[l]===o;)f.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return f}static serialize(e,o){const l=new Float64Array(e.ids),h=new Uint32Array(e.positions);return vy(l,h,0,l.length-1),o&&o.push(l.buffer,h.buffer),{ids:l,positions:h}}static deserialize(e){const o=new dp;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function px(r){const e=+r;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Dh(String(r))}function vy(r,e,o,l){for(;o<l;){const h=r[o+l>>1];let f=o-1,g=l+1;for(;;){do f++;while(r[f]<h);do g--;while(r[g]>h);if(f>=g)break;fp(r,f,g),fp(e,3*f,3*g),fp(e,3*f+1,3*g+1),fp(e,3*f+2,3*g+2)}g-o<l-g?(vy(r,e,o,g),o=g+1):(vy(r,e,g+1,l),l=g)}}function fp(r,e,o){const l=r[e];r[e]=r[o],r[o]=l}ot("FeaturePositionMap",dp);class ya{constructor(e,o){this.gl=e.gl,this.location=o}}class pp extends ya{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class mx extends ya{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class gx extends ya{constructor(e,o){super(e,o),this.current=Ht.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Gk=new Float32Array(16),qk=new Float32Array(9),Zk=new Float32Array(4);function xy(r){return[ex(255*r.r,255*r.g),ex(255*r.b,255*r.a)]}class Rh{constructor(e,o,l){this.value=e,this.uniformNames=o.map(h=>`u_${h}`),this.type=l}setUniform(e,o,l){e.set(l.constantOr(this.value))}getBinding(e,o,l){return this.type==="color"?new gx(e,o):new pp(e,o)}}class Wc{constructor(e,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=o.tl.concat(o.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,o,l,h){const f=h==="u_pattern_to"||h==="u_dash_to"?this.patternTo:h==="u_pattern_from"||h==="u_dash_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&e.set(f)}getBinding(e,o,l){return l==="u_pattern_from"||l==="u_pattern_to"||l==="u_dash_from"||l==="u_dash_to"?new mx(e,o):new pp(e,o)}}class _a{constructor(e,o,l,h){this.expression=e,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(f=>({name:`a_${f}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,o,l,h,f,g){const _=this.paintVertexArray.length,w=this.expression.evaluate(new Ct(0),o,{},f,h,g);this.paintVertexArray.resize(e),this._setPaintValue(_,e,w)}updatePaintArray(e,o,l,h,f){const g=this.expression.evaluate({zoom:0},l,h,void 0,f);this._setPaintValue(e,o,g)}_setPaintValue(e,o,l){if(this.type==="color"){const h=xy(l);for(let f=e;f<o;f++)this.paintVertexArray.emplace(f,h[0],h[1])}else{for(let h=e;h<o;h++)this.paintVertexArray.emplace(h,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ho{constructor(e,o,l,h,f,g){this.expression=e,this.uniformNames=o.map(_=>`u_${_}_t`),this.type=l,this.useIntegerZoom=h,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=o.map(_=>({name:`a_${_}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(e,o,l,h,f,g){const _=this.expression.evaluate(new Ct(this.zoom),o,{},f,h,g),w=this.expression.evaluate(new Ct(this.zoom+1),o,{},f,h,g),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,_,w)}updatePaintArray(e,o,l,h,f){const g=this.expression.evaluate({zoom:this.zoom},l,h,void 0,f),_=this.expression.evaluate({zoom:this.zoom+1},l,h,void 0,f);this._setPaintValue(e,o,g,_)}_setPaintValue(e,o,l,h){if(this.type==="color"){const f=xy(l),g=xy(h);for(let _=e;_<o;_++)this.paintVertexArray.emplace(_,f[0],f[1],g[0],g[1])}else{for(let f=e;f<o;f++)this.paintVertexArray.emplace(f,l,h);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,h=sn(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);e.set(h)}getBinding(e,o,l){return new pp(e,o)}}class cs{constructor(e,o,l,h,f,g,_){this.expression=e,this.type=l,this.useIntegerZoom=h,this.zoom=f,this.layerId=_,this.paintVertexAttributes=(l==="array"?Uk:jk).members;for(let w=0;w<o.length;++w);this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(e,o,l){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(h,e,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(e,o,l,h,f,g){this._setPaintValues(e,o,l.patterns&&l.patterns[this.layerId],g)}_setPaintValues(e,o,l,h){if(!h||!l)return;const{min:f,mid:g,max:_}=l,w=h[f],T=h[g],C=h[_];if(w&&T&&C)for(let k=e;k<o;k++)this._setPaintValue(this.zoomInPaintVertexArray,k,T,w),this._setPaintValue(this.zoomOutPaintVertexArray,k,T,C)}_setPaintValue(e,o,l,h){e.emplace(o,l.tl[0],l.tl[1],l.br[0],l.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],l.pixelRatio,h.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class va{constructor(e,o,l=()=>!0){this.binders={},this._buffers=[];const h=[];for(const f in e.paint._values){if(!l(f))continue;const g=e.paint.get(f);if(!(g instanceof Br&&Ja(g.property.specification)))continue;const _=Hk(f,e.type),w=g.value,T=g.property.specification.type,C=g.property.useIntegerZoom,k=g.property.specification["property-type"],A=k==="cross-faded"||k==="cross-faded-data-driven",L=String(f)==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(w.kind!=="constant"||L)if(w.kind==="source"||L||A){const R=yx(f,T,"source");this.binders[f]=A?new cs(w,_,T,C,o,R,e.id):new _a(w,_,T,R),h.push(`/a_${f}`)}else{const R=yx(f,T,"composite");this.binders[f]=new ho(w,_,T,C,o,R),h.push(`/z_${f}`)}else this.binders[f]=A?new Wc(w.value,_):new Rh(w.value,_,T),h.push(`/u_${f}`)}this.cacheKey=h.sort().join("")}getMaxValue(e){const o=this.binders[e];return o instanceof _a||o instanceof ho?o.maxValue:0}populatePaintArrays(e,o,l,h,f,g){for(const _ in this.binders){const w=this.binders[_];(w instanceof _a||w instanceof ho||w instanceof cs)&&w.populatePaintArray(e,o,l,h,f,g)}}setConstantPatternPositions(e,o){for(const l in this.binders){const h=this.binders[l];h instanceof Wc&&h.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,l,h,f,g){let _=!1;for(const w in e){const T=o.getPositions(w);for(const C of T){const k=l.feature(C.index);for(const A in this.binders){const L=this.binders[A];if((L instanceof _a||L instanceof ho||L instanceof cs)&&L.expression.isStateDependent===!0){const R=h.paint.get(A);L.expression=R.value,L.updatePaintArray(C.start,C.end,k,e[w],f,g),_=!0}}}}return _}defines(){const e=[];for(const o in this.binders){const l=this.binders[o];(l instanceof Rh||l instanceof Wc)&&e.push(...l.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return e}getBinderAttributes(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof _a||l instanceof ho||l instanceof cs)for(let h=0;h<l.paintVertexAttributes.length;h++)e.push(l.paintVertexAttributes[h].name)}return e}getBinderUniforms(){const e=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof Rh||l instanceof Wc||l instanceof ho)for(const h of l.uniformNames)e.push(h)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){const l=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof Rh||f instanceof Wc||f instanceof ho){for(const g of f.uniformNames)if(o[g]){const _=f.getBinding(e,o[g],g);l.push({name:g,property:h,binding:_})}}}return l}setUniforms(e,o,l,h){for(const{name:f,property:g,binding:_}of o)this.binders[g].setUniform(_,h,l.get(g),f)}updatePaintBuffers(e){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(e&&l instanceof cs){const h=e.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(l instanceof _a||l instanceof ho)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(e){for(const o in this.binders){const l=this.binders[o];(l instanceof _a||l instanceof ho||l instanceof cs)&&l.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const o=this.binders[e];(o instanceof _a||o instanceof ho||o instanceof cs)&&o.destroy()}}}class Pl{constructor(e,o,l=()=>!0){this.programConfigurations={};for(const h of e)this.programConfigurations[h.id]=new va(h,o,l);this.needsUpload=!1,this._featureMap=new dp,this._bufferOffset=0}populatePaintArrays(e,o,l,h,f,g,_){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,o,h,f,g,_);o.id!==void 0&&this._featureMap.add(o.id,l,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,l,h,f){for(const g of l)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,o,g,h,f)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Wk={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Hk(r,e){return Wk[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}const Xk={"line-pattern":{source:ss,composite:ss},"fill-pattern":{source:ss,composite:ss},"fill-extrusion-pattern":{source:ss,composite:ss},"line-dasharray":{source:sp,composite:sp}},Yk={color:{source:hp,composite:yy},number:{source:cp,composite:hp}};function yx(r,e,o){const l=Xk[r];return l&&l[o]||Yk[e][o]}ot("ConstantBinder",Rh),ot("CrossFadedConstantBinder",Wc),ot("SourceExpressionBinder",_a),ot("CrossFadedCompositeBinder",cs),ot("CompositeExpressionBinder",ho),ot("ProgramConfiguration",va,{omit:["_buffers"]}),ot("ProgramConfigurationSet",Pl);const mp="-transition";class fo extends Lo{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new Al(o.layout)),o.paint)){this._transitionablePaint=new Kr(o.paint);for(const l in e.paint)this.setPaintProperty(l,e.paint[l],{validate:!1});for(const l in e.layout)this.setLayoutProperty(l,e.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ma(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,l={}){o!=null&&this._validate(ay,`layers.${this.id}.layout.${e}`,e,o,l)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return ja(e,mp)?this._transitionablePaint.getTransition(e.slice(0,-mp.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,l={}){if(o!=null&&this._validate(zh,`layers.${this.id}.paint.${e}`,e,o,l))return!1;if(ja(e,mp))return this._transitionablePaint.setTransition(e.slice(0,-mp.length),o||void 0),!1;{const h=this._transitionablePaint._values[e],f=h.property.specification["property-type"]==="cross-faded-data-driven",g=h.value.isDataDriven(),_=h.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);const w=this._transitionablePaint._values[e].value;return w.isDataDriven()||g||f||this._handleOverridablePaintPropertyUpdate(e,_,w)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,o,l){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ua(e,(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}_validate(e,o,l,h,f={}){return(!f||f.validate!==!1)&&op(this,e.call(rs,{key:o,layerType:this.type,objectKey:l,value:h,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const o=this.paint.get(e);if(o instanceof Br&&Ja(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=jc(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Kk=On([{name:"a_pos",components:2,type:"Int16"}],4),{members:Jk}=Kk;class Xn{constructor(e=[]){this.segments=e}prepareSegment(e,o,l,h){let f=this.segments[this.segments.length-1];return e>Xn.MAX_VERTEX_ARRAY_LENGTH&&Mn(`Max vertices per segment is ${Xn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!f||f.vertexLength+e>Xn.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==h)&&(f={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},h!==void 0&&(f.sortKey=h),this.segments.push(f)),f}get(){return this.segments}destroy(){for(const e of this.segments)for(const o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,l,h){return new Xn([{vertexOffset:e,primitiveOffset:o,vertexLength:l,primitiveLength:h,vaos:{},sortKey:0}])}}Xn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ot("SegmentVector",Xn);var Nt=8192;class Ml{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof cn?new cn(e.lng,e.lat):cn.convert(e),this}setSouthWest(e){return this._sw=e instanceof cn?new cn(e.lng,e.lat):cn.convert(e),this}extend(e){const o=this._sw,l=this._ne;let h,f;if(e instanceof cn)h=e,f=e;else{if(!(e instanceof Ml))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ml.convert(e)):this.extend(cn.convert(e)):this;if(h=e._sw,f=e._ne,!h||!f)return this}return o||l?(o.lng=Math.min(h.lng,o.lng),o.lat=Math.min(h.lat,o.lat),l.lng=Math.max(f.lng,l.lng),l.lat=Math.max(f.lat,l.lat)):(this._sw=new cn(h.lng,h.lat),this._ne=new cn(f.lng,f.lat)),this}getCenter(){return new cn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new cn(this.getWest(),this.getNorth())}getSouthEast(){return new cn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:l}=cn.convert(e);let h=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&h}static convert(e){return!e||e instanceof Ml?e:new Ml(e)}}const _x=63710088e-1;class cn{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new cn(io(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const o=Math.PI/180,l=this.lat*o,h=e.lat*o,f=Math.sin(l)*Math.sin(h)+Math.cos(l)*Math.cos(h)*Math.cos((e.lng-this.lng)*o);return _x*Math.acos(Math.min(f,1))}toBounds(e=0){const o=360*e/40075017,l=o/Math.cos(Math.PI/180*this.lat);return new Ml(new cn(this.lng-l,this.lat-o),new cn(this.lng+l,this.lat+o))}static convert(e){if(e instanceof cn)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new cn(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new cn(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vx=2*Math.PI*_x;function xx(r){return vx*Math.cos(r*Math.PI/180)}function Hc(r){return(180+r)/360}function Xc(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function po(r,e){return r/xx(e)}function xa(r){return 360*r-180}function Wi(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function bx(r,e){return r*xx(Wi(e))}const qo=85.051129;class gp{constructor(e,o,l=0){this.x=+e,this.y=+o,this.z=+l}static fromLngLat(e,o=0){const l=cn.convert(e);return new gp(Hc(l.lng),Xc(l.lat),po(o,l.lat))}toLngLat(){return new cn(xa(this.x),Wi(this.y))}toAltitude(){return bx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vx*(e=Wi(this.y),1/Math.cos(e*Math.PI/180));var e}}function by(r,e,o,l,h,f,g,_,w){const T=(e+l)/2,C=(o+h)/2,k=new j(T,C);_(k),function(A,L,R,U,G,te){const se=R-G,de=U-te;return Math.abs((U-L)*se-(R-A)*de)/Math.hypot(se,de)}(k.x,k.y,f.x,f.y,g.x,g.y)>=w?(by(r,e,o,T,C,f,k,_,w),by(r,T,C,l,h,k,g,_,w)):r.push(g)}function Qk(r,e,o){const l=[];let h,f,g;for(const _ of r){const{x:w,y:T}=_;e(_),g?by(l,h,f,w,T,g,_,e,o):l.push(_),h=w,f=T,g=_}return l}const wy=Math.pow(2,14)-1,wx=-wy-1;function eI(r,e){const o=Math.round(r.x*e),l=Math.round(r.y*e);return r.x=sn(o,wx,wy),r.y=sn(l,wx,wy),(o<r.x||o>r.x+1||l<r.y||l>r.y+1)&&Mn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),r}function ba(r,e,o){const l=r.loadGeometry(),h=r.extent,f=Nt/h;if(e&&o&&o.projection.isReprojectedInTileSpace){const g=1<<e.z,{scale:_,x:w,y:T,projection:C}=o,k=A=>{const L=xa((e.x+A.x/h)/g),R=Wi((e.y+A.y/h)/g),U=C.project(L,R);A.x=(U.x*_-w)*h,A.y=(U.y*_-T)*h};for(let A=0;A<l.length;A++)if(r.type!==1)l[A]=Qk(l[A],k,1);else{const L=[];for(const R of l[A])R.x<0||R.x>=h||R.y<0||R.y>=h||(k(R),L.push(R));l[A]=L}}for(const g of l)for(const _ of g)eI(_,f);return l}function zl(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?ba(r):[]}}function yp(r,e,o,l,h){r.emplaceBack(2*e+(l+1)/2,2*o+(h+1)/2)}class Sy{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Gc,this.indexArray=new Pi,this.segments=new Xn,this.programConfigurations=new Pl(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l,h){const f=this.layers[0],g=[];let _=null;f.type==="circle"&&(_=f.layout.get("circle-sort-key"));for(const{feature:w,id:T,index:C,sourceLayerIndex:k}of e){const A=this.layers[0]._featureFilter.needGeometry,L=zl(w,A);if(!this.layers[0]._featureFilter.filter(new Ct(this.zoom),L,l))continue;const R=_?_.evaluate(L,{},l):void 0,U={id:T,properties:w.properties,type:w.type,sourceLayerIndex:k,index:C,geometry:A?L.geometry:ba(w,l,h),patterns:{},sortKey:R};g.push(U)}_&&g.sort((w,T)=>w.sortKey-T.sortKey);for(const w of g){const{geometry:T,index:C,sourceLayerIndex:k}=w,A=e[C].feature;this.addFeature(w,T,C,o.availableImages,l),o.featureIndex.insert(A,T,C,k,this.index)}}update(e,o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jk),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,l,h,f){for(const g of o)for(const _ of g){const w=_.x,T=_.y;if(w<0||w>=Nt||T<0||T>=Nt)continue;const C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),k=C.vertexLength;yp(this.layoutVertexArray,w,T,-1,-1),yp(this.layoutVertexArray,w,T,1,-1),yp(this.layoutVertexArray,w,T,1,1),yp(this.layoutVertexArray,w,T,-1,1),this.indexArray.emplaceBack(k,k+1,k+2),this.indexArray.emplaceBack(k,k+3,k+2),C.vertexLength+=4,C.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,{},h,f)}}function Sx(r,e){for(let o=0;o<r.length;o++)if(Yc(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(Yc(r,e[o]))return!0;return!!Ty(r,e)}function tI(r,e,o){return!!Yc(r,e)||!!Ey(e,r,o)}function Tx(r,e){if(r.length===1)return Cx(e,r[0]);for(let o=0;o<e.length;o++){const l=e[o];for(let h=0;h<l.length;h++)if(Yc(r,l[h]))return!0}for(let o=0;o<r.length;o++)if(Cx(e,r[o]))return!0;for(let o=0;o<e.length;o++)if(Ty(r,e[o]))return!0;return!1}function nI(r,e,o){if(r.length>1){if(Ty(r,e))return!0;for(let l=0;l<e.length;l++)if(Ey(e[l],r,o))return!0}for(let l=0;l<r.length;l++)if(Ey(r[l],e,o))return!0;return!1}function Ty(r,e){if(r.length===0||e.length===0)return!1;for(let o=0;o<r.length-1;o++){const l=r[o],h=r[o+1];for(let f=0;f<e.length-1;f++)if(rI(l,h,e[f],e[f+1]))return!0}return!1}function rI(r,e,o,l){return si(r,o,l)!==si(e,o,l)&&si(r,e,o)!==si(r,e,l)}function Ey(r,e,o){const l=o*o;if(e.length===1)return r.distSqr(e[0])<l;for(let h=1;h<e.length;h++)if(Ex(r,e[h-1],e[h])<l)return!0;return!1}function Ex(r,e,o){const l=e.distSqr(o);if(l===0)return r.distSqr(e);const h=((r.x-e.x)*(o.x-e.x)+(r.y-e.y)*(o.y-e.y))/l;return r.distSqr(h<0?e:h>1?o:o.sub(e)._mult(h)._add(e))}function Cx(r,e){let o,l,h,f=!1;for(let g=0;g<r.length;g++){o=r[g];for(let _=0,w=o.length-1;_<o.length;w=_++)l=o[_],h=o[w],l.y>e.y!=h.y>e.y&&e.x<(h.x-l.x)*(e.y-l.y)/(h.y-l.y)+l.x&&(f=!f)}return f}function Yc(r,e){let o=!1;for(let l=0,h=r.length-1;l<r.length;h=l++){const f=r[l],g=r[h];f.y>e.y!=g.y>e.y&&e.x<(g.x-f.x)*(e.y-f.y)/(g.y-f.y)+f.x&&(o=!o)}return o}function kx(r,e,o,l,h){for(const g of r)if(e<=g.x&&o<=g.y&&l>=g.x&&h>=g.y)return!0;const f=[new j(e,o),new j(e,h),new j(l,h),new j(l,o)];if(r.length>2){for(const g of f)if(Yc(r,g))return!0}for(let g=0;g<r.length-1;g++)if(iI(r[g],r[g+1],f))return!0;return!1}function iI(r,e,o){const l=o[0],h=o[2];if(r.x<l.x&&e.x<l.x||r.x>h.x&&e.x>h.x||r.y<l.y&&e.y<l.y||r.y>h.y&&e.y>h.y)return!1;const f=si(r,e,o[0]);return f!==si(r,e,o[1])||f!==si(r,e,o[2])||f!==si(r,e,o[3])}function Kc(r,e,o){const l=e.paint.get(r).value;return l.kind==="constant"?l.value:o.programConfigurations.get(e.id).getMaxValue(r)}function _p(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Ix(r,e,o,l,h){if(!e[0]&&!e[1])return r;const f=j.convert(e)._mult(h);o==="viewport"&&f._rotate(-l);const g=[];for(let _=0;_<r.length;_++)g.push(r[_].sub(f));return g}function Ax(r,e,o,l){const h=j.convert(r)._mult(l);return e==="viewport"&&h._rotate(-o),h}ot("CircleBucket",Sy,{omit:["layers"]});const oI=new _r({"circle-sort-key":new yt(ke.layout_circle["circle-sort-key"])});var aI={paint:new _r({"circle-radius":new yt(ke.paint_circle["circle-radius"]),"circle-color":new yt(ke.paint_circle["circle-color"]),"circle-blur":new yt(ke.paint_circle["circle-blur"]),"circle-opacity":new yt(ke.paint_circle["circle-opacity"]),"circle-translate":new st(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new st(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new st(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new st(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(ke.paint_circle["circle-stroke-opacity"])}),layout:oI};class Cy{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,l,h){const f=Math.pow(2,l),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(w=>{const T=Zn([],w,e),C=1/T[3]/o*f;return function(k,A,L){return k[0]=A[0]*L[0],k[1]=A[1]*L[1],k[2]=A[2]*L[2],k[3]=A[3]*L[3],k}(T,T,[C,C,h?1/T[3]:C,C])}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(w=>{const T=qn([],mr([],Dt([],g[w[0]],g[w[1]]),Dt([],g[w[2]],g[w[1]]))),C=-Pn(T,g[w[1]]);return T.concat(C)});return new Cy(g,_)}}class mo{constructor(e,o){this.min=e,this.max=o,this.center=hn([],ct([],this.min,this.max),.5)}quadrant(e){const o=[e%2==0,e<2],l=Oe(this.min),h=Oe(this.max);for(let f=0;f<o.length;f++)l[f]=o[f]?this.min[f]:this.center[f],h[f]=o[f]?this.center[f]:this.max[f];return h[2]=this.max[2],new mo(l,h)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,o=this.max;return[[e[0],e[1],e[2]],[o[0],e[1],e[2]],[o[0],o[1],e[2]],[e[0],o[1],e[2]],[e[0],e[1],o[2]],[o[0],e[1],o[2]],[o[0],o[1],o[2]],[e[0],o[1],o[2]]]}intersects(e){const o=this.getCorners();let l=!0;for(let h=0;h<e.planes.length;h++){const f=e.planes[h];let g=0;for(let _=0;_<o.length;_++)g+=Pn(f,o[_])+f[3]>=0;if(g===0)return 0;g!==o.length&&(l=!1)}if(l)return 2;for(let h=0;h<3;h++){let f=Number.MAX_VALUE,g=-Number.MAX_VALUE;for(let _=0;_<e.points.length;_++){const w=e.points[_][h]-this.min[h];f=Math.min(f,w),g=Math.max(g,w)}if(g<0||f>this.max[h]-this.min[h])return 0}return 1}}function Px(r,e,o,l,h,f,g,_,w){if(f&&r.queryGeometry.isAboveHorizon)return!1;f&&(w*=r.pixelToTileUnitsFactor);for(const T of e)for(const C of T){const k=C.add(_),A=h&&o.elevation?o.elevation.exaggeration()*h.getElevationAt(k.x,k.y,!0):0,L=f?k:sI(k,A,l),R=f?r.tilespaceRays.map(G=>cI(G,A)):r.queryGeometry.screenGeometry,U=Zn([],[C.x,C.y,A,1],l);if(!g&&f?w*=U[3]/o.cameraToCenterDistance:g&&!f&&(w*=o.cameraToCenterDistance/U[3]),tI(R,L,w))return!0}return!1}function sI(r,e,o){const l=Zn([],[r.x,r.y,e,1],o);return new j(l[0]/l[3],l[1]/l[3])}const Mx=St(0,0,0),lI=St(0,0,1);function cI(r,e){const o=Be();return Mx[2]=e,r.intersectsPlane(Mx,lI,o),new j(o[0],o[1])}class zx extends Sy{}function ky(r,{width:e,height:o},l,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==e*o*l)throw new RangeError("mismatched image size")}else h=new Uint8Array(e*o*l);return r.width=e,r.height=o,r.data=h,r}function Ox(r,{width:e,height:o},l){if(e===r.width&&o===r.height)return;const h=ky({},{width:e,height:o},l);Iy(r,h,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,e),height:Math.min(r.height,o)},l),r.width=e,r.height=o,r.data=h.data}function Iy(r,e,o,l,h,f){if(h.width===0||h.height===0)return e;if(h.width>r.width||h.height>r.height||o.x>r.width-h.width||o.y>r.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>e.width||h.height>e.height||l.x>e.width-h.width||l.y>e.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const g=r.data,_=e.data;for(let w=0;w<h.height;w++){const T=((o.y+w)*r.width+o.x)*f,C=((l.y+w)*e.width+l.x)*f;for(let k=0;k<h.width*f;k++)_[C+k]=g[T+k]}return e}ot("HeatmapBucket",zx,{omit:["layers"]});class us{constructor(e,o){ky(this,e,1,o)}resize(e){Ox(this,e,1)}clone(){return new us({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,h,f){Iy(e,o,l,h,f,1)}}class Mi{constructor(e,o){ky(this,e,4,o)}resize(e){Ox(this,e,4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Mi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,l,h,f){Iy(e,o,l,h,f,4)}}ot("AlphaImage",us),ot("RGBAImage",Mi);var uI={paint:new _r({"heatmap-radius":new yt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new st(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Go(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new st(ke.paint_heatmap["heatmap-opacity"])})};function Ay(r){const e={},o=r.resolution||256,l=r.clips?r.clips.length:1,h=r.image||new Mi({width:o,height:l}),f=(g,_,w)=>{e[r.evaluationKey]=w;const T=r.expression.evaluate(e);h.data[g+_+0]=Math.floor(255*T.r/T.a),h.data[g+_+1]=Math.floor(255*T.g/T.a),h.data[g+_+2]=Math.floor(255*T.b/T.a),h.data[g+_+3]=Math.floor(255*T.a)};if(r.clips)for(let g=0,_=0;g<l;++g,_+=4*o)for(let w=0,T=0;w<o;w++,T+=4){const C=w/(o-1),{start:k,end:A}=r.clips[g];f(_,T,k*(1-C)+A*C)}else for(let g=0,_=0;g<o;g++,_+=4)f(0,_,g/(o-1));return h}var hI={paint:new _r({"hillshade-illumination-direction":new st(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new st(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new st(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new st(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new st(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new st(ke.paint_hillshade["hillshade-accent-color"])})};const dI=On([{name:"a_pos",components:2,type:"Int16"}],4),{members:fI}=dI;var vp=xp,pI=xp;function xp(r,e,o){o=o||2;var l,h,f,g,_,w,T,C=e&&e.length,k=C?e[0]*o:r.length,A=Lx(r,0,k,o,!0),L=[];if(!A||A.next===A.prev)return L;if(C&&(A=function(U,G,te,se){var de,me,ye,_e=[];for(de=0,me=G.length;de<me;de++)(ye=Lx(U,G[de]*se,de<me-1?G[de+1]*se:U.length,se,!1))===ye.next&&(ye.steiner=!0),_e.push(wI(ye));for(_e.sort(vI),de=0;de<_e.length;de++)te=hs(te=xI(_e[de],te),te.next);return te}(r,e,A,o)),r.length>80*o){l=f=r[0],h=g=r[1];for(var R=o;R<k;R+=o)(_=r[R])<l&&(l=_),(w=r[R+1])<h&&(h=w),_>f&&(f=_),w>g&&(g=w);T=(T=Math.max(f-l,g-h))!==0?1/T:0}return Bh(A,L,o,l,h,T),L}function Lx(r,e,o,l,h){var f,g;if(h===zy(r,e,o,l)>0)for(f=e;f<o;f+=l)g=Bx(f,r[f],r[f+1],g);else for(f=o-l;f>=e;f-=l)g=Bx(f,r[f],r[f+1],g);return g&&bp(g,g.next)&&(Nh(g),g=g.next),g}function hs(r,e){if(!r)return r;e||(e=r);var o,l=r;do if(o=!1,l.steiner||!bp(l,l.next)&&Yn(l.prev,l,l.next)!==0)l=l.next;else{if(Nh(l),(l=e=l.prev)===l.next)break;o=!0}while(o||l!==e);return e}function Bh(r,e,o,l,h,f,g){if(r){!g&&f&&function(C,k,A,L){var R=C;do R.z===null&&(R.z=Py(R.x,R.y,k,A,L)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==C);R.prevZ.nextZ=null,R.prevZ=null,function(U){var G,te,se,de,me,ye,_e,Me,Ae=1;do{for(te=U,U=null,me=null,ye=0;te;){for(ye++,se=te,_e=0,G=0;G<Ae&&(_e++,se=se.nextZ);G++);for(Me=Ae;_e>0||Me>0&&se;)_e!==0&&(Me===0||!se||te.z<=se.z)?(de=te,te=te.nextZ,_e--):(de=se,se=se.nextZ,Me--),me?me.nextZ=de:U=de,de.prevZ=me,me=de;te=se}me.nextZ=null,Ae*=2}while(ye>1)}(R)}(r,l,h,f);for(var _,w,T=r;r.prev!==r.next;)if(_=r.prev,w=r.next,f?gI(r,l,h,f):mI(r))e.push(_.i/o),e.push(r.i/o),e.push(w.i/o),Nh(r),r=w.next,T=w.next;else if((r=w)===T){g?g===1?Bh(r=yI(hs(r),e,o),e,o,l,h,f,2):g===2&&_I(r,e,o,l,h,f):Bh(hs(r),e,o,l,h,f,1);break}}}function mI(r){var e=r.prev,o=r,l=r.next;if(Yn(e,o,l)>=0)return!1;for(var h=r.next.next;h!==r.prev;){if(Jc(e.x,e.y,o.x,o.y,l.x,l.y,h.x,h.y)&&Yn(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function gI(r,e,o,l){var h=r.prev,f=r,g=r.next;if(Yn(h,f,g)>=0)return!1;for(var _=h.x>f.x?h.x>g.x?h.x:g.x:f.x>g.x?f.x:g.x,w=h.y>f.y?h.y>g.y?h.y:g.y:f.y>g.y?f.y:g.y,T=Py(h.x<f.x?h.x<g.x?h.x:g.x:f.x<g.x?f.x:g.x,h.y<f.y?h.y<g.y?h.y:g.y:f.y<g.y?f.y:g.y,e,o,l),C=Py(_,w,e,o,l),k=r.prevZ,A=r.nextZ;k&&k.z>=T&&A&&A.z<=C;){if(k!==r.prev&&k!==r.next&&Jc(h.x,h.y,f.x,f.y,g.x,g.y,k.x,k.y)&&Yn(k.prev,k,k.next)>=0||(k=k.prevZ,A!==r.prev&&A!==r.next&&Jc(h.x,h.y,f.x,f.y,g.x,g.y,A.x,A.y)&&Yn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;k&&k.z>=T;){if(k!==r.prev&&k!==r.next&&Jc(h.x,h.y,f.x,f.y,g.x,g.y,k.x,k.y)&&Yn(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;A&&A.z<=C;){if(A!==r.prev&&A!==r.next&&Jc(h.x,h.y,f.x,f.y,g.x,g.y,A.x,A.y)&&Yn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function yI(r,e,o){var l=r;do{var h=l.prev,f=l.next.next;!bp(h,f)&&Dx(h,l,l.next,f)&&Fh(h,f)&&Fh(f,h)&&(e.push(h.i/o),e.push(l.i/o),e.push(f.i/o),Nh(l),Nh(l.next),l=r=f),l=l.next}while(l!==r);return hs(l)}function _I(r,e,o,l,h,f){var g=r;do{for(var _=g.next.next;_!==g.prev;){if(g.i!==_.i&&SI(g,_)){var w=Rx(g,_);return g=hs(g,g.next),w=hs(w,w.next),Bh(g,e,o,l,h,f),void Bh(w,e,o,l,h,f)}_=_.next}g=g.next}while(g!==r)}function vI(r,e){return r.x-e.x}function xI(r,e){var o=function(f,g){var _,w=g,T=f.x,C=f.y,k=-1/0;do{if(C<=w.y&&C>=w.next.y&&w.next.y!==w.y){var A=w.x+(C-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(A<=T&&A>k){if(k=A,A===T){if(C===w.y)return w;if(C===w.next.y)return w.next}_=w.x<w.next.x?w:w.next}}w=w.next}while(w!==g);if(!_)return null;if(T===k)return _;var L,R=_,U=_.x,G=_.y,te=1/0;w=_;do T>=w.x&&w.x>=U&&T!==w.x&&Jc(C<G?T:k,C,U,G,C<G?k:T,C,w.x,w.y)&&(L=Math.abs(C-w.y)/(T-w.x),Fh(w,f)&&(L<te||L===te&&(w.x>_.x||w.x===_.x&&bI(_,w)))&&(_=w,te=L)),w=w.next;while(w!==R);return _}(r,e);if(!o)return e;var l=Rx(o,r),h=hs(o,o.next);return hs(l,l.next),e===o?h:e}function bI(r,e){return Yn(r.prev,r,e.prev)<0&&Yn(e.next,r,r.next)<0}function Py(r,e,o,l,h){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-o)*h)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-l)*h)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wI(r){var e=r,o=r;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==r);return o}function Jc(r,e,o,l,h,f,g,_){return(h-g)*(e-_)-(r-g)*(f-_)>=0&&(r-g)*(l-_)-(o-g)*(e-_)>=0&&(o-g)*(f-_)-(h-g)*(l-_)>=0}function SI(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(o,l){var h=o;do{if(h.i!==o.i&&h.next.i!==o.i&&h.i!==l.i&&h.next.i!==l.i&&Dx(h,h.next,o,l))return!0;h=h.next}while(h!==o);return!1}(r,e)&&(Fh(r,e)&&Fh(e,r)&&function(o,l){var h=o,f=!1,g=(o.x+l.x)/2,_=(o.y+l.y)/2;do h.y>_!=h.next.y>_&&h.next.y!==h.y&&g<(h.next.x-h.x)*(_-h.y)/(h.next.y-h.y)+h.x&&(f=!f),h=h.next;while(h!==o);return f}(r,e)&&(Yn(r.prev,r,e.prev)||Yn(r,e.prev,e))||bp(r,e)&&Yn(r.prev,r,r.next)>0&&Yn(e.prev,e,e.next)>0)}function Yn(r,e,o){return(e.y-r.y)*(o.x-e.x)-(e.x-r.x)*(o.y-e.y)}function bp(r,e){return r.x===e.x&&r.y===e.y}function Dx(r,e,o,l){var h=Sp(Yn(r,e,o)),f=Sp(Yn(r,e,l)),g=Sp(Yn(o,l,r)),_=Sp(Yn(o,l,e));return h!==f&&g!==_||!(h!==0||!wp(r,o,e))||!(f!==0||!wp(r,l,e))||!(g!==0||!wp(o,r,l))||!(_!==0||!wp(o,e,l))}function wp(r,e,o){return e.x<=Math.max(r.x,o.x)&&e.x>=Math.min(r.x,o.x)&&e.y<=Math.max(r.y,o.y)&&e.y>=Math.min(r.y,o.y)}function Sp(r){return r>0?1:r<0?-1:0}function Fh(r,e){return Yn(r.prev,r,r.next)<0?Yn(r,e,r.next)>=0&&Yn(r,r.prev,e)>=0:Yn(r,e,r.prev)<0||Yn(r,r.next,e)<0}function Rx(r,e){var o=new My(r.i,r.x,r.y),l=new My(e.i,e.x,e.y),h=r.next,f=e.prev;return r.next=e,e.prev=r,o.next=h,h.prev=o,l.next=o,o.prev=l,f.next=l,l.prev=f,l}function Bx(r,e,o,l){var h=new My(r,e,o);return l?(h.next=l.next,h.prev=l,l.next.prev=h,l.next=h):(h.prev=h,h.next=h),h}function Nh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function My(r,e,o){this.i=r,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zy(r,e,o,l){for(var h=0,f=e,g=o-l;f<o;f+=l)h+=(r[g]-r[f])*(r[f+1]+r[g+1]),g=f;return h}function TI(r,e,o,l,h){Fx(r,e,o||0,l||r.length-1,h||EI)}function Fx(r,e,o,l,h){for(;l>o;){if(l-o>600){var f=l-o+1,g=e-o+1,_=Math.log(f),w=.5*Math.exp(2*_/3),T=.5*Math.sqrt(_*w*(f-w)/f)*(g-f/2<0?-1:1);Fx(r,e,Math.max(o,Math.floor(e-g*w/f+T)),Math.min(l,Math.floor(e+(f-g)*w/f+T)),h)}var C=r[e],k=o,A=l;for(jh(r,o,e),h(r[l],C)>0&&jh(r,o,l);k<A;){for(jh(r,k,A),k++,A--;h(r[k],C)<0;)k++;for(;h(r[A],C)>0;)A--}h(r[o],C)===0?jh(r,o,A):jh(r,++A,l),A<=e&&(o=A+1),e<=A&&(l=A-1)}}function jh(r,e,o){var l=r[e];r[e]=r[o],r[o]=l}function EI(r,e){return r<e?-1:r>e?1:0}function Oy(r,e){const o=r.length;if(o<=1)return[r];const l=[];let h,f;for(let g=0;g<o;g++){const _=Va(r[g]);_!==0&&(r[g].area=Math.abs(_),f===void 0&&(f=_<0),f===_<0?(h&&l.push(h),h=[r[g]]):h.push(r[g]))}if(h&&l.push(h),e>1)for(let g=0;g<l.length;g++)l[g].length<=e||(TI(l[g],e,1,l[g].length-1,CI),l[g]=l[g].slice(0,e));return l}function CI(r,e){return e.area-r.area}function Ly(r,e,o){const l=o.patternDependencies;let h=!1;for(const f of e){const g=f.paint.get(`${r}-pattern`);g.isConstant()||(h=!0);const _=g.constantOr(null);_&&(h=!0,l[_.to]=!0,l[_.from]=!0)}return h}function Dy(r,e,o,l,h){const f=h.patternDependencies;for(const g of e){const _=g.paint.get(`${r}-pattern`).value;if(_.kind!=="constant"){let w=_.evaluate({zoom:l-1},o,{},h.availableImages),T=_.evaluate({zoom:l},o,{},h.availableImages),C=_.evaluate({zoom:l+1},o,{},h.availableImages);w=w&&w.name?w.name:w,T=T&&T.name?T.name:T,C=C&&C.name?C.name:C,f[w]=!0,f[T]=!0,f[C]=!0,o.patterns[g.id]={min:w,mid:T,max:C}}}return o}xp.deviation=function(r,e,o,l){var h=e&&e.length,f=Math.abs(zy(r,0,h?e[0]*o:r.length,o));if(h)for(var g=0,_=e.length;g<_;g++)f-=Math.abs(zy(r,e[g]*o,g<_-1?e[g+1]*o:r.length,o));var w=0;for(g=0;g<l.length;g+=3){var T=l[g]*o,C=l[g+1]*o,k=l[g+2]*o;w+=Math.abs((r[T]-r[k])*(r[C+1]-r[T+1])-(r[T]-r[C])*(r[k+1]-r[T+1]))}return f===0&&w===0?0:Math.abs((w-f)/f)},xp.flatten=function(r){for(var e=r[0][0].length,o={vertices:[],holes:[],dimensions:e},l=0,h=0;h<r.length;h++){for(var f=0;f<r[h].length;f++)for(var g=0;g<e;g++)o.vertices.push(r[h][f][g]);h>0&&o.holes.push(l+=r[h-1].length)}return o},vp.default=pI;class Tp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gc,this.indexArray=new Pi,this.indexArray2=new ls,this.programConfigurations=new Pl(e.layers,e.zoom),this.segments=new Xn,this.segments2=new Xn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l,h){this.hasPattern=Ly("fill",this.layers,o);const f=this.layers[0].layout.get("fill-sort-key"),g=[];for(const{feature:_,id:w,index:T,sourceLayerIndex:C}of e){const k=this.layers[0]._featureFilter.needGeometry,A=zl(_,k);if(!this.layers[0]._featureFilter.filter(new Ct(this.zoom),A,l))continue;const L=f?f.evaluate(A,{},l,o.availableImages):void 0,R={id:w,properties:_.properties,type:_.type,sourceLayerIndex:C,index:T,geometry:k?A.geometry:ba(_,l,h),patterns:{},sortKey:L};g.push(R)}f&&g.sort((_,w)=>_.sortKey-w.sortKey);for(const _ of g){const{geometry:w,index:T,sourceLayerIndex:C}=_;if(this.hasPattern){const k=Dy("fill",this.layers,_,this.zoom,o);this.patternFeatures.push(k)}else this.addFeature(_,w,T,l,{},o.availableImages);o.featureIndex.insert(e[T].feature,w,T,C,this.index)}}update(e,o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,h)}addFeatures(e,o,l,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fI),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,l,h,f,g=[]){for(const _ of Oy(o,500)){let w=0;for(const R of _)w+=R.length;const T=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),C=T.vertexLength,k=[],A=[];for(const R of _){if(R.length===0)continue;R!==_[0]&&A.push(k.length/2);const U=this.segments2.prepareSegment(R.length,this.layoutVertexArray,this.indexArray2),G=U.vertexLength;this.layoutVertexArray.emplaceBack(R[0].x,R[0].y),this.indexArray2.emplaceBack(G+R.length-1,G),k.push(R[0].x),k.push(R[0].y);for(let te=1;te<R.length;te++)this.layoutVertexArray.emplaceBack(R[te].x,R[te].y),this.indexArray2.emplaceBack(G+te-1,G+te),k.push(R[te].x),k.push(R[te].y);U.vertexLength+=R.length,U.primitiveLength+=R.length}const L=vp(k,A);for(let R=0;R<L.length;R+=3)this.indexArray.emplaceBack(C+L[R],C+L[R+1],C+L[R+2]);T.vertexLength+=w,T.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,g,h)}}ot("FillBucket",Tp,{omit:["layers","patternFeatures"]});const kI=new _r({"fill-sort-key":new yt(ke.layout_fill["fill-sort-key"])});var II={paint:new _r({"fill-antialias":new st(ke.paint_fill["fill-antialias"]),"fill-opacity":new yt(ke.paint_fill["fill-opacity"]),"fill-color":new yt(ke.paint_fill["fill-color"]),"fill-outline-color":new yt(ke.paint_fill["fill-outline-color"]),"fill-translate":new st(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new st(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new ur(ke.paint_fill["fill-pattern"])}),layout:kI};const AI=On([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),PI=On([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:MI}=AI;var Nx=Qc;function Qc(r,e,o,l,h){this.properties={},this.extent=o,this.type=0,this._pbf=r,this._geometry=-1,this._keys=l,this._values=h,r.readFields(zI,this,e)}function zI(r,e,o){r==1?e.id=o.readVarint():r==2?function(l,h){for(var f=l.readVarint()+l.pos;l.pos<f;){var g=h._keys[l.readVarint()],_=h._values[l.readVarint()];h.properties[g]=_}}(o,e):r==3?e.type=o.readVarint():r==4&&(e._geometry=o.pos)}function OI(r){for(var e,o,l=0,h=0,f=r.length,g=f-1;h<f;g=h++)l+=((o=r[g]).x-(e=r[h]).x)*(e.y+o.y);return l}Qc.types=["Unknown","Point","LineString","Polygon"],Qc.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,o=r.readVarint()+r.pos,l=1,h=0,f=0,g=0,_=[];r.pos<o;){if(h<=0){var w=r.readVarint();l=7&w,h=w>>3}if(h--,l===1||l===2)f+=r.readSVarint(),g+=r.readSVarint(),l===1&&(e&&_.push(e),e=[]),e.push(new j(f,g));else{if(l!==7)throw new Error("unknown command "+l);e&&e.push(e[0].clone())}}return e&&_.push(e),_},Qc.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,o=1,l=0,h=0,f=0,g=1/0,_=-1/0,w=1/0,T=-1/0;r.pos<e;){if(l<=0){var C=r.readVarint();o=7&C,l=C>>3}if(l--,o===1||o===2)(h+=r.readSVarint())<g&&(g=h),h>_&&(_=h),(f+=r.readSVarint())<w&&(w=f),f>T&&(T=f);else if(o!==7)throw new Error("unknown command "+o)}return[g,w,_,T]},Qc.prototype.toGeoJSON=function(r,e,o){var l,h,f=this.extent*Math.pow(2,o),g=this.extent*r,_=this.extent*e,w=this.loadGeometry(),T=Qc.types[this.type];function C(L){for(var R=0;R<L.length;R++){var U=L[R];L[R]=[360*(U.x+g)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(U.y+_)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var k=[];for(l=0;l<w.length;l++)k[l]=w[l][0];C(w=k);break;case 2:for(l=0;l<w.length;l++)C(w[l]);break;case 3:for(w=function(L){var R=L.length;if(R<=1)return[L];for(var U,G,te=[],se=0;se<R;se++){var de=OI(L[se]);de!==0&&(G===void 0&&(G=de<0),G===de<0?(U&&te.push(U),U=[L[se]]):U.push(L[se]))}return U&&te.push(U),te}(w),l=0;l<w.length;l++)for(h=0;h<w[l].length;h++)C(w[l][h])}w.length===1?w=w[0]:T="Multi"+T;var A={type:"Feature",geometry:{type:T,coordinates:w},properties:this.properties};return"id"in this&&(A.id=this.id),A};var jx=Ux;function Ux(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(LI,this,e),this.length=this._features.length}function LI(r,e,o){r===15?e.version=o.readVarint():r===1?e.name=o.readString():r===5?e.extent=o.readVarint():r===2?e._features.push(o.pos):r===3?e._keys.push(o.readString()):r===4&&e._values.push(function(l){for(var h=null,f=l.readVarint()+l.pos;l.pos<f;){var g=l.readVarint()>>3;h=g===1?l.readString():g===2?l.readFloat():g===3?l.readDouble():g===4?l.readVarint64():g===5?l.readVarint():g===6?l.readSVarint():g===7?l.readBoolean():null}return h}(o))}function DI(r,e,o){if(r===3){var l=new jx(o,o.readVarint()+o.pos);l.length&&(e[l.name]=l)}}Ux.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new Nx(this._pbf,e,this.extent,this._keys,this._values)};var Ol={VectorTile:function(r,e){this.layers=r.readFields(DI,{},e)},VectorTileFeature:Nx,VectorTileLayer:jx};const RI=Ol.VectorTileFeature.types,BI=Math.pow(2,13);function Uh(r,e,o,l,h,f,g,_){r.emplaceBack((e<<1)+g,(o<<1)+f,(Math.floor(l*BI)<<1)+h,Math.round(_))}class Vx{constructor(){this.acc=new j(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new j(e.x,e.y),this.max=new j(e.x,e.y))}append(e,o){this.currentPolyCount.edges++,this.acc._add(e);let l=!!this.borders;const h=this.min,f=this.max;e.x<h.x?(h.x=e.x,l=!0):e.x>f.x&&(f.x=e.x,l=!0),e.y<h.y?(h.y=e.y,l=!0):e.y>f.y&&(f.y=e.y,l=!0),((e.x===0||e.x===Nt)&&e.x===o.x)!=((e.y===0||e.y===Nt)&&e.y===o.y)&&this.processBorderOverlap(e,o),l&&this.checkBorderIntersection(e,o)}checkBorderIntersection(e,o){o.x<0!=e.x<0&&this.addBorderIntersection(0,rn(o.y,e.y,(0-o.x)/(e.x-o.x))),o.x>Nt!=e.x>Nt&&this.addBorderIntersection(1,rn(o.y,e.y,(Nt-o.x)/(e.x-o.x))),o.y<0!=e.y<0&&this.addBorderIntersection(2,rn(o.x,e.x,(0-o.y)/(e.y-o.y))),o.y>Nt!=e.y>Nt&&this.addBorderIntersection(3,rn(o.x,e.x,(Nt-o.y)/(e.y-o.y)))}addBorderIntersection(e,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const l=this.borders[e];o<l[0]&&(l[0]=o),o>l[1]&&(l[1]=o)}processBorderOverlap(e,o){if(e.x===o.x){if(e.y===o.y)return;const l=e.x===0?0:1;this.addBorderIntersection(l,o.y),this.addBorderIntersection(l,e.y)}else{const l=e.y===0?2:3;this.addBorderIntersection(l,o.x),this.addBorderIntersection(l,e.x)}}centroid(){const e=this.polyCount.reduce((o,l)=>o+l.edges,0);return e!==0?this.acc.div(e)._round():new j(0,0)}span(){return new j(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,o)=>e+ +(o[0]!==Number.MAX_VALUE),0)}}class Ry{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new qc,this.centroidVertexArray=new dx,this.indexArray=new Pi,this.programConfigurations=new Pl(e.layers,e.zoom),this.segments=new Xn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=e.enableTerrain}populate(e,o,l,h){this.features=[],this.hasPattern=Ly("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(f){const g=Math.exp(Math.PI*(1-f.y/(1<<f.z)*2));return 80150034*g/(g*g+1)/Nt/(1<<f.z)}(l);for(const{feature:f,id:g,index:_,sourceLayerIndex:w}of e){const T=this.layers[0]._featureFilter.needGeometry,C=zl(f,T);if(!this.layers[0]._featureFilter.filter(new Ct(this.zoom),C,l))continue;const k={id:g,sourceLayerIndex:w,index:_,geometry:T?C.geometry:ba(f,l,h),properties:f.properties,type:f.type,patterns:{}},A=this.layoutVertexArray.length;this.hasPattern?this.features.push(Dy("fill-extrusion",this.layers,k,this.zoom,o)):this.addFeature(k,k.geometry,_,l,{},o.availableImages),o.featureIndex.insert(f,k.geometry,_,w,this.index,A)}this.sortBorders()}addFeatures(e,o,l,h){for(const f of this.features){const{geometry:g}=f;this.addFeature(f,g,f.index,o,l,h)}this.sortBorders()}update(e,o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,MI),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,PI.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,l,h,f,g){const _=this.enableTerrain?new Vx:null;for(const T of Oy(o,500)){let C=0,k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(T.length===0||(w=T[0]).every(G=>G.x<=0)||w.every(G=>G.x>=Nt)||w.every(G=>G.y<=0)||w.every(G=>G.y>=Nt))continue;for(let G=0;G<T.length;G++){const te=T[G];if(te.length===0)continue;C+=te.length;let se=0;_&&_.startRing(te[0]);for(let de=0;de<te.length;de++){const me=te[de];if(de>=1){const ye=te[de-1];if(!FI(me,ye)){_&&_.append(me,ye),k.vertexLength+4>Xn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const _e=me.sub(ye)._perp(),Me=_e.x/(Math.abs(_e.x)+Math.abs(_e.y)),Ae=_e.y>0?1:0,Ke=ye.dist(me);se+Ke>32768&&(se=0),Uh(this.layoutVertexArray,me.x,me.y,Me,Ae,0,0,se),Uh(this.layoutVertexArray,me.x,me.y,Me,Ae,0,1,se),se+=Ke,Uh(this.layoutVertexArray,ye.x,ye.y,Me,Ae,0,0,se),Uh(this.layoutVertexArray,ye.x,ye.y,Me,Ae,0,1,se);const Ze=k.vertexLength;this.indexArray.emplaceBack(Ze,Ze+2,Ze+1),this.indexArray.emplaceBack(Ze+1,Ze+2,Ze+3),k.vertexLength+=4,k.primitiveLength+=2}}}}if(k.vertexLength+C>Xn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),RI[e.type]!=="Polygon")continue;const A=[],L=[],R=k.vertexLength;for(let G=0;G<T.length;G++){const te=T[G];if(te.length!==0){te!==T[0]&&L.push(A.length/2);for(let se=0;se<te.length;se++){const de=te[se];Uh(this.layoutVertexArray,de.x,de.y,0,0,1,1,0),A.push(de.x),A.push(de.y),_&&_.currentPolyCount.top++}}}const U=vp(A,L);for(let G=0;G<U.length;G+=3)this.indexArray.emplaceBack(R+U[G],R+U[G+2],R+U[G+1]);k.primitiveLength+=U.length/3,k.vertexLength+=C}var w;if(_&&_.polyCount.length>0){if(_.borders){_.vertexArrayOffset=this.centroidVertexArray.length;const T=_.borders,C=this.featuresOnBorder.push(_)-1;for(let k=0;k<4;k++)T[k][0]!==Number.MAX_VALUE&&this.borders[k].push(C)}this.encodeCentroid(_.borders?void 0:_.centroid(),_)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,g,h)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((o,l)=>this.featuresOnBorder[o].borders[e][0]-this.featuresOnBorder[l].borders[e][0])}encodeCentroid(e,o,l=!0){let h,f;if(e)if(e.y!==0){const _=o.span()._mult(this.tileToMeter);h=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(_.x/10)),f=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(_.y/10))}else h=Math.ceil(7*(e.x+450)),f=0;else h=0,f=+l;let g=l?this.centroidVertexArray.length:o.vertexArrayOffset;for(const _ of o.polyCount){l&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*_.edges+_.top);for(let w=0;w<2*_.edges;w++)this.centroidVertexArray.emplace(g++,0,f),this.centroidVertexArray.emplace(g++,h,f);for(let w=0;w<_.top;w++)this.centroidVertexArray.emplace(g++,h,f)}}}function FI(r,e){return r.x===e.x&&(r.x<0||r.x>Nt)||r.y===e.y&&(r.y<0||r.y>Nt)}ot("FillExtrusionBucket",Ry,{omit:["layers","features"]}),ot("PartMetadata",Vx);var NI={paint:new _r({"fill-extrusion-opacity":new st(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new st(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new st(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ur(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new st(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Vh(r,e){return r.x*e.x+r.y*e.y}function $x(r,e){if(r.length===1){let o=0;const l=e[o++];let h;for(;!h||l.equals(h);)if(h=e[o++],!h)return 1/0;for(;o<e.length;o++){const f=e[o],g=r[0],_=h.sub(l),w=f.sub(l),T=g.sub(l),C=Vh(_,_),k=Vh(_,w),A=Vh(w,w),L=Vh(T,_),R=Vh(T,w),U=C*A-k*k,G=(A*L-k*R)/U,te=(C*R-k*L)/U,se=l.z*(1-G-te)+h.z*G+f.z*te;if(isFinite(se))return se}return 1/0}{let o=1/0;for(const l of e)o=Math.min(o,l.z);return o}}function Gx(r){const e=new j(r[0],r[1]);return e.z=r[2],e}function jI(r,e,o,l,h,f,g,_){const w=g*h.getElevationAt(r,e,!0,!0),T=f[0]!==0,C=T?f[1]===0?g*(f[0]/7-450):g*function(k,A,L){const R=Math.floor(A[0]/8),U=Math.floor(A[1]/8),G=10*(A[0]-8*R),te=10*(A[1]-8*U),se=k.getElevationAt(R,U,!0,!0),de=k.getMeterToDEM(L),me=Math.floor(.5*(G*de-1)),ye=Math.floor(.5*(te*de-1)),_e=k.tileCoordToPixel(R,U),Me=2*me+1,Ae=2*ye+1,Ke=function(rt,lt,$t,mn,qt){return[rt.getElevationAtPixel(lt,$t,!0),rt.getElevationAtPixel(lt+qt,$t,!0),rt.getElevationAtPixel(lt,$t+qt,!0),rt.getElevationAtPixel(lt+mn,$t+qt,!0)]}(k,_e.x-me,_e.y-ye,Me,Ae),Ze=Math.abs(Ke[0]-Ke[1]),Pe=Math.abs(Ke[2]-Ke[3]),He=Math.abs(Ke[0]-Ke[2])+Math.abs(Ke[1]-Ke[3]),Qe=Math.min(.25,.5*de*(Ze+Pe)/Me),Ne=Math.min(.25,.5*de*He/Ae);return se+Math.max(Qe*G,Ne*te)}(h,f,_):w;return{base:w+(o===0)?-1:o,top:T?Math.max(C+l,w+o+2):w+l}}const UI=On([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:VI}=UI,$I=On([{name:"a_packed",components:3,type:"Float32"}]),{members:GI}=$I,qI=Ol.VectorTileFeature.types,ZI=Math.cos(Math.PI/180*37.5);class Ep{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new sy,this.layoutVertexArray2=new Zc,this.indexArray=new Pi,this.programConfigurations=new Pl(e.layers,e.zoom),this.segments=new Xn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,l,h){this.hasPattern=Ly("line",this.layers,o);const f=this.layers[0].layout.get("line-sort-key"),g=[];for(const{feature:C,id:k,index:A,sourceLayerIndex:L}of e){const R=this.layers[0]._featureFilter.needGeometry,U=zl(C,R);if(!this.layers[0]._featureFilter.filter(new Ct(this.zoom),U,l))continue;const G=f?f.evaluate(U,{},l):void 0,te={id:k,properties:C.properties,type:C.type,sourceLayerIndex:L,index:A,geometry:R?U.geometry:ba(C,l,h),patterns:{},sortKey:G};g.push(te)}f&&g.sort((C,k)=>C.sortKey-k.sortKey);const{lineAtlas:_,featureIndex:w}=o,T=this.addConstantDashes(_);for(const C of g){const{geometry:k,index:A,sourceLayerIndex:L}=C;if(T&&this.addFeatureDashes(C,_),this.hasPattern){const R=Dy("line",this.layers,C,this.zoom,o);this.patternFeatures.push(R)}else this.addFeature(C,k,A,l,_.positions,o.availableImages);w.insert(e[A].feature,k,A,L,this.index)}}addConstantDashes(e){let o=!1;for(const l of this.layers){const h=l.paint.get("line-dasharray").value,f=l.layout.get("line-cap").value;if(h.kind!=="constant"||f.kind!=="constant")o=!0;else{const g=f.value,_=h.value;if(!_)continue;e.addDash(_.from,g),e.addDash(_.to,g),_.other&&e.addDash(_.other,g)}}return o}addFeatureDashes(e,o){const l=this.zoom;for(const h of this.layers){const f=h.paint.get("line-dasharray").value,g=h.layout.get("line-cap").value;if(f.kind==="constant"&&g.kind==="constant")continue;let _,w,T,C,k,A;if(f.kind==="constant"){const G=f.value;if(!G)continue;_=G.other||G.to,w=G.to,T=G.from}else _=f.evaluate({zoom:l-1},e),w=f.evaluate({zoom:l},e),T=f.evaluate({zoom:l+1},e);g.kind==="constant"?C=k=A=g.value:(C=g.evaluate({zoom:l-1},e),k=g.evaluate({zoom:l},e),A=g.evaluate({zoom:l+1},e)),o.addDash(_,C),o.addDash(w,k),o.addDash(T,A);const L=o.getKey(_,C),R=o.getKey(w,k),U=o.getKey(T,A);e.patterns[h.id]={min:L,mid:R,max:U}}}update(e,o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,l,h)}addFeatures(e,o,l,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,GI)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,VI),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,l,h,f,g){const _=this.layers[0].layout,w=_.get("line-join").evaluate(e,{}),T=_.get("line-cap").evaluate(e,{}),C=_.get("line-miter-limit"),k=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const A of o)this.addLine(A,e,w,T,C,k);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,l,f,g,h)}addLine(e,o,l,h,f,g){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let te=0;te<e.length-1;te++)this.totalDistance+=e[te].dist(e[te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const _=qI[o.type]==="Polygon";let w=e.length;for(;w>=2&&e[w-1].equals(e[w-2]);)w--;let T=0;for(;T<w-1&&e[T].equals(e[T+1]);)T++;if(w<(_?3:2))return;l==="bevel"&&(f=1.05);const C=this.overscaling<=16?122880/(512*this.overscaling):0,k=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let A,L,R,U,G;this.e1=this.e2=-1,_&&(A=e[w-2],G=e[T].sub(A)._unit()._perp());for(let te=T;te<w;te++){if(R=te===w-1?_?e[T+1]:void 0:e[te+1],R&&e[te].equals(R))continue;G&&(U=G),A&&(L=A),A=e[te],G=R?R.sub(A)._unit()._perp():U,U=U||G;let se=U.add(G);se.x===0&&se.y===0||se._unit();const de=U.x*G.x+U.y*G.y,me=se.x*G.x+se.y*G.y,ye=me!==0?1/me:1/0,_e=2*Math.sqrt(2-2*me),Me=me<ZI&&L&&R,Ae=U.x*G.y-U.y*G.x>0;if(Me&&te>T){const Pe=A.dist(L);if(Pe>2*C){const He=A.sub(A.sub(L)._mult(C/Pe)._round());this.updateDistance(L,He),this.addCurrentVertex(He,U,0,0,k),L=He}}const Ke=L&&R;let Ze=Ke?l:_?"butt":h;if(Ke&&Ze==="round"&&(ye<g?Ze="miter":ye<=2&&(Ze="fakeround")),Ze==="miter"&&ye>f&&(Ze="bevel"),Ze==="bevel"&&(ye>2&&(Ze="flipbevel"),ye<f&&(Ze="miter")),L&&this.updateDistance(L,A),Ze==="miter")se._mult(ye),this.addCurrentVertex(A,se,0,0,k);else if(Ze==="flipbevel"){if(ye>100)se=G.mult(-1);else{const Pe=ye*U.add(G).mag()/U.sub(G).mag();se._perp()._mult(Pe*(Ae?-1:1))}this.addCurrentVertex(A,se,0,0,k),this.addCurrentVertex(A,se.mult(-1),0,0,k)}else if(Ze==="bevel"||Ze==="fakeround"){const Pe=-Math.sqrt(ye*ye-1),He=Ae?Pe:0,Qe=Ae?0:Pe;if(L&&this.addCurrentVertex(A,U,He,Qe,k),Ze==="fakeround"){const Ne=Math.round(180*_e/Math.PI/20);for(let rt=1;rt<Ne;rt++){let lt=rt/Ne;if(lt!==.5){const mn=lt-.5;lt+=lt*mn*(lt-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*mn*mn+(.848013+de*(.215638*de-1.06021)))}const $t=G.sub(U)._mult(lt)._add(U)._unit()._mult(Ae?-1:1);this.addHalfVertex(A,$t.x,$t.y,!1,Ae,0,k)}}R&&this.addCurrentVertex(A,G,-He,-Qe,k)}else if(Ze==="butt")this.addCurrentVertex(A,se,0,0,k);else if(Ze==="square"){const Pe=L?1:-1;L||this.addCurrentVertex(A,se,Pe,Pe,k),this.addCurrentVertex(A,se,0,0,k),L&&this.addCurrentVertex(A,se,Pe,Pe,k)}else Ze==="round"&&(L&&(this.addCurrentVertex(A,U,0,0,k),this.addCurrentVertex(A,U,1,1,k,!0)),R&&(this.addCurrentVertex(A,G,-1,-1,k,!0),this.addCurrentVertex(A,G,0,0,k)));if(Me&&te<w-1){const Pe=A.dist(R);if(Pe>2*C){const He=A.add(R.sub(A)._mult(C/Pe)._round());this.updateDistance(A,He),this.addCurrentVertex(He,G,0,0,k),A=He}}}}addCurrentVertex(e,o,l,h,f,g=!1){const _=o.y*h-o.x,w=-o.y-o.x*h;this.addHalfVertex(e,o.x+o.y*l,o.y-o.x*l,g,!1,l,f),this.addHalfVertex(e,_,w,g,!0,-h,f)}addHalfVertex({x:e,y:o},l,h,f,g,_,w){this.layoutVertexArray.emplaceBack((e<<1)+(f?1:0),(o<<1)+(g?1:0),Math.round(63*l)+128,Math.round(63*h)+128,1+(_===0?0:_<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const T=w.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),w.primitiveLength++),g?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}ot("LineBucket",Ep,{omit:["layers","patternFeatures"]});const WI=new _r({"line-cap":new yt(ke.layout_line["line-cap"]),"line-join":new yt(ke.layout_line["line-join"]),"line-miter-limit":new st(ke.layout_line["line-miter-limit"]),"line-round-limit":new st(ke.layout_line["line-round-limit"]),"line-sort-key":new yt(ke.layout_line["line-sort-key"])});var qx={paint:new _r({"line-opacity":new yt(ke.paint_line["line-opacity"]),"line-color":new yt(ke.paint_line["line-color"]),"line-translate":new st(ke.paint_line["line-translate"]),"line-translate-anchor":new st(ke.paint_line["line-translate-anchor"]),"line-width":new yt(ke.paint_line["line-width"]),"line-gap-width":new yt(ke.paint_line["line-gap-width"]),"line-offset":new yt(ke.paint_line["line-offset"]),"line-blur":new yt(ke.paint_line["line-blur"]),"line-dasharray":new ur(ke.paint_line["line-dasharray"]),"line-pattern":new ur(ke.paint_line["line-pattern"]),"line-gradient":new Go(ke.paint_line["line-gradient"])}),layout:WI};const Zx=new class extends yt{possiblyEvaluate(r,e){return e=new Ct(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(r,e)}evaluate(r,e,o,l){return e=Dn({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(r,e,o,l)}}(qx.paint.properties["line-width"].specification);function Wx(r,e){return e>0?e+2*r:r}Zx.useIntegerZoom=!0;const HI=On([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),XI=On([{name:"a_projected_pos",components:3,type:"Float32"}],4);On([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const YI=On([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),KI=On([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);On([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Hx=On([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),JI=On([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);On([{name:"triangle",components:3,type:"Uint16"}]),On([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),On([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),On([{type:"Float32",name:"offsetX"}]),On([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var br=24;const Zo=128;function By(r,e){const{expression:o}=e;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Ct(r+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:h}=o;let f=0;for(;f<l.length&&l[f]<=r;)f++;f=Math.max(0,f-1);let g=f;for(;g<l.length&&l[g]<r+1;)g++;g=Math.min(l.length-1,g);const _=l[f],w=l[g];return o.kind==="composite"?{kind:"composite",minZoom:_,maxZoom:w,interpolationType:h}:{kind:"camera",minZoom:_,maxZoom:w,minSize:o.evaluate(new Ct(_)),maxSize:o.evaluate(new Ct(w)),interpolationType:h}}}function Cp(r,{uSize:e,uSizeT:o},{lowerSize:l,upperSize:h}){return r.kind==="source"?l/Zo:r.kind==="composite"?rn(l/Zo,h/Zo,o):e}function eu(r,e){let o=0,l=0;if(r.kind==="constant")l=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:h,minZoom:f,maxZoom:g}=r,_=h?sn(Dr.interpolationFactor(h,e,f,g),0,1):0;r.kind==="camera"?l=rn(r.minSize,r.maxSize,_):o=_}return{uSizeT:o,uSize:l}}var QI=Object.freeze({__proto__:null,getSizeData:By,evaluateSizeForFeature:Cp,evaluateSizeForZoom:eu,SIZE_PACK_FACTOR:Zo});function eA(r,e,o){return r.sections.forEach(l=>{l.text=function(h,f,g){const _=f.layout.get("text-transform").evaluate(g,{});return _==="uppercase"?h=h.toLocaleUpperCase():_==="lowercase"&&(h=h.toLocaleLowerCase()),Gt.applyArabicShaping&&(h=Gt.applyArabicShaping(h)),h}(l.text,e,o)}),r}const $h={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function tA(r){return r==="\uFE36"||r==="\uFE48"||r==="\uFE38"||r==="\uFE44"||r==="\uFE42"||r==="\uFE3E"||r==="\uFE3C"||r==="\uFE3A"||r==="\uFE18"||r==="\uFE40"||r==="\uFE10"||r==="\uFE13"||r==="\uFE14"||r==="\uFF40"||r==="\uFFE3"||r==="\uFE11"||r==="\uFE12"}function nA(r){return r==="\uFE35"||r==="\uFE47"||r==="\uFE37"||r==="\uFE43"||r==="\uFE41"||r==="\uFE3D"||r==="\uFE3B"||r==="\uFE39"||r==="\uFE17"||r==="\uFE3F"}var Xx=function(r,e,o,l,h){var f,g,_=8*h-l-1,w=(1<<_)-1,T=w>>1,C=-7,k=o?h-1:0,A=o?-1:1,L=r[e+k];for(k+=A,f=L&(1<<-C)-1,L>>=-C,C+=_;C>0;f=256*f+r[e+k],k+=A,C-=8);for(g=f&(1<<-C)-1,f>>=-C,C+=l;C>0;g=256*g+r[e+k],k+=A,C-=8);if(f===0)f=1-T;else{if(f===w)return g?NaN:1/0*(L?-1:1);g+=Math.pow(2,l),f-=T}return(L?-1:1)*g*Math.pow(2,f-l)},Yx=function(r,e,o,l,h,f){var g,_,w,T=8*f-h-1,C=(1<<T)-1,k=C>>1,A=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=l?0:f-1,R=l?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(_=isNaN(e)?1:0,g=C):(g=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-g))<1&&(g--,w*=2),(e+=g+k>=1?A/w:A*Math.pow(2,1-k))*w>=2&&(g++,w/=2),g+k>=C?(_=0,g=C):g+k>=1?(_=(e*w-1)*Math.pow(2,h),g+=k):(_=e*Math.pow(2,k-1)*Math.pow(2,h),g=0));h>=8;r[o+L]=255&_,L+=R,_/=256,h-=8);for(g=g<<h|_,T+=h;T>0;r[o+L]=255&g,L+=R,g/=256,T-=8);r[o+L-R]|=128*U},Gh=pn;function pn(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}pn.Varint=0,pn.Fixed64=1,pn.Bytes=2,pn.Fixed32=5;var Fy=4294967296,Kx=1/Fy,Jx=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function wa(r){return r.type===pn.Bytes?r.readVarint()+r.pos:r.pos+1}function tu(r,e,o){return o?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function Qx(r,e,o){var l=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(l);for(var h=o.pos-1;h>=r;h--)o.buf[h+l]=o.buf[h]}function rA(r,e){for(var o=0;o<r.length;o++)e.writeVarint(r[o])}function iA(r,e){for(var o=0;o<r.length;o++)e.writeSVarint(r[o])}function oA(r,e){for(var o=0;o<r.length;o++)e.writeFloat(r[o])}function aA(r,e){for(var o=0;o<r.length;o++)e.writeDouble(r[o])}function sA(r,e){for(var o=0;o<r.length;o++)e.writeBoolean(r[o])}function lA(r,e){for(var o=0;o<r.length;o++)e.writeFixed32(r[o])}function cA(r,e){for(var o=0;o<r.length;o++)e.writeSFixed32(r[o])}function uA(r,e){for(var o=0;o<r.length;o++)e.writeFixed64(r[o])}function hA(r,e){for(var o=0;o<r.length;o++)e.writeSFixed64(r[o])}function kp(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function nu(r,e,o){r[o]=e,r[o+1]=e>>>8,r[o+2]=e>>>16,r[o+3]=e>>>24}function eb(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}function dA(r,e,o){e.glyphs=[],r===1&&o.readMessage(fA,e)}function fA(r,e,o){if(r===3){const{id:l,bitmap:h,width:f,height:g,left:_,top:w,advance:T}=o.readMessage(pA,{});e.glyphs.push({id:l,bitmap:new us({width:f+6,height:g+6},h),metrics:{width:f,height:g,left:_,top:w,advance:T}})}else r===4?e.ascender=o.readSVarint():r===5&&(e.descender=o.readSVarint())}function pA(r,e,o){r===1?e.id=o.readVarint():r===2?e.bitmap=o.readBytes():r===3?e.width=o.readVarint():r===4?e.height=o.readVarint():r===5?e.left=o.readSVarint():r===6?e.top=o.readSVarint():r===7&&(e.advance=o.readVarint())}function Ny(r){let e=0,o=0;for(const g of r)e+=g.w*g.h,o=Math.max(o,g.w);r.sort((g,_)=>_.h-g.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}];let h=0,f=0;for(const g of r)for(let _=l.length-1;_>=0;_--){const w=l[_];if(!(g.w>w.w||g.h>w.h)){if(g.x=w.x,g.y=w.y,f=Math.max(f,g.y+g.h),h=Math.max(h,g.x+g.w),g.w===w.w&&g.h===w.h){const T=l.pop();_<l.length&&(l[_]=T)}else g.h===w.h?(w.x+=g.w,w.w-=g.w):g.w===w.w?(w.y+=g.h,w.h-=g.h):(l.push({x:w.x+g.w,y:w.y,w:w.w-g.w,h:g.h}),w.y+=g.h,w.h-=g.h);break}}return{w:h,h:f,fill:e/(h*f)||0}}pn.prototype={destroy:function(){this.buf=null},readFields:function(r,e,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),h=l>>3,f=this.pos;this.type=7&l,r(h,e,this),this.pos===f&&this.skip(l)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=kp(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=eb(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=kp(this.buf,this.pos)+kp(this.buf,this.pos+4)*Fy;return this.pos+=8,r},readSFixed64:function(){var r=kp(this.buf,this.pos)+eb(this.buf,this.pos+4)*Fy;return this.pos+=8,r},readFloat:function(){var r=Xx(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Xx(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,o,l=this.buf;return e=127&(o=l[this.pos++]),o<128?e:(e|=(127&(o=l[this.pos++]))<<7,o<128?e:(e|=(127&(o=l[this.pos++]))<<14,o<128?e:(e|=(127&(o=l[this.pos++]))<<21,o<128?e:function(h,f,g){var _,w,T=g.buf;if(_=(112&(w=T[g.pos++]))>>4,w<128||(_|=(127&(w=T[g.pos++]))<<3,w<128)||(_|=(127&(w=T[g.pos++]))<<10,w<128)||(_|=(127&(w=T[g.pos++]))<<17,w<128)||(_|=(127&(w=T[g.pos++]))<<24,w<128)||(_|=(1&(w=T[g.pos++]))<<31,w<128))return tu(h,_,f);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=l[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&Jx?function(o,l,h){return Jx.decode(o.subarray(l,h))}(this.buf,e,r):function(o,l,h){for(var f="",g=l;g<h;){var _,w,T,C=o[g],k=null,A=C>239?4:C>223?3:C>191?2:1;if(g+A>h)break;A===1?C<128&&(k=C):A===2?(192&(_=o[g+1]))==128&&(k=(31&C)<<6|63&_)<=127&&(k=null):A===3?(w=o[g+2],(192&(_=o[g+1]))==128&&(192&w)==128&&((k=(15&C)<<12|(63&_)<<6|63&w)<=2047||k>=55296&&k<=57343)&&(k=null)):A===4&&(w=o[g+2],T=o[g+3],(192&(_=o[g+1]))==128&&(192&w)==128&&(192&T)==128&&((k=(15&C)<<18|(63&_)<<12|(63&w)<<6|63&T)<=65535||k>=1114112)&&(k=null)),k===null?(k=65533,A=1):k>65535&&(k-=65536,f+=String.fromCharCode(k>>>10&1023|55296),k=56320|1023&k),f+=String.fromCharCode(k),g+=A}return f}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==pn.Bytes)return r.push(this.readVarint(e));var o=wa(this);for(r=r||[];this.pos<o;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==pn.Bytes)return r.push(this.readSVarint());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==pn.Bytes)return r.push(this.readBoolean());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==pn.Bytes)return r.push(this.readFloat());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==pn.Bytes)return r.push(this.readDouble());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==pn.Bytes)return r.push(this.readFixed32());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==pn.Bytes)return r.push(this.readSFixed32());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==pn.Bytes)return r.push(this.readFixed64());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==pn.Bytes)return r.push(this.readSFixed64());var e=wa(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===pn.Varint)for(;this.buf[this.pos++]>127;);else if(e===pn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===pn.Fixed32)this.pos+=4;else{if(e!==pn.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),nu(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),nu(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),nu(this.buf,-1&r,this.pos),nu(this.buf,Math.floor(r*Kx),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),nu(this.buf,-1&r,this.pos),nu(this.buf,Math.floor(r*Kx),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,o){var l,h;if(e>=0?(l=e%4294967296|0,h=e/4294967296|0):(h=~(-e/4294967296),4294967295^(l=~(-e%4294967296))?l=l+1|0:(l=0,h=h+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(f,g,_){_.buf[_.pos++]=127&f|128,f>>>=7,_.buf[_.pos++]=127&f|128,f>>>=7,_.buf[_.pos++]=127&f|128,f>>>=7,_.buf[_.pos++]=127&f|128,_.buf[_.pos]=127&(f>>>=7)}(l,0,o),function(f,g){var _=(7&f)<<4;g.buf[g.pos++]|=_|((f>>>=3)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f|((f>>>=7)?128:0),f&&(g.buf[g.pos++]=127&f)))))}(h,o)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(l,h,f){for(var g,_,w=0;w<h.length;w++){if((g=h.charCodeAt(w))>55295&&g<57344){if(!_){g>56319||w+1===h.length?(l[f++]=239,l[f++]=191,l[f++]=189):_=g;continue}if(g<56320){l[f++]=239,l[f++]=191,l[f++]=189,_=g;continue}g=_-55296<<10|g-56320|65536,_=null}else _&&(l[f++]=239,l[f++]=191,l[f++]=189,_=null);g<128?l[f++]=g:(g<2048?l[f++]=g>>6|192:(g<65536?l[f++]=g>>12|224:(l[f++]=g>>18|240,l[f++]=g>>12&63|128),l[f++]=g>>6&63|128),l[f++]=63&g|128)}return f}(this.buf,r,this.pos);var o=this.pos-e;o>=128&&Qx(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(r){this.realloc(4),Yx(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Yx(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=r[o]},writeRawMessage:function(r,e){this.pos++;var o=this.pos;r(e,this);var l=this.pos-o;l>=128&&Qx(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(r,e,o){this.writeTag(r,pn.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,rA,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,iA,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,sA,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,oA,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,aA,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,lA,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,cA,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,uA,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,hA,e)},writeBytesField:function(r,e){this.writeTag(r,pn.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,pn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,pn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,pn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,pn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,pn.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,pn.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,pn.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,pn.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,pn.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,Boolean(e))}};class jy{constructor(e,{pixelRatio:o,version:l,stretchX:h,stretchY:f,content:g}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=h,this.stretchY=f,this.content=g,this.version=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class tb{constructor(e,o){const l={},h={};this.haveRenderCallbacks=[];const f=[];this.addImages(e,l,f),this.addImages(o,h,f);const{w:g,h:_}=Ny(f),w=new Mi({width:g||1,height:_||1});for(const T in e){const C=e[T],k=l[T].paddedRect;Mi.copy(C.data,w,{x:0,y:0},{x:k.x+1,y:k.y+1},C.data)}for(const T in o){const C=o[T],k=h[T].paddedRect,A=k.x+1,L=k.y+1,R=C.data.width,U=C.data.height;Mi.copy(C.data,w,{x:0,y:0},{x:A,y:L},C.data),Mi.copy(C.data,w,{x:0,y:U-1},{x:A,y:L-1},{width:R,height:1}),Mi.copy(C.data,w,{x:0,y:0},{x:A,y:L+U},{width:R,height:1}),Mi.copy(C.data,w,{x:R-1,y:0},{x:A-1,y:L},{width:1,height:U}),Mi.copy(C.data,w,{x:0,y:0},{x:A+R,y:L},{width:1,height:U})}this.image=w,this.iconPositions=l,this.patternPositions=h}addImages(e,o,l){for(const h in e){const f=e[h],g={x:0,y:0,w:f.data.width+2,h:f.data.height+2};l.push(g),o[h]=new jy(g,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(e,o){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in e.updatedImages)this.patchUpdatedImage(this.iconPositions[l],e.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],e.getImage(l),o)}patchUpdatedImage(e,o,l){if(!e||!o||e.version===o.version)return;e.version=o.version;const[h,f]=e.tl;l.update(o.data,void 0,{x:h,y:f})}}ot("ImagePosition",jy),ot("ImageAtlas",tb);const zi={horizontal:1,vertical:2,horizontalOnly:3};class qh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){const l=new qh;return l.scale=e||1,l.fontStack=o,l}static forImage(e){const o=new qh;return o.imageName=e,o}}class ru{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){const l=new ru;for(let h=0;h<e.sections.length;h++){const f=e.sections[h];f.image?l.addImageSection(f):l.addTextSection(f,o)}return l}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(o,l){let h="";for(let f=0;f<o.length;f++){const g=o.charCodeAt(f+1)||null,_=o.charCodeAt(f-1)||null;h+=!l&&(g&&dt(g)&&!$h[o[f+1]]||_&&dt(_)&&!$h[o[f-1]])||!$h[o[f]]?o[f]:$h[o[f]]}return h}(this.text,e)}trim(){let e=0;for(let l=0;l<this.text.length&&Ip[this.text.charCodeAt(l)];l++)e++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=e&&Ip[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){const l=new ru;return l.text=this.text.substring(e,o),l.sectionIndex=this.sectionIndex.slice(e,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(qh.forText(e.scale,e.fontStack||o));const l=this.sections.length-1;for(let h=0;h<e.text.length;++h)this.sectionIndex.push(l)}addImageSection(e){const o=e.image?e.image.name:"";if(o.length===0)return void Mn("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(qh.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Mn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Uy(r,e,o,l,h,f,g,_,w,T,C,k,A,L,R,U){const G=ru.fromFeature(r,h);let te;k===zi.vertical&&G.verticalizePunctuation(A);const{processBidirectionalText:se,processStyledBidirectionalText:de}=Gt;if(se&&G.sections.length===1){te=[];const _e=se(G.toString(),Vy(G,T,f,e,l,L,R));for(const Me of _e){const Ae=new ru;Ae.text=Me,Ae.sections=G.sections;for(let Ke=0;Ke<Me.length;Ke++)Ae.sectionIndex.push(0);te.push(Ae)}}else if(de){te=[];const _e=de(G.text,G.sectionIndex,Vy(G,T,f,e,l,L,R));for(const Me of _e){const Ae=new ru;Ae.text=Me[0],Ae.sectionIndex=Me[1],Ae.sections=G.sections,te.push(Ae)}}else te=function(_e,Me){const Ae=[],Ke=_e.text;let Ze=0;for(const Pe of Me)Ae.push(_e.substring(Ze,Pe)),Ze=Pe;return Ze<Ke.length&&Ae.push(_e.substring(Ze,Ke.length)),Ae}(G,Vy(G,T,f,e,l,L,R));const me=[],ye={positionedLines:me,text:G.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:k,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(_e,Me,Ae,Ke,Ze,Pe,He,Qe,Ne,rt,lt,$t){let mn=0,qt=0,Zt=0;const qe=Qe==="right"?1:Qe==="left"?0:.5;let en=!1;for(const tn of Ze){const Vt=tn.getSections();for(const Cn of Vt){if(Cn.imageName)continue;const Jn=Me[Cn.fontStack];if(Jn&&(en=Jn.ascender!==void 0&&Jn.descender!==void 0,!en))break}if(!en)break}let Xt=0;for(const tn of Ze){tn.trim();const Vt=tn.getMaxScale(),Cn=(Vt-1)*br,Jn={positionedGlyphs:[],lineOffset:0};_e.positionedLines[Xt]=Jn;const Vn=Jn.positionedGlyphs;let tr=0;if(!tn.length()){qt+=Pe,++Xt;continue}let wr=0,ei=0;for(let En=0;En<tn.length();En++){const dr=tn.getSection(En),Xi=tn.getSectionIndex(En),vr=tn.getCharCode(En);let un=dr.scale,fr=null,kn=null,Ir=null,ir=br,Ar=0;const Fr=!(Ne===zi.horizontal||!lt&&!De(vr)||lt&&(Ip[vr]||(Kn=vr,i(Kn)||c(Kn)||m(Kn)||ce(Kn)||Ge(Kn))));if(dr.imageName){const Nr=Ke[dr.imageName];if(!Nr)continue;Ir=dr.imageName,_e.iconsInText=_e.iconsInText||!0,kn=Nr.paddedRect;const pr=Nr.displaySize;un=un*br/$t,fr={width:pr[0],height:pr[1],left:1,top:-3,advance:Fr?pr[1]:pr[0],localGlyph:!1},Ar=en?-fr.height*un:Vt*br-17-pr[1]*un,ir=fr.advance;const yo=(Fr?pr[0]:pr[1])*un-br*Vt;yo>0&&yo>tr&&(tr=yo)}else{const Nr=Ae[dr.fontStack];if(!Nr)continue;Nr[vr]&&(kn=Nr[vr]);const pr=Me[dr.fontStack];if(!pr)continue;const yo=pr.glyphs[vr];if(!yo)continue;if(fr=yo.metrics,ir=vr!==8203?br:0,en){const cu=pr.ascender!==void 0?Math.abs(pr.ascender):0,Jh=pr.descender!==void 0?Math.abs(pr.descender):0,Qh=(cu+Jh)*un;wr<Qh&&(wr=Qh,ei=(cu-Jh)/2*un),Ar=-cu*un}else Ar=(Vt-un)*br-17}Fr?(_e.verticalizable=!0,Vn.push({glyph:vr,imageName:Ir,x:mn,y:qt+Ar,vertical:Fr,scale:un,localGlyph:fr.localGlyph,fontStack:dr.fontStack,sectionIndex:Xi,metrics:fr,rect:kn}),mn+=ir*un+rt):(Vn.push({glyph:vr,imageName:Ir,x:mn,y:qt+Ar,vertical:Fr,scale:un,localGlyph:fr.localGlyph,fontStack:dr.fontStack,sectionIndex:Xi,metrics:fr,rect:kn}),mn+=fr.advance*un+rt)}Vn.length!==0&&(Zt=Math.max(mn-rt,Zt),en?ab(Vn,qe,tr,ei,Pe*Vt/2):ab(Vn,qe,tr,0,Pe/2)),mn=0;const ti=Pe*Vt+tr;Jn.lineOffset=Math.max(tr,Cn),qt+=ti,++Xt}var Kn;const Bn=qt,{horizontalAlign:hr,verticalAlign:kr}=$y(He);(function(tn,Vt,Cn,Jn,Vn,tr){const wr=(Vt-Cn)*Vn,ei=-tr*Jn;for(const ti of tn)for(const En of ti.positionedGlyphs)En.x+=wr,En.y+=ei})(_e.positionedLines,qe,hr,kr,Zt,Bn),_e.top+=-kr*Bn,_e.bottom=_e.top+Bn,_e.left+=-hr*Zt,_e.right=_e.left+Zt,_e.hasBaseline=en}(ye,e,o,l,te,g,_,w,k,T,A,U),!function(_e){for(const Me of _e)if(Me.positionedGlyphs.length!==0)return!1;return!0}(me)&&ye}const Ip={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function nb(r,e,o,l,h,f){if(e.imageName){const g=l[e.imageName];return g?g.displaySize[0]*e.scale*br/f+h:0}{const g=o[e.fontStack],_=g&&g.glyphs[r];return _?_.metrics.advance*e.scale+h:0}}function rb(r,e,o,l){const h=Math.pow(r-e,2);return l?r<e?h/2:2*h:h+Math.abs(o)*o}function gA(r,e,o){let l=0;return r===10&&(l-=1e4),o&&(l+=150),r!==40&&r!==65288||(l+=50),e!==41&&e!==65289||(l+=50),l}function ib(r,e,o,l,h,f){let g=null,_=rb(e,o,h,f);for(const w of l){const T=rb(e-w.x,o,h,f)+w.badness;T<=_&&(g=w,_=T)}return{index:r,x:e,priorBreak:g,badness:_}}function ob(r){return r?ob(r.priorBreak).concat(r.index):[]}function Vy(r,e,o,l,h,f,g){if(f!=="point")return[];if(!r)return[];const _=[],w=function(A,L,R,U,G,te){let se=0;for(let de=0;de<A.length();de++){const me=A.getSection(de);se+=nb(A.getCharCode(de),me,U,G,L,te)}return se/Math.max(1,Math.ceil(se/R))}(r,e,o,l,h,g),T=r.text.indexOf("\u200B")>=0;let C=0;for(let A=0;A<r.length();A++){const L=r.getSection(A),R=r.getCharCode(A);if(Ip[R]||(C+=nb(R,L,l,h,e,g)),A<r.length()-1){const U=!((k=R)<11904||!(D(k)||z(k)||Ce(k)||ie(k)||X(k)||y(k)||N(k)||E(k)||le(k)||q(k)||$(k)||Ue(k)||P(k)||S(k)||x(k)||Z(k)||M(k)||we(k)||ae(k)||oe(k)));(mA[R]||U||L.imageName)&&_.push(ib(A+1,C,w,_,gA(R,r.getCharCode(A+1),U&&T),!1))}}var k;return ob(ib(r.length(),C,w,_,0,!0))}function $y(r){let e=.5,o=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function ab(r,e,o,l,h){if(!(e||o||l||h))return;const f=r.length-1,g=r[f],_=(g.x+g.metrics.advance*g.scale)*e;for(let w=0;w<=f;w++)r[w].x-=_,r[w].y+=o+l+h}function yA(r,e,o){const{horizontalAlign:l,verticalAlign:h}=$y(o),f=e[0]-r.displaySize[0]*l,g=e[1]-r.displaySize[1]*h;return{image:r,top:g,bottom:g+r.displaySize[1],left:f,right:f+r.displaySize[0]}}function sb(r,e,o,l,h,f){const g=r.image;let _;if(g.content){const G=g.content,te=g.pixelRatio||1;_=[G[0]/te,G[1]/te,g.displaySize[0]-G[2]/te,g.displaySize[1]-G[3]/te]}const w=e.left*f,T=e.right*f;let C,k,A,L;o==="width"||o==="both"?(L=h[0]+w-l[3],k=h[0]+T+l[1]):(L=h[0]+(w+T-g.displaySize[0])/2,k=L+g.displaySize[0]);const R=e.top*f,U=e.bottom*f;return o==="height"||o==="both"?(C=h[1]+R-l[0],A=h[1]+U+l[2]):(C=h[1]+(R+U-g.displaySize[1])/2,A=C+g.displaySize[1]),{image:g,top:C,right:k,bottom:A,left:L,collisionPadding:_}}class Sa extends j{constructor(e,o,l,h,f){super(e,o),this.angle=h,this.z=l,f!==void 0&&(this.segment=f)}clone(){return new Sa(this.x,this.y,this.z,this.angle,this.segment)}}function lb(r,e,o,l,h){if(e.segment===void 0)return!0;let f=e,g=e.segment+1,_=0;for(;_>-o/2;){if(g--,g<0)return!1;_-=r[g].dist(f),f=r[g]}_+=r[g].dist(r[g+1]),g++;const w=[];let T=0;for(;_<o/2;){const C=r[g],k=r[g+1];if(!k)return!1;let A=r[g-1].angleTo(C)-C.angleTo(k);for(A=Math.abs((A+3*Math.PI)%(2*Math.PI)-Math.PI),w.push({distance:_,angleDelta:A}),T+=A;_-w[0].distance>l;)T-=w.shift().angleDelta;if(T>h)return!1;g++,_+=C.dist(k)}return!0}function cb(r){let e=0;for(let o=0;o<r.length-1;o++)e+=r[o].dist(r[o+1]);return e}function ub(r,e,o){return r?.6*e*o:0}function hb(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function _A(r,e,o,l,h,f){const g=ub(o,h,f),_=hb(o,l)*f;let w=0;const T=cb(r)/2;for(let C=0;C<r.length-1;C++){const k=r[C],A=r[C+1],L=k.dist(A);if(w+L>T){const R=(T-w)/L,U=rn(k.x,A.x,R),G=rn(k.y,A.y,R),te=new Sa(U,G,0,A.angleTo(k),C);return!g||lb(r,te,_,g,e)?te:void 0}w+=L}}function vA(r,e,o,l,h,f,g,_,w){const T=ub(l,f,g),C=hb(l,h),k=C*g,A=r[0].x===0||r[0].x===w||r[0].y===0||r[0].y===w;return e-k<e/4&&(e=k+e/4),db(r,A?e/2*_%e:(C/2+2*f)*g*_%e,e,T,o,k,A,!1,w)}function db(r,e,o,l,h,f,g,_,w){const T=f/2,C=cb(r);let k=0,A=e-o,L=[];for(let R=0;R<r.length-1;R++){const U=r[R],G=r[R+1],te=U.dist(G),se=G.angleTo(U);for(;A+o<k+te;){A+=o;const de=(A-k)/te,me=rn(U.x,G.x,de),ye=rn(U.y,G.y,de);if(me>=0&&me<w&&ye>=0&&ye<w&&A-T>=0&&A+T<=C){const _e=new Sa(me,ye,0,se,R);_e._round(),l&&!lb(r,_e,f,l,h)||L.push(_e)}}k+=te}return _||L.length||g||(L=db(r,k/2,o,l,h,f,g,!0,w)),L}function fb(r,e,o,l,h){const f=[];for(let g=0;g<r.length;g++){const _=r[g];let w;for(let T=0;T<_.length-1;T++){let C=_[T],k=_[T+1];C.x<e&&k.x<e||(C.x<e?C=new j(e,C.y+(e-C.x)/(k.x-C.x)*(k.y-C.y))._round():k.x<e&&(k=new j(e,C.y+(e-C.x)/(k.x-C.x)*(k.y-C.y))._round()),C.y<o&&k.y<o||(C.y<o?C=new j(C.x+(o-C.y)/(k.y-C.y)*(k.x-C.x),o)._round():k.y<o&&(k=new j(C.x+(o-C.y)/(k.y-C.y)*(k.x-C.x),o)._round()),C.x>=l&&k.x>=l||(C.x>=l?C=new j(l,C.y+(l-C.x)/(k.x-C.x)*(k.y-C.y))._round():k.x>=l&&(k=new j(l,C.y+(l-C.x)/(k.x-C.x)*(k.y-C.y))._round()),C.y>=h&&k.y>=h||(C.y>=h?C=new j(C.x+(h-C.y)/(k.y-C.y)*(k.x-C.x),h)._round():k.y>=h&&(k=new j(C.x+(h-C.y)/(k.y-C.y)*(k.x-C.x),h)._round()),w&&C.equals(w[w.length-1])||(w=[C],f.push(w)),w.push(k)))))}}return f}ot("Anchor",Sa);const Zh=1e20;function pb(r,e,o,l,h,f,g,_,w){for(let T=e;T<e+l;T++)mb(r,o*f+T,f,h,g,_,w);for(let T=o;T<o+h;T++)mb(r,T*f+e,1,l,g,_,w)}function mb(r,e,o,l,h,f,g){f[0]=0,g[0]=-Zh,g[1]=Zh,h[0]=r[e];for(let _=1,w=0,T=0;_<l;_++){h[_]=r[e+_*o];const C=_*_;do{const k=f[w];T=(h[_]-h[k]+C-k*k)/(_-k)/2}while(T<=g[w]&&--w>-1);w++,f[w]=_,g[w]=T,g[w+1]=Zh}for(let _=0,w=0;_<l;_++){for(;g[w+1]<_;)w++;const T=f[w],C=_-T;r[e+_*o]=h[T]+C*C}}const Gy={none:0,ideographs:1,all:2};class iu{constructor(e,o,l){this.requestManager=e,this.localGlyphMode=o,this.localFontFamily=l,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,o){const l=[];for(const h in e)for(const f of e[h])l.push({stack:h,id:f});ua(l,({stack:h,id:f},g)=>{let _=this.entries[h];_||(_=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=_.glyphs[f];if(w!==void 0)return void g(null,{stack:h,id:f,glyph:w});if(w=this._tinySDF(_,h,f),w)return _.glyphs[f]=w,void g(null,{stack:h,id:f,glyph:w});const T=Math.floor(f/256);if(256*T>65535)return void g(new Error("glyphs > 65535 not supported"));if(_.ranges[T])return void g(null,{stack:h,id:f,glyph:w});let C=_.requests[T];C||(C=_.requests[T]=[],iu.loadGlyphRange(h,T,this.url,this.requestManager,(k,A)=>{if(A){_.ascender=A.ascender,_.descender=A.descender;for(const L in A.glyphs)this._doesCharSupportLocalGlyph(+L)||(_.glyphs[+L]=A.glyphs[+L]);_.ranges[T]=!0}for(const L of C)L(k,A);delete _.requests[T]})),C.push((k,A)=>{k?g(k):A&&g(null,{stack:h,id:f,glyph:A.glyphs[f]||null})})},(h,f)=>{if(h)o(h);else if(f){const g={};for(const{stack:_,id:w,glyph:T}of f)g[_]===void 0&&(g[_]={}),g[_].glyphs===void 0&&(g[_].glyphs={}),g[_].glyphs[w]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},g[_].ascender=this.entries[_].ascender,g[_].descender=this.entries[_].descender;o(null,g)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Gy.none&&(this.localGlyphMode===Gy.all?!!this.localFontFamily:!!this.localFontFamily&&(q(e)||re(e)||P(e)||M(e))||E(e))}_tinySDF(e,o,l){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(l))return;let f=e.tinySDF;if(!f){let U="400";/bold/i.test(o)?U="900":/medium/i.test(o)?U="500":/light/i.test(o)&&(U="200"),f=e.tinySDF=new iu.TinySDF({fontFamily:h,fontWeight:U,fontSize:48,buffer:6,radius:16}),f.fontWeight=U}if(this.localGlyphs[f.fontWeight][l])return this.localGlyphs[f.fontWeight][l];const g=String.fromCharCode(l),{data:_,width:w,height:T,glyphWidth:C,glyphHeight:k,glyphLeft:A,glyphTop:L,glyphAdvance:R}=f.draw(g);return this.localGlyphs[f.fontWeight][l]={id:l,bitmap:new us({width:w,height:T},_),metrics:{width:C/2,height:k/2,left:A/2,top:L/2-27,advance:R/2,localGlyph:!0}}}}function gb(r,e,o,l){const h=[],f=r.image,g=f.pixelRatio,_=f.paddedRect.w-2,w=f.paddedRect.h-2,T=r.right-r.left,C=r.bottom-r.top,k=f.stretchX||[[0,_]],A=f.stretchY||[[0,w]],L=(Pe,He)=>Pe+He[1]-He[0],R=k.reduce(L,0),U=A.reduce(L,0),G=_-R,te=w-U;let se=0,de=R,me=0,ye=U,_e=0,Me=G,Ae=0,Ke=te;if(f.content&&l){const Pe=f.content;se=Ap(k,0,Pe[0]),me=Ap(A,0,Pe[1]),de=Ap(k,Pe[0],Pe[2]),ye=Ap(A,Pe[1],Pe[3]),_e=Pe[0]-se,Ae=Pe[1]-me,Me=Pe[2]-Pe[0]-de,Ke=Pe[3]-Pe[1]-ye}const Ze=(Pe,He,Qe,Ne)=>{const rt=Pp(Pe.stretch-se,de,T,r.left),lt=Mp(Pe.fixed-_e,Me,Pe.stretch,R),$t=Pp(He.stretch-me,ye,C,r.top),mn=Mp(He.fixed-Ae,Ke,He.stretch,U),qt=Pp(Qe.stretch-se,de,T,r.left),Zt=Mp(Qe.fixed-_e,Me,Qe.stretch,R),qe=Pp(Ne.stretch-me,ye,C,r.top),en=Mp(Ne.fixed-Ae,Ke,Ne.stretch,U),Xt=new j(rt,$t),Kn=new j(qt,$t),Bn=new j(qt,qe),hr=new j(rt,qe),kr=new j(lt/g,mn/g),tn=new j(Zt/g,en/g),Vt=e*Math.PI/180;if(Vt){const Vn=Math.sin(Vt),tr=Math.cos(Vt),wr=[tr,-Vn,Vn,tr];Xt._matMult(wr),Kn._matMult(wr),hr._matMult(wr),Bn._matMult(wr)}const Cn=Pe.stretch+Pe.fixed,Jn=He.stretch+He.fixed;return{tl:Xt,tr:Kn,bl:hr,br:Bn,tex:{x:f.paddedRect.x+1+Cn,y:f.paddedRect.y+1+Jn,w:Qe.stretch+Qe.fixed-Cn,h:Ne.stretch+Ne.fixed-Jn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:kr,pixelOffsetBR:tn,minFontScaleX:Me/g/T,minFontScaleY:Ke/g/C,isSDF:o}};if(l&&(f.stretchX||f.stretchY)){const Pe=yb(k,G,R),He=yb(A,te,U);for(let Qe=0;Qe<Pe.length-1;Qe++){const Ne=Pe[Qe],rt=Pe[Qe+1];for(let lt=0;lt<He.length-1;lt++)h.push(Ze(Ne,He[lt],rt,He[lt+1]))}}else h.push(Ze({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:_+1},{fixed:0,stretch:w+1}));return h}function Ap(r,e,o){let l=0;for(const h of r)l+=Math.max(e,Math.min(o,h[1]))-Math.max(e,Math.min(o,h[0]));return l}function yb(r,e,o){const l=[{fixed:-1,stretch:0}];for(const[h,f]of r){const g=l[l.length-1];l.push({fixed:h-g.stretch,stretch:g.stretch}),l.push({fixed:h-g.stretch,stretch:g.stretch+(f-h)})}return l.push({fixed:e+1,stretch:o}),l}function Pp(r,e,o,l){return r/e*o+l}function Mp(r,e,o,l){return r-e*o/l}function xA(r,e,o,l){const h=e+r.positionedLines[l].lineOffset;return l===0?o+h/2:o+(h+(e+r.positionedLines[l-1].lineOffset))/2}iu.loadGlyphRange=function(r,e,o,l,h){const f=256*e,g=f+255,_=l.transformRequest(l.normalizeGlyphsURL(o).replace("{fontstack}",r).replace("{range}",`${f}-${g}`),uc.Glyphs);rl(_,(w,T)=>{if(w)h(w);else if(T){const C={},k=function(A){return new Gh(A).readFields(dA,{})}(T);for(const A of k.glyphs)C[A.id]=A;h(null,{glyphs:C,ascender:k.ascender,descender:k.descender})}})},iu.TinySDF=class{constructor({fontSize:r=24,buffer:e=3,radius:o=8,cutoff:l=.25,fontFamily:h="sans-serif",fontWeight:f="normal",fontStyle:g="normal"}){this.buffer=e,this.cutoff=l,this.radius=o;const _=this.size=r+4*e,w=this._createCanvas(_),T=this.ctx=w.getContext("2d",{willReadFrequently:!0});T.font=`${g} ${f} ${r}px ${h}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(_*_),this.gridInner=new Float64Array(_*_),this.f=new Float64Array(_),this.z=new Float64Array(_+1),this.v=new Uint16Array(_)}_createCanvas(r){const e=document.createElement("canvas");return e.width=e.height=r,e}draw(r){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:l,actualBoundingBoxLeft:h,actualBoundingBoxRight:f}=this.ctx.measureText(r),g=Math.floor(o),_=Math.min(this.size-this.buffer,Math.ceil(f-h)),w=Math.min(this.size-this.buffer,Math.ceil(o)+Math.ceil(l)),T=_+2*this.buffer,C=w+2*this.buffer,k=T*C,A=new Uint8ClampedArray(k),L={data:A,width:T,height:C,glyphWidth:_,glyphHeight:w,glyphTop:g,glyphLeft:0,glyphAdvance:e};if(_===0||w===0)return L;const{ctx:R,buffer:U,gridInner:G,gridOuter:te}=this;R.clearRect(U,U,_,w),R.fillText(r,U,U+g+1);const se=R.getImageData(U,U,_,w);te.fill(Zh,0,k),G.fill(0,0,k);for(let de=0;de<w;de++)for(let me=0;me<_;me++){const ye=se.data[4*(de*_+me)+3]/255;if(ye===0)continue;const _e=(de+U)*T+me+U;if(ye===1)te[_e]=0,G[_e]=Zh;else{const Me=.5-ye;te[_e]=Me>0?Me*Me:0,G[_e]=Me<0?Me*Me:0}}pb(te,0,0,T,C,T,this.f,this.v,this.z),pb(G,U,U,_,w,T,this.f,this.v,this.z);for(let de=0;de<k;de++){const me=Math.sqrt(te[de])-Math.sqrt(G[de]);A[de]=Math.round(255-255*(me/this.radius+this.cutoff))}return L}};class bA{constructor(e=[],o=wA){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:o,compare:l}=this,h=o[e];for(;e>0;){const f=e-1>>1,g=o[f];if(l(h,g)>=0)break;o[e]=g,e=f}o[e]=h}_down(e){const{data:o,compare:l}=this,h=this.length>>1,f=o[e];for(;e<h;){let g=1+(e<<1),_=o[g];const w=g+1;if(w<this.length&&l(o[w],_)<0&&(g=w,_=o[w]),l(_,f)>=0)break;o[e]=_,e=g}o[e]=f}}function wA(r,e){return r<e?-1:r>e?1:0}function SA(r,e=1,o=!1){let l=1/0,h=1/0,f=-1/0,g=-1/0;const _=r[0];for(let L=0;L<_.length;L++){const R=_[L];(!L||R.x<l)&&(l=R.x),(!L||R.y<h)&&(h=R.y),(!L||R.x>f)&&(f=R.x),(!L||R.y>g)&&(g=R.y)}const w=Math.min(f-l,g-h);let T=w/2;const C=new bA([],TA);if(w===0)return new j(l,h);for(let L=l;L<f;L+=w)for(let R=h;R<g;R+=w)C.push(new ou(L+T,R+T,T,r));let k=function(L){let R=0,U=0,G=0;const te=L[0];for(let se=0,de=te.length,me=de-1;se<de;me=se++){const ye=te[se],_e=te[me],Me=ye.x*_e.y-_e.x*ye.y;U+=(ye.x+_e.x)*Me,G+=(ye.y+_e.y)*Me,R+=3*Me}return new ou(U/R,G/R,0,L)}(r),A=C.length;for(;C.length;){const L=C.pop();(L.d>k.d||!k.d)&&(k=L,o&&console.log("found best %d after %d probes",Math.round(1e4*L.d)/1e4,A)),L.max-k.d<=e||(T=L.h/2,C.push(new ou(L.p.x-T,L.p.y-T,T,r)),C.push(new ou(L.p.x+T,L.p.y-T,T,r)),C.push(new ou(L.p.x-T,L.p.y+T,T,r)),C.push(new ou(L.p.x+T,L.p.y+T,T,r)),A+=4)}return o&&(console.log(`num probes: ${A}`),console.log(`best distance: ${k.d}`)),k.p}function TA(r,e){return e.max-r.max}function ou(r,e,o,l){this.p=new j(r,e),this.h=o,this.d=function(h,f){let g=!1,_=1/0;for(let w=0;w<f.length;w++){const T=f[w];for(let C=0,k=T.length,A=k-1;C<k;A=C++){const L=T[C],R=T[A];L.y>h.y!=R.y>h.y&&h.x<(R.x-L.x)*(h.y-L.y)/(R.y-L.y)+L.x&&(g=!g),_=Math.min(_,Ex(h,L,R))}}return(g?1:-1)*Math.sqrt(_)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}const qy=Number.POSITIVE_INFINITY,EA=Math.sqrt(2);function _b(r,e){return e[1]!==qy?function(o,l,h){let f=0,g=0;switch(l=Math.abs(l),h=Math.abs(h),o){case"top-right":case"top-left":case"top":g=h-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-h}switch(o){case"top-right":case"bottom-right":case"right":f=-l;break;case"top-left":case"bottom-left":case"left":f=l}return[f,g]}(r,e[0],e[1]):function(o,l){let h=0,f=0;l<0&&(l=0);const g=l/EA;switch(o){case"top-right":case"top-left":f=g-7;break;case"bottom-right":case"bottom-left":f=7-g;break;case"bottom":f=7-l;break;case"top":f=l-7}switch(o){case"top-right":case"bottom-right":h=-g;break;case"top-left":case"bottom-left":h=g;break;case"left":h=l;break;case"right":h=-l}return[h,f]}(r,e[0])}function CA(r,e,o,l,h,f,g,_,w,T){r.createArrays(),r.tilePixelRatio=Nt/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const C=r.layers[0].layout,k=r.layers[0]._unevaluatedLayout._values,A={};if(r.textSizeData.kind==="composite"){const{minZoom:U,maxZoom:G}=r.textSizeData;A.compositeTextSizes=[k["text-size"].possiblyEvaluate(new Ct(U),_),k["text-size"].possiblyEvaluate(new Ct(G),_)]}if(r.iconSizeData.kind==="composite"){const{minZoom:U,maxZoom:G}=r.iconSizeData;A.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new Ct(U),_),k["icon-size"].possiblyEvaluate(new Ct(G),_)]}A.layoutTextSize=k["text-size"].possiblyEvaluate(new Ct(w+1),_),A.layoutIconSize=k["icon-size"].possiblyEvaluate(new Ct(w+1),_),A.textMaxSize=k["text-size"].possiblyEvaluate(new Ct(18),_);const L=C.get("text-rotation-alignment")==="map"&&C.get("symbol-placement")!=="point",R=C.get("text-size");for(const U of r.features){const G=C.get("text-font").evaluate(U,{},_).join(","),te=R.evaluate(U,{},_),se=A.layoutTextSize.evaluate(U,{},_),de=(A.layoutIconSize.evaluate(U,{},_),{horizontal:{},vertical:void 0}),me=U.text;let ye,_e=[0,0];if(me){const Ke=me.toString(),Ze=C.get("text-letter-spacing").evaluate(U,{},_)*br,Pe=C.get("text-line-height").evaluate(U,{},_)*br,He=Te(Ke)?Ze:0,Qe=C.get("text-anchor").evaluate(U,{},_),Ne=C.get("text-variable-anchor");if(!Ne){const Zt=C.get("text-radial-offset").evaluate(U,{},_);_e=Zt?_b(Qe,[Zt*br,qy]):C.get("text-offset").evaluate(U,{},_).map(qe=>qe*br)}let rt=L?"center":C.get("text-justify").evaluate(U,{},_);const lt=C.get("symbol-placement"),$t=lt==="point",mn=lt==="point"?C.get("text-max-width").evaluate(U,{},_)*br:0,qt=Zt=>{r.allowVerticalPlacement&&Ie(Ke)&&(de.vertical=Uy(me,e,o,h,G,mn,Pe,Qe,Zt,He,_e,zi.vertical,!0,lt,se,te))};if(!L&&Ne){const Zt=rt==="auto"?Ne.map(en=>Zy(en)):[rt];let qe=!1;for(let en=0;en<Zt.length;en++){const Xt=Zt[en];if(!de.horizontal[Xt])if(qe)de.horizontal[Xt]=de.horizontal[0];else{const Kn=Uy(me,e,o,h,G,mn,Pe,"center",Xt,He,_e,zi.horizontal,!1,lt,se,te);Kn&&(de.horizontal[Xt]=Kn,qe=Kn.positionedLines.length===1)}}qt("left")}else{if(rt==="auto"&&(rt=Zy(Qe)),$t||C.get("text-writing-mode").indexOf("horizontal")>=0||!Ie(Ke)){const Zt=Uy(me,e,o,h,G,mn,Pe,Qe,rt,He,_e,zi.horizontal,!1,lt,se,te);Zt&&(de.horizontal[rt]=Zt)}qt(lt==="point"?"left":rt)}}let Me=!1;if(U.icon&&U.icon.name){const Ke=l[U.icon.name];Ke&&(ye=yA(h[U.icon.name],C.get("icon-offset").evaluate(U,{},_),C.get("icon-anchor").evaluate(U,{},_)),Me=Ke.sdf,r.sdfIcons===void 0?r.sdfIcons=Ke.sdf:r.sdfIcons!==Ke.sdf&&Mn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ke.pixelRatio!==r.pixelRatio||C.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const Ae=xb(de.horizontal)||de.vertical;r.iconsInText||(r.iconsInText=!!Ae&&Ae.iconsInText),(Ae||ye)&&kA(r,U,de,ye,l,A,se,0,_e,Me,g,_,T)}f&&r.generateCollisionDebugBuffers(w,r.collisionBoxArray)}function Zy(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kA(r,e,o,l,h,f,g,_,w,T,C,k,A){let L=f.textMaxSize.evaluate(e,{},k);L===void 0&&(L=g);const R=r.layers[0].layout,U=R.get("icon-offset").evaluate(e,{},k),G=xb(o.horizontal)||o.vertical,te=g/24,se=r.tilePixelRatio*L/24,de=r.tilePixelRatio*R.get("symbol-spacing"),me=R.get("text-padding")*r.tilePixelRatio,ye=R.get("icon-padding")*r.tilePixelRatio,_e=Ft(R.get("text-max-angle")),Me=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",Ae=R.get("icon-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",Ke=R.get("symbol-placement"),Ze=de/2,Pe=R.get("icon-text-fit");let He;l&&Pe!=="none"&&(r.allowVerticalPlacement&&o.vertical&&(He=sb(l,o.vertical,Pe,R.get("icon-text-fit-padding"),U,te)),G&&(l=sb(l,G,Pe,R.get("icon-text-fit-padding"),U,te)));const Qe=(Ne,rt,lt)=>{if(rt.x<0||rt.x>=Nt||rt.y<0||rt.y>=Nt)return;const{x:$t,y:mn,z:qt}=A.projectTilePoint(rt.x,rt.y,lt),Zt=new Sa($t,mn,qt,0,void 0);(function(qe,en,Xt,Kn,Bn,hr,kr,tn,Vt,Cn,Jn,Vn,tr,wr,ei,ti,En,dr,Xi,vr,un,fr,kn,Ir,ir){const Ar=qe.addToLineVertexArray(en,Kn);let Fr,Nr,pr,yo,cu,Jh,Qh,tw=0,nw=0,rw=0,iw=0,h_=-1,d_=-1;const Yo={};let ow=Dh(""),f_=0,p_=0;if(Vt._unevaluatedLayout.getValue("text-radial-offset")===void 0?[f_,p_]=Vt.layout.get("text-offset").evaluate(un,{},ir).map(mi=>mi*br):(f_=Vt.layout.get("text-radial-offset").evaluate(un,{},ir)*br,p_=qy),qe.allowVerticalPlacement&&Bn.vertical){const mi=Bn.vertical;if(ei)Jh=Wy(mi),tn&&(Qh=Wy(tn));else{const gi=Vt.layout.get("text-rotate").evaluate(un,{},ir)+90;pr=zp(Cn,Xt,en,Jn,Vn,tr,mi,wr,gi,ti),tn&&(yo=zp(Cn,Xt,en,Jn,Vn,tr,tn,dr,gi))}}if(hr){const mi=Vt.layout.get("icon-rotate").evaluate(un,{},ir),gi=Vt.layout.get("icon-text-fit")!=="none",ed=gb(hr,mi,kn,gi),g_=tn?gb(tn,mi,kn,gi):void 0;Nr=zp(Cn,Xt,en,Jn,Vn,tr,hr,dr,mi),tw=4*ed.length;const aw=qe.iconSizeData;let Bl=null;aw.kind==="source"?(Bl=[Zo*Vt.layout.get("icon-size").evaluate(un,{},ir)],Bl[0]>ds&&Mn(`${qe.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):aw.kind==="composite"&&(Bl=[Zo*fr.compositeIconSizes[0].evaluate(un,{},ir),Zo*fr.compositeIconSizes[1].evaluate(un,{},ir)],(Bl[0]>ds||Bl[1]>ds)&&Mn(`${qe.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),qe.addSymbols(qe.icon,ed,Bl,vr,Xi,un,!1,Xt,en,Ar.lineStartIndex,Ar.lineLength,-1,Ir,ir),h_=qe.icon.placedSymbolArray.length-1,g_&&(nw=4*g_.length,qe.addSymbols(qe.icon,g_,Bl,vr,Xi,un,zi.vertical,Xt,en,Ar.lineStartIndex,Ar.lineLength,-1,Ir,ir),d_=qe.icon.placedSymbolArray.length-1)}for(const mi in Bn.horizontal){const gi=Bn.horizontal[mi];Fr||(ow=Dh(gi.text),ei?cu=Wy(gi):Fr=zp(Cn,Xt,en,Jn,Vn,tr,gi,wr,Vt.layout.get("text-rotate").evaluate(un,{},ir),ti));const ed=gi.positionedLines.length===1;if(rw+=vb(qe,Xt,en,gi,kr,Vt,ei,un,ti,Ar,Bn.vertical?zi.horizontal:zi.horizontalOnly,ed?Object.keys(Bn.horizontal):[mi],Yo,h_,fr,Ir,ir),ed)break}Bn.vertical&&(iw+=vb(qe,Xt,en,Bn.vertical,kr,Vt,ei,un,ti,Ar,zi.vertical,["vertical"],Yo,d_,fr,Ir,ir));let ys=-1;const m_=(mi,gi)=>mi?Math.max(mi,gi):gi;ys=m_(cu,ys),ys=m_(Jh,ys),ys=m_(Qh,ys);const nP=ys>-1?1:0;qe.glyphOffsetArray.length>=fs.MAX_GLYPHS&&Mn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),un.sortKey!==void 0&&qe.addToSortKeyRanges(qe.symbolInstances.length,un.sortKey),qe.symbolInstances.emplaceBack(Xt.x,Xt.y,Xt.z,en.x,en.y,Yo.right>=0?Yo.right:-1,Yo.center>=0?Yo.center:-1,Yo.left>=0?Yo.left:-1,Yo.vertical>=0?Yo.vertical:-1,h_,d_,ow,Fr!==void 0?Fr:qe.collisionBoxArray.length,Fr!==void 0?Fr+1:qe.collisionBoxArray.length,pr!==void 0?pr:qe.collisionBoxArray.length,pr!==void 0?pr+1:qe.collisionBoxArray.length,Nr!==void 0?Nr:qe.collisionBoxArray.length,Nr!==void 0?Nr+1:qe.collisionBoxArray.length,yo||qe.collisionBoxArray.length,yo?yo+1:qe.collisionBoxArray.length,Jn,rw,iw,tw,nw,nP,0,f_,p_,ys)})(r,rt,Zt,Ne,o,l,h,He,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,me,Me,w,0,ye,Ae,U,e,f,T,C,k)};if(Ke==="line")for(const Ne of fb(e.geometry,0,0,Nt,Nt)){const rt=vA(Ne,de,_e,o.vertical||G,l,24,se,r.overscaling,Nt);for(const lt of rt){const $t=G;$t&&IA(r,$t.text,Ze,lt)||Qe(Ne,lt,k)}}else if(Ke==="line-center"){for(const Ne of e.geometry)if(Ne.length>1){const rt=_A(Ne,_e,o.vertical||G,l,24,se);rt&&Qe(Ne,rt,k)}}else if(e.type==="Polygon")for(const Ne of Oy(e.geometry,0)){const rt=SA(Ne,16);Qe(Ne[0],new Sa(rt.x,rt.y,0,0,void 0),k)}else if(e.type==="LineString")for(const Ne of e.geometry)Qe(Ne,new Sa(Ne[0].x,Ne[0].y,0,0,void 0),k);else if(e.type==="Point")for(const Ne of e.geometry)for(const rt of Ne)Qe([rt],new Sa(rt.x,rt.y,0,0,void 0),k)}const ds=32640;function vb(r,e,o,l,h,f,g,_,w,T,C,k,A,L,R,U,G){const te=function(me,ye,_e,Me,Ae,Ke,Ze,Pe){const He=[];if(ye.positionedLines.length===0)return He;const Qe=Me.layout.get("text-rotate").evaluate(Ke,{})*Math.PI/180,Ne=function(qt){const Zt=qt[0],qe=qt[1],en=Zt*qe;return en>0?[Zt,-qe]:en<0?[-Zt,qe]:Zt===0?[qe,Zt]:[qe,-Zt]}(_e);let rt=Math.abs(ye.top-ye.bottom);for(const qt of ye.positionedLines)rt-=qt.lineOffset;const lt=ye.positionedLines.length,$t=rt/lt;let mn=ye.top-_e[1];for(let qt=0;qt<lt;++qt){const Zt=ye.positionedLines[qt];mn=xA(ye,$t,mn,qt);for(const qe of Zt.positionedGlyphs){if(!qe.rect)continue;const en=qe.rect||{};let Xt=4,Kn=!0,Bn=1,hr=0;if(qe.imageName){const kn=Ze[qe.imageName];if(!kn)continue;if(kn.sdf){Mn("SDF images are not supported in formatted text and will be ignored.");continue}Kn=!1,Bn=kn.pixelRatio,Xt=1/Bn}const kr=(Ae||Pe)&&qe.vertical,tn=qe.metrics.advance*qe.scale/2,Vt=qe.metrics,Cn=qe.rect;if(Cn===null)continue;Pe&&ye.verticalizable&&(hr=qe.imageName?tn-qe.metrics.width*qe.scale/2:0);const Jn=Ae?[qe.x+tn,qe.y]:[0,0];let Vn=[0,0],tr=[0,0],wr=!1;Ae||(kr?(tr=[qe.x+tn+Ne[0],qe.y+Ne[1]-hr],wr=!0):Vn=[qe.x+tn+_e[0],qe.y+_e[1]-hr]);const ei=Cn.w*qe.scale/(Bn*(qe.localGlyph?2:1)),ti=Cn.h*qe.scale/(Bn*(qe.localGlyph?2:1));let En,dr,Xi,vr;if(kr){const kn=qe.y-mn,Ir=new j(-tn,tn-kn),ir=-Math.PI/2,Ar=new j(...tr);En=new j(-tn+Vn[0],Vn[1]),En._rotateAround(ir,Ir)._add(Ar),En.x+=-kn+tn,En.y-=(Vt.left-Xt)*qe.scale;const Fr=qe.imageName?Vt.advance*qe.scale:br*qe.scale,Nr=String.fromCharCode(qe.glyph);tA(Nr)?En.x+=(1-Xt)*qe.scale:nA(Nr)?En.x+=Fr-Vt.height*qe.scale+(-Xt-1)*qe.scale:En.x+=qe.imageName||Vt.width+2*Xt===Cn.w&&Vt.height+2*Xt===Cn.h?(Fr-ti)/2:(Fr-(Vt.height+2*Xt)*qe.scale)/2,dr=new j(En.x,En.y-ei),Xi=new j(En.x+ti,En.y),vr=new j(En.x+ti,En.y-ei)}else{const kn=(Vt.left-Xt)*qe.scale-tn+Vn[0],Ir=(-Vt.top-Xt)*qe.scale+Vn[1],ir=kn+ei,Ar=Ir+ti;En=new j(kn,Ir),dr=new j(ir,Ir),Xi=new j(kn,Ar),vr=new j(ir,Ar)}if(Qe){let kn;kn=Ae?new j(0,0):wr?new j(Ne[0],Ne[1]):new j(_e[0],_e[1]),En._rotateAround(Qe,kn),dr._rotateAround(Qe,kn),Xi._rotateAround(Qe,kn),vr._rotateAround(Qe,kn)}const un=new j(0,0),fr=new j(0,0);He.push({tl:En,tr:dr,bl:Xi,br:vr,tex:en,writingMode:ye.writingMode,glyphOffset:Jn,sectionIndex:qe.sectionIndex,isSDF:Kn,pixelOffsetTL:un,pixelOffsetBR:fr,minFontScaleX:0,minFontScaleY:0})}}return He}(0,l,w,f,g,_,h,r.allowVerticalPlacement),se=r.textSizeData;let de=null;se.kind==="source"?(de=[Zo*f.layout.get("text-size").evaluate(_,{},G)],de[0]>ds&&Mn(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):se.kind==="composite"&&(de=[Zo*R.compositeTextSizes[0].evaluate(_,{},G),Zo*R.compositeTextSizes[1].evaluate(_,{},G)],(de[0]>ds||de[1]>ds)&&Mn(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,te,de,w,g,_,C,e,o,T.lineStartIndex,T.lineLength,L,U,G);for(const me of k)A[me]=r.text.placedSymbolArray.length-1;return 4*te.length}function xb(r){for(const e in r)return r[e];return null}function zp(r,e,o,l,h,f,g,_,w,T){let C=g.top,k=g.bottom,A=g.left,L=g.right;const R=g.collisionPadding;if(R&&(A-=R[0],C-=R[1],L+=R[2],k+=R[3]),w){const U=new j(A,C),G=new j(L,C),te=new j(A,k),se=new j(L,k),de=Ft(w);let me=new j(0,0);T&&(me=new j(T[0],T[1])),U._rotateAround(de,me),G._rotateAround(de,me),te._rotateAround(de,me),se._rotateAround(de,me),A=Math.min(U.x,G.x,te.x,se.x),L=Math.max(U.x,G.x,te.x,se.x),C=Math.min(U.y,G.y,te.y,se.y),k=Math.max(U.y,G.y,te.y,se.y)}return r.emplaceBack(e.x,e.y,e.z,o.x,o.y,A,C,L,k,_,l,h,f),r.length-1}function Wy(r){r.collisionPadding&&(r.top-=r.collisionPadding[1],r.bottom+=r.collisionPadding[3]);const e=r.bottom-r.top;return e>0?Math.max(10,e):null}function IA(r,e,o,l){const h=r.compareText;if(e in h){const f=h[e];for(let g=f.length-1;g>=0;g--)if(l.dist(f[g])<o)return!0}else h[e]=[];return h[e].push(l),!1}const AA=Ol.VectorTileFeature.types,PA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Op(r,e,o,l,h,f,g,_,w,T,C,k,A,L,R,U){const G=C?Math.min(ds,Math.round(C[0])):0,te=C?Math.min(ds,Math.round(C[1])):0;r.emplaceBack(e,o,Math.round(32*g),Math.round(32*_),w,T,(G<<1)+(k?1:0),te,16*A,16*L,256*R,256*U,l,h,f,0)}function Hy(r,e,o){r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o),r.emplaceBack(e.x,e.y,o)}function MA(r){for(const e of r.sections)if(Xe(e.text))return!0;return!1}class Xy{constructor(e){this.layoutVertexArray=new ly,this.indexArray=new Pi,this.programConfigurations=e,this.segments=new Xn,this.dynamicLayoutVertexArray=new Zc,this.opacityVertexArray=new cy,this.placedSymbolArray=new ix}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,o,l,h){this.isEmpty()||(l&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,HI.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,XI.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,PA,!0),this.opacityVertexBuffer.itemSize=1),(l||h)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ot("SymbolBuffers",Xy);class Yy{constructor(e,o,l){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new l,this.segments=new Xn,this.collisionVertexArray=new dy,this.collisionVertexArrayExt=new Zc}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,YI.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,KI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ot("CollisionBuffers",Yy);class fs{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(g=>g.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=V([]),this.placementViewportMatrix=V([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=By(this.zoom,o["text-size"]),this.iconSizeData=By(this.zoom,o["icon-size"]);const l=this.layers[0].layout,h=l.get("symbol-sort-key"),f=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=l.get("text-writing-mode").map(g=>zi[g]),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=e.sourceID}createArrays(){this.text=new Xy(new Pl(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Xy(new Pl(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new sx,this.lineVertexArray=new lx,this.symbolInstances=new ax}calculateGlyphDependencies(e,o,l,h,f){for(let g=0;g<e.length;g++)if(o[e.charCodeAt(g)]=!0,h&&f){const _=$h[e.charAt(g)];_&&(o[_.charCodeAt(0)]=!0)}}populate(e,o,l,h){const f=this.layers[0],g=f.layout,_=g.get("text-font"),w=g.get("text-field"),T=g.get("icon-image"),C=(w.value.kind!=="constant"||w.value.value instanceof At&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),k=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,A=g.get("symbol-sort-key");if(this.features=[],!C&&!k)return;const L=o.iconDependencies,R=o.glyphDependencies,U=o.availableImages,G=new Ct(this.zoom);for(const{feature:te,id:se,index:de,sourceLayerIndex:me}of e){const ye=f._featureFilter.needGeometry,_e=zl(te,ye);if(!f._featureFilter.filter(G,_e,l))continue;let Me,Ae;if(ye||(_e.geometry=ba(te,l,h)),C){const Ze=f.getValueAndResolveTokens("text-field",_e,l,U),Pe=At.factory(Ze);MA(Pe)&&(this.hasRTLText=!0),(!this.hasRTLText||di()==="unavailable"||this.hasRTLText&&Gt.isParsed())&&(Me=eA(Pe,f,_e))}if(k){const Ze=f.getValueAndResolveTokens("icon-image",_e,l,U);Ae=Ze instanceof ci?Ze:ci.fromString(Ze)}if(!Me&&!Ae)continue;const Ke=this.sortFeaturesByKey?A.evaluate(_e,{},l):void 0;if(this.features.push({id:se,text:Me,icon:Ae,index:de,sourceLayerIndex:me,geometry:_e.geometry,properties:te.properties,type:AA[te.type],sortKey:Ke}),Ae&&(L[Ae.name]=!0),Me){const Ze=_.evaluate(_e,{},l).join(","),Pe=g.get("text-rotation-alignment")==="map"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(zi.vertical)>=0;for(const He of Me.sections)if(He.image)L[He.image.name]=!0;else{const Qe=Ie(Me.toString()),Ne=He.fontStack||Ze,rt=R[Ne]=R[Ne]||{};this.calculateGlyphDependencies(He.text,rt,Pe,this.allowVerticalPlacement,Qe)}}}g.get("symbol-placement")==="line"&&(this.features=function(te){const se={},de={},me=[];let ye=0;function _e(Ze){me.push(te[Ze]),ye++}function Me(Ze,Pe,He){const Qe=de[Ze];return delete de[Ze],de[Pe]=Qe,me[Qe].geometry[0].pop(),me[Qe].geometry[0]=me[Qe].geometry[0].concat(He[0]),Qe}function Ae(Ze,Pe,He){const Qe=se[Pe];return delete se[Pe],se[Ze]=Qe,me[Qe].geometry[0].shift(),me[Qe].geometry[0]=He[0].concat(me[Qe].geometry[0]),Qe}function Ke(Ze,Pe,He){const Qe=He?Pe[0][Pe[0].length-1]:Pe[0][0];return`${Ze}:${Qe.x}:${Qe.y}`}for(let Ze=0;Ze<te.length;Ze++){const Pe=te[Ze],He=Pe.geometry,Qe=Pe.text?Pe.text.toString():null;if(!Qe){_e(Ze);continue}const Ne=Ke(Qe,He),rt=Ke(Qe,He,!0);if(Ne in de&&rt in se&&de[Ne]!==se[rt]){const lt=Ae(Ne,rt,He),$t=Me(Ne,rt,me[lt].geometry);delete se[Ne],delete de[rt],de[Ke(Qe,me[$t].geometry,!0)]=$t,me[lt].geometry=null}else Ne in de?Me(Ne,rt,He):rt in se?Ae(Ne,rt,He):(_e(Ze),se[Ne]=ye-1,de[rt]=ye-1)}return me.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((te,se)=>te.sortKey-se.sortKey)}update(e,o,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,l,h),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,l,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){const l=this.lineVertexArray.length;if(e.segment!==void 0){let h=e.dist(o[e.segment+1]),f=e.dist(o[e.segment]);const g={};for(let _=e.segment+1;_<o.length;_++)g[_]={x:o[_].x,y:o[_].y,tileUnitDistanceFromAnchor:h},_<o.length-1&&(h+=o[_+1].dist(o[_]));for(let _=e.segment||0;_>=0;_--)g[_]={x:o[_].x,y:o[_].y,tileUnitDistanceFromAnchor:f},_>0&&(f+=o[_-1].dist(o[_]));for(let _=0;_<o.length;_++){const w=g[_];this.lineVertexArray.emplaceBack(w.x,w.y,w.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(e,o,l,h,f,g,_,w,T,C,k,A,L,R){const U=e.indexArray,G=e.layoutVertexArray,te=e.segments.prepareSegment(4*o.length,G,U,this.canOverlap?g.sortKey:void 0),se=this.glyphOffsetArray.length,de=te.vertexLength,me=this.allowVerticalPlacement&&_===zi.vertical?Math.PI/2:0,ye=g.text&&g.text.sections;for(let _e=0;_e<o.length;_e++){const{tl:Me,tr:Ae,bl:Ke,br:Ze,tex:Pe,pixelOffsetTL:He,pixelOffsetBR:Qe,minFontScaleX:Ne,minFontScaleY:rt,glyphOffset:lt,isSDF:$t,sectionIndex:mn}=o[_e],qt=te.vertexLength,Zt=lt[1];Op(G,w.x,w.y,w.z,T.x,T.y,Me.x,Zt+Me.y,Pe.x,Pe.y,l,$t,He.x,He.y,Ne,rt),Op(G,w.x,w.y,w.z,T.x,T.y,Ae.x,Zt+Ae.y,Pe.x+Pe.w,Pe.y,l,$t,Qe.x,He.y,Ne,rt),Op(G,w.x,w.y,w.z,T.x,T.y,Ke.x,Zt+Ke.y,Pe.x,Pe.y+Pe.h,l,$t,He.x,Qe.y,Ne,rt),Op(G,w.x,w.y,w.z,T.x,T.y,Ze.x,Zt+Ze.y,Pe.x+Pe.w,Pe.y+Pe.h,l,$t,Qe.x,Qe.y,Ne,rt),Hy(e.dynamicLayoutVertexArray,w,me),U.emplaceBack(qt,qt+1,qt+2),U.emplaceBack(qt+1,qt+2,qt+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),_e!==o.length-1&&mn===o[_e+1].sectionIndex||e.programConfigurations.populatePaintArrays(G.length,g,g.index,{},L,R,ye&&ye[mn])}e.placedSymbolArray.emplaceBack(w.x,w.y,w.z,T.x,T.y,se,this.glyphOffsetArray.length-se,de,C,k,T.segment,l?l[0]:0,l?l[1]:0,h[0],h[1],_,0,!1,0,A,0)}_commitLayoutVertex(e,o,l,h,f,g,_){e.emplaceBack(o,l,h,f,g,Math.round(_.x),Math.round(_.y))}_addCollisionDebugVertices(e,o,l,h,f,g,_){const w=l.segments.prepareSegment(4,l.layoutVertexArray,l.indexArray),T=w.vertexLength,C=_.tileAnchorX,k=_.tileAnchorY;for(let L=0;L<4;L++)l.collisionVertexArray.emplaceBack(0,0,0,0);l.collisionVertexArrayExt.emplaceBack(o,-e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,-e.padding),l.collisionVertexArrayExt.emplaceBack(o,e.padding,e.padding),l.collisionVertexArrayExt.emplaceBack(o,-e.padding,e.padding),this._commitLayoutVertex(l.layoutVertexArray,h,f,g,C,k,new j(e.x1,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,h,f,g,C,k,new j(e.x2,e.y1)),this._commitLayoutVertex(l.layoutVertexArray,h,f,g,C,k,new j(e.x2,e.y2)),this._commitLayoutVertex(l.layoutVertexArray,h,f,g,C,k,new j(e.x1,e.y2)),w.vertexLength+=4;const A=l.indexArray;A.emplaceBack(T,T+1),A.emplaceBack(T+1,T+2),A.emplaceBack(T+2,T+3),A.emplaceBack(T+3,T),w.primitiveLength+=4}_addTextDebugCollisionBoxes(e,o,l,h,f,g){for(let _=h;_<f;_++){const w=l.get(_),T=this.getSymbolInstanceTextSize(e,g,o,_);this._addCollisionDebugVertices(w,T,this.textCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,g)}}_addIconDebugCollisionBoxes(e,o,l,h,f,g){for(let _=h;_<f;_++){const w=l.get(_),T=this.getSymbolInstanceIconSize(e,o,_);this._addCollisionDebugVertices(w,T,this.iconCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,g)}}generateCollisionDebugBuffers(e,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yy(lp,Hx.members,ls),this.iconCollisionBox=new Yy(lp,Hx.members,ls);const l=eu(this.iconSizeData,e),h=eu(this.textSizeData,e);for(let f=0;f<this.symbolInstances.length;f++){const g=this.symbolInstances.get(f);this._addTextDebugCollisionBoxes(h,e,o,g.textBoxStartIndex,g.textBoxEndIndex,g),this._addTextDebugCollisionBoxes(h,e,o,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._addIconDebugCollisionBoxes(l,e,o,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._addIconDebugCollisionBoxes(l,e,o,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}}getSymbolInstanceTextSize(e,o,l,h){const f=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:h),g=Cp(this.textSizeData,e,f)/br;return this.tilePixelRatio*g}getSymbolInstanceIconSize(e,o,l){const h=this.icon.placedSymbolArray.get(l),f=Cp(this.iconSizeData,e,h);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(e,o,l){e.emplaceBack(o,-l,-l),e.emplaceBack(o,l,-l),e.emplaceBack(o,l,l),e.emplaceBack(o,-l,l)}_updateTextDebugCollisionBoxes(e,o,l,h,f,g){for(let _=h;_<f;_++){const w=l.get(_),T=this.getSymbolInstanceTextSize(e,g,o,_);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,w.padding)}}_updateIconDebugCollisionBoxes(e,o,l,h,f){for(let g=h;g<f;g++){const _=l.get(g),w=this.getSymbolInstanceIconSize(e,o,g);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,w,_.padding)}}updateCollisionDebugBuffers(e,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const l=eu(this.iconSizeData,e),h=eu(this.textSizeData,e);for(let f=0;f<this.symbolInstances.length;f++){const g=this.symbolInstances.get(f);this._updateTextDebugCollisionBoxes(h,e,o,g.textBoxStartIndex,g.textBoxEndIndex,g),this._updateTextDebugCollisionBoxes(h,e,o,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._updateIconDebugCollisionBoxes(l,e,o,g.iconBoxStartIndex,g.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(l,e,o,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,o,l,h,f,g,_,w,T){const C={};for(let k=o;k<l;k++){const A=e.get(k);C.textBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,padding:A.padding,projectedAnchorX:A.projectedAnchorX,projectedAnchorY:A.projectedAnchorY,projectedAnchorZ:A.projectedAnchorZ,tileAnchorX:A.tileAnchorX,tileAnchorY:A.tileAnchorY},C.textFeatureIndex=A.featureIndex;break}for(let k=h;k<f;k++){const A=e.get(k);C.verticalTextBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,padding:A.padding,projectedAnchorX:A.projectedAnchorX,projectedAnchorY:A.projectedAnchorY,projectedAnchorZ:A.projectedAnchorZ,tileAnchorX:A.tileAnchorX,tileAnchorY:A.tileAnchorY},C.verticalTextFeatureIndex=A.featureIndex;break}for(let k=g;k<_;k++){const A=e.get(k);C.iconBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,padding:A.padding,projectedAnchorX:A.projectedAnchorX,projectedAnchorY:A.projectedAnchorY,projectedAnchorZ:A.projectedAnchorZ,tileAnchorX:A.tileAnchorX,tileAnchorY:A.tileAnchorY},C.iconFeatureIndex=A.featureIndex;break}for(let k=w;k<T;k++){const A=e.get(k);C.verticalIconBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,padding:A.padding,projectedAnchorX:A.projectedAnchorX,projectedAnchorY:A.projectedAnchorY,projectedAnchorZ:A.projectedAnchorZ,tileAnchorX:A.tileAnchorX,tileAnchorY:A.tileAnchorY},C.verticalIconFeatureIndex=A.featureIndex;break}return C}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){const l=e.placedSymbolArray.get(o),h=l.vertexStartIndex+4*l.numGlyphs;for(let f=l.vertexStartIndex;f<h;f+=4)e.indexArray.emplaceBack(f,f+1,f+2),e.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(e),l=Math.cos(e),h=[],f=[],g=[];for(let _=0;_<this.symbolInstances.length;++_){g.push(_);const w=this.symbolInstances.get(_);h.push(0|Math.round(o*w.tileAnchorX+l*w.tileAnchorY)),f.push(w.featureIndex)}return g.sort((_,w)=>h[_]-h[w]||f[w]-f[_]),g}addToSortKeyRanges(e,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((h,f,g)=>{h>=0&&g.indexOf(h)===f&&this.addIndicesForPlacedSymbol(this.text,h)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ot("SymbolBucket",fs,{omit:["layers","collisionBoxArray","features","compareText"]}),fs.MAX_GLYPHS=65535,fs.addDynamicAttributes=Hy;const zA=new _r({"symbol-placement":new st(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new st(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new st(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new st(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new st(ke.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new st(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new st(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new st(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(ke.layout_symbol["icon-size"]),"icon-text-fit":new st(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new st(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(ke.layout_symbol["icon-image"]),"icon-rotate":new yt(ke.layout_symbol["icon-rotate"]),"icon-padding":new st(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new st(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(ke.layout_symbol["icon-offset"]),"icon-anchor":new yt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new st(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new st(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new st(ke.layout_symbol["text-rotation-alignment"]),"text-field":new yt(ke.layout_symbol["text-field"]),"text-font":new yt(ke.layout_symbol["text-font"]),"text-size":new yt(ke.layout_symbol["text-size"]),"text-max-width":new yt(ke.layout_symbol["text-max-width"]),"text-line-height":new yt(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new yt(ke.layout_symbol["text-justify"]),"text-radial-offset":new yt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new st(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(ke.layout_symbol["text-anchor"]),"text-max-angle":new st(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new st(ke.layout_symbol["text-writing-mode"]),"text-rotate":new yt(ke.layout_symbol["text-rotate"]),"text-padding":new st(ke.layout_symbol["text-padding"]),"text-keep-upright":new st(ke.layout_symbol["text-keep-upright"]),"text-transform":new yt(ke.layout_symbol["text-transform"]),"text-offset":new yt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new st(ke.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new st(ke.layout_symbol["text-ignore-placement"]),"text-optional":new st(ke.layout_symbol["text-optional"])});var Ky={paint:new _r({"icon-opacity":new yt(ke.paint_symbol["icon-opacity"]),"icon-color":new yt(ke.paint_symbol["icon-color"]),"icon-halo-color":new yt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new st(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new st(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(ke.paint_symbol["text-opacity"]),"text-color":new yt(ke.paint_symbol["text-color"],{runtimeType:Gi,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new yt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new yt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(ke.paint_symbol["text-halo-blur"]),"text-translate":new st(ke.paint_symbol["text-translate"]),"text-translate-anchor":new st(ke.paint_symbol["text-translate-anchor"])}),layout:zA};class bb{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ro,this.defaultValue=e}evaluate(e){if(e.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ot("FormatSectionOverride",bb,{omit:["defaultValue"]});class Lp extends fo{constructor(e){super(e,Ky)}recalculate(e,o){super.recalculate(e,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const l=this.layout.get("text-writing-mode");if(l){const h=[];for(const f of l)h.indexOf(f)<0&&h.push(f);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,o,l,h){const f=this.layout.get(e).evaluate(o,{},l,h),g=this._unevaluatedLayout._values[e];return g.isDataDriven()||Qa(g.value)||!f?f:function(_,w){return w.replace(/{([^{}]+)}/g,(T,C)=>C in _?String(_[C]):"")}(o.properties,f)}createBucket(e){return new fs(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Ky.paint.overridableProperties){if(!Lp.hasPaintOverride(this.layout,e))continue;const o=this.paint.get(e),l=new bb(o),h=new vh(l,o.property.specification);let f=null;f=o.value.kind==="constant"||o.value.kind==="source"?new wl("source",h):new xh("composite",h,o.value.zoomStops,o.value._interpolationType),this.paint._values[e]=new Br(o.property,f,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&Lp.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){const l=e.get("text-field"),h=Ky.paint.properties[o];let f=!1;const g=_=>{for(const w of _)if(h.overrides&&h.overrides.hasOverride(w))return void(f=!0)};if(l.value.kind==="constant"&&l.value.value instanceof At)g(l.value.value.sections);else if(l.value.kind==="source"){const _=T=>{f||(T instanceof Fo&&Wn(T.value)===Bo?g(T.value.sections):T instanceof qi?g(T.sections):T.eachChild(_))},w=l.value;w._styleExpression&&_(w._styleExpression.expression)}return f}getProgramConfiguration(e){return new va(this,e)}}var OA={paint:new _r({"background-color":new st(ke.paint_background["background-color"]),"background-pattern":new ga(ke.paint_background["background-pattern"]),"background-opacity":new st(ke.paint_background["background-opacity"])})},LA={paint:new _r({"raster-opacity":new st(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new st(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new st(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new st(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new st(ke.paint_raster["raster-saturation"]),"raster-contrast":new st(ke.paint_raster["raster-contrast"]),"raster-resampling":new st(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new st(ke.paint_raster["raster-fade-duration"])})};class DA extends fo{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var RA={paint:new _r({"sky-type":new st(ke.paint_sky["sky-type"]),"sky-atmosphere-sun":new st(ke.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new st(ke.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new st(ke.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new st(ke.paint_sky["sky-gradient-radius"]),"sky-gradient":new Go(ke.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new st(ke.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new st(ke.paint_sky["sky-atmosphere-color"]),"sky-opacity":new st(ke.paint_sky["sky-opacity"])})};function Jy(r,e,o){const l=St(0,0,1),h=sr(Er());return function(f,g,_){_*=.5;var w=g[0],T=g[1],C=g[2],k=g[3],A=Math.sin(_),L=Math.cos(_);f[0]=w*L-C*A,f[1]=T*L+k*A,f[2]=C*L+w*A,f[3]=k*L-T*A}(h,h,o?-Ft(r)+Math.PI:Ft(r)),ko(h,h,-Ft(e)),pt(l,l,h),qn(l,l)}const BA={circle:class extends fo{constructor(r){super(r,aI)}createBucket(r){return new Sy(r)}queryRadius(r){const e=r;return Kc("circle-radius",this,e)+Kc("circle-stroke-width",this,e)+_p(this.paint.get("circle-translate"))}queryIntersectsFeature(r,e,o,l,h,f,g,_){const w=Ax(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,r.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o);return Px(r,l,f,g,_,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",w,T)}getProgramIds(){return["circle"]}getProgramConfiguration(r){return new va(this,r)}},heatmap:class extends fo{createBucket(r){return new zx(r)}constructor(r){super(r,uI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ay({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(r){return Kc("heatmap-radius",this,r)}queryIntersectsFeature(r,e,o,l,h,f,g,_){const w=this.paint.get("heatmap-radius").evaluate(e,o);return Px(r,l,f,g,_,!0,!0,new j(0,0),w)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(r){return new va(this,r)}},hillshade:class extends fo{constructor(r){super(r,hI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(r){return new va(this,r)}},fill:class extends fo{constructor(r){super(r,II)}getProgramIds(){const r=this.paint.get("fill-pattern"),e=r&&r.constantOr(1),o=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(r){return new va(this,r)}recalculate(r,e){super.recalculate(r,e);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Tp(r)}queryRadius(){return _p(this.paint.get("fill-translate"))}queryIntersectsFeature(r,e,o,l,h,f){return!r.queryGeometry.isAboveHorizon&&Tx(Ix(r.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,r.pixelToTileUnitsFactor),l)}isTileClipped(){return!0}},"fill-extrusion":class extends fo{constructor(r){super(r,NI)}createBucket(r){return new Ry(r)}queryRadius(){return _p(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(r){return new va(this,r)}queryIntersectsFeature(r,e,o,l,h,f,g,_,w){const T=Ax(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,r.pixelToTileUnitsFactor),C=this.paint.get("fill-extrusion-height").evaluate(e,o),k=this.paint.get("fill-extrusion-base").evaluate(e,o),A=[0,0],L=_&&f.elevation,R=f.elevation?f.elevation.exaggeration():1;if(L){const te=r.tile.getBucket(this).centroidVertexArray,se=w+1;if(se<te.length){const de=te.get(se);A[0]=de.a_centroid_pos0,A[1]=de.a_centroid_pos1}}if(A[0]===0&&A[1]===1)return!1;const U=function(te,se,de,me,ye,_e,Me,Ae,Ke){return _e?function(Ze,Pe,He,Qe,Ne,rt,lt,$t,mn){const qt=[],Zt=[],qe=[0,0,0,1];for(const en of Ze){const Xt=[],Kn=[];for(const Bn of en){const hr=Bn.x+Qe.x,kr=Bn.y+Qe.y,tn=jI(hr,kr,Pe,He,rt,lt,$t,mn);qe[0]=hr,qe[1]=kr,qe[2]=tn.base,qe[3]=1,Zn(qe,qe,Ne),qe[3]=Math.max(qe[3],1e-5);const Vt=Gx([qe[0]/qe[3],qe[1]/qe[3],qe[2]/qe[3]]);qe[0]=hr,qe[1]=kr,qe[2]=tn.top,qe[3]=1,Zn(qe,qe,Ne),qe[3]=Math.max(qe[3],1e-5);const Cn=Gx([qe[0]/qe[3],qe[1]/qe[3],qe[2]/qe[3]]);Xt.push(Vt),Kn.push(Cn)}qt.push(Xt),Zt.push(Kn)}return[qt,Zt]}(te,se,de,me,ye,_e,Me,Ae,Ke):function(Ze,Pe,He,Qe,Ne){const rt=[],lt=[],$t=Ne[8]*Pe,mn=Ne[9]*Pe,qt=Ne[10]*Pe,Zt=Ne[11]*Pe,qe=Ne[8]*He,en=Ne[9]*He,Xt=Ne[10]*He,Kn=Ne[11]*He;for(const Bn of Ze){const hr=[],kr=[];for(const tn of Bn){const Vt=tn.x+Qe.x,Cn=tn.y+Qe.y,Jn=Ne[0]*Vt+Ne[4]*Cn+Ne[12],Vn=Ne[1]*Vt+Ne[5]*Cn+Ne[13],tr=Ne[2]*Vt+Ne[6]*Cn+Ne[14],wr=Ne[3]*Vt+Ne[7]*Cn+Ne[15],ei=Jn+$t,ti=Vn+mn,En=tr+qt,dr=Math.max(wr+Zt,1e-5),Xi=Jn+qe,vr=Vn+en,un=tr+Xt,fr=Math.max(wr+Kn,1e-5),kn=new j(ei/dr,ti/dr);kn.z=En/dr,hr.push(kn);const Ir=new j(Xi/fr,vr/fr);Ir.z=un/fr,kr.push(Ir)}rt.push(hr),lt.push(kr)}return[rt,lt]}(te,se,de,me,ye)}(l,k,C,T,g,L?_:null,A,R,f.center.lat),G=r.queryGeometry;return function(te,se,de){let me=1/0;Tx(de,se)&&(me=$x(de,se[0]));for(let ye=0;ye<se.length;ye++){const _e=se[ye],Me=te[ye];for(let Ae=0;Ae<_e.length-1;Ae++){const Ke=_e[Ae],Ze=[Ke,_e[Ae+1],Me[Ae+1],Me[Ae],Ke];Sx(de,Ze)&&(me=Math.min(me,$x(de,Ze)))}}return me!==1/0&&me}(U[0],U[1],G.isPointQuery()?G.screenBounds:G.screenGeometry)}},line:class extends fo{constructor(r){super(r,qx),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof fl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,e){super.recalculate(r,e),this.paint._values["line-floorwidth"]=Zx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Ep(r)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(r){return new va(this,r)}queryRadius(r){const e=r,o=Wx(Kc("line-width",this,e),Kc("line-gap-width",this,e)),l=Kc("line-offset",this,e);return o/2+Math.abs(l)+_p(this.paint.get("line-translate"))}queryIntersectsFeature(r,e,o,l,h,f){if(r.queryGeometry.isAboveHorizon)return!1;const g=Ix(r.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,r.pixelToTileUnitsFactor),_=r.pixelToTileUnitsFactor/2*Wx(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),w=this.paint.get("line-offset").evaluate(e,o);return w&&(l=function(T,C){const k=[],A=new j(0,0);for(let L=0;L<T.length;L++){const R=T[L],U=[];for(let G=0;G<R.length;G++){const te=R[G-1],se=R[G],de=R[G+1],me=G===0?A:se.sub(te)._unit()._perp(),ye=G===R.length-1?A:de.sub(se)._unit()._perp(),_e=me._add(ye)._unit();_e._mult(1/(_e.x*ye.x+_e.y*ye.y)),U.push(_e._mult(C)._add(se))}k.push(U)}return k}(l,w*r.pixelToTileUnitsFactor)),function(T,C,k){for(let A=0;A<C.length;A++){const L=C[A];if(T.length>=3){for(let R=0;R<L.length;R++)if(Yc(T,L[R]))return!0}if(nI(T,L,k))return!0}return!1}(g,l,_)}isTileClipped(){return!0}},symbol:Lp,background:class extends fo{constructor(r){super(r,OA)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends fo{constructor(r){super(r,LA)}getProgramIds(){return["raster"]}},sky:class extends fo{constructor(r){super(r,RA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="sky-gradient"?this._updateColorRamp():r!=="sky-atmosphere-sun"&&r!=="sky-atmosphere-halo-color"&&r!=="sky-atmosphere-color"&&r!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Ay({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(r){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=r.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(r,e){const o=this.paint.get("sky-type");if(o==="atmosphere"){const l=this.paint.get("sky-atmosphere-sun"),h=!l,f=r.style.light,g=f.properties.get("position");return h&&f.properties.get("anchor")==="viewport"&&Mn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?Jy(g.azimuthal,90-g.polar,e):Jy(l[0],90-l[1],e)}if(o==="gradient"){const l=this.paint.get("sky-gradient-center");return Jy(l[0],90-l[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(r){this._skyboxInvalidated=!1,this._lightPosition=r.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const r=this.paint.get("sky-type");return r==="atmosphere"?["skyboxCapture","skybox"]:r==="gradient"?["skyboxGradient"]:null}}},{HTMLImageElement:wb,HTMLCanvasElement:Sb,HTMLVideoElement:Tb,ImageData:Eb,ImageBitmap:Dp}=H;class Rp{constructor(e,o,l,h){this.context=e,this.format=l,this.texture=e.gl.createTexture(),this.update(o,h)}update(e,o,l){const{width:h,height:f}=e,{context:g}=this,{gl:_}=g;if(_.bindTexture(_.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA&&(!o||o.premultiply!==!1)),l||this.size&&this.size[0]===h&&this.size[1]===f){const{x:w,y:T}=l||{x:0,y:0};e instanceof wb||e instanceof Sb||e instanceof Tb||e instanceof Eb||Dp&&e instanceof Dp?_.texSubImage2D(_.TEXTURE_2D,0,w,T,_.RGBA,_.UNSIGNED_BYTE,e):_.texSubImage2D(_.TEXTURE_2D,0,w,T,h,f,_.RGBA,_.UNSIGNED_BYTE,e.data)}else this.size=[h,f],e instanceof wb||e instanceof Sb||e instanceof Tb||e instanceof Eb||Dp&&e instanceof Dp?_.texImage2D(_.TEXTURE_2D,0,this.format,this.format,_.UNSIGNED_BYTE,e):_.texImage2D(_.TEXTURE_2D,0,this.format,h,f,0,this.format,_.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(e,o){const{context:l}=this,{gl:h}=l;h.bindTexture(h.TEXTURE_2D,this.texture),e!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,e),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?e===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:e),this.filter=e),o!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,o),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Qy{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.image=new us({width:e,height:o}),this.positions={},this.uploaded=!1}getDash(e,o){const l=this.getKey(e,o);return this.positions[l]}trim(){const e=this.width,o=this.height=oi(this.nextRow);this.image.resize({width:e,height:o})}getKey(e,o){return e.join(",")+o}getDashRanges(e,o,l){const h=[];let f=e.length%2==1?-e[e.length-1]*l:0,g=e[0]*l,_=!0;h.push({left:f,right:g,isDash:_,zeroLength:e[0]===0});let w=e[0];for(let T=1;T<e.length;T++){_=!_;const C=e[T];f=w*l,w+=C,g=w*l,h.push({left:f,right:g,isDash:_,zeroLength:C===0})}return h}addRoundDash(e,o,l){const h=o/2;for(let f=-l;f<=l;f++){const g=this.width*(this.nextRow+l+f);let _=0,w=e[_];for(let T=0;T<this.width;T++){T/w.right>1&&(w=e[++_]);const C=Math.abs(T-w.left),k=Math.abs(T-w.right),A=Math.min(C,k);let L;const R=f/l*(h+1);if(w.isDash){const U=h-Math.abs(R);L=Math.sqrt(A*A+U*U)}else L=h-Math.sqrt(A*A+R*R);this.image.data[g+T]=Math.max(0,Math.min(255,L+128))}}}addRegularDash(e,o){for(let w=e.length-1;w>=0;--w){const T=e[w],C=e[w+1];T.zeroLength?e.splice(w,1):C&&C.isDash===T.isDash&&(C.left=T.left,e.splice(w,1))}const l=e[0],h=e[e.length-1];l.isDash===h.isDash&&(l.left=h.left-this.width,h.right=l.right+this.width);const f=this.width*this.nextRow;let g=0,_=e[g];for(let w=0;w<this.width;w++){w/_.right>1&&(_=e[++g]);const T=Math.abs(w-_.left),C=Math.abs(w-_.right),k=Math.min(T,C);this.image.data[f+w]=Math.max(0,Math.min(255,(_.isDash?k:-k)+o+128))}}addDash(e,o){const l=this.getKey(e,o);if(this.positions[l])return this.positions[l];const h=o==="round",f=h?7:0,g=2*f+1;if(this.nextRow+g>this.height)return Mn("LineAtlas out of space"),null;e.length===0&&e.push(1);let _=0;for(let C=0;C<e.length;C++)e[C]<0&&(Mn("Negative value is found in line dasharray, replacing values with 0"),e[C]=0),_+=e[C];if(_!==0){const C=this.width/_,k=this.getDashRanges(e,this.width,C);h?this.addRoundDash(k,C,f):this.addRegularDash(k,o==="square"?.5*C:0)}const w=this.nextRow+f;this.nextRow+=g;const T={tl:[w,f],br:[_,0]};return this.positions[l]=T,T}}ot("LineAtlas",Qy);class FA{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const NA=H.performance;function Cb(r){const e=r?r.url.toString():void 0;return NA.getEntriesByName(e)}class jA{constructor(){this.tasks={},this.taskQueue=[],Na(["process"],this),this.invoker=new FA(this.process),this.nextId=0}add(e,o){const l=this.nextId++,h=function({type:f,isSymbolTile:g,zoom:_}){return _=_||0,f==="message"?0:f!=="maybePrepare"||g?f!=="parseTile"||g?f==="parseTile"&&g?300-_:f==="maybePrepare"&&g?400-_:500:200-_:100-_}(o);if(h===0){Ni();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[l]={fn:e,metadata:o,priority:h,id:l},this.taskQueue.push(l),this.invoker.trigger(),{cancel:()=>{delete this.tasks[l]}}}process(){Ni();try{if(this.taskQueue=this.taskQueue.filter(l=>!!this.tasks[l]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const o=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let e=null,o=1/0;for(let h=0;h<this.taskQueue.length;h++){const f=this.tasks[this.taskQueue[h]];f.priority<o&&(o=f.priority,e=h)}if(e===null)return null;const l=this.taskQueue[e];return this.taskQueue.splice(e,1),l}remove(){this.invoker.remove()}}function kb(r,e,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[r*l-2*Math.PI*6378137/2,e*l-2*Math.PI*6378137/2]}class Bp{constructor(e,o,l){this.z=e,this.x=o,this.y=l,this.key=Wh(0,e,e,o,l)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o){const l=function(f,g,_){var w=kb(256*f,256*(g=Math.pow(2,_)-g-1),_),T=kb(256*(f+1),256*(g+1),_);return w[0]+","+w[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),h=function(f,g,_){let w,T="";for(let C=f;C>0;C--)w=1<<C-1,T+=(g&w?1:0)+(_&w?2:0);return T}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",l)}toString(){return`${this.z}/${this.x}/${this.y}`}}class e_{constructor(e,o){this.wrap=e,this.canonical=o,this.key=Wh(e,o.z,o.z,o.x,o.y)}}class Qr{constructor(e,o,l,h,f){this.overscaledZ=e,this.wrap=o,this.canonical=new Bp(l,+h,+f),this.key=o===0&&e===l?this.canonical.key:Wh(o,e,l,h,f)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const o=this.canonical.z-e;return e>this.canonical.z?new Qr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qr(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o=!0){if(this.overscaledZ===e&&o)return this.key;if(e>this.canonical.z)return Wh(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y);{const l=this.canonical.z-e;return Wh(this.wrap*+o,e,e,this.canonical.x>>l,this.canonical.y>>l)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const o=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new Qr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,h=2*this.canonical.y;return[new Qr(o,this.wrap,o,l,h),new Qr(o,this.wrap,o,l+1,h),new Qr(o,this.wrap,o,l,h+1),new Qr(o,this.wrap,o,l+1,h+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Qr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Qr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new e_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Wh(r,e,o,l,h){const f=1<<Math.min(o,22);let g=f*(h%f)+l%f;return r&&o<22&&(g+=f*f*((r<0?-2*r-1:2*r)%(1<<2*(22-o)))),16*(32*g+o)+(e-o)}ot("CanonicalTileID",Bp),ot("OverscaledTileID",Qr,{omit:["projMatrix"]});class au{constructor(e,o,l){this.func=e,this.mask=o,this.range=l}}au.ReadOnly=!1,au.ReadWrite=!0,au.disabled=new au(519,au.ReadOnly,[0,1]);const t_=7680;class n_{constructor(e,o,l,h,f,g){this.test=e,this.ref=o,this.mask=l,this.fail=h,this.depthFail=f,this.pass=g}}n_.disabled=new n_({func:519,mask:0},0,0,t_,t_,t_);class Wo{constructor(e,o,l){this.blendFunction=e,this.blendColor=o,this.mask=l}}Wo.Replace=[1,0],Wo.disabled=new Wo(Wo.Replace,Ht.transparent,[!1,!1,!1,!1]),Wo.unblended=new Wo(Wo.Replace,Ht.transparent,[!0,!0,!0,!0]),Wo.alphaBlended=new Wo([1,771],Ht.transparent,[!0,!0,!0,!0]);const r_=1029,i_=2305;class go{constructor(e,o,l){this.enable=e,this.mode=o,this.frontFace=l}}go.disabled=new go(!1,r_,i_),go.backCCW=new go(!0,r_,i_),go.backCW=new go(!0,r_,2304),go.frontCW=new go(!0,1028,2304),go.frontCCW=new go(!0,1028,i_);class Ib{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){const l=e[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class Ab{constructor(e,o,l,h,f){this.type="Feature",this._vectorTileFeature=e,e._z=o,e._x=l,e._y=h,this.properties=e.properties,this.id=f}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(e[o]=this[o]);return e}}class UA{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,l){const h=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][h]=this.stateChanges[e][h]||{},Dn(this.stateChanges[e][h],l),this.deletedStates[e]===null){this.deletedStates[e]={};for(const f in this.state[e])f!==h&&(this.deletedStates[e][f]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][h]===null){this.deletedStates[e][h]={};for(const f in this.state[e][h])l[f]||(this.deletedStates[e][h][f]=null)}else for(const f in l)this.deletedStates[e]&&this.deletedStates[e][h]&&this.deletedStates[e][h][f]===null&&delete this.deletedStates[e][h][f]}removeFeatureState(e,o,l){if(this.deletedStates[e]===null)return;const h=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},l&&o!==void 0)this.deletedStates[e][h]!==null&&(this.deletedStates[e][h]=this.deletedStates[e][h]||{},this.deletedStates[e][h][l]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][h])for(l in this.deletedStates[e][h]={},this.stateChanges[e][h])this.deletedStates[e][h][l]=null;else this.deletedStates[e][h]=null;else this.deletedStates[e]=null}getState(e,o){const l=String(o),h=Dn({},(this.state[e]||{})[l],(this.stateChanges[e]||{})[l]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const f=this.deletedStates[e][o];if(f===null)return{};for(const g in f)delete h[g]}return h}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const l={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const f={};for(const g in this.stateChanges[h])this.state[h][g]||(this.state[h][g]={}),Dn(this.state[h][g],this.stateChanges[h][g]),f[g]=this.state[h][g];l[h]=f}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const f={};if(this.deletedStates[h]===null)for(const g in this.state[h])f[g]={},this.state[h][g]={};else for(const g in this.deletedStates[h]){if(this.deletedStates[h][g]===null)this.state[h][g]={};else for(const _ of Object.keys(this.deletedStates[h][g]))delete this.state[h][g][_];f[g]=this.state[h][g]}l[h]=l[h]||{},Dn(l[h],f)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(const h in e)e[h].setFeatureState(l,o)}}class Pb{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,o){const l=this.toIdx(e,o);return{min:this.minimums[l],max:this.maximums[l]}}isLeaf(e,o){return this.leaves[this.toIdx(e,o)]}toIdx(e,o){return o*this.size+e}}function Mb(r,e,o,l){let h=0,f=Number.MAX_VALUE;for(let g=0;g<3;g++)if(Math.abs(l[g])<1e-15){if(o[g]<r[g]||o[g]>e[g])return null}else{const _=1/l[g];let w=(r[g]-o[g])*_,T=(e[g]-o[g])*_;if(w>T){const C=w;w=T,T=C}if(w>h&&(h=w),T<f&&(f=T),h>f)return null}return h}function zb(r,e,o,l,h,f,g,_,w,T,C){const k=l-r,A=h-e,L=f-o,R=g-r,U=_-e,G=w-o,te=C[1]*G-C[2]*U,se=C[2]*R-C[0]*G,de=C[0]*U-C[1]*R,me=k*te+A*se+L*de;if(Math.abs(me)<1e-15)return null;const ye=1/me,_e=T[0]-r,Me=T[1]-e,Ae=T[2]-o,Ke=(_e*te+Me*se+Ae*de)*ye;if(Ke<0||Ke>1)return null;const Ze=Me*L-Ae*A,Pe=Ae*k-_e*L,He=_e*A-Me*k,Qe=(C[0]*Ze+C[1]*Pe+C[2]*He)*ye;return Qe<0||Ke+Qe>1?null:(R*Ze+U*Pe+G*He)*ye}function Ob(r,e,o){return(r-e)/(o-e)}function Lb(r,e,o,l,h,f,g,_,w){const T=1<<o,C=f-l,k=g-h,A=(r+1)/T*C+l,L=(e+0)/T*k+h,R=(e+1)/T*k+h;_[0]=(r+0)/T*C+l,_[1]=L,w[0]=A,w[1]=R}class Db{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(f){const g=Math.ceil(Math.log2(f.dim/8)),_=[];let w=Math.ceil(Math.pow(2,g));const T=1/w,C=(L,R,U,G,te)=>{const se=G?1:0,de=(L+1)*U-se,me=R*U,ye=(R+1)*U-se;te[0]=L*U,te[1]=me,te[2]=de,te[3]=ye};let k=new Pb(w);const A=[];for(let L=0;L<w*w;L++){C(L%w,Math.floor(L/w),T,!1,A);const R=ps(A[0],A[1],f),U=ps(A[2],A[1],f),G=ps(A[2],A[3],f),te=ps(A[0],A[3],f);k.minimums.push(Math.min(R,U,G,te)),k.maximums.push(Math.max(R,U,G,te)),k.leaves.push(1)}for(_.push(k),w/=2;w>=1;w/=2){const L=_[_.length-1];k=new Pb(w);for(let R=0;R<w*w;R++){C(R%w,Math.floor(R/w),2,!0,A);const U=L.getElevation(A[0],A[1]),G=L.getElevation(A[2],A[1]),te=L.getElevation(A[2],A[3]),se=L.getElevation(A[0],A[3]),de=L.isLeaf(A[0],A[1]),me=L.isLeaf(A[2],A[1]),ye=L.isLeaf(A[2],A[3]),_e=L.isLeaf(A[0],A[3]),Me=Math.min(U.min,G.min,te.min,se.min),Ae=Math.max(U.max,G.max,te.max,se.max),Ke=de&&me&&ye&&_e;k.maximums.push(Ae),k.minimums.push(Me),k.leaves.push(Ae-Me<=5&&Ke?1:0)}_.push(k)}return _}(this.dem),l=o.length-1,h=o[l];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(o,0,0,l,0)}raycastRoot(e,o,l,h,f,g,_=1){return Mb([e,o,-100],[l,h,this.maximums[0]*_],f,g)}raycast(e,o,l,h,f,g,_=1){if(!this.nodeCount)return null;const w=this.raycastRoot(e,o,l,h,f,g,_);if(w==null)return null;const T=[],C=[],k=[],A=[],L=[{idx:0,t:w,nodex:0,nodey:0,depth:0}];for(;L.length>0;){const{idx:R,t:U,nodex:G,nodey:te,depth:se}=L.pop();if(this.leaves[R]){Lb(G,te,se,e,o,l,h,k,A);const me=1<<se,ye=(G+0)/me,_e=(G+1)/me,Me=(te+0)/me,Ae=(te+1)/me,Ke=ps(ye,Me,this.dem)*_,Ze=ps(_e,Me,this.dem)*_,Pe=ps(_e,Ae,this.dem)*_,He=ps(ye,Ae,this.dem)*_,Qe=zb(k[0],k[1],Ke,A[0],k[1],Ze,A[0],A[1],Pe,f,g),Ne=zb(A[0],A[1],Pe,k[0],A[1],He,k[0],k[1],Ke,f,g),rt=Math.min(Qe!==null?Qe:Number.MAX_VALUE,Ne!==null?Ne:Number.MAX_VALUE);if(rt!==Number.MAX_VALUE)return rt;{const lt=_n([],f,g,U);if(Rb(Ke,Ze,He,Pe,Ob(lt[0],k[0],A[0]),Ob(lt[1],k[1],A[1]))>=lt[2])return U}continue}let de=0;for(let me=0;me<this._siblingOffset.length;me++){Lb((G<<1)+this._siblingOffset[me][0],(te<<1)+this._siblingOffset[me][1],se+1,e,o,l,h,k,A),k[2]=-100,A[2]=this.maximums[this.childOffsets[R]+me]*_;const ye=Mb(k,A,f,g);if(ye!=null){const _e=ye;T[me]=_e;let Me=!1;for(let Ae=0;Ae<de&&!Me;Ae++)_e>=T[C[Ae]]&&(C.splice(Ae,0,me),Me=!0);Me||(C[de]=me),de++}}for(let me=0;me<de;me++){const ye=C[me];L.push({idx:this.childOffsets[R]+ye,t:T[ye],nodex:(G<<1)+this._siblingOffset[ye][0],nodey:(te<<1)+this._siblingOffset[ye][1],depth:se+1})}}return null}_addNode(e,o,l){return this.minimums.push(e),this.maximums.push(o),this.leaves.push(l),this.childOffsets.push(0),this.nodeCount++}_construct(e,o,l,h,f){if(e[h].isLeaf(o,l)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const g=h-1,_=e[g];let w,T=0;for(let C=0;C<this._siblingOffset.length;C++){const k=2*o+this._siblingOffset[C][0],A=2*l+this._siblingOffset[C][1],L=_.getElevation(k,A),R=_.isLeaf(k,A),U=this._addNode(L.min,L.max,R);R&&(T|=1<<C),w||(w=U)}for(let C=0;C<this._siblingOffset.length;C++)T&1<<C||this._construct(e,2*o+this._siblingOffset[C][0],2*l+this._siblingOffset[C][1],g,w+C)}}function Rb(r,e,o,l,h,f){return rn(rn(r,o,f),rn(e,l,f),h)}function ps(r,e,o){const l=o.dim,h=sn(r*l-.5,0,l-1),f=sn(e*l-.5,0,l-1),g=Math.floor(h),_=Math.floor(f),w=Math.min(g+1,l-1),T=Math.min(_+1,l-1);return Rb(o.get(g,_),o.get(w,_),o.get(g,T),o.get(w,T),h-g,f-_)}const Bb={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Fp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,o,l,h=!1,f=!1){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return Mn(`"${l}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const g=this.dim=o.height-2;if(this.data=new Uint32Array(o.data.buffer),this.encoding=l||"mapbox",this.borderReady=h,!h){for(let _=0;_<g;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(g,_)]=this.data[this._idx(g-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,g)]=this.data[this._idx(_,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)],f&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Db(this)}get(e,o,l=!1){const h=new Uint8Array(this.data.buffer);l&&(e=sn(e,-1,this.dim),o=sn(o,-1,this.dim));const f=4*this._idx(e,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[f],h[f+1],h[f+2])}static getUnpackVector(e){return Bb[e]}get unpackVector(){return Bb[this.encoding]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}_unpackMapbox(e,o,l){return(256*e*256+256*o+l)/10-1e4}_unpackTerrarium(e,o,l){return 256*e+o+l/256-32768}static pack(e,o){const l=[0,0,0,0],h=Fp.getUnpackVector(o);let f=Math.floor((e+h[3])/h[2]);return l[2]=f%256,f=Math.floor(f/256),l[1]=f%256,f=Math.floor(f/256),l[0]=f,l}getPixels(){return new Mi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,o,l){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let h=o*this.dim,f=o*this.dim+this.dim,g=l*this.dim,_=l*this.dim+this.dim;switch(o){case-1:h=f-1;break;case 1:f=h+1}switch(l){case-1:g=_-1;break;case 1:_=g+1}const w=-o*this.dim,T=-l*this.dim;for(let C=g;C<_;C++)for(let k=h;k<f;k++)this.data[this._idx(k,C)]=e.data[this._idx(k+w,C+T)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}ot("DEMData",Fp),ot("DemMinMaxQuadTree",Db,{omit:["dem"]});class VA{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,l){const h=e.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const f={value:o,timeout:void 0};if(l!==void 0&&(f.timeout=setTimeout(()=>{this.remove(e,f)},l)),this.data[h].push(f),this.order.push(h),this.order.length>this.max){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const l=e.wrapped().key,h=o===void 0?0:this.data[l].indexOf(o),f=this.data[l][h];return this.data[l].splice(h,1),f.timeout&&clearTimeout(f.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(f.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const l in this.data)for(const h of this.data[l])e(h.value)||o.push(h);for(const l of o)this.remove(l.value.tileID,l)}}class Ll extends Lo{constructor(e,o,l){super(),this.id=e,this._onlySymbols=l,o.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new VA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=null,this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new UA}onAdd(e){this.map=e,this._minTileCacheSize=e?e._minTileCacheSize:null,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,o){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,o)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const l=this._tiles[o];l.upload(e),l.prepare(this.map.style.imageManager)}}getIds(){return Fa(this._tiles).map(e=>e.tileID).sort(Fb).map(e=>e.key)}getRenderableIds(e){const o=[];for(const l in this._tiles)this._isIdRenderable(+l,e)&&o.push(this._tiles[l]);return e?o.sort((l,h)=>{const f=l.tileID,g=h.tileID,_=new j(f.canonical.x,f.canonical.y)._rotate(this.transform.angle),w=new j(g.canonical.x,g.canonical.y)._rotate(this.transform.angle);return f.overscaledZ-g.overscaledZ||w.y-_.y||w.x-_.x}).map(l=>l.tileID.key):o.map(l=>l.tileID).sort(Fb).map(l=>l.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,o){const l=this._tiles[e];l&&(l.state!=="loading"&&(l.state=o),this._loadTile(l,this._tileLoaded.bind(this,l,e,o)))}_tileLoaded(e,o,l,h){if(h)if(e.state="errored",h.status!==404)this._source.fire(new dc(h,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const f=this.map.painter.terrain;this.update(this.transform,f.getScaledDemTileSize(),!0),f.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Xr.now(),l==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Oo("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const o=this.getRenderableIds();for(let h=0;h<o.length;h++){const f=o[h];if(e.neighboringTiles&&e.neighboringTiles[f]){const g=this.getTileByID(f);l(e,g),l(g,e)}}function l(h,f){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let g=f.tileID.canonical.x-h.tileID.canonical.x;const _=f.tileID.canonical.y-h.tileID.canonical.y,w=Math.pow(2,h.tileID.canonical.z),T=f.tileID.key;g===0&&_===0||Math.abs(_)>1||(Math.abs(g)>1&&(Math.abs(g+w)===1?g+=w:Math.abs(g-w)===1&&(g-=w)),f.dem&&h.dem&&(h.dem.backfillBorder(f.dem,g,_),h.neighboringTiles&&h.neighboringTiles[T]&&(h.neighboringTiles[T].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,l,h){for(const f in this._tiles){let g=this._tiles[f];if(h[f]||!g.hasData()||g.tileID.overscaledZ<=o||g.tileID.overscaledZ>l)continue;let _=g.tileID;for(;g&&g.tileID.overscaledZ>o+1;){const T=g.tileID.scaledTo(g.tileID.overscaledZ-1);g=this._tiles[T.key],g&&g.hasData()&&(_=T)}let w=_;for(;w.overscaledZ>o;)if(w=w.scaledTo(w.overscaledZ-1),e[w.key]){h[_.key]=_;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const l=this._loadedParentTiles[e.key];return l&&l.tileID.overscaledZ>=o?l:null}for(let l=e.overscaledZ-1;l>=o;l--){const h=e.scaledTo(l),f=this._getLoadedTile(h);if(f)return f}}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,o){o=o||this._source.tileSize;const l=Math.ceil(e.width/o)+1,h=Math.ceil(e.height/o)+1,f=Math.floor(l*h*5),g=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,f):f,_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const l={};for(const h in this._tiles){const f=this._tiles[h];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+o),l[f.tileID.key]=f}this._tiles=l;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(e,o,l){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!l)return;let h;this.updateCacheSize(e,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(_=>new Qr(_.canonical.z,_.wrap,_.canonical.z,_.canonical.x,_.canonical.y)):(h=e.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!l,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(_=>this._source.hasTile(_)))):h=[];const f=this._updateRetainedTiles(h);if(Nb(this._source.type)&&h.length!==0){const _={},w={},T=Object.keys(f);for(const k of T){const A=f[k],L=this._tiles[k];if(!L||L.fadeEndTime&&L.fadeEndTime<=Xr.now())continue;const R=this.findLoadedParent(A,Math.max(A.overscaledZ-Ll.maxOverzooming,this._source.minzoom));R&&(this._addTile(R.tileID),_[R.tileID.key]=R.tileID),w[k]=A}const C=h[h.length-1].overscaledZ;for(const k in this._tiles){const A=this._tiles[k];if(f[k]||!A.hasData())continue;let L=A.tileID;for(;L.overscaledZ>C;){L=L.scaledTo(L.overscaledZ-1);const R=this._tiles[L.key];if(R&&R.hasData()&&w[L.key]){f[k]=A.tileID;break}}}for(const k in _)f[k]||(this._coveredTiles[k]=!0,f[k]=_[k])}for(const _ in f)this._tiles[_].clearFadeHold();const g=function(_,w){const T=[];for(const C in _)C in w||T.push(C);return T}(this._tiles,f);for(const _ of g){const w=this._tiles[_];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(+_)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const o={};if(e.length===0)return o;const l={},h=e.reduce((T,C)=>Math.min(T,C.overscaledZ),1/0),f=e[0].overscaledZ,g=Math.max(f-Ll.maxOverzooming,this._source.minzoom),_=Math.max(f+Ll.maxUnderzooming,this._source.minzoom),w={};for(const T of e){const C=this._addTile(T);o[T.key]=T,C.hasData()||h<this._source.maxzoom&&(w[T.key]=T)}this._retainLoadedChildren(w,h,_,o);for(const T of e){let C=this._tiles[T.key];if(C.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const A=T.children(this._source.maxzoom)[0],L=this.getTile(A);if(L&&L.hasData()){o[A.key]=A;continue}}else{const A=T.children(this._source.maxzoom);if(o[A[0].key]&&o[A[1].key]&&o[A[2].key]&&o[A[3].key])continue}let k=C.wasRequested();for(let A=T.overscaledZ-1;A>=g;--A){const L=T.scaledTo(A);if(l[L.key]||(l[L.key]=!0,C=this.getTile(L),!C&&k&&(C=this._addTile(L)),C&&(o[L.key]=L,k=C.wasRequested(),C.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let l,h=this._tiles[e].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){l=this._loadedParentTiles[h.key];break}o.push(h.key);const f=h.scaledTo(h.overscaledZ-1);if(l=this._getLoadedTile(f),l)break;h=f}for(const f of o)this._loadedParentTiles[f]=l}}_addTile(e){let o=this._tiles[e.key];if(o)return o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const l=Boolean(o);if(!l){const h=this.map?this.map.painter:null,f=this._source.type==="raster"||this._source.type==="raster-dem";o=new a_(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,h,f),this._loadTile(o,this._tileLoaded.bind(this,o,e.key,o.state))}return o?(o.uses++,this._tiles[e.key]=o,l||this._source.fire(new Oo("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const l=o.getExpiryTimeout();l&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},l))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset()}tilesIn(e,o,l){const h=[],f=this.transform;if(!f)return h;for(const g in this._tiles){const _=this._tiles[g];if(l&&_.clearQueryDebugViz(),_.holdingForFade())continue;const w=e.containsTile(_,f,o);w&&h.push(w)}return h}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(l=>this._tiles[l].tileID);for(const l of o)l.projMatrix=this.transform.calculateProjMatrix(l.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Nb(this._source.type))for(const e in this._tiles){const o=this._tiles[e];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=Xr.now())return!0}return!1}setFeatureState(e,o,l){this._state.updateState(e=e||"_geojsonTileLayer",o,l)}removeFeatureState(e,o,l){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,l)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,l){const h=this._tiles[e];h&&h.setDependencies(o,l)}reloadTilesForDependencies(e,o){for(const l in this._tiles)this._tiles[l].hasDependency(e,o)&&this._reloadTile(+l,"reloading");this._cache.filter(l=>!l.hasDependency(e,o))}_preloadTiles(e,o){const l=new Map,h=Array.isArray(e)?e:[e],f=this.map.painter.terrain,g=this.usedForTerrain&&f?f.getScaledDemTileSize():this._source.tileSize;for(const T of h){const C=T.coveringTiles({tileSize:g,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const k of C)l.set(k.key,k);this.usedForTerrain&&T.updateElevation(!1)}const _=Array.from(l.values()),w=this._source.type==="raster"||this._source.type==="raster-dem";ua(_,(T,C)=>{const k=new a_(T,this._source.tileSize*T.overscaleFactor(),this.transform.tileZoom,this.map.painter,w);this._loadTile(k,A=>{this._source.type==="raster-dem"&&k.dem&&this._backfillDEM(k),C(A,k)})},o)}}function Fb(r,e){const o=Math.abs(2*r.wrap)-+(r.wrap<0),l=Math.abs(2*e.wrap)-+(e.wrap<0);return r.overscaledZ-e.overscaledZ||l-o||e.canonical.y-r.canonical.y||e.canonical.x-r.canonical.x}function Nb(r){return r==="raster"||r==="image"||r==="video"}Ll.maxOverzooming=10,Ll.maxUnderzooming=3;class Np{constructor(e,o,l){this._demTile=e,this._dem=this._demTile.dem,this._scale=o,this._offset=l}static create(e,o,l){const h=l||e.findDEMTileFor(o);if(!h||!h.dem)return;const f=h.dem,g=h.tileID,_=1<<o.canonical.z-g.canonical.z;return new Np(h,h.tileSize/Nt/_,[(o.canonical.x/_-g.canonical.x)*f.dim,(o.canonical.y/_-g.canonical.y)*f.dim])}tileCoordToPixel(e,o){const l=o*this._scale+this._offset[1],h=Math.floor(e*this._scale+this._offset[0]),f=Math.floor(l);return new j(h,f)}getElevationAt(e,o,l,h){const f=e*this._scale+this._offset[0],g=o*this._scale+this._offset[1],_=Math.floor(f),w=Math.floor(g),T=this._dem;return h=!!h,l?rn(rn(T.get(_,w,h),T.get(_,w+1,h),g-w),rn(T.get(_+1,w,h),T.get(_+1,w+1,h),g-w),f-_):T.get(_,w,h)}getElevationAtPixel(e,o,l){return this._dem.get(e,o,!!l)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*po(1,e)*this._dem.stride}}class jb{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new El(Nt,16,0),this.featureIndexArray=new ux,this.promoteId=o}insert(e,o,l,h,f,g=0){const _=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,h,f,g);const w=this.grid;for(let T=0;T<o.length;T++){const C=o[T],k=[1/0,1/0,-1/0,-1/0];for(let A=0;A<C.length;A++){const L=C[A];k[0]=Math.min(k[0],L.x),k[1]=Math.min(k[1],L.y),k[2]=Math.max(k[2],L.x),k[3]=Math.max(k[3],L.y)}k[0]<Nt&&k[1]<Nt&&k[2]>=0&&k[3]>=0&&w.insert(_,k[0],k[1],k[2],k[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ol.VectorTile(new Gh(this.rawTileData)).layers,this.sourceLayerCoder=new Ib(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,o,l,h){this.loadVTLayers();const f=e.params||{},g=jc(f.filter),_=e.tileResult,w=e.transform,T=_.bufferedTilespaceBounds,C=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(R,U,G,te)=>kx(_.bufferedTilespaceGeometry,R,U,G,te));C.sort($A);let k=null;w.elevation&&C.length>0&&(k=Np.create(w.elevation,this.tileID));const A={};let L;for(let R=0;R<C.length;R++){const U=C[R];if(U===L)continue;L=U;const G=this.featureIndexArray.get(U);let te=null;this.loadMatchingFeature(A,G,g,f.layers,f.availableImages,o,l,h,(se,de,me,ye=0)=>(te||(te=ba(se,this.tileID.canonical,e.tileTransform)),de.queryIntersectsFeature(_,se,me,te,this.z,e.transform,e.pixelPosMatrix,k,ye)))}return A}loadMatchingFeature(e,o,l,h,f,g,_,w,T){const{featureIndex:C,bucketIndex:k,sourceLayerIndex:A,layoutVertexArrayOffset:L}=o,R=this.bucketLayerIDs[k];if(h&&!function(se,de){for(let me=0;me<se.length;me++)if(de.indexOf(se[me])>=0)return!0;return!1}(h,R))return;const U=this.sourceLayerCoder.decode(A),G=this.vtLayers[U].feature(C);if(l.needGeometry){const se=zl(G,!0);if(!l.filter(new Ct(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!l.filter(new Ct(this.tileID.overscaledZ),G))return;const te=this.getId(G,U);for(let se=0;se<R.length;se++){const de=R[se];if(h&&h.indexOf(de)<0)continue;const me=g[de];if(!me)continue;let ye={};te!==void 0&&w&&(ye=w.getState(me.sourceLayer||"_geojsonTileLayer",te));const _e=Dn({},_[de]);_e.paint=Ub(_e.paint,me.paint,G,ye,f),_e.layout=Ub(_e.layout,me.layout,G,ye,f);const Me=!T||T(G,me,ye,L);if(!Me)continue;const Ae=new Ab(G,this.z,this.x,this.y,te);Ae.layer=_e;let Ke=e[de];Ke===void 0&&(Ke=e[de]=[]),Ke.push({featureIndex:C,feature:Ae,intersectionZ:Me})}}lookupSymbolFeatures(e,o,l,h,f,g,_,w){const T={};this.loadVTLayers();const C=jc(f);for(const k of e)this.loadMatchingFeature(T,{bucketIndex:l,sourceLayerIndex:h,featureIndex:k,layoutVertexArrayOffset:0},C,g,_,w,o);return T}loadFeature(e){const{featureIndex:o,sourceLayerIndex:l}=e;this.loadVTLayers();const h=this.sourceLayerCoder.decode(l),f=this.vtFeatures[h];if(f[o])return f[o];const g=this.vtLayers[h].feature(o);return f[o]=g,g}hasLayer(e){for(const o of this.bucketLayerIDs)for(const l of o)if(e===l)return!0;return!1}getId(e,o){let l=e.id;return this.promoteId&&(l=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof l=="boolean"&&(l=Number(l))),l}}function Ub(r,e,o,l,h){return Po(r,(f,g)=>{const _=e instanceof ma?e.get(g):null;return _&&_.evaluate?_.evaluate(o,l,h):_})}function $A(r,e){return e-r}ot("FeatureIndex",jb,{omit:["rawTileData","sourceLayerCoder"]});var GA=On([{name:"a_pos",type:"Int16",components:2}]);const Hi=32,Ho=33,ms=new Uint16Array(8184);for(let r=0;r<2046;r++){let e=r+2,o=0,l=0,h=0,f=0,g=0,_=0;for(1&e?h=f=g=Hi:o=l=_=Hi;(e>>=1)>1;){const T=o+h>>1,C=l+f>>1;1&e?(h=o,f=l,o=g,l=_):(o=h,l=f,h=g,f=_),g=T,_=C}const w=4*r;ms[w+0]=o,ms[w+1]=l,ms[w+2]=h,ms[w+3]=f}const Xo=new Uint16Array(2178),gs=new Uint8Array(1089),jp=new Uint16Array(1089);function Vb(r){return r===0?-.03125:r===32?.03125:0}var o_=On([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const $b={type:2,extent:Nt,loadGeometry:()=>[[new j(0,0),new j(8193,0),new j(8193,8193),new j(0,8193),new j(0,0)]]};class a_{constructor(e,o,l,h,f){this.tileID=e,this.uid=Qs(),this.uses=0,this.tileSize=o,this.tileZoom=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=f,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(e){const o=e+this.timeAdded;o<Xr.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=su(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,o,l){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(h,f){const g={};if(!f)return g;for(const _ of h){const w=_.layerIds.map(T=>f.getLayer(T)).filter(Boolean);if(w.length!==0){_.layers=w,_.stateDependentLayerIds&&(_.stateDependentLayers=_.stateDependentLayerIds.map(T=>w.filter(C=>C.id===T)[0]));for(const T of w)g[T.id]=_}}return g}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const f=this.buckets[h];if(f instanceof fs){if(this.hasSymbolBuckets=!0,!l)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const f=this.buckets[h];if(f instanceof fs&&f.hasRTLText){this.hasRTLText=!0,Gt.isLoading()||Gt.isLoaded()||di()!=="deferred"||Ai();break}}this.queryPadding=0;for(const h in this.buckets){const f=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(h).queryRadius(f))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new _y}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this.globeGridBuffer&&(this.globeGridBuffer.destroy(),this.globeGridBuffer=null),this.globePoleBuffer&&(this.globePoleBuffer.destroy(),this.globePoleBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const l in this.buckets){const h=this.buckets[l];h.uploadPending()&&h.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Rp(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Rp(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Rp(e,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,l,h,f,g,_,w){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:_,transform:g,params:f,tileTransform:this.tileTransform},e,o,l):{}}querySourceFeatures(e,o){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const h=l.loadVTLayers(),f=o?o.sourceLayer:"",g=h._geojsonTileLayer||h[f];if(!g)return;const _=jc(o&&o.filter),{z:w,x:T,y:C}=this.tileID.canonical,k={z:w,x:T,y:C};for(let A=0;A<g.length;A++){const L=g.feature(A);if(_.needGeometry){const G=zl(L,!0);if(!_.filter(new Ct(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!_.filter(new Ct(this.tileID.overscaledZ),L))continue;const R=l.getId(L,f),U=new Ab(L,w,T,C,R);U.tile=k,e.push(U)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const l=$a(e.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const l=Date.now();let h=!1;if(this.expirationTime>l)h=!1;else if(o)if(this.expirationTime<o)h=!0;else{const f=this.expirationTime-o;f?this.expirationTime=l+Math.max(f,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!o)return;const l=this.latestFeatureIndex.loadVTLayers(),h=o.style.listImages();for(const f in this.buckets){if(!o.style.hasLayer(f))continue;const g=this.buckets[f],_=g.layers[0].sourceLayer||"_geojsonTileLayer",w=l[_],T=e[_];if(!w||!T||Object.keys(T).length===0)continue;if(g.update(T,w,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),g instanceof Ep||g instanceof Tp){const k=o.style._getSourceCache(g.layers[0].source);o._terrain&&o._terrain.enabled&&k&&g.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(k.id,this.tileID)}const C=o&&o.style&&o.style.getLayer(f);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Xr.now()+e}setDependencies(e,o){const l={};for(const h of o)l[h]=!0;this.dependencies[e]=l}hasDependency(e,o){for(const l of e){const h=this.dependencies[l];if(h){for(const f of o)if(h[f])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const l=ba($b,this.tileID.canonical,this.tileTransform)[0],h=new Gc,f=new up;for(let g=0;g<l.length;g++){const{x:_,y:w}=l[g];h.emplaceBack(_,w),f.emplaceBack(g)}f.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(f),this._tileDebugBuffer=e.createVertexBuffer(h,o_.members),this._tileDebugSegments=Xn.simpleSegment(0,0,h.length,f.length)}_makeTileBoundsBuffers(e,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const l=ba($b,this.tileID.canonical,this.tileTransform)[0];let h,f;if(this.isRaster){const g=function(_,w){const T=su(_,w),C=Math.pow(2,_.z);for(let G=0;G<Ho;G++)for(let te=0;te<Ho;te++){const se=xa((_.x+(te+Vb(te))/Hi)/C),de=Wi((_.y+(G+Vb(G))/Hi)/C),me=w.project(se,de),ye=G*Ho+te;Xo[2*ye+0]=Math.round((me.x*T.scale-T.x)*Nt),Xo[2*ye+1]=Math.round((me.y*T.scale-T.y)*Nt)}gs.fill(0),jp.fill(0);for(let G=2045;G>=0;G--){const te=4*G,se=ms[te+0],de=ms[te+1],me=ms[te+2],ye=ms[te+3],_e=se+me>>1,Me=de+ye>>1,Ae=_e+Me-de,Ke=Me+se-_e,Ze=de*Ho+se,Pe=ye*Ho+me,He=Me*Ho+_e,Qe=Math.hypot((Xo[2*Ze+0]+Xo[2*Pe+0])/2-Xo[2*He+0],(Xo[2*Ze+1]+Xo[2*Pe+1])/2-Xo[2*He+1])>=16;if(gs[He]=gs[He]||(Qe?1:0),G<1022){const Ne=(de+Ke>>1)*Ho+(se+Ae>>1),rt=(ye+Ke>>1)*Ho+(me+Ae>>1);gs[He]=gs[He]||gs[Ne]||gs[rt]}}const k=new qc,A=new Pi;let L=0;function R(G,te){const se=te*Ho+G;return jp[se]===0&&(k.emplaceBack(Xo[2*se+0],Xo[2*se+1],G*Nt/Hi,te*Nt/Hi),jp[se]=++L),jp[se]-1}function U(G,te,se,de,me,ye){const _e=G+se>>1,Me=te+de>>1;if(Math.abs(G-me)+Math.abs(te-ye)>1&&gs[Me*Ho+_e])U(me,ye,G,te,_e,Me),U(se,de,me,ye,_e,Me);else{const Ae=R(G,te),Ke=R(se,de),Ze=R(me,ye);A.emplaceBack(Ae,Ke,Ze)}}return U(0,0,Hi,Hi,Hi,0),U(Hi,Hi,0,0,0,Hi),{vertices:k,indices:A}}(this.tileID.canonical,o);h=g.vertices,f=g.indices}else{h=new qc,f=new Pi;for(const{x:_,y:w}of l)h.emplaceBack(_,w,0,0);const g=vp(h.int16,void 0,4);for(let _=0;_<g.length;_+=3)f.emplaceBack(g[_],g[_+1],g[_+2])}this._tileBoundsBuffer=e.createVertexBuffer(h,o_.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(f),this._tileBoundsSegments=Xn.simpleSegment(0,0,h.length,f.length)}}const qA=On([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),ZA=On([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Gb}=qA;function Dl(r,e){const o=r.fovAboveCenter,l=r.elevation?r.elevation.getMinElevationBelowMSL()*e:0,h=(r._camera.position[2]*r.worldSize-l)/Math.cos(r._pitch),f=Math.sin(o)*h/Math.sin(Math.max(Math.PI/2-r._pitch-o,.01)),g=Math.sin(r._pitch)*f+h;return Math.min(1.01*g,h*(1/r._horizonShift))}const s_=Nt/Math.PI/2,fi=-s_,pi=s_,WA=[new mo([fi,fi,fi],[pi,pi,pi]),new mo([fi,fi,fi],[0,0,pi]),new mo([0,fi,fi],[pi,0,pi]),new mo([fi,0,fi],[0,pi,pi]),new mo([0,0,fi],[pi,pi,pi])];function Up(r){if(r.z<=1)return WA[r.z+2*r.y+r.x];const[e,o]=qb(r),l=[Vp(e[0],e[1]),Vp(e[0],o[1]),Vp(o[0],e[1]),Vp(o[0],o[1])],h=[pi,pi,pi],f=[fi,fi,fi];for(const g of l)h[0]=Math.min(h[0],g[0]),h[1]=Math.min(h[1],g[1]),h[2]=Math.min(h[2],g[2]),f[0]=Math.max(f[0],g[0]),f[1]=Math.max(f[1],g[1]),f[2]=Math.max(f[2],g[2]);return new mo(h,f)}function qb(r){const e=Math.pow(2,r.z),o=r.x/e,l=(r.x+1)/e,h=(r.y+1)/e;return[[Wi(r.y/e),xa(o)],[Wi(h),xa(l)]]}function l_(r,e,o,l){return o=Ft(o),l||(l=s_),[r*Math.sin(o)*l,-e*l,r*Math.cos(o)*l]}function Vp(r,e,o){return l_(Math.cos(Ft(r)),Math.sin(Ft(r)),e,o)}function Zb(r){return 16383/Math.max(...Dt([],r.max,r.min))}function Wb(r){const e=V(new Float64Array(16)),o=1/Zb(r);return he(e,e,r.min),pe(e,e,[o,o,o]),e}function Hb(r,e,o){const l=e/(2*Math.PI),h=function(g){const _=Nt/(2*Math.PI);return g/(2*Math.PI)/_}(e);if(!o){const g=sn(r.center.lat,-85.051129,qo);o=[Hc(r.center.lng)*e,Xc(g)*e]}const f=V(new Float64Array(16));return he(f,f,[o[0],o[1],-l]),pe(f,f,[h,h,h]),ze(f,f,Ft(-r._center.lat)),Ee(f,f,Ft(-r._center.lng)),f}class c_{constructor(e){const o=this._createGridIndices();this.gridIndexBuffer=e.createIndexBuffer(o,!0),this.gridSegments=Xn.simpleSegment(0,0,4225,8192);const l=this._createPoleTriangleIndices();this.poleIndexBuffer=e.createIndexBuffer(l,!0),this.poleSegments=Xn.simpleSegment(0,0,66,64);const h=new Lh;h.emplaceBack(-1,1,1,0,0,0,0),h.emplaceBack(1,1,1,0,0,1,0),h.emplaceBack(1,-1,1,0,0,1,1),h.emplaceBack(-1,-1,1,0,0,0,1);const f=new Pi;f.emplaceBack(0,1,2),f.emplaceBack(2,3,0),this.atmosphereVertexBuffer=e.createVertexBuffer(h,ZA.members),this.atmosphereIndexBuffer=e.createIndexBuffer(f),this.atmosphereSegments=Xn.simpleSegment(0,0,4,2)}destroy(){this.poleIndexBuffer.destroy(),this.gridIndexBuffer.destroy(),this.poleSegments.destroy(),this.gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this.wireframeIndexBuffer&&(this.wireframeIndexBuffer.destroy(),this.wireframeSegments.destroy())}static createPoleTriangleVertices(e,o,l){const h=new Lh,f=o/Math.PI/2;h.emplaceBack(0,-f,0,0,0,.5,l?0:1);const g=360/e,_=Math.cos(Ft(85)),w=Math.sin(Ft(85));for(let C=0;C<=64;C++){const k=C/64,A=l_(_,w,0*(1-(T=k))+g*T,f);h.emplaceBack(A[0],A[1],A[2],0,0,k,l?0:1)}var T;return h}_createPoleTriangleIndices(){const e=new Pi;for(let o=0;o<=64;o++)e.emplaceBack(0,o+1,o+2);return e}static createGridVertices(e){const o=Math.pow(2,e.z),l=(w,T,C)=>w*(1-C)+T*C,[h,f]=qb(e),g=new Lh,_=function(w){const T=V(new Float64Array(16)),C=Zb(w);var k,A;return pe(T,T,[C,C,C]),he(T,T,((k=[])[0]=-(A=w.min)[0],k[1]=-A[1],k[2]=-A[2],k)),T}(Up(e));g.reserve(4096);for(let w=0;w<65;w++){const T=l(h[0],f[0],w/64),C=Xc(T),k=C*o-e.y,A=Math.sin(Ft(T)),L=Math.cos(Ft(T));for(let R=0;R<65;R++){const U=R/64,G=l(h[1],f[1],U),te=l_(L,A,G);Ve(te,te,_);const se=Hc(G);g.emplaceBack(te[0],te[1],te[2],se,C,U,k)}}return g}_createGridIndices(){const e=new Pi,o=(l,h)=>{const f=65*h+l;e.emplaceBack(f+1,f,f+65),e.emplaceBack(f+65,f+65+1,f+1)};for(let l=0;l<64;l++)for(let h=0;h<64;h++)o(h,l);return e}getWirefameBuffer(e){if(!this.wireframeSegments){const o=this._createWireframeGrid();this.wireframeIndexBuffer=e.createIndexBuffer(o),this.wireframeSegments=Xn.simpleSegment(0,0,4096,o.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}_createWireframeGrid(){const e=new ls,o=(l,h)=>{const f=65*h+l;e.emplaceBack(f,f+1),e.emplaceBack(f,f+65),e.emplaceBack(f,f+65+1)};for(let l=0;l<64;l++)for(let h=0;h<64;h++)o(h,l);return e}}function su(r,e){if(!e.isReprojectedInTileSpace)return{scale:1<<r.z,x:r.x,y:r.y,x2:r.x+1,y2:r.y+1,projection:e};const o=Math.pow(2,-r.z),l=r.x*o,h=(r.x+1)*o,f=r.y*o,g=(r.y+1)*o,_=xa(l),w=xa(h),T=Wi(f),C=Wi(g),k=e.project(_,T),A=e.project(w,T),L=e.project(w,C),R=e.project(_,C);let U=Math.min(k.x,A.x,L.x,R.x),G=Math.min(k.y,A.y,L.y,R.y),te=Math.max(k.x,A.x,L.x,R.x),se=Math.max(k.y,A.y,L.y,R.y);const de=o/16;function me(_e,Me,Ae,Ke,Ze,Pe){const He=(Ae+Ze)/2,Qe=(Ke+Pe)/2,Ne=e.project(xa(He),Wi(Qe)),rt=Math.max(0,U-Ne.x,G-Ne.y,Ne.x-te,Ne.y-se);U=Math.min(U,Ne.x),te=Math.max(te,Ne.x),G=Math.min(G,Ne.y),se=Math.max(se,Ne.y),rt>de&&(me(_e,Ne,Ae,Ke,He,Qe),me(Ne,Me,He,Qe,Ze,Pe))}me(k,A,l,f,h,f),me(A,L,h,f,h,g),me(L,R,h,g,l,g),me(R,k,l,g,l,f),U-=de,G-=de,te+=de,se+=de;const ye=1/Math.max(te-U,se-G);return{scale:ye,x:U*ye,y:G*ye,x2:te*ye,y2:se*ye,projection:e}}class Xb{constructor(e){const o={},l=[];for(const _ in e){const w=e[_],T=o[_]={};for(const C in w.glyphs){const k=w.glyphs[+C];if(!k||k.bitmap.width===0||k.bitmap.height===0)continue;const A=k.metrics.localGlyph?2:1,L={x:0,y:0,w:k.bitmap.width+2*A,h:k.bitmap.height+2*A};l.push(L),T[C]=L}}const{w:h,h:f}=Ny(l),g=new us({width:h||1,height:f||1});for(const _ in e){const w=e[_];for(const T in w.glyphs){const C=w.glyphs[+T];if(!C||C.bitmap.width===0||C.bitmap.height===0)continue;const k=o[_][T],A=C.metrics.localGlyph?2:1;us.copy(C.bitmap,g,{x:0,y:0},{x:k.x+A,y:k.y+A},C.bitmap)}}this.image=g,this.positions=o}}ot("GlyphAtlas",Xb);class HA{constructor(e){this.tileID=new Qr(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=su(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,o,l,h,f){this.status="parsing",this.data=e,this.collisionBoxArray=new _y;const g=new Ib(Object.keys(e.layers).sort()),_=new jb(this.tileID,this.promoteId);_.bucketLayerIDs=[];const w={},T=new Qy(256,256),C={featureIndex:_,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:l},k=o.familiesBySource[this.source];for(const ye in k){const _e=e.layers[ye];if(!_e)continue;let Me=!1,Ae=!1;for(const Pe of k[ye])Pe[0].type==="symbol"?Me=!0:Ae=!0;if(this.isSymbolTile===!0&&!Me||this.isSymbolTile===!1&&!Ae)continue;_e.version===1&&Mn(`Vector tile source "${this.source}" layer "${ye}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ke=g.encode(ye),Ze=[];for(let Pe=0;Pe<_e.length;Pe++){const He=_e.feature(Pe),Qe=_.getId(He,ye);Ze.push({feature:He,id:Qe,index:Pe,sourceLayerIndex:Ke})}for(const Pe of k[ye]){const He=Pe[0];this.isSymbolTile!==void 0&&He.type==="symbol"!==this.isSymbolTile||He.minzoom&&this.zoom<Math.floor(He.minzoom)||He.maxzoom&&this.zoom>=He.maxzoom||He.visibility!=="none"&&(u_(Pe,this.zoom,l),(w[He.id]=He.createBucket({index:_.bucketLayerIDs.length,layers:Pe,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ke,sourceID:this.source,enableTerrain:this.enableTerrain,availableImages:l})).populate(Ze,C,this.tileID.canonical,this.tileTransform),_.bucketLayerIDs.push(Pe.map(Qe=>Qe.id)))}}let A,L,R,U;T.trim();const G={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},te=Po(C.glyphDependencies,ye=>Object.keys(ye).map(Number));Object.keys(te).length?h.send("getGlyphs",{uid:this.uid,stacks:te},(ye,_e)=>{A||(A=ye,L=_e,me.call(this))},void 0,!1,G):L={};const se=Object.keys(C.iconDependencies);se.length?h.send("getImages",{icons:se,source:this.source,tileID:this.tileID,type:"icons"},(ye,_e)=>{A||(A=ye,R=_e,me.call(this))},void 0,!1,G):R={};const de=Object.keys(C.patternDependencies);function me(){if(A)return f(A);if(L&&R&&U){const ye=new Xb(L),_e=new tb(R,U);for(const Me in w){const Ae=w[Me];Ae instanceof fs?(u_(Ae.layers,this.zoom,l),CA(Ae,L,ye.positions,R,_e.iconPositions,this.showCollisionBoxes,l,this.tileID.canonical,this.tileZoom,this.projection),Ae.projection=this.projection.name):Ae.hasPattern&&(Ae instanceof Ep||Ae instanceof Tp||Ae instanceof Ry)&&(u_(Ae.layers,this.zoom,l),Ae.addFeatures(C,this.tileID.canonical,_e.patternPositions,l))}this.status="done",f(null,{buckets:Fa(w).filter(Me=>!Me.isEmpty()),featureIndex:_,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ye.image,lineAtlas:T,imageAtlas:_e,glyphMap:this.returnDependencies?L:null,iconMap:this.returnDependencies?R:null,glyphPositions:this.returnDependencies?ye.positions:null})}}de.length?h.send("getImages",{icons:de,source:this.source,tileID:this.tileID,type:"patterns"},(ye,_e)=>{A||(A=ye,U=_e,me.call(this))},void 0,!1,G):U={},me.call(this)}}function u_(r,e,o){const l=new Ct(e);for(const h of r)h.recalculate(l,o)}class Yb{constructor(e){this.entries={},this.scheduler=e}request(e,o,l,h){const f=this.entries[e]=this.entries[e]||{callbacks:[]};if(f.result){const[g,_]=f.result;return this.scheduler?this.scheduler.add(()=>{h(g,_)},o):h(g,_),()=>{}}return f.callbacks.push(h),f.cancel||(f.cancel=l((g,_)=>{f.result=[g,_];for(const w of f.callbacks)this.scheduler?this.scheduler.add(()=>{w(g,_)},o):w(g,_);setTimeout(()=>delete this.entries[e],3e3)})),()=>{f.result||(f.callbacks=f.callbacks.filter(g=>g!==h),f.callbacks.length||(f.cancel(),delete this.entries[e]))}}}function Kb(r,e,o){const l=JSON.stringify(r.request);return r.data&&(this.deduped.entries[l]={result:[null,r.data]}),this.deduped.request(l,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom},h=>{const f=rl(r.request,(g,_,w,T)=>{g?h(g):_&&h(null,{vectorTile:o?void 0:new Ol.VectorTile(new Gh(_)),rawData:_,cacheControl:w,expires:T})});return()=>{f.cancel(),h()}},e)}const XA=V(new Float64Array(16));class Rl{constructor(e,o){this._tr=e,this._worldSize=o}createInversionMatrix(){return XA}createTileMatrix(e){let o,l,h;const f=e.canonical,g=V(new Float64Array(16)),_=this._tr.projection;if(_.isReprojectedInTileSpace){const w=su(f,_);o=1,l=w.x+e.wrap*w.scale,h=w.y,pe(g,g,[o/w.scale,o/w.scale,this._tr.pixelsPerMeter/this._worldSize])}else o=this._worldSize/this._tr.zoomScale(f.z),l=(f.x+Math.pow(2,f.z)*e.wrap)*o,h=f.y*o;return he(g,g,[l,h,0]),pe(g,g,[o/Nt,o/Nt,1]),g}pointCoordinate(e,o,l){const h=this._tr.horizonLineFromTop(!1),f=new j(e,Math.max(h,o));return this._tr.rayIntersectionCoordinate(this._tr.pointRayIntersection(f,l))}upVector(){return[0,0,1]}upVectorScale(){return 1}}var YA={name:"albers",range:[4,7],center:[-96,37.5],parallels:[29.5,45.5],zAxisUnit:"meters",conic:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],initializeConstants(){if(this.constants&&Io(this.parallels,this.constants.parallels))return;const r=Math.sin(Ft(this.parallels[0])),e=(r+Math.sin(Ft(this.parallels[1])))/2,o=1+r*(2*e-r),l=Math.sqrt(o)/e;this.constants={n:e,c:o,r0:l,parallels:this.parallels}},project(r,e){this.initializeConstants();const o=Ft(r-this.center[0]),l=Ft(e),{n:h,c:f,r0:g}=this.constants,_=Math.sqrt(f-2*h*Math.sin(l))/h;return{x:_*Math.sin(o*h),y:_*Math.cos(o*h)-g,z:0}},unproject(r,e){this.initializeConstants();const{n:o,c:l,r0:h}=this.constants,f=h+e;let g=Math.atan2(r,Math.abs(f))*Math.sign(f);f*o<0&&(g-=Math.PI*Math.sign(r)*Math.sign(f));const _=Ft(this.center[0])*o;g=io(g,-Math.PI-_,Math.PI-_);const w=Hr(g/o)+this.center[0],T=Math.asin(sn((l-(r*r+f*f)*o*o)/(2*o),-1,1)),C=sn(Hr(T),-85.051129,qo);return new cn(w,C)},projectTilePoint:(r,e)=>({x:r,y:e,z:0}),locationPoint:(r,e)=>r._coordinatePoint(r.locationCoordinate(e),!1),pixelsPerMeter:(r,e)=>po(1,r)*e,farthestPixelDistance(r){return Dl(r,this.pixelsPerMeter(r.center.lat,r.worldSize))},createTileTransform:(r,e)=>new Rl(r,e)};const Hh=1.340264,Xh=-.081106,Yh=893e-6,Kh=.003796,$p=Math.sqrt(3)/2;var KA={name:"equalEarth",center:[0,0],range:[3.5,7],zAxisUnit:"meters",isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project(r,e){e=e/180*Math.PI,r=r/180*Math.PI;const o=Math.asin($p*Math.sin(e)),l=o*o,h=l*l*l;return{x:.5*(r*Math.cos(o)/($p*(Hh+3*Xh*l+h*(7*Yh+9*Kh*l)))/Math.PI+.5),y:1-.5*(o*(Hh+Xh*l+h*(Yh+Kh*l))/Math.PI+1),z:0}},unproject(r,e){r=(2*r-.5)*Math.PI;let o=e=(2*(1-e)-1)*Math.PI,l=o*o,h=l*l*l;for(let T,C,k,A=0;A<12&&(C=o*(Hh+Xh*l+h*(Yh+Kh*l))-e,k=Hh+3*Xh*l+h*(7*Yh+9*Kh*l),T=C/k,o=sn(o-T,-Math.PI/3,Math.PI/3),l=o*o,h=l*l*l,!(Math.abs(T)<1e-12));++A);const f=$p*r*(Hh+3*Xh*l+h*(7*Yh+9*Kh*l))/Math.cos(o),g=Math.asin(Math.sin(o)/$p),_=sn(180*f/Math.PI,-180,180),w=sn(180*g/Math.PI,-85.051129,qo);return new cn(_,w)},projectTilePoint:(r,e)=>({x:r,y:e,z:0}),locationPoint:(r,e)=>r._coordinatePoint(r.locationCoordinate(e),!1),pixelsPerMeter:(r,e)=>po(1,r)*e,farthestPixelDistance(r){return Dl(r,this.pixelsPerMeter(r.center.lat,r.worldSize))},createTileTransform:(r,e)=>new Rl(r,e)},JA={name:"equirectangular",supportsWorldCopies:!0,center:[0,0],range:[3.5,7],zAxisUnit:"meters",wrap:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project:(r,e)=>({x:.5+r/360,y:.5-e/360,z:0}),unproject(r,e){const o=360*(r-.5),l=sn(360*(.5-e),-85.051129,qo);return new cn(o,l)},projectTilePoint:(r,e)=>({x:r,y:e,z:0}),locationPoint:(r,e)=>r._coordinatePoint(r.locationCoordinate(e),!1),pixelsPerMeter:(r,e)=>po(1,r)*e,farthestPixelDistance(r){return Dl(r,this.pixelsPerMeter(r.center.lat,r.worldSize))},createTileTransform:(r,e)=>new Rl(r,e)};const lu=Math.PI/2;function Gp(r){return Math.tan((lu+r)/2)}var QA={name:"lambertConformalConic",range:[3.5,7],zAxisUnit:"meters",center:[0,30],parallels:[30,30],conic:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],initializeConstants(){if(this.constants&&Io(this.parallels,this.constants.parallels))return;const r=Ft(this.parallels[0]),e=Ft(this.parallels[1]),o=Math.cos(r),l=r===e?Math.sin(r):Math.log(o/Math.cos(e))/Math.log(Gp(e)/Gp(r)),h=o*Math.pow(Gp(r),l)/l;this.constants={n:l,f:h,parallels:this.parallels}},project(r,e){this.initializeConstants(),e=Ft(e),r=Ft(r-this.center[0]);const o=1e-6,{n:l,f:h}=this.constants;h>0?e<-lu+o&&(e=-lu+o):e>lu-o&&(e=lu-o);const f=h/Math.pow(Gp(e),l),g=f*Math.sin(l*r),_=h-f*Math.cos(l*r);return{x:.5*(g/Math.PI+.5),y:1-.5*(_/Math.PI+.5),z:0}},unproject(r,e){this.initializeConstants(),r=(2*r-.5)*Math.PI,e=(2*(1-e)-.5)*Math.PI;const{n:o,f:l}=this.constants,h=l-e,f=Math.sign(h),g=Math.sign(o)*Math.sqrt(r*r+h*h);let _=Math.atan2(r,Math.abs(h))*f;h*o<0&&(_-=Math.PI*Math.sign(r)*f);const w=sn(Hr(_/o)+this.center[0],-180,180),T=sn(Hr(2*Math.atan(Math.pow(l/g,1/o))-lu),-85.051129,qo);return new cn(w,T)},projectTilePoint:(r,e)=>({x:r,y:e,z:0}),locationPoint:(r,e)=>r._coordinatePoint(r.locationCoordinate(e),!1),pixelsPerMeter:(r,e)=>po(1,r)*e,farthestPixelDistance(r){return Dl(r,this.pixelsPerMeter(r.center.lat,r.worldSize))},createTileTransform:(r,e)=>new Rl(r,e)},eP={name:"mercator",wrap:!0,requiresDraping:!1,supportsWorldCopies:!0,supportsTerrain:!0,supportsFog:!0,supportsFreeCamera:!0,zAxisUnit:"meters",center:[0,0],project:(r,e)=>({x:Hc(r),y:Xc(e),z:0}),unproject(r,e){const o=xa(r),l=Wi(e);return new cn(o,l)},projectTilePoint:(r,e)=>({x:r,y:e,z:0}),locationPoint:(r,e)=>r._coordinatePoint(r.locationCoordinate(e),!1),pixelsPerMeter:(r,e)=>po(1,r)*e,farthestPixelDistance(r){return Dl(r,this.pixelsPerMeter(r.center.lat,r.worldSize))},createTileTransform:(r,e)=>new Rl(r,e)};const Jb=Ft(qo);var tP={name:"naturalEarth",center:[0,0],range:[3.5,7],isReprojectedInTileSpace:!0,zAxisUnit:"meters",unsupportedLayers:["custom"],project(r,e){const o=(e=Ft(e))*e,l=o*o;return{x:.5*((r=Ft(r))*(.8707-.131979*o+l*(l*(.003971*o-.001529*l)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+o*(.015085+l*(.028874*o-.044475-.005916*l)))/Math.PI+1),z:0}},unproject(r,e){r=(2*r-.5)*Math.PI;let o=e=(2*(1-e)-1)*Math.PI,l=25,h=0,f=o*o;do{f=o*o;const w=f*f;h=(o*(1.007226+f*(.015085+w*(.028874*f-.044475-.005916*w)))-e)/(1.007226+f*(.045255+w*(.259866*f-.311325-.005916*11*w))),o=sn(o-h,-Jb,Jb)}while(Math.abs(h)>1e-6&&--l>0);f=o*o;const g=sn(Hr(r/(.8707+f*(f*(f*f*f*(.003971-.001529*f)-.013791)-.131979))),-180,180),_=Hr(o);return new cn(g,_)},projectTilePoint:(r,e)=>({x:r,y:e,z:0}),locationPoint:(r,e)=>r._coordinatePoint(r.locationCoordinate(e),!1),pixelsPerMeter:(r,e)=>po(1,r)*e,farthestPixelDistance(r){return Dl(r,this.pixelsPerMeter(r.center.lat,r.worldSize))},createTileTransform:(r,e)=>new Rl(r,e)};const Qb=Ft(qo),ew={albers:YA,equalEarth:KA,equirectangular:JA,lambertConformalConic:QA,mercator:eP,naturalEarth:tP,winkelTripel:{name:"winkelTripel",center:[0,0],range:[3.5,7],zAxisUnit:"meters",isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project(r,e){e=Ft(e),r=Ft(r);const o=Math.cos(e),l=2/Math.PI,h=Math.acos(o*Math.cos(r/2)),f=Math.sin(h)/h,g=.5*(r*l+2*o*Math.sin(r/2)/f)||0,_=.5*(e+Math.sin(e)/f)||0;return{x:.5*(g/Math.PI+.5),y:1-.5*(_/Math.PI+1),z:0}},unproject(r,e){let o=r=(2*r-.5)*Math.PI,l=e=(2*(1-e)-1)*Math.PI,h=25;const f=1e-6;let g=0,_=0;do{const w=Math.cos(l),T=Math.sin(l),C=2*T*w,k=T*T,A=w*w,L=Math.cos(o/2),R=Math.sin(o/2),U=2*L*R,G=R*R,te=1-A*L*L,se=te?1/te:0,de=te?Math.acos(w*L)*Math.sqrt(1/te):0,me=.5*(2*de*w*R+2*o/Math.PI)-r,ye=.5*(de*T+l)-e,_e=.5*se*(A*G+de*w*L*k)+1/Math.PI,Me=se*(U*C/4-de*T*R),Ae=.125*se*(C*R-de*T*A*U),Ke=.5*se*(k*L+de*G*w)+.5,Ze=Me*Ae-Ke*_e;g=(ye*Me-me*Ke)/Ze,_=(me*Ae-ye*_e)/Ze,o=sn(o-g,-Math.PI,Math.PI),l=sn(l-_,-Qb,Qb)}while((Math.abs(g)>f||Math.abs(_)>f)&&--h>0);return new cn(Hr(o),Hr(l))},projectTilePoint:(r,e)=>({x:r,y:e,z:0}),locationPoint:(r,e)=>r._coordinatePoint(r.locationCoordinate(e),!1),pixelsPerMeter:(r,e)=>po(1,r)*e,farthestPixelDistance(r){return Dl(r,this.pixelsPerMeter(r.center.lat,r.worldSize))},createTileTransform:(r,e)=>new Rl(r,e)}};s.ARRAY_TYPE=ge,s.AUTH_ERR_MSG=Se,s.Aabb=mo,s.Actor=class{constructor(r,e,o){this.target=r,this.parent=e,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Na(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ni()?r:H,this.scheduler=new jA}send(r,e,o,l,h=!1,f){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=f,this.callbacks[g]=o);const _=ji(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:r,hasCallback:!!o,targetMapId:l,mustQueue:h,sourceMapId:this.mapId,data:Il(e,_)},_),{cancel:()=>{o&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(r){const e=r.data,o=e.id;if(o&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const l=this.cancelCallbacks[o];delete this.cancelCallbacks[o],l&&l.cancel()}else if(e.mustQueue||Ni()){const l=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,e),l&&l.metadata||{type:"message"})}else this.processTask(o,e)}processTask(r,e){if(e.type==="<response>"){const o=this.callbacks[r];delete this.callbacks[r],o&&(e.error?o($o(e.error)):o(null,$o(e.data)))}else{const o=ji(this.globalScope)?void 0:[],l=e.hasCallback?(f,g)=>{delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:f?Il(f):null,data:Il(g,o)},o)}:f=>{},h=$o(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,h,l);else if(this.parent.getWorkerSource){const f=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,f[0],h.source)[f[1]](h,l)}else l(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=Bp,s.Color=Ht,s.ColorMode=Wo,s.CullFaceMode=go,s.DEMData=Fp,s.DataConstantProperty=st,s.DedupedRequest=Yb,s.DepthMode=au,s.EXTENT=Nt,s.Elevation=class{getAtPointOrZero(r,e=0){return this.getAtPoint(r,e)||0}getAtPoint(r,e,o=!0){e==null&&(e=null);const l=this._source();if(!l||r.y<0||r.y>1)return e;const h=l.getSource().maxzoom,f=1<<h,g=Math.floor(r.x),_=r.x-g,w=new Qr(h,g,h,Math.floor(_*f),Math.floor(r.y*f)),T=this.findDEMTileFor(w);if(!T||!T.dem)return e;const C=T.dem,k=1<<T.tileID.canonical.z,A=(_*k-T.tileID.canonical.x)*C.dim,L=(r.y*k-T.tileID.canonical.y)*C.dim,R=Math.floor(A),U=Math.floor(L);return(o?this.exaggeration():1)*rn(rn(C.get(R,U),C.get(R,U+1),L-U),rn(C.get(R+1,U),C.get(R+1,U+1),L-U),A-R)}getAtTileOffset(r,e,o){const l=1<<r.canonical.z;return this.getAtPointOrZero(new gp(r.wrap+(r.canonical.x+e/Nt)/l,(r.canonical.y+o/Nt)/l))}getAtTileOffsetFunc(r,e){return o=>{const l=this.getAtTileOffset(r,o.x,o.y),h=e.upVector(r.canonical,o.x,o.y);return hn(h,h,l*e.upVectorScale(r.canonical)),h}}getForTilePoints(r,e,o,l){const h=Np.create(this,r,l);return!!h&&(e.forEach(f=>{f[2]=this.exaggeration()*h.getElevationAt(f[0],f[1],o)}),!0)}getMinMaxForTile(r){const e=this.findDEMTileFor(r);if(!e||!e.dem)return null;const o=e.dem.tree,l=e.tileID,h=1<<r.canonical.z-l.canonical.z;let f=r.canonical.x/h-l.canonical.x,g=r.canonical.y/h-l.canonical.y,_=0;for(let w=0;w<r.canonical.z-l.canonical.z&&!o.leaves[_];w++){f*=2,g*=2;const T=2*Math.floor(g)+Math.floor(f);_=o.childOffsets[_]+T,f%=1,g%=1}return{min:this.exaggeration()*o.minimums[_],max:this.exaggeration()*o.maximums[_]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(r,e,o){throw new Error("Pure virtual method called.")}pointCoordinate(r){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(r){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=dc,s.EvaluationParameters=Ct,s.Event=Oo,s.Evented=Lo,s.Frustum=Cy,s.GLOBE_ZOOM_THRESHOLD_MAX=6,s.GlobeSharedBuffers=c_,s.GlyphManager=iu,s.ImagePosition=jy,s.LineAtlas=Qy,s.LngLat=cn,s.LngLatBounds=Ml,s.LocalGlyphMode=Gy,s.MAX_MERCATOR_LATITUDE=qo,s.MercatorCoordinate=gp,s.ONE_EM=br,s.OverscaledTileID=Qr,s.Properties=_r,s.RGBAImage=Mi,s.Ray=class{constructor(r,e){this.pos=r,this.dir=e}intersectsPlane(r,e,o){const l=Pn(e,this.dir);if(Math.abs(l)<1e-6)return!1;const h=((r[0]-this.pos[0])*e[0]+(r[1]-this.pos[1])*e[1]+(r[2]-this.pos[2])*e[2])/l;return o[0]=this.pos[0]+this.dir[0]*h,o[1]=this.pos[1]+this.dir[1]*h,o[2]=this.pos[2]+this.dir[2]*h,!0}closestPointOnSphere(r,e,o){if(function(A,L){var R=A[0],U=A[1],G=A[2],te=L[0],se=L[1],de=L[2];return Math.abs(R-te)<=be*Math.max(1,Math.abs(R),Math.abs(te))&&Math.abs(U-se)<=be*Math.max(1,Math.abs(U),Math.abs(se))&&Math.abs(G-de)<=be*Math.max(1,Math.abs(G),Math.abs(de))}(this.pos,r)||e===0)return o[0]=o[1]=o[2]=0,!1;const[l,h,f]=this.dir,g=this.pos[0]-r[0],_=this.pos[1]-r[1],w=this.pos[2]-r[2],T=l*l+h*h+f*f,C=2*(g*l+_*h+w*f),k=C*C-4*T*(g*g+_*_+w*w-e*e);if(k<0){const A=Math.max(-C/2,0),L=g+l*A,R=_+h*A,U=w+f*A,G=Math.hypot(L,R,U);return o[0]=L*e/G,o[1]=R*e/G,o[2]=U*e/G,!1}{const A=(-C-Math.sqrt(k))/(2*T);if(A<0){const L=Math.hypot(g,_,w);return o[0]=g*e/L,o[1]=_*e/L,o[2]=w*e/L,!1}return o[0]=g+l*A,o[1]=_+h*A,o[2]=w+f*A,!0}}},s.RequestManager=class{constructor(r,e,o){this._transformRequestFn=r,this._customAccessToken=e,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const r=function(){let e="";for(let o=0;o<10;o++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",fe,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(r,e){return this._transformRequestFn&&this._transformRequestFn(r,e)||{url:r}}normalizeStyleURL(r,e){if(!Le(r))return r;const o=ht(r);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeGlyphsURL(r,e){if(!Le(r))return r;const o=ht(r);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||e)}normalizeSourceURL(r,e){if(!Le(r))return r;const o=ht(r);return o.path=`/v4/${o.authority}.json`,o.params.push("secure"),this._makeAPIURL(o,this._customAccessToken||e)}normalizeSpriteURL(r,e,o,l){const h=ht(r);return Le(r)?(h.path=`/styles/v1${h.path}/sprite${e}${o}`,this._makeAPIURL(h,this._customAccessToken||l)):(h.path+=`${e}${o}`,_t(h))}normalizeTileURL(r,e,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Le(r))return r;const l=ht(r);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||o&&l.authority!=="raster"&&o===512?"@2x":""}${B.supported?".webp":"$1"}`),l.authority==="raster"?l.path=`/${O.RASTER_URL_PREFIX}${l.path}`:(l.path=l.path.replace(/^.+\/v4\//,"/"),l.path=`/${O.TILE_URL_VERSION}${l.path}`);const h=this._customAccessToken||function(f){for(const g of f){const _=g.match(/^access_token=(.*)$/);if(_)return _[1]}return null}(l.params)||O.ACCESS_TOKEN;return O.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&l.params.push(`sku=${this._skuToken}`),this._makeAPIURL(l,h)}canonicalizeTileURL(r,e){const o=ht(r);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return r;let l="mapbox://";o.path.match(/^\/raster\/v1\//)?l+=`raster/${o.path.replace(`/${O.RASTER_URL_PREFIX}/`,"")}`:l+=`tiles/${o.path.replace(`/${O.TILE_URL_VERSION}/`,"")}`;let h=o.params;return e&&(h=h.filter(f=>!f.match(/^access_token=/))),h.length&&(l+=`?${h.join("&")}`),l}canonicalizeTileset(r,e){const o=!!e&&Le(e),l=[];for(const h of r.tiles||[])Fe(h)?l.push(this.canonicalizeTileURL(h,o)):l.push(h);return l}_makeAPIURL(r,e){const o="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=ht(O.API_URL);if(r.protocol=l.protocol,r.authority=l.authority,r.protocol==="http"){const h=r.params.indexOf("secure");h>=0&&r.params.splice(h,1)}if(l.path!=="/"&&(r.path=`${l.path}${r.path}`),!O.REQUIRE_ACCESS_TOKEN)return _t(r);if(e=e||O.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return r.params=r.params.filter(h=>h.indexOf("access_token")===-1),r.params.push(`access_token=${e||""}`),_t(r)}},s.ResourceType=uc,s.SegmentVector=Xn,s.SourceCache=Ll,s.StencilMode=n_,s.StructArrayLayout1ui2=up,s.StructArrayLayout2f1f2i16=hy,s.StructArrayLayout2i4=Gc,s.StructArrayLayout2ui4=ls,s.StructArrayLayout3f12=Zc,s.StructArrayLayout3ui6=Pi,s.StructArrayLayout4i8=qc,s.Texture=Rp,s.Tile=a_,s.Transitionable=Kr,s.Uniform1f=pp,s.Uniform1i=class extends ya{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},s.Uniform2f=class extends ya{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},s.Uniform3f=class extends ya{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},s.Uniform4f=mx,s.UniformColor=gx,s.UniformMatrix2f=class extends ya{constructor(r,e){super(r,e),this.current=Zk}set(r){for(let e=0;e<4;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},s.UniformMatrix3f=class extends ya{constructor(r,e){super(r,e),this.current=qk}set(r){for(let e=0;e<9;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},s.UniformMatrix4f=class extends ya{constructor(r,e){super(r,e),this.current=Gk}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},s.UnwrappedTileID=e_,s.ValidationError=nt,s.VectorTileWorkerSource=class extends Lo{constructor(r,e,o,l,h){super(),this.actor=r,this.layerIndex=e,this.availableImages=o,this.loadVectorData=h||Kb,this.loading={},this.loaded={},this.deduped=new Yb(r.scheduler),this.isSpriteLoaded=l,this.scheduler=r.scheduler}loadTile(r,e){const o=r.uid,l=r&&r.request,h=l&&l.collectResourceTiming,f=this.loading[o]=new HA(r);f.abort=this.loadVectorData(r,(g,_)=>{const w=!this.loading[o];if(delete this.loading[o],w||g||!_)return f.status="done",w||(this.loaded[o]=f),e(g);const T=_.rawData,C={};_.expires&&(C.expires=_.expires),_.cacheControl&&(C.cacheControl=_.cacheControl),f.vectorTile=_.vectorTile||new Ol.VectorTile(new Gh(T));const k=()=>{f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,(A,L)=>{if(A||!L)return e(A);const R={};if(h){const U=Cb(l);U.length>0&&(R.resourceTiming=JSON.parse(JSON.stringify(U)))}e(null,Dn({rawTileData:T.slice(0)},L,C,R))})};this.isSpriteLoaded?k():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(k,{type:"parseTile",isSymbolTile:r.isSymbolTile,zoom:r.tileZoom}):k()}),this.loaded=this.loaded||{},this.loaded[o]=f})}reloadTile(r,e){const o=this.loaded,l=r.uid,h=this;if(o&&o[l]){const f=o[l];f.showCollisionBoxes=r.showCollisionBoxes,f.enableTerrain=!!r.enableTerrain,f.projection=r.projection;const g=(_,w)=>{const T=f.reloadCallback;T&&(delete f.reloadCallback,f.parse(f.vectorTile,h.layerIndex,this.availableImages,h.actor,T)),e(_,w)};f.status==="parsing"?f.reloadCallback=g:f.status==="done"&&(f.vectorTile?f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,g):g())}}abortTile(r,e){const o=r.uid,l=this.loading[o];l&&(l.abort&&l.abort(),delete this.loading[o]),e()}removeTile(r,e){const o=this.loaded,l=r.uid;o&&o[l]&&delete o[l],e()}},s.WritingMode=zi,s.ZoomHistory=p,s.add=ct,s.addDynamicAttributes=Hy,s.adjoint=function(r,e){var o=e[0],l=e[1],h=e[2],f=e[3],g=e[4],_=e[5],w=e[6],T=e[7],C=e[8];return r[0]=g*C-_*T,r[1]=h*T-l*C,r[2]=l*_-h*g,r[3]=_*w-f*C,r[4]=o*C-h*w,r[5]=h*f-o*_,r[6]=f*T-g*w,r[7]=l*w-o*T,r[8]=o*g-l*f,r},s.asyncAll=ua,s.bezier=Ys,s.bindAll=Na,s.boundsAttributes=o_,s.bufferConvexPolygon=function(r,e){const o=[];for(let l=0;l<r.length;l++){const h=io(l-1,-1,r.length-1),f=io(l+1,-1,r.length-1),g=r[l],_=r[f],w=r[h].sub(g).unit(),T=_.sub(g).unit(),C=T.angleWithSep(w.x,w.y),k=w.add(T).unit().mult(-1*e/Math.sin(C/2));o.push(g.add(k))}return o},s.cacheEntryPossiblyAdded=function(r){cc++,cc>nh&&(r.getActor().send("enforceCacheSizeLimit",wf),cc=0)},s.calculateGlobeMatrix=Hb,s.calculateGlobeMercatorMatrix=function(r){const e=r.worldSize,o=sn(r.center.lat,-85.051129,qo),l=new j(Hc(r.center.lng)*e,Xc(o)*e),h=po(1,r.center.lat)*e,f=r.pixelsPerMeter,g=e/(h/r.pixelsPerMeter),_=V(new Float64Array(16));return he(_,_,[l.x,l.y,0]),pe(_,_,[g,g,f]),_},s.clamp=sn,s.clearTileCache=function(r){const e=H.caches.delete(gr);r&&e.catch(r).then(()=>r())},s.clipLine=fb,s.clone=function(r){var e=new ge(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},s.clone$1=ai,s.collisionCircleLayout=JI,s.config=O,s.conjugate=function(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r},s.create=function(){var r=new ge(16);return ge!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},s.create$1=Q,s.createExpression=bl,s.createLayout=On,s.createStyleLayer=function(r){return r.type==="custom"?new DA(r):new BA[r.type](r)},s.cross=mr,s.degToRad=Ft,s.div=function(r,e,o){return r[0]=e[0]/o[0],r[1]=e[1]/o[1],r[2]=e[2]/o[2],r},s.dot=Pn,s.ease=Ks,s.easeCubicInOut=Xs,s.emitValidationErrors=op,s.endsWith=ja,s.enforceCacheSizeLimit=function(r){tl(),Ui&&Ui.then(e=>{e.keys().then(o=>{for(let l=0;l<o.length-r;l++)e.delete(o[l])})})},s.evaluateSizeForFeature=Cp,s.evaluateSizeForZoom=eu,s.evaluateVariableOffset=_b,s.evented=Rr,s.exactEquals=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]},s.exactEquals$1=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]},s.exported=Xr,s.exported$1=B,s.extend=Dn,s.extend$1=Do,s.filterObject=Ua,s.fromMat4=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r},s.fromQuat=function(r,e){var o=e[0],l=e[1],h=e[2],f=e[3],g=o+o,_=l+l,w=h+h,T=o*g,C=l*g,k=l*_,A=h*g,L=h*_,R=h*w,U=f*g,G=f*_,te=f*w;return r[0]=1-k-R,r[1]=C+te,r[2]=A-G,r[3]=0,r[4]=C-te,r[5]=1-T-R,r[6]=L+U,r[7]=0,r[8]=A+G,r[9]=L-U,r[10]=1-T-k,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},s.fromRotation=function(r,e){var o=Math.sin(e),l=Math.cos(e);return r[0]=l,r[1]=o,r[2]=0,r[3]=-o,r[4]=l,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},s.fromScaling=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},s.furthestTileCorner=function(r){const e=Math.round((r+45+360)%360/90)%4;return ca[e]},s.getAABBPointSquareDist=function(r,e,o){let l=0;for(let h=0;h<2;++h){const f=o?o[h]:0;r[h]>f&&(l+=(r[h]-f)*(r[h]-f)),e[h]<f&&(l+=(f-e[h])*(f-e[h]))}return l},s.getAnchorAlignment=$y,s.getAnchorJustification=Zy,s.getBounds=function(r){let e=1/0,o=1/0,l=-1/0,h=-1/0;for(const f of r)e=Math.min(e,f.x),o=Math.min(o,f.y),l=Math.max(l,f.x),h=Math.max(h,f.y);return{min:new j(e,o),max:new j(l,h)}},s.getColumn=function(r,e){return[r[4*e],r[4*e+1],r[4*e+2],r[4*e+3]]},s.getImage=Tf,s.getJSON=function(r,e){return Ei(Dn(r,{type:"json"}),e)},s.getMapSessionAPI=zo,s.getPerformanceMeasurement=Cb,s.getProjection=function(r){const e=ew[r.name];if(!e)throw new Error(`Invalid projection name: ${r.name}`);return e.conic?function(o,l){if(l.parallels&&Math.abs(l.parallels[0]+l.parallels[1])<.01){let h=function(f){const g=Math.max(.01,Math.cos(Ft(f))),_=1/(2*Math.max(Math.PI*g,1/g));return{wrap:!0,supportsWorldCopies:!0,unsupportedLayers:["custom"],project(w,T){const C=Ft(w)*g,k=Math.sin(Ft(T))/g;return{x:C*_+.5,y:-k*_+.5,z:0}},unproject(w,T){const C=-(T-.5)/_,k=sn(Hr((w-.5)/_)/g,-180,180),A=Math.asin(sn(C*g,-1,1)),L=sn(Hr(A),-85.051129,qo);return new cn(k,L)}}}(l.parallels[0]);if(l.name==="lambertConformalConic"){const{project:f,unproject:g}=ew.mercator;h={wrap:!0,supportsWorldCopies:!0,project:f,unproject:g}}return Dn({},o,l,h)}return Dn({},o,l)}(e,r):e},s.getRTLTextPluginStatus=di,s.getReferrer=ih,s.getTilePoint=function(r,{x:e,y:o},l=0){return new j(((e-l)*r.scale-r.x)*Nt,(o*r.scale-r.y)*Nt)},s.getTileVec3=function(r,e,o=0){return St(((e.x-o)*r.scale-r.x)*Nt,(e.y*r.scale-r.y)*Nt,bx(e.z,e.y))},s.getVideo=function(r,e){const o=H.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(let l=0;l<r.length;l++){const h=H.document.createElement("source");Sf(r[l])||(o.crossOrigin="Anonymous"),h.src=r[l],o.appendChild(h)}return{cancel:()=>{}}},s.globeBuffersForTileMesh=function(r,e,o,l){const h=r.context,f=r.transform;let g=e.globeGridBuffer,_=e.globePoleBuffer;if(!g){const w=c_.createGridVertices(o.canonical);g=e.globeGridBuffer=h.createVertexBuffer(w,Gb,!1)}if(!_){const w=c_.createPoleTriangleVertices(l,f.tileSize*l,o.canonical.y===0);_=e.globePoleBuffer=h.createVertexBuffer(w,Gb,!1)}return[g,_]},s.globeDenormalizeECEF=Wb,s.globeMatrixForTile=function(r,e){const o=Wb(Up(r)),l=((h=new Float64Array(16))[0]=(f=e)[0],h[1]=f[1],h[2]=f[2],h[3]=f[3],h[4]=f[4],h[5]=f[5],h[6]=f[6],h[7]=f[7],h[8]=f[8],h[9]=f[9],h[10]=f[10],h[11]=f[11],h[12]=f[12],h[13]=f[13],h[14]=f[14],h[15]=f[15],h);var h,f;return We(l,l,o),l},s.globePoleMatrixForTile=function(r,e,o){const l=V(new Float64Array(16)),h=Math.pow(2,r.z),f=(r.x-h/2)/h*Math.PI*2,g=o.point,_=o.worldSize/(o.tileSize*h);return he(l,l,[g.x,g.y,-o.worldSize/Math.PI/2]),pe(l,l,[_,_,_]),ze(l,l,Ft(-o._center.lat)),Ee(l,l,Ft(-o._center.lng)),Ee(l,l,f),e&&pe(l,l,[1,-1,1]),l},s.globeTileBounds=Up,s.globeToMercatorTransition=function(r){return Ao(5,6,r)},s.identity=V,s.identity$1=sr,s.invert=function(r,e){var o=e[0],l=e[1],h=e[2],f=e[3],g=e[4],_=e[5],w=e[6],T=e[7],C=e[8],k=e[9],A=e[10],L=e[11],R=e[12],U=e[13],G=e[14],te=e[15],se=o*_-l*g,de=o*w-h*g,me=o*T-f*g,ye=l*w-h*_,_e=l*T-f*_,Me=h*T-f*w,Ae=C*U-k*R,Ke=C*G-A*R,Ze=C*te-L*R,Pe=k*G-A*U,He=k*te-L*U,Qe=A*te-L*G,Ne=se*Qe-de*He+me*Pe+ye*Ze-_e*Ke+Me*Ae;return Ne?(r[0]=(_*Qe-w*He+T*Pe)*(Ne=1/Ne),r[1]=(h*He-l*Qe-f*Pe)*Ne,r[2]=(U*Me-G*_e+te*ye)*Ne,r[3]=(A*_e-k*Me-L*ye)*Ne,r[4]=(w*Ze-g*Qe-T*Ke)*Ne,r[5]=(o*Qe-h*Ze+f*Ke)*Ne,r[6]=(G*me-R*Me-te*de)*Ne,r[7]=(C*Me-A*me+L*de)*Ne,r[8]=(g*He-_*Ze+T*Ae)*Ne,r[9]=(l*Ze-o*He-f*Ae)*Ne,r[10]=(R*_e-U*me+te*se)*Ne,r[11]=(k*me-C*_e-L*se)*Ne,r[12]=(_*Ke-g*Pe-w*Ae)*Ne,r[13]=(o*Pe-l*Ke+h*Ae)*Ne,r[14]=(U*de-R*ye-G*se)*Ne,r[15]=(C*ye-k*de+A*se)*Ne,r):null},s.isMapAuthenticated=function(r){return ao.has(r)},s.isMapboxURL=Le,s.latFromMercatorY=Wi,s.len=ar,s.length=it,s.length$1=function(r){return Math.hypot(r[0],r[1],r[2],r[3])},s.loadVectorTile=Kb,s.makeRequest=Ei,s.mercatorXfromLng=Hc,s.mercatorYfromLat=Xc,s.mercatorZfromAltitude=po,s.mul=We,s.mul$1=bn,s.multiply=function(r,e,o){var l=e[0],h=e[1],f=e[2],g=e[3],_=e[4],w=e[5],T=e[6],C=e[7],k=e[8],A=o[0],L=o[1],R=o[2],U=o[3],G=o[4],te=o[5],se=o[6],de=o[7],me=o[8];return r[0]=A*l+L*g+R*T,r[1]=A*h+L*_+R*C,r[2]=A*f+L*w+R*k,r[3]=U*l+G*g+te*T,r[4]=U*h+G*_+te*C,r[5]=U*f+G*w+te*k,r[6]=se*l+de*g+me*T,r[7]=se*h+de*_+me*C,r[8]=se*f+de*w+me*k,r},s.multiply$1=J,s.multiply$2=An,s.nextPowerOfTwo=oi,s.normalize=qn,s.normalize$1=function(r,e){var o=e[0],l=e[1],h=e[2],f=e[3],g=o*o+l*l+h*h+f*f;return g>0&&(g=1/Math.sqrt(g)),r[0]=o*g,r[1]=l*g,r[2]=h*g,r[3]=f*g,r},s.number=rn,s.ortho=function(r,e,o,l,h,f,g){var _=1/(e-o),w=1/(l-h),T=1/(f-g);return r[0]=-2*_,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*w,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*T,r[11]=0,r[12]=(e+o)*_,r[13]=(h+l)*w,r[14]=(g+f)*T,r[15]=1,r},s.pbf=Gh,s.perspective=function(r,e,o,l,h){var f,g=1/Math.tan(e/2);return r[0]=g/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=g,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,h!=null&&h!==1/0?(r[10]=(h+l)*(f=1/(l-h)),r[14]=2*h*l*f):(r[10]=-1,r[14]=-2*l),r},s.pick=function(r,e){const o={};for(let l=0;l<e.length;l++){const h=e[l];h in r&&(o[h]=r[h])}return o},s.plugin=Gt,s.pointGeometry=j,s.polygonIntersectsBox=kx,s.polygonIntersectsPolygon=Sx,s.polygonizeBounds=function(r,e,o=0,l=!0){const h=new j(o,o),f=r.sub(h),g=e.add(h),_=[f,new j(g.x,f.y),g,new j(f.x,g.y)];return l&&_.push(f),_},s.posAttributes=GA,s.postMapLoadEvent=dn,s.postTurnstileEvent=gn,s.potpack=Ny,s.prevPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.floor(Math.log(r)/Math.LN2))},s.radToDeg=Hr,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(r){return r({pluginStatus:wt,pluginURL:Bt}),Rr.on("pluginStateChange",r),r},s.removeAuthState=function(r){ao.delete(r)},s.renderColorRamp=Ay,s.rotateX=ze,s.rotateX$1=ko,s.rotateY=Ee,s.rotateZ=function(r,e,o){var l=Math.sin(o),h=Math.cos(o),f=e[0],g=e[1],_=e[2],w=e[3],T=e[4],C=e[5],k=e[6],A=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=f*h+T*l,r[1]=g*h+C*l,r[2]=_*h+k*l,r[3]=w*h+A*l,r[4]=T*h-f*l,r[5]=C*h-g*l,r[6]=k*h-_*l,r[7]=A*h-w*l,r},s.rotateZ$1=function(r,e,o){o*=.5;var l=e[0],h=e[1],f=e[2],g=e[3],_=Math.sin(o),w=Math.cos(o);return r[0]=l*w+h*_,r[1]=h*w-l*_,r[2]=f*w+g*_,r[3]=g*w-f*_,r},s.scale=pe,s.scale$1=function(r,e,o){return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r[3]=e[3]*o,r},s.scale$2=hn,s.scaleAndAdd=_n,s.setCacheLimits=function(r,e){wf=r,nh=e},s.setColumn=function(r,e,o){r[4*e+0]=o[0],r[4*e+1]=o[1],r[4*e+2]=o[2],r[4*e+3]=o[3]},s.setRTLTextPlugin=function(r,e,o=!1){if(wt===gt||wt===Et||wt===on)throw new Error("setRTLTextPlugin cannot be called multiple times.");Bt=Xr.resolveURL(r),wt=gt,fn=e,er(),o||Ai()},s.smoothstep=Ao,s.spec=ke,s.storeAuthState=function(r,e){e?ao.add(r):ao.delete(r)},s.sub=Dt,s.subtract=at,s.symbolSize=QI,s.tileAABB=function(r,e,o,l,h,f,g,_,w){if(w.name==="globe"){const L=Up(new e_(f,new Bp(o,l,h)).canonical).getCorners(),R=Number.MAX_VALUE,U=[-R,-R,-R],G=[R,R,R],te=Hb(r,e);for(let se=0;se<L.length;se++)Ve(L[se],L[se],te),C=G,k=L[se],(T=G)[0]=Math.min(C[0],k[0]),T[1]=Math.min(C[1],k[1]),T[2]=Math.min(C[2],k[2]),Jt(U,U,L[se]);return new mo(G,U)}var T,C,k;const A=su({z:o,x:l,y:h},w);return new mo([(f+A.x/A.scale)*e,e*(A.y/A.scale),g],[(f+A.x2/A.scale)*e,e*(A.y2/A.scale),_])},s.tileTransform=su,s.transformMat3=function(r,e,o){var l=e[0],h=e[1],f=e[2];return r[0]=l*o[0]+h*o[3]+f*o[6],r[1]=l*o[1]+h*o[4]+f*o[7],r[2]=l*o[2]+h*o[5]+f*o[8],r},s.transformMat4=Ve,s.transformMat4$1=Zn,s.transformQuat=pt,s.translate=he,s.transpose=function(r,e){if(r===e){var o=e[1],l=e[2],h=e[5];r[1]=e[3],r[2]=e[6],r[3]=o,r[5]=e[7],r[6]=l,r[7]=h}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r},s.triggerPluginCompletionEvent=Tn,s.uniqueId=Qs,s.validateCustomStyleLayer=function(r){const e=[],o=r.id;return o===void 0&&e.push({message:`layers.${o}: missing required property "id"`}),r.render===void 0&&e.push({message:`layers.${o}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},s.validateFog=oy,s.validateLight=is,s.validateStyle=rs,s.values=Fa,s.vectorTile=Ol,s.version=I,s.warnOnce=Mn,s.window=H,s.wrap=io}),v(["./shared"],function(s){function I(ee){const O=typeof ee;if(O==="number"||O==="boolean"||O==="string"||ee==null)return JSON.stringify(ee);if(Array.isArray(ee)){let ne="[";for(const ue of ee)ne+=`${I(ue)},`;return`${ne}]`}const B=Object.keys(ee).sort();let K="{";for(let ne=0;ne<B.length;ne++)K+=`${JSON.stringify(B[ne])}:${I(ee[B[ne]])},`;return`${K}}`}function F(ee){let O="";for(const B of s.refProperties)O+=`/${I(ee[B])}`;return O}class W{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,B){for(const ne of O)this._layerConfigs[ne.id]=ne,(this._layers[ne.id]=s.createStyleLayer(ne)).compileFilter(),this.keyCache[ne.id]&&delete this.keyCache[ne.id];for(const ne of B)delete this.keyCache[ne],delete this._layerConfigs[ne],delete this._layers[ne];this.familiesBySource={};const K=function(ne,ue){const ve={};for(let fe=0;fe<ne.length;fe++){const Se=ue&&ue[ne[fe].id]||F(ne[fe]);ue&&(ue[ne[fe].id]=Se);let Le=ve[Se];Le||(Le=ve[Se]=[]),Le.push(ne[fe])}const xe=[];for(const fe in ve)xe.push(ve[fe]);return xe}(s.values(this._layerConfigs),this.keyCache);for(const ne of K){const ue=ne.map(Fe=>this._layers[Fe.id]),ve=ue[0];if(ve.visibility==="none")continue;const xe=ve.source||"";let fe=this.familiesBySource[xe];fe||(fe=this.familiesBySource[xe]={});const Se=ve.sourceLayer||"_geojsonTileLayer";let Le=fe[Se];Le||(Le=fe[Se]=[]),Le.push(ue)}}}const{ImageBitmap:j}=s.window;class Y{loadTile(O,B){const{uid:K,encoding:ne,rawImageData:ue,padding:ve,buildQuadTree:xe}=O,fe=j&&ue instanceof j?this.getImageData(ue,ve):ue;B(null,new s.DEMData(K,fe,ne,ve<1,xe))}getImageData(O,B){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(O.width,O.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=O.width,this.offscreenCanvas.height=O.height,this.offscreenCanvasContext.drawImage(O,0,0,O.width,O.height);const K=this.offscreenCanvasContext.getImageData(-B,-B,O.width+2*B,O.height+2*B);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:K.width,height:K.height},K.data)}}var H=function ee(O,B){var K,ne=O&&O.type;if(ne==="FeatureCollection")for(K=0;K<O.features.length;K++)ee(O.features[K],B);else if(ne==="GeometryCollection")for(K=0;K<O.geometries.length;K++)ee(O.geometries[K],B);else if(ne==="Feature")ee(O.geometry,B);else if(ne==="Polygon")be(O.coordinates,B);else if(ne==="MultiPolygon")for(K=0;K<O.coordinates.length;K++)be(O.coordinates[K],B);return O};function be(ee,O){if(ee.length!==0){ge(ee[0],O);for(var B=1;B<ee.length;B++)ge(ee[B],!O)}}function ge(ee,O){for(var B=0,K=0,ne=0,ue=ee.length,ve=ue-1;ne<ue;ve=ne++){var xe=(ee[ne][0]-ee[ve][0])*(ee[ve][1]+ee[ne][1]),fe=B+xe;K+=Math.abs(B)>=Math.abs(xe)?B-fe+xe:xe-fe+B,B=fe}B+K>=0!=!!O&&ee.reverse()}const Q=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class V{constructor(O){this._feature=O,this.extent=s.EXTENT,this.type=O.type,this.properties=O.tags,"id"in O&&!isNaN(O.id)&&(this.id=parseInt(O.id,10))}loadGeometry(){if(this._feature.type===1){const O=[];for(const B of this._feature.geometry)O.push([new s.pointGeometry(B[0],B[1])]);return O}{const O=[];for(const B of this._feature.geometry){const K=[];for(const ne of B)K.push(new s.pointGeometry(ne[0],ne[1]));O.push(K)}return O}}toGeoJSON(O,B,K){return Q.call(this,O,B,K)}}class J{constructor(O){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=O.length,this._features=O}feature(O){return new V(this._features[O])}}var he=s.vectorTile.VectorTileFeature,pe=ze;function ze(ee,O){this.options=O||{},this.features=ee,this.length=ee.length}function Ee(ee,O){this.id=typeof ee.id=="number"?ee.id:void 0,this.type=ee.type,this.rawGeometry=ee.type===1?[ee.geometry]:ee.geometry,this.properties=ee.tags,this.extent=O||4096}ze.prototype.feature=function(ee){return new Ee(this.features[ee],this.options.extent)},Ee.prototype.loadGeometry=function(){var ee=this.rawGeometry;this.geometry=[];for(var O=0;O<ee.length;O++){for(var B=ee[O],K=[],ne=0;ne<B.length;ne++)K.push(new s.pointGeometry(B[ne][0],B[ne][1]));this.geometry.push(K)}return this.geometry},Ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ee=this.geometry,O=1/0,B=-1/0,K=1/0,ne=-1/0,ue=0;ue<ee.length;ue++)for(var ve=ee[ue],xe=0;xe<ve.length;xe++){var fe=ve[xe];O=Math.min(O,fe.x),B=Math.max(B,fe.x),K=Math.min(K,fe.y),ne=Math.max(ne,fe.y)}return[O,K,B,ne]},Ee.prototype.toGeoJSON=he.prototype.toGeoJSON;var We=Oe,Be=pe;function Oe(ee){var O=new s.pbf;return function(B,K){for(var ne in B.layers)K.writeMessage(3,it,B.layers[ne])}(ee,O),O.finish()}function it(ee,O){var B;O.writeVarintField(15,ee.version||1),O.writeStringField(1,ee.name||""),O.writeVarintField(5,ee.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<ee.length;B++)K.feature=ee.feature(B),O.writeMessage(2,St,K);var ne=K.keys;for(B=0;B<ne.length;B++)O.writeStringField(3,ne[B]);var ue=K.values;for(B=0;B<ue.length;B++)O.writeMessage(4,hn,ue[B])}function St(ee,O){var B=ee.feature;B.id!==void 0&&O.writeVarintField(1,B.id),O.writeMessage(2,ct,ee),O.writeVarintField(3,B.type),O.writeMessage(4,Jt,B)}function ct(ee,O){var B=ee.feature,K=ee.keys,ne=ee.values,ue=ee.keycache,ve=ee.valuecache;for(var xe in B.properties){var fe=B.properties[xe],Se=ue[xe];if(fe!==null){Se===void 0&&(K.push(xe),ue[xe]=Se=K.length-1),O.writeVarint(Se);var Le=typeof fe;Le!=="string"&&Le!=="boolean"&&Le!=="number"&&(fe=JSON.stringify(fe));var Fe=Le+":"+fe,$e=ve[Fe];$e===void 0&&(ne.push(fe),ve[Fe]=$e=ne.length-1),O.writeVarint($e)}}}function at(ee,O){return(O<<3)+(7&ee)}function An(ee){return ee<<1^ee>>31}function Jt(ee,O){for(var B=ee.loadGeometry(),K=ee.type,ne=0,ue=0,ve=B.length,xe=0;xe<ve;xe++){var fe=B[xe],Se=1;K===1&&(Se=fe.length),O.writeVarint(at(1,Se));for(var Le=K===3?fe.length-1:fe.length,Fe=0;Fe<Le;Fe++){Fe===1&&K!==1&&O.writeVarint(at(2,Le-1));var $e=fe[Fe].x-ne,ht=fe[Fe].y-ue;O.writeVarint(An($e)),O.writeVarint(An(ht)),ne+=$e,ue+=ht}K===3&&O.writeVarint(at(7,1))}}function hn(ee,O){var B=typeof ee;B==="string"?O.writeStringField(1,ee):B==="boolean"?O.writeBooleanField(7,ee):B==="number"&&(ee%1!=0?O.writeDoubleField(3,ee):ee<0?O.writeSVarintField(6,ee):O.writeVarintField(5,ee))}function _n(ee,O,B,K,ne,ue){if(ne-K<=B)return;const ve=K+ne>>1;qn(ee,O,ve,K,ne,ue%2),_n(ee,O,B,K,ve-1,ue+1),_n(ee,O,B,ve+1,ne,ue+1)}function qn(ee,O,B,K,ne,ue){for(;ne>K;){if(ne-K>600){const Se=ne-K+1,Le=B-K+1,Fe=Math.log(Se),$e=.5*Math.exp(2*Fe/3),ht=.5*Math.sqrt(Fe*$e*(Se-$e)/Se)*(Le-Se/2<0?-1:1);qn(ee,O,B,Math.max(K,Math.floor(B-Le*$e/Se+ht)),Math.min(ne,Math.floor(B+(Se-Le)*$e/Se+ht)),ue)}const ve=O[2*B+ue];let xe=K,fe=ne;for(Pn(ee,O,K,B),O[2*ne+ue]>ve&&Pn(ee,O,K,ne);xe<fe;){for(Pn(ee,O,xe,fe),xe++,fe--;O[2*xe+ue]<ve;)xe++;for(;O[2*fe+ue]>ve;)fe--}O[2*K+ue]===ve?Pn(ee,O,K,fe):(fe++,Pn(ee,O,fe,ne)),fe<=B&&(K=fe+1),B<=fe&&(ne=fe-1)}}function Pn(ee,O,B,K){mr(ee,B,K),mr(O,2*B,2*K),mr(O,2*B+1,2*K+1)}function mr(ee,O,B){const K=ee[O];ee[O]=ee[B],ee[B]=K}function Ve(ee,O,B,K){const ne=ee-B,ue=O-K;return ne*ne+ue*ue}We.fromVectorTileJs=Oe,We.fromGeojsonVt=function(ee,O){O=O||{};var B={};for(var K in ee)B[K]=new pe(ee[K].features,O),B[K].name=K,B[K].version=O.version,B[K].extent=O.extent;return Oe({layers:B})},We.GeoJSONWrapper=Be;const pt=ee=>ee[0],Tt=ee=>ee[1];class Dt{constructor(O,B=pt,K=Tt,ne=64,ue=Float64Array){this.nodeSize=ne,this.points=O;const ve=O.length<65536?Uint16Array:Uint32Array,xe=this.ids=new ve(O.length),fe=this.coords=new ue(2*O.length);for(let Se=0;Se<O.length;Se++)xe[Se]=Se,fe[2*Se]=B(O[Se]),fe[2*Se+1]=K(O[Se]);_n(xe,fe,ne,0,xe.length-1,0)}range(O,B,K,ne){return function(ue,ve,xe,fe,Se,Le,Fe){const $e=[0,ue.length-1,0],ht=[];let _t,vt;for(;$e.length;){const bt=$e.pop(),Rt=$e.pop(),gn=$e.pop();if(Rt-gn<=Fe){for(let Sn=gn;Sn<=Rt;Sn++)_t=ve[2*Sn],vt=ve[2*Sn+1],_t>=xe&&_t<=Se&&vt>=fe&&vt<=Le&&ht.push(ue[Sn]);continue}const wn=Math.floor((gn+Rt)/2);_t=ve[2*wn],vt=ve[2*wn+1],_t>=xe&&_t<=Se&&vt>=fe&&vt<=Le&&ht.push(ue[wn]);const dn=(bt+1)%2;(bt===0?xe<=_t:fe<=vt)&&($e.push(gn),$e.push(wn-1),$e.push(dn)),(bt===0?Se>=_t:Le>=vt)&&($e.push(wn+1),$e.push(Rt),$e.push(dn))}return ht}(this.ids,this.coords,O,B,K,ne,this.nodeSize)}within(O,B,K){return function(ne,ue,ve,xe,fe,Se){const Le=[0,ne.length-1,0],Fe=[],$e=fe*fe;for(;Le.length;){const ht=Le.pop(),_t=Le.pop(),vt=Le.pop();if(_t-vt<=Se){for(let dn=vt;dn<=_t;dn++)Ve(ue[2*dn],ue[2*dn+1],ve,xe)<=$e&&Fe.push(ne[dn]);continue}const bt=Math.floor((vt+_t)/2),Rt=ue[2*bt],gn=ue[2*bt+1];Ve(Rt,gn,ve,xe)<=$e&&Fe.push(ne[bt]);const wn=(ht+1)%2;(ht===0?ve-fe<=Rt:xe-fe<=gn)&&(Le.push(vt),Le.push(bt-1),Le.push(wn)),(ht===0?ve+fe>=Rt:xe+fe>=gn)&&(Le.push(bt+1),Le.push(_t),Le.push(wn))}return Fe}(this.ids,this.coords,O,B,K,this.nodeSize)}}const bn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ee=>ee},ar=Math.fround||(Zn=new Float32Array(1),ee=>(Zn[0]=+ee,Zn[0]));var Zn;class Er{constructor(O){this.options=ca(Object.create(bn),O),this.trees=new Array(this.options.maxZoom+1)}load(O){const{log:B,minZoom:K,maxZoom:ne,nodeSize:ue}=this.options;B&&console.time("total time");const ve=`prepare ${O.length} points`;B&&console.time(ve),this.points=O;let xe=[];for(let fe=0;fe<O.length;fe++)O[fe].geometry&&xe.push(ko(O[fe],fe));this.trees[ne+1]=new Dt(xe,Xs,Ys,ue,Float32Array),B&&console.timeEnd(ve);for(let fe=ne;fe>=K;fe--){const Se=+Date.now();xe=this._cluster(xe,fe),this.trees[fe]=new Dt(xe,Xs,Ys,ue,Float32Array),B&&console.log("z%d: %d clusters in %dms",fe,xe.length,+Date.now()-Se)}return B&&console.timeEnd("total time"),this}getClusters(O,B){let K=((O[0]+180)%360+360)%360-180;const ne=Math.max(-90,Math.min(90,O[1]));let ue=O[2]===180?180:((O[2]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)K=-180,ue=180;else if(K>ue){const Le=this.getClusters([K,ne,180,ve],B),Fe=this.getClusters([-180,ne,ue,ve],B);return Le.concat(Fe)}const xe=this.trees[this._limitZoom(B)],fe=xe.range(Ba(K),Ft(ve),Ba(ue),Ft(ne)),Se=[];for(const Le of fe){const Fe=xe.points[Le];Se.push(Fe.numPoints?Io(Fe):this.points[Fe.index])}return Se}getChildren(O){const B=this._getOriginId(O),K=this._getOriginZoom(O),ne="No cluster with the specified id.",ue=this.trees[K];if(!ue)throw new Error(ne);const ve=ue.points[B];if(!ve)throw new Error(ne);const xe=this.options.radius/(this.options.extent*Math.pow(2,K-1)),fe=ue.within(ve.x,ve.y,xe),Se=[];for(const Le of fe){const Fe=ue.points[Le];Fe.parentId===O&&Se.push(Fe.numPoints?Io(Fe):this.points[Fe.index])}if(Se.length===0)throw new Error(ne);return Se}getLeaves(O,B,K){const ne=[];return this._appendLeaves(ne,O,B=B||10,K=K||0,0),ne}getTile(O,B,K){const ne=this.trees[this._limitZoom(O)],ue=Math.pow(2,O),{extent:ve,radius:xe}=this.options,fe=xe/ve,Se=(K-fe)/ue,Le=(K+1+fe)/ue,Fe={features:[]};return this._addTileFeatures(ne.range((B-fe)/ue,Se,(B+1+fe)/ue,Le),ne.points,B,K,ue,Fe),B===0&&this._addTileFeatures(ne.range(1-fe/ue,Se,1,Le),ne.points,ue,K,ue,Fe),B===ue-1&&this._addTileFeatures(ne.range(0,Se,fe/ue,Le),ne.points,-1,K,ue,Fe),Fe.features.length?Fe:null}getClusterExpansionZoom(O){let B=this._getOriginZoom(O)-1;for(;B<=this.options.maxZoom;){const K=this.getChildren(O);if(B++,K.length!==1)break;O=K[0].properties.cluster_id}return B}_appendLeaves(O,B,K,ne,ue){const ve=this.getChildren(B);for(const xe of ve){const fe=xe.properties;if(fe&&fe.cluster?ue+fe.point_count<=ne?ue+=fe.point_count:ue=this._appendLeaves(O,fe.cluster_id,K,ne,ue):ue<ne?ue++:O.push(xe),O.length===K)break}return ue}_addTileFeatures(O,B,K,ne,ue,ve){for(const xe of O){const fe=B[xe],Se=fe.numPoints;let Le,Fe,$e;if(Se)Le=la(fe),Fe=fe.x,$e=fe.y;else{const vt=this.points[fe.index];Le=vt.properties,Fe=Ba(vt.geometry.coordinates[0]),$e=Ft(vt.geometry.coordinates[1])}const ht={type:1,geometry:[[Math.round(this.options.extent*(Fe*ue-K)),Math.round(this.options.extent*($e*ue-ne))]],tags:Le};let _t;Se?_t=fe.id:this.options.generateId?_t=fe.index:this.points[fe.index].id&&(_t=this.points[fe.index].id),_t!==void 0&&(ht.id=_t),ve.features.push(ht)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(+O,this.options.maxZoom+1))}_cluster(O,B){const K=[],{radius:ne,extent:ue,reduce:ve,minPoints:xe}=this.options,fe=ne/(ue*Math.pow(2,B));for(let Se=0;Se<O.length;Se++){const Le=O[Se];if(Le.zoom<=B)continue;Le.zoom=B;const Fe=this.trees[B+1],$e=Fe.within(Le.x,Le.y,fe),ht=Le.numPoints||1;let _t=ht;for(const vt of $e){const bt=Fe.points[vt];bt.zoom>B&&(_t+=bt.numPoints||1)}if(_t>ht&&_t>=xe){let vt=Le.x*ht,bt=Le.y*ht,Rt=ve&&ht>1?this._map(Le,!0):null;const gn=(Se<<5)+(B+1)+this.points.length;for(const wn of $e){const dn=Fe.points[wn];if(dn.zoom<=B)continue;dn.zoom=B;const Sn=dn.numPoints||1;vt+=dn.x*Sn,bt+=dn.y*Sn,dn.parentId=gn,ve&&(Rt||(Rt=this._map(Le,!0)),ve(Rt,this._map(dn)))}Le.parentId=gn,K.push(sr(vt/_t,bt/_t,gn,_t,Rt))}else if(K.push(Le),_t>1)for(const vt of $e){const bt=Fe.points[vt];bt.zoom<=B||(bt.zoom=B,K.push(bt))}}return K}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,B){if(O.numPoints)return B?ca({},O.properties):O.properties;const K=this.points[O.index].properties,ne=this.options.map(K);return B&&ne===K?ca({},ne):ne}}function sr(ee,O,B,K,ne){return{x:ar(ee),y:ar(O),zoom:1/0,id:B,parentId:-1,numPoints:K,properties:ne}}function ko(ee,O){const[B,K]=ee.geometry.coordinates;return{x:ar(Ba(B)),y:ar(Ft(K)),zoom:1/0,index:O,parentId:-1}}function Io(ee){return{type:"Feature",id:ee.id,properties:la(ee),geometry:{type:"Point",coordinates:[(O=ee.x,360*(O-.5)),Hr(ee.y)]}};var O}function la(ee){const O=ee.numPoints,B=O>=1e4?`${Math.round(O/1e3)}k`:O>=1e3?Math.round(O/100)/10+"k":O;return ca(ca({},ee.properties),{cluster:!0,cluster_id:ee.id,point_count:O,point_count_abbreviated:B})}function Ba(ee){return ee/360+.5}function Ft(ee){const O=Math.sin(ee*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function Hr(ee){const O=(180-360*ee)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function ca(ee,O){for(const B in O)ee[B]=O[B];return ee}function Xs(ee){return ee.x}function Ys(ee){return ee.y}function Ks(ee,O,B,K){for(var ne,ue=K,ve=B-O>>1,xe=B-O,fe=ee[O],Se=ee[O+1],Le=ee[B],Fe=ee[B+1],$e=O+3;$e<B;$e+=3){var ht=sn(ee[$e],ee[$e+1],fe,Se,Le,Fe);if(ht>ue)ne=$e,ue=ht;else if(ht===ue){var _t=Math.abs($e-ve);_t<xe&&(ne=$e,xe=_t)}}ue>K&&(ne-O>3&&Ks(ee,O,ne,K),ee[ne+2]=ue,B-ne>3&&Ks(ee,ne,B,K))}function sn(ee,O,B,K,ne,ue){var ve=ne-B,xe=ue-K;if(ve!==0||xe!==0){var fe=((ee-B)*ve+(O-K)*xe)/(ve*ve+xe*xe);fe>1?(B=ne,K=ue):fe>0&&(B+=ve*fe,K+=xe*fe)}return(ve=ee-B)*ve+(xe=O-K)*xe}function Ao(ee,O,B,K){var ne={id:ee===void 0?null:ee,type:O,geometry:B,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ue){var ve=ue.geometry,xe=ue.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")io(ue,ve);else if(xe==="Polygon"||xe==="MultiLineString")for(var fe=0;fe<ve.length;fe++)io(ue,ve[fe]);else if(xe==="MultiPolygon")for(fe=0;fe<ve.length;fe++)for(var Se=0;Se<ve[fe].length;Se++)io(ue,ve[fe][Se])}(ne),ne}function io(ee,O){for(var B=0;B<O.length;B+=3)ee.minX=Math.min(ee.minX,O[B]),ee.minY=Math.min(ee.minY,O[B+1]),ee.maxX=Math.max(ee.maxX,O[B]),ee.maxY=Math.max(ee.maxY,O[B+1])}function ua(ee,O,B,K){if(O.geometry){var ne=O.geometry.coordinates,ue=O.geometry.type,ve=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),xe=[],fe=O.id;if(B.promoteId?fe=O.properties[B.promoteId]:B.generateId&&(fe=K||0),ue==="Point")Fa(ne,xe);else if(ue==="MultiPoint")for(var Se=0;Se<ne.length;Se++)Fa(ne[Se],xe);else if(ue==="LineString")Dn(ne,xe,ve,!1);else if(ue==="MultiLineString"){if(B.lineMetrics){for(Se=0;Se<ne.length;Se++)Dn(ne[Se],xe=[],ve,!1),ee.push(Ao(fe,"LineString",xe,O.properties));return}Js(ne,xe,ve,!1)}else if(ue==="Polygon")Js(ne,xe,ve,!0);else{if(ue!=="MultiPolygon"){if(ue==="GeometryCollection"){for(Se=0;Se<O.geometry.geometries.length;Se++)ua(ee,{id:fe,geometry:O.geometry.geometries[Se],properties:O.properties},B,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Se=0;Se<ne.length;Se++){var Le=[];Js(ne[Se],Le,ve,!0),xe.push(Le)}}ee.push(Ao(fe,ue,xe,O.properties))}}function Fa(ee,O){O.push(Qs(ee[0])),O.push(el(ee[1])),O.push(0)}function Dn(ee,O,B,K){for(var ne,ue,ve=0,xe=0;xe<ee.length;xe++){var fe=Qs(ee[xe][0]),Se=el(ee[xe][1]);O.push(fe),O.push(Se),O.push(0),xe>0&&(ve+=K?(ne*Se-fe*ue)/2:Math.sqrt(Math.pow(fe-ne,2)+Math.pow(Se-ue,2))),ne=fe,ue=Se}var Le=O.length-3;O[2]=1,Ks(O,0,Le,B),O[Le+2]=1,O.size=Math.abs(ve),O.start=0,O.end=O.size}function Js(ee,O,B,K){for(var ne=0;ne<ee.length;ne++){var ue=[];Dn(ee[ne],ue,B,K),O.push(ue)}}function Qs(ee){return ee/360+.5}function el(ee){var O=Math.sin(ee*Math.PI/180),B=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return B<0?0:B>1?1:B}function oi(ee,O,B,K,ne,ue,ve,xe){if(K/=O,ue>=(B/=O)&&ve<K)return ee;if(ve<B||ue>=K)return null;for(var fe=[],Se=0;Se<ee.length;Se++){var Le=ee[Se],Fe=Le.geometry,$e=Le.type,ht=ne===0?Le.minX:Le.minY,_t=ne===0?Le.maxX:Le.maxY;if(ht>=B&&_t<K)fe.push(Le);else if(!(_t<B||ht>=K)){var vt=[];if($e==="Point"||$e==="MultiPoint")ac(Fe,vt,B,K,ne);else if($e==="LineString")Na(Fe,vt,B,K,ne,!1,xe.lineMetrics);else if($e==="MultiLineString")Po(Fe,vt,B,K,ne,!1);else if($e==="Polygon")Po(Fe,vt,B,K,ne,!0);else if($e==="MultiPolygon")for(var bt=0;bt<Fe.length;bt++){var Rt=[];Po(Fe[bt],Rt,B,K,ne,!0),Rt.length&&vt.push(Rt)}if(vt.length){if(xe.lineMetrics&&$e==="LineString"){for(bt=0;bt<vt.length;bt++)fe.push(Ao(Le.id,$e,vt[bt],Le.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(vt.length===1?($e="LineString",vt=vt[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=vt.length===3?"Point":"MultiPoint"),fe.push(Ao(Le.id,$e,vt,Le.tags))}}}return fe.length?fe:null}function ac(ee,O,B,K,ne){for(var ue=0;ue<ee.length;ue+=3){var ve=ee[ue+ne];ve>=B&&ve<=K&&(O.push(ee[ue]),O.push(ee[ue+1]),O.push(ee[ue+2]))}}function Na(ee,O,B,K,ne,ue,ve){for(var xe,fe,Se=ja(ee),Le=ne===0?ai:sc,Fe=ee.start,$e=0;$e<ee.length-3;$e+=3){var ht=ee[$e],_t=ee[$e+1],vt=ee[$e+2],bt=ee[$e+3],Rt=ee[$e+4],gn=ne===0?ht:_t,wn=ne===0?bt:Rt,dn=!1;ve&&(xe=Math.sqrt(Math.pow(ht-bt,2)+Math.pow(_t-Rt,2))),gn<B?wn>B&&(fe=Le(Se,ht,_t,bt,Rt,B),ve&&(Se.start=Fe+xe*fe)):gn>K?wn<K&&(fe=Le(Se,ht,_t,bt,Rt,K),ve&&(Se.start=Fe+xe*fe)):Ua(Se,ht,_t,vt),wn<B&&gn>=B&&(fe=Le(Se,ht,_t,bt,Rt,B),dn=!0),wn>K&&gn<=K&&(fe=Le(Se,ht,_t,bt,Rt,K),dn=!0),!ue&&dn&&(ve&&(Se.end=Fe+xe*fe),O.push(Se),Se=ja(ee)),ve&&(Fe+=xe)}var Sn=ee.length-3;ht=ee[Sn],_t=ee[Sn+1],vt=ee[Sn+2],(gn=ne===0?ht:_t)>=B&&gn<=K&&Ua(Se,ht,_t,vt),Sn=Se.length-3,ue&&Sn>=3&&(Se[Sn]!==Se[0]||Se[Sn+1]!==Se[1])&&Ua(Se,Se[0],Se[1],Se[2]),Se.length&&O.push(Se)}function ja(ee){var O=[];return O.size=ee.size,O.start=ee.start,O.end=ee.end,O}function Po(ee,O,B,K,ne,ue){for(var ve=0;ve<ee.length;ve++)Na(ee[ve],O,B,K,ne,ue,!1)}function Ua(ee,O,B,K){ee.push(O),ee.push(B),ee.push(K)}function ai(ee,O,B,K,ne,ue){var ve=(ue-O)/(K-O);return ee.push(ue),ee.push(B+(ne-B)*ve),ee.push(1),ve}function sc(ee,O,B,K,ne,ue){var ve=(ue-B)/(ne-B);return ee.push(O+(K-O)*ve),ee.push(ue),ee.push(1),ve}function Mn(ee,O){for(var B=[],K=0;K<ee.length;K++){var ne,ue=ee[K],ve=ue.type;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")ne=si(ue.geometry,O);else if(ve==="MultiLineString"||ve==="Polygon"){ne=[];for(var xe=0;xe<ue.geometry.length;xe++)ne.push(si(ue.geometry[xe],O))}else if(ve==="MultiPolygon")for(ne=[],xe=0;xe<ue.geometry.length;xe++){for(var fe=[],Se=0;Se<ue.geometry[xe].length;Se++)fe.push(si(ue.geometry[xe][Se],O));ne.push(fe)}B.push(Ao(ue.id,ve,ne,ue.tags))}return B}function si(ee,O){var B=[];B.size=ee.size,ee.start!==void 0&&(B.start=ee.start,B.end=ee.end);for(var K=0;K<ee.length;K+=3)B.push(ee[K]+O,ee[K+1],ee[K+2]);return B}function Va(ee,O){if(ee.transformed)return ee;var B,K,ne,ue=1<<ee.z,ve=ee.x,xe=ee.y;for(B=0;B<ee.features.length;B++){var fe=ee.features[B],Se=fe.geometry,Le=fe.type;if(fe.geometry=[],Le===1)for(K=0;K<Se.length;K+=2)fe.geometry.push(Ni(Se[K],Se[K+1],O,ue,ve,xe));else for(K=0;K<Se.length;K++){var Fe=[];for(ne=0;ne<Se[K].length;ne+=2)Fe.push(Ni(Se[K][ne],Se[K][ne+1],O,ue,ve,xe));fe.geometry.push(Fe)}}return ee.transformed=!0,ee}function Ni(ee,O,B,K,ne,ue){return[Math.round(B*(ee*K-ne)),Math.round(B*(O*K-ue))]}function $a(ee,O,B,K,ne){for(var ue=O===ne.maxZoom?0:ne.tolerance/((1<<O)*ne.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:K,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xe=0;xe<ee.length;xe++){ve.numFeatures++,ha(ve,ee[xe],ue,ne);var fe=ee[xe].minX,Se=ee[xe].minY,Le=ee[xe].maxX,Fe=ee[xe].maxY;fe<ve.minX&&(ve.minX=fe),Se<ve.minY&&(ve.minY=Se),Le>ve.maxX&&(ve.maxX=Le),Fe>ve.maxY&&(ve.maxY=Fe)}return ve}function ha(ee,O,B,K){var ne=O.geometry,ue=O.type,ve=[];if(ue==="Point"||ue==="MultiPoint")for(var xe=0;xe<ne.length;xe+=3)ve.push(ne[xe]),ve.push(ne[xe+1]),ee.numPoints++,ee.numSimplified++;else if(ue==="LineString")oo(ve,ne,ee,B,!1,!1);else if(ue==="MultiLineString"||ue==="Polygon")for(xe=0;xe<ne.length;xe++)oo(ve,ne[xe],ee,B,ue==="Polygon",xe===0);else if(ue==="MultiPolygon")for(var fe=0;fe<ne.length;fe++){var Se=ne[fe];for(xe=0;xe<Se.length;xe++)oo(ve,Se[xe],ee,B,!0,xe===0)}if(ve.length){var Le=O.tags||null;if(ue==="LineString"&&K.lineMetrics){for(var Fe in Le={},O.tags)Le[Fe]=O.tags[Fe];Le.mapbox_clip_start=ne.start/ne.size,Le.mapbox_clip_end=ne.end/ne.size}var $e={geometry:ve,type:ue==="Polygon"||ue==="MultiPolygon"?3:ue==="LineString"||ue==="MultiLineString"?2:1,tags:Le};O.id!==null&&($e.id=O.id),ee.features.push($e)}}function oo(ee,O,B,K,ne,ue){var ve=K*K;if(K>0&&O.size<(ne?ve:K))B.numPoints+=O.length/3;else{for(var xe=[],fe=0;fe<O.length;fe+=3)(K===0||O[fe+2]>ve)&&(B.numSimplified++,xe.push(O[fe]),xe.push(O[fe+1])),B.numPoints++;ne&&function(Se,Le){for(var Fe=0,$e=0,ht=Se.length,_t=ht-2;$e<ht;_t=$e,$e+=2)Fe+=(Se[$e]-Se[_t])*(Se[$e+1]+Se[_t+1]);if(Fe>0===Le)for($e=0,ht=Se.length;$e<ht/2;$e+=2){var vt=Se[$e],bt=Se[$e+1];Se[$e]=Se[ht-2-$e],Se[$e+1]=Se[ht-1-$e],Se[ht-2-$e]=vt,Se[ht-1-$e]=bt}}(xe,ue),ee.push(xe)}}function Ti(ee,O){var B=(O=this.options=function(ne,ue){for(var ve in ue)ne[ve]=ue[ve];return ne}(Object.create(this.options),O)).debug;if(B&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var K=function(ne,ue){var ve=[];if(ne.type==="FeatureCollection")for(var xe=0;xe<ne.features.length;xe++)ua(ve,ne.features[xe],ue,xe);else ua(ve,ne.type==="Feature"?ne:{geometry:ne},ue);return ve}(ee,O);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(K=function(ne,ue){var ve=ue.buffer/ue.extent,xe=ne,fe=oi(ne,1,-1-ve,ve,0,-1,2,ue),Se=oi(ne,1,1-ve,2+ve,0,-1,2,ue);return(fe||Se)&&(xe=oi(ne,1,-ve,1+ve,0,-1,2,ue)||[],fe&&(xe=Mn(fe,1).concat(xe)),Se&&(xe=xe.concat(Mn(Se,-1)))),xe}(K,O)).length&&this.splitTile(K,0,0,0),B&&(K.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Mo(ee,O,B){return 32*((1<<ee)*B+O)+ee}function ji(ee,O){const B=ee.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);const K=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!K)return O(null,null);const ne=new J(K.features);let ue=We(ne);ue.byteOffset===0&&ue.byteLength===ue.buffer.byteLength||(ue=new Uint8Array(ue)),O(null,{vectorTile:ne,rawData:ue.buffer})}Ti.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ti.prototype.splitTile=function(ee,O,B,K,ne,ue,ve){for(var xe=[ee,O,B,K],fe=this.options,Se=fe.debug;xe.length;){K=xe.pop(),B=xe.pop(),O=xe.pop(),ee=xe.pop();var Le=1<<O,Fe=Mo(O,B,K),$e=this.tiles[Fe];if(!$e&&(Se>1&&console.time("creation"),$e=this.tiles[Fe]=$a(ee,O,B,K,fe),this.tileCoords.push({z:O,x:B,y:K}),Se)){Se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,B,K,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var ht="z"+O;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if($e.source=ee,ne){if(O===fe.maxZoom||O===ne)continue;var _t=1<<ne-O;if(B!==Math.floor(ue/_t)||K!==Math.floor(ve/_t))continue}else if(O===fe.indexMaxZoom||$e.numPoints<=fe.indexMaxPoints)continue;if($e.source=null,ee.length!==0){Se>1&&console.time("clipping");var vt,bt,Rt,gn,wn,dn,Sn=.5*fe.buffer/fe.extent,zo=.5-Sn,ao=.5+Sn,gr=1+Sn;vt=bt=Rt=gn=null,wn=oi(ee,Le,B-Sn,B+ao,0,$e.minX,$e.maxX,fe),dn=oi(ee,Le,B+zo,B+gr,0,$e.minX,$e.maxX,fe),ee=null,wn&&(vt=oi(wn,Le,K-Sn,K+ao,1,$e.minY,$e.maxY,fe),bt=oi(wn,Le,K+zo,K+gr,1,$e.minY,$e.maxY,fe),wn=null),dn&&(Rt=oi(dn,Le,K-Sn,K+ao,1,$e.minY,$e.maxY,fe),gn=oi(dn,Le,K+zo,K+gr,1,$e.minY,$e.maxY,fe),dn=null),Se>1&&console.timeEnd("clipping"),xe.push(vt||[],O+1,2*B,2*K),xe.push(bt||[],O+1,2*B,2*K+1),xe.push(Rt||[],O+1,2*B+1,2*K),xe.push(gn||[],O+1,2*B+1,2*K+1)}}},Ti.prototype.getTile=function(ee,O,B){var K=this.options,ne=K.extent,ue=K.debug;if(ee<0||ee>24)return null;var ve=1<<ee,xe=Mo(ee,O=(O%ve+ve)%ve,B);if(this.tiles[xe])return Va(this.tiles[xe],ne);ue>1&&console.log("drilling down to z%d-%d-%d",ee,O,B);for(var fe,Se=ee,Le=O,Fe=B;!fe&&Se>0;)Se--,Le=Math.floor(Le/2),Fe=Math.floor(Fe/2),fe=this.tiles[Mo(Se,Le,Fe)];return fe&&fe.source?(ue>1&&console.log("found parent tile z%d-%d-%d",Se,Le,Fe),ue>1&&console.time("drilling down"),this.splitTile(fe.source,Se,Le,Fe,ee,O,B),ue>1&&console.timeEnd("drilling down"),this.tiles[xe]?Va(this.tiles[xe],ne):null):null};class Ga extends s.VectorTileWorkerSource{constructor(O,B,K,ne,ue){super(O,B,K,ne,ji),ue&&(this.loadGeoJSON=ue)}loadData(O,B){const K=O&&O.request,ne=K&&K.collectResourceTiming;this.loadGeoJSON(O,(ue,ve)=>{if(ue||!ve)return B(ue);if(typeof ve!="object")return B(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));{H(ve,!0);try{if(O.filter){const fe=s.createExpression(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(fe.result==="error")throw new Error(fe.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));const Se=ve.features.filter(Le=>fe.value.evaluate({zoom:0},Le));ve={type:"FeatureCollection",features:Se}}this._geoJSONIndex=O.cluster?new Er(function({superclusterOptions:fe,clusterProperties:Se}){if(!Se||!fe)return fe;const Le={},Fe={},$e={accumulated:null,zoom:0},ht={properties:null},_t=Object.keys(Se);for(const vt of _t){const[bt,Rt]=Se[vt],gn=s.createExpression(Rt),wn=s.createExpression(typeof bt=="string"?[bt,["accumulated"],["get",vt]]:bt);Le[vt]=gn.value,Fe[vt]=wn.value}return fe.map=vt=>{ht.properties=vt;const bt={};for(const Rt of _t)bt[Rt]=Le[Rt].evaluate($e,ht);return bt},fe.reduce=(vt,bt)=>{ht.properties=bt;for(const Rt of _t)$e.accumulated=vt[Rt],vt[Rt]=Fe[Rt].evaluate($e,ht)},fe}(O)).load(ve.features):function(fe,Se){return new Ti(fe,Se)}(ve,O.geojsonVtOptions)}catch(fe){return B(fe)}this.loaded={};const xe={};if(ne){const fe=s.getPerformanceMeasurement(K);fe&&(xe.resourceTiming={},xe.resourceTiming[O.source]=JSON.parse(JSON.stringify(fe)))}B(null,xe)}})}reloadTile(O,B){const K=this.loaded;return K&&K[O.uid]?super.reloadTile(O,B):this.loadTile(O,B)}loadGeoJSON(O,B){if(O.request)s.getJSON(O.request,B);else{if(typeof O.data!="string")return B(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));try{return B(null,JSON.parse(O.data))}catch{return B(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(O,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(O.clusterId))}catch(K){B(K)}}getClusterChildren(O,B){try{B(null,this._geoJSONIndex.getChildren(O.clusterId))}catch(K){B(K)}}getClusterLeaves(O,B){try{B(null,this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset))}catch(K){B(K)}}}class Xr{constructor(O){this.self=O,this.actor=new s.Actor(O,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Ga},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,K)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=K},this.self.registerRTLTextPlugin=B=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=B.applyArabicShaping,s.plugin.processBidirectionalText=B.processBidirectionalText,s.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}}clearCaches(O,B,K){delete this.layerIndexes[O],delete this.availableImages[O],delete this.workerSources[O],delete this.demWorkerSources[O],K()}checkIfReady(O,B,K){K()}setReferrer(O,B){this.referrer=B}spriteLoaded(O,B){this.isSpriteLoaded[O]=B;for(const K in this.workerSources[O]){const ne=this.workerSources[O][K];for(const ue in ne)ne[ue]instanceof s.VectorTileWorkerSource&&(ne[ue].isSpriteLoaded=B,ne[ue].fire(new s.Event("isSpriteLoaded")))}}setImages(O,B,K){this.availableImages[O]=B;for(const ne in this.workerSources[O]){const ue=this.workerSources[O][ne];for(const ve in ue)ue[ve].availableImages=B}K()}enableTerrain(O,B,K){this.terrain=B,K()}setProjection(O,B){this.projections[O]=s.getProjection(B)}setLayers(O,B,K){this.getLayerIndex(O).replace(B),K()}updateLayers(O,B,K){this.getLayerIndex(O).update(B.layers,B.removedIds),K()}loadTile(O,B,K){const ne=this.enableTerrain?s.extend({enableTerrain:this.terrain},B):B;ne.projection=this.projections[O]||this.defaultProjection,this.getWorkerSource(O,B.type,B.source).loadTile(ne,K)}loadDEMTile(O,B,K){const ne=this.enableTerrain?s.extend({buildQuadTree:this.terrain},B):B;this.getDEMWorkerSource(O,B.source).loadTile(ne,K)}reloadTile(O,B,K){const ne=this.enableTerrain?s.extend({enableTerrain:this.terrain},B):B;ne.projection=this.projections[O]||this.defaultProjection,this.getWorkerSource(O,B.type,B.source).reloadTile(ne,K)}abortTile(O,B,K){this.getWorkerSource(O,B.type,B.source).abortTile(B,K)}removeTile(O,B,K){this.getWorkerSource(O,B.type,B.source).removeTile(B,K)}removeSource(O,B,K){if(!this.workerSources[O]||!this.workerSources[O][B.type]||!this.workerSources[O][B.type][B.source])return;const ne=this.workerSources[O][B.type][B.source];delete this.workerSources[O][B.type][B.source],ne.removeSource!==void 0?ne.removeSource(B,K):K()}loadWorkerSource(O,B,K){try{this.self.importScripts(B.url),K()}catch(ne){K(ne.toString())}}syncRTLPluginState(O,B,K){try{s.plugin.setState(B);const ne=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&ne!=null){this.self.importScripts(ne);const ue=s.plugin.isParsed();K(ue?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ne}`),ue)}}catch(ne){K(ne.toString())}}getAvailableImages(O){let B=this.availableImages[O];return B||(B=[]),B}getLayerIndex(O){let B=this.layerIndexes[O];return B||(B=this.layerIndexes[O]=new W),B}getWorkerSource(O,B,K){return this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][B]||(this.workerSources[O][B]={}),this.workerSources[O][B][K]||(this.workerSources[O][B][K]=new this.workerSourceTypes[B]({send:(ne,ue,ve,xe,fe,Se)=>{this.actor.send(ne,ue,ve,O,fe,Se)},scheduler:this.actor.scheduler},this.getLayerIndex(O),this.getAvailableImages(O),this.isSpriteLoaded[O])),this.workerSources[O][B][K]}getDEMWorkerSource(O,B){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][B]||(this.demWorkerSources[O][B]=new Y),this.demWorkerSources[O][B]}enforceCacheSizeLimit(O,B){s.enforceCacheSizeLimit(B)}getWorkerPerformanceMetrics(O,B,K){K(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Xr(self)),Xr}),v(["./shared"],function(s){var I=F;function F(p){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,y,x=new Blob([""],{type:"text/javascript"}),S=URL.createObjectURL(x);try{y=new Worker(S),m=!0}catch{m=!1}return y&&y.terminate(),URL.revokeObjectURL(S),m}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var m=document.createElement("canvas");m.width=m.height=1;var y=m.getContext("2d");if(!y)return!1;var x=y.getImageData(0,0,1,1);return x&&x.width===m.width}()?(W[c=i&&i.failIfMajorPerformanceCaveat]===void 0&&(W[c]=function(m){var y,x=function(S){var E=document.createElement("canvas"),P=Object.create(F.webGLContextAttributes);return P.failIfMajorPerformanceCaveat=S,E.getContext("webgl",P)||E.getContext("experimental-webgl",P)}(m);if(!x)return!1;try{y=x.createShader(x.VERTEX_SHADER)}catch{return!1}return!(!y||x.isContextLost())&&(x.shaderSource(y,"void main() {}"),x.compileShader(y),x.getShaderParameter(y,x.COMPILE_STATUS)===!0)}(c)),W[c]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var c}(p)}var W={};function j(p,i){var c=i[0],m=i[1],y=i[2],x=i[3],S=c*x-y*m;return S?(p[0]=x*(S=1/S),p[1]=-m*S,p[2]=-y*S,p[3]=c*S,p):null}function Y(p,i){if(Array.isArray(p)){if(!Array.isArray(i)||p.length!==i.length)return!1;for(let c=0;c<p.length;c++)if(!Y(p[c],i[c]))return!1;return!0}if(typeof p=="object"&&p!==null&&i!==null){if(typeof i!="object"||Object.keys(p).length!==Object.keys(i).length)return!1;for(const c in p)if(!Y(p[c],i[c]))return!1;return!0}return p===i}F.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const H={create:function(p,i,c){const m=s.window.document.createElement(p);return i!==void 0&&(m.className=i),c&&c.appendChild(m),m},createSVG:function(p,i,c){const m=s.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const y of Object.keys(i))m.setAttributeNS(null,y,i[y]);return c&&c.appendChild(m),m}},be=s.window.document&&s.window.document.documentElement.style,ge=be&&be.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Q;H.disableDrag=function(){be&&ge&&(Q=be[ge],be[ge]="none")},H.enableDrag=function(){be&&ge&&(be[ge]=Q)};const V=function(p){p.preventDefault(),p.stopPropagation(),s.window.removeEventListener("click",V,!0)};function J(p,i,c){const m=p.offsetWidth===i.width?1:p.offsetWidth/i.width;return new s.pointGeometry((c.clientX-i.left)*m,(c.clientY-i.top)*m)}function he(p){const{userImage:i}=p;return!!(i&&i.render&&i.render())&&(p.data.replace(new Uint8Array(i.data.buffer)),!0)}H.suppressClick=function(){s.window.addEventListener("click",V,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",V,!0)},0)},H.mousePos=function(p,i){const c=p.getBoundingClientRect();return J(p,c,i)},H.touchPos=function(p,i){const c=p.getBoundingClientRect(),m=[];for(let y=0;y<i.length;y++)m.push(J(p,c,i[y]));return m},H.mouseButton=function(p){return s.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button};class pe extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:m}of this.requestors)this._notify(c,m);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,c){if(!i)return!0;let m=0;for(const y of i){if(y[0]<m||y[1]<y[0]||c<y[1])return!1;m=y[1]}return!0}_validateContent(i,c){return!(i&&(i.length!==4||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let m=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(m=!1);this.isLoaded()||m?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const m={};for(const y of i){this.images[y]||this.fire(new s.Event("styleimagemissing",{id:y}));const x=this.images[y];x?m[y]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:s.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,m)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],m=this.getImage(i);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const y={w:m.data.width+2,h:m.data.height+2,x:0,y:0},x=new s.ImagePosition(y,m);this.patterns[i]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:m}=s.potpack(i),y=this.atlasImage;y.resize({width:c||1,height:m||1});for(const x in this.patterns){const{bin:S}=this.patterns[x],E=S.x+1,P=S.y+1,M=this.images[x].data,z=M.width,D=M.height;s.RGBAImage.copy(M,y,{x:0,y:0},{x:E,y:P},{width:z,height:D}),s.RGBAImage.copy(M,y,{x:0,y:D-1},{x:E,y:P-1},{width:z,height:1}),s.RGBAImage.copy(M,y,{x:0,y:0},{x:E,y:P+D},{width:z,height:1}),s.RGBAImage.copy(M,y,{x:z-1,y:0},{x:E-1,y:P},{width:1,height:D}),s.RGBAImage.copy(M,y,{x:0,y:0},{x:E+z,y:P},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.images[c];he(m)&&this.updateImage(c,m)}}}const ze=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(p,i){return function([c,m,y]){const x=s.degToRad(m+90),S=s.degToRad(y);return{x:c*Math.cos(x)*Math.sin(S),y:c*Math.sin(x)*Math.sin(S),z:c*Math.cos(S),azimuthal:m,polar:y}}(p.expression.evaluate(i))}interpolate(p,i,c){return{x:s.number(p.x,i.x,c),y:s.number(p.y,i.y,c),z:s.number(p.z,i.z,c),azimuthal:s.number(p.azimuthal,i.azimuthal,c),polar:s.number(p.polar,i.polar,c)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),Ee="-transition";class We extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(ze),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(s.validateLight,i,c))for(const m in i){const y=i[m];s.endsWith(m,Ee)?this._transitionable.setTransition(m.slice(0,-Ee.length),y):this._transitionable.setValue(m,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m){return(!m||m.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Be=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)}),Oe="-transition";class it extends s.Evented{constructor(i,c){super(),this._transitionable=new s.Transitionable(Be),this.set(i),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(i){for(const c in i){const m=i[c];s.endsWith(c,Oe)?this._transitionable.setTransition(c.slice(0,-Oe.length),m):this._transitionable.setValue(c,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}}function St(p,i,c,m){const y=s.smoothstep(45,65,c),[x,S]=ct(p,m),E=s.length(i);let P=1-Math.min(1,Math.exp((E-x)/(S-x)*-6));return P*=P*P,P=Math.min(1,1.00747*P),P*y*p.alpha}function ct(p,i){const c=.5/Math.tan(.5*i);return[p.range[0]+c,p.range[1]+c]}const at=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"])}),An="-transition";class Jt extends s.Evented{constructor(i,c){super(),this._transitionable=new s.Transitionable(at),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=c}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,c={}){if(!this._validate(s.validateFog,i,c))for(const m in i){const y=i[m];s.endsWith(m,An)?this._transitionable.setTransition(m.slice(0,-An.length),y):this._transitionable.setValue(m,y)}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return s.smoothstep(45,65,i)*c.a}getOpacityAtLatLng(i,c){return this._transform.projection.supportsFog?function(m,y,x){const S=s.MercatorCoordinate.fromLngLat(y),E=x.elevation?x.elevation.getAtPointOrZero(S):0,P=[S.x,S.y,E];return s.transformMat4(P,P,x.mercatorFogMatrix),St(m,P,x.pitch,x._fov)}(this.state,i,c):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?ct(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m){return(!m||m.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class hn{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const m=this.workerPool.acquire(this.id);for(let y=0;y<m.length;y++){const x=new hn.Actor(m[y],c,this.id);x.name=`Worker ${y}`,this.actors.push(x)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,c,m){s.asyncAll(this.actors,(y,x)=>{y.send(i,c,x)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function _n(p,i,c){return i*(s.EXTENT/(p.tileSize*Math.pow(2,c-p.tileID.overscaledZ)))}hn.Actor=s.Actor;class qn{constructor(i,c,m){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class mr{constructor(i,c,m,y){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let m=0;m<this.attributes.length;m++){const y=c.attributes[this.attributes[m].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,c,m){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],S=c.attributes[x.name];S!==void 0&&i.vertexAttribPointer(S,x.components,i[Pn[x.type]],!1,this.itemSize,x.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ve{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pt extends Ve{getDefault(){return s.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Tt extends Ve{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Dt extends Ve{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class bn extends Ve{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ar extends Ve{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Zn extends Ve{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Er extends Ve{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class sr extends Ve{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class ko extends Ve{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class Io extends Ve{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class la extends Ve{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ba extends Ve{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ft extends Ve{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Hr extends Ve{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class ca extends Ve{getDefault(){return s.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Xs extends Ve{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ys extends Ve{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Ks extends Ve{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class sn extends Ve{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ao extends Ve{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class io extends Ve{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class ua extends Ve{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Fa extends Ve{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Dn extends Ve{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Js extends Ve{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Qs extends Ve{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class el extends Ve{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class oi extends Ve{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class ac extends Ve{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Na extends Ve{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class ja extends Ve{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Po extends Ve{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Ua extends Po{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class ai extends Po{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class sc extends ai{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Mn{constructor(i,c,m,y){this.context=i,this.width=c,this.height=m;const x=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new Ua(i,x),y&&(this.depthAttachment=new ai(i,x))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class si{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new pt(this),this.clearDepth=new Tt(this),this.clearStencil=new Dt(this),this.colorMask=new bn(this),this.depthMask=new ar(this),this.stencilMask=new Zn(this),this.stencilFunc=new Er(this),this.stencilOp=new sr(this),this.stencilTest=new ko(this),this.depthRange=new Io(this),this.depthTest=new la(this),this.depthFunc=new Ba(this),this.blend=new Ft(this),this.blendFunc=new Hr(this),this.blendColor=new ca(this),this.blendEquation=new Xs(this),this.cullFace=new Ys(this),this.cullFaceSide=new Ks(this),this.frontFace=new sn(this),this.program=new Ao(this),this.activeTexture=new io(this),this.viewport=new ua(this),this.bindFramebuffer=new Fa(this),this.bindRenderbuffer=new Dn(this),this.bindTexture=new Js(this),this.bindVertexBuffer=new Qs(this),this.bindElementBuffer=new el(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new oi(this),this.pixelStoreUnpack=new ac(this),this.pixelStoreUnpackPremultiplyAlpha=new Na(this),this.pixelStoreUnpackFlipY=new ja(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new qn(this,i,c)}createVertexBuffer(i,c,m){return new mr(this,i,c,m)}createRenderbuffer(i,c,m){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,i,c,m),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,m){return new Mn(this,i,c,m)}clear({color:i,depth:c,stencil:m}){const y=this.gl;let x=0;i&&(x|=y.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(x|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),y.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){Y(i.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Va{constructor(i,c,m,y){this.screenBounds=i,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(x=>y.pointCoordinate3D(x)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(i,c){let m,y;if(i instanceof s.pointGeometry||typeof i[0]=="number"){const x=s.pointGeometry.convert(i);m=[s.pointGeometry.convert(i)],y=c.isPointAboveHorizon(x)}else{const x=s.pointGeometry.convert(i[0]),S=s.pointGeometry.convert(i[1]);m=[x,S],y=s.polygonizeBounds(x,S).every(E=>c.isPointAboveHorizon(E))}return new Va(m,c.getCameraPoint(),y,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const c=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],y=s.polygonizeBounds(c,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<m.x?y.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?y[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(y[3]=this.cameraPoint)),s.bufferConvexPolygon(y,i)}containsTile(i,c,m){const y=i.queryPadding+1,x=i.tileID.wrap,S=m?this._bufferedCameraMercator(y,c).map($=>s.getTilePoint(i.tileTransform,$,x)):this._bufferedScreenMercator(y,c).map($=>s.getTilePoint(i.tileTransform,$,x)),E=this.screenGeometryMercator.map($=>s.getTileVec3(i.tileTransform,$,x)),P=E.map($=>new s.pointGeometry($[0],$[1])),M=c.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),z=s.getTileVec3(i.tileTransform,M,x),D=E.map($=>{const X=s.sub($,$,z);return s.normalize(X,X),new s.Ray(z,X)}),N=_n(i,1,c.zoom);if(s.polygonIntersectsBox(S,0,0,s.EXTENT,s.EXTENT))return{queryGeometry:this,tilespaceGeometry:P,tilespaceRays:D,bufferedTilespaceGeometry:S,bufferedTilespaceBounds:(Z=s.getBounds(S),Z.min.x=s.clamp(Z.min.x,0,s.EXTENT),Z.min.y=s.clamp(Z.min.y,0,s.EXTENT),Z.max.x=s.clamp(Z.max.x,0,s.EXTENT),Z.max.y=s.clamp(Z.max.y,0,s.EXTENT),Z),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:N};var Z}_bufferedScreenMercator(i,c){const m=Ni(i);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{const y=this.bufferedScreenGeometry(i).map(x=>c.pointCoordinate3D(x));return this._screenRaycastCache[m]=y,y}}_bufferedCameraMercator(i,c){const m=Ni(i);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{const y=this.bufferedCameraGeometry(i).map(x=>c.pointCoordinate3D(x));return this._cameraRaycastCache[m]=y,y}}}function Ni(p){return 100*p|0}function $a(p,i,c){const m=function(y,x){if(y)return c(y);if(x){const S=s.pick(s.extend(x,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(S.vectorLayers=x.vector_layers,S.vectorLayerIds=S.vectorLayers.map(E=>E.id)),S.tiles=i.canonicalizeTileset(S,p.url),c(null,S)}};return p.url?s.getJSON(i.transformRequest(i.normalizeSourceURL(p.url),s.ResourceType.Source),m):s.exported.frame(()=>m(null,p))}class ha{constructor(i,c,m){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),m=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*c),y=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*c),x=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*c),S=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=m&&i.x<x&&i.y>=y&&i.y<S}}class oo extends s.Evented{constructor(i,c,m,y){super(),this.id=i,this.dispatcher=m,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},c),s.extend(this,s.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=$a(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):c&&(s.extend(this,c),c.bounds&&(this.tileBounds=new ha(c.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(c.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const m=s.exported.devicePixelRatio>=2,y=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);i.request=s.getImage(this.map._requestManager.transformRequest(y,s.ResourceType.Tile),(x,S,E,P)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(x)i.state="errored",c(x);else if(S){this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:E,expires:P});const M=this.map.painter.context,z=M.gl;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new s.Texture(M,S,z.RGBA,{useMipmap:!0}),i.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE),M.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),c(null)}})}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let Ti;function Mo(p,i,c,m,y,x,S,E){const P=[p,c,y,i,m,x,1,1,1],M=[S,E,1],z=s.adjoint([],P),[D,N,Z]=s.transformMat3(M,M,s.transpose(z,z));return s.multiply(P,[D,0,0,0,N,0,0,0,Z],P)}class ji extends s.Evented{constructor(i,c,m,y){super(),this.id=i,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(i,c){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(m,y)=>{this._loaded=!0,m?this.fire(new s.ErrorEvent(m)):y&&(this.image=s.exported.getImageData(y),this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i,delete this._boundsArray;const c=i.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(m){let y=1/0,x=1/0,S=-1/0,E=-1/0;for(const D of m)y=Math.min(y,D.x),x=Math.min(x,D.y),S=Math.max(S,D.x),E=Math.max(E,D.y);const P=Math.max(S-y,E-x),M=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),z=Math.pow(2,M);return new s.CanonicalTileID(M,Math.floor((y+S)/2*z),Math.floor((x+E)/2*z))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){delete this._boundsArray}_makeBoundsArray(){const i=s.tileTransform(this.tileID,this.map.transform.projection),[c,m,y,x]=this.coordinates.map(S=>{const E=i.projection.project(S[0],S[1]);return s.getTilePoint(i,E)._round()});return this.perspectiveTransform=function(S,E,P,M,z,D,N,Z,$,X){const le=Mo(0,0,S,0,0,E,S,E),q=Mo(P,M,z,D,N,Z,$,X);return s.multiply(q,s.adjoint(le,le),q),[q[6]/q[8]*S/s.EXTENT,q[7]/q[8]*E/s.EXTENT]}(this.width,this.height,c.x,c.y,m.x,m.y,x.x,x.y,y.x,y.y),this._boundsArray=new s.StructArrayLayout4i8,this._boundsArray.emplaceBack(c.x,c.y,0,0),this._boundsArray.emplaceBack(m.x,m.y,s.EXTENT,0),this._boundsArray.emplaceBack(x.x,x.y,0,s.EXTENT),this._boundsArray.emplaceBack(y.x,y.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,s.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new s.Texture(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ga={vector:class extends s.Evented{constructor(p,i,c,m){if(super(),this.id=p,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(i,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=$a(this._options,this.map._requestManager,(p,i)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new s.ErrorEvent(p)):i&&(s.extend(this,i),i.bounds&&(this.tileBounds=new ha(i.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}onAdd(p){this.map=p,this.load()}setSourceProperty(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p();const i=this.map.style._getSourceCaches(this.id);for(const c of i)c.clearTiles();this.load()}setTiles(p){return this.setSourceProperty(()=>{this._options.tiles=p}),this}setUrl(p){return this.setSourceProperty(()=>{this.url=p,this._options.url=p}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(p,i){const c=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),m={request:this.map._requestManager.transformRequest(c,s.ResourceType.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:p.isSymbolTile};if(m.request.collectResourceTiming=this._collectResourceTiming,p.actor&&p.state!=="expired")p.state==="loading"?p.reloadCallback=i:p.request=p.actor.send("reloadTile",m,y.bind(this));else if(p.actor=this._tileWorkers[c]=this._tileWorkers[c]||this.dispatcher.getActor(),this.dispatcher.ready)p.request=p.actor.send("loadTile",m,y.bind(this),void 0,!0);else{const x=s.loadVectorTile.call({deduped:this._deduped},m,(S,E)=>{S||!E?y.call(this,S):(m.data={cacheControl:E.cacheControl,expires:E.expires,rawData:E.rawData.slice(0)},p.actor&&p.actor.send("loadTile",m,y.bind(this),void 0,!0))},!0);p.request={cancel:x}}function y(x,S){return delete p.request,p.aborted?i(null):x&&x.status!==404?i(x):(S&&S.resourceTiming&&(p.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&p.setExpiryData(S),p.loadVectorData(S,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id})}unloadTile(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:oo,"raster-dem":class extends oo{constructor(p,i,c,m){super(p,i,c,m),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(p,i){const c=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(y,x){y&&(p.state="errored",i(y)),x&&(p.dem=x,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",i(null))}p.request=s.getImage(this.map._requestManager.transformRequest(c,s.ResourceType.Tile),function(y,x,S,E){if(delete p.request,p.aborted)p.state="unloaded",i(null);else if(y)p.state="errored",i(y);else if(x){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:S,expires:E});const P=s.window.ImageBitmap&&x instanceof s.window.ImageBitmap&&(Ti==null&&(Ti=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),Ti),M=1-(x.width-s.prevPowerOfTwo(x.width))/2;M<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const z=P?x:s.exported.getImageData(x,M),D={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:z,encoding:this.encoding,padding:M};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",D,m.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(p){const i=p.canonical,c=Math.pow(2,i.z),m=(i.x-1+c)%c,y=i.x===0?p.wrap-1:p.wrap,x=(i.x+1+c)%c,S=i.x+1===c?p.wrap+1:p.wrap,E={};return E[new s.OverscaledTileID(p.overscaledZ,y,i.z,m,i.y).key]={backfilled:!1},E[new s.OverscaledTileID(p.overscaledZ,S,i.z,x,i.y).key]={backfilled:!1},i.y>0&&(E[new s.OverscaledTileID(p.overscaledZ,y,i.z,m,i.y-1).key]={backfilled:!1},E[new s.OverscaledTileID(p.overscaledZ,p.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},E[new s.OverscaledTileID(p.overscaledZ,S,i.z,x,i.y-1).key]={backfilled:!1}),i.y+1<c&&(E[new s.OverscaledTileID(p.overscaledZ,y,i.z,m,i.y+1).key]={backfilled:!1},E[new s.OverscaledTileID(p.overscaledZ,p.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},E[new s.OverscaledTileID(p.overscaledZ,S,i.z,x,i.y+1).key]={backfilled:!1}),E}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends s.Evented{constructor(p,i,c,m){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(m),this._data=i.data,this._options=s.extend({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const y=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*y,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*y,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.EXTENT,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*y,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},i),this}getClusterChildren(p,i){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},i),this}getClusterLeaves(p,i,c,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:i,offset:c},m),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=s.extend({},this.workerOptions),i=this._data;typeof i=="string"?(p.request=this.map._requestManager.transformRequest(s.exported.resolveURL(i),s.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(c,m)=>{if(this._loaded=!0,this._pendingLoad=null,c)this.fire(new s.ErrorEvent(c));else{const y={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&m&&m.resourceTiming&&m.resourceTiming[this.id]&&(y.resourceTiming=m.resourceTiming[this.id]),this.fire(new s.Event("data",y)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,i){const c=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(c,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(m,y)=>(delete p.request,p.unloadVectorData(),p.aborted?i(null):m?i(m):(p.loadVectorData(y,this.map.painter,c==="reloadTile"),i(null))),void 0,c==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends ji{constructor(p,i,c,m){super(p,i,c,m),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const i of p.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.ResourceType.Source).url);s.getVideo(this.urls,(i,c)=>{this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const i=this.video.seekable;p<i.start(0)||p>i.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,i=p.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(p,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,s.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2));for(const c in this.tiles){const m=this.tiles[c];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:ji,canvas:class extends ji{constructor(p,i,c,m){super(p,i,c,m),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(x=>typeof x!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context,c=i.gl;this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,s.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(i,this.canvas,c.RGBA,{premultiply:!0});for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}}},Xr=function(p,i,c,m){const y=new Ga[i.type](p,i,c,m);if(y.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${y.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],y),y};function ee(p,i){const c=s.identity([]);return s.scale(c,c,[.5*p.width,.5*-p.height,1]),s.translate(c,c,[1,-1,0]),s.multiply$1(c,c,p.calculateProjMatrix(i.toUnwrapped()))}function O(p,i,c,m,y,x,S,E=!1){const P=p.tilesIn(m,S,E);P.sort(K);const M=[];for(const D of P)M.push({wrappedTileID:D.tile.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(i,c,p._state,D,y,x,ee(p.transform,D.tile.tileID),E)});const z=function(D){const N={},Z={};for(const $ of D){const X=$.queryResults,le=$.wrappedTileID,q=Z[le]=Z[le]||{};for(const oe in X){const ae=X[oe],re=q[oe]=q[oe]||{},ie=N[oe]=N[oe]||[];for(const ce of ae)re[ce.featureIndex]||(re[ce.featureIndex]=!0,ie.push(ce))}}return N}(M);for(const D in z)z[D].forEach(N=>{const Z=N.feature,$=p.getFeatureState(Z.layer["source-layer"],Z.id);Z.source=Z.layer.source,Z.layer["source-layer"]&&(Z.sourceLayer=Z.layer["source-layer"]),Z.state=$});return z}function B(p,i){const c=p.getRenderableIds().map(x=>p.getTileByID(x)),m=[],y={};for(let x=0;x<c.length;x++){const S=c[x],E=S.tileID.canonical.key;y[E]||(y[E]=!0,S.querySourceFeatures(m,i))}return m}function K(p,i){const c=p.tileID,m=i.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function ne(){return $o.workerClass!=null?new $o.workerClass:new s.window.Worker($o.workerUrl)}const ue="mapboxgl_preloaded_worker_pool";class ve{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ve.workerCount;)this.workers.push(new ne);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ue]}numActive(){return Object.keys(this.active).length}}let xe;function fe(){return xe||(xe=new ve),xe}function Se(p,i){const c={};for(const m in p)m!=="ref"&&(c[m]=p[m]);return s.refProperties.forEach(m=>{m in i&&(c[m]=i[m])}),c}function Le(p){p=p.slice();const i=Object.create(null);for(let c=0;c<p.length;c++)i[p[c].id]=p[c];for(let c=0;c<p.length;c++)"ref"in p[c]&&(p[c]=Se(p[c],i[p[c].ref]));return p}ve.workerCount=2;const Fe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function $e(p,i,c){c.push({command:Fe.addSource,args:[p,i[p]]})}function ht(p,i,c){i.push({command:Fe.removeSource,args:[p]}),c[p]=!0}function _t(p,i,c,m){ht(p,c,m),$e(p,i,c)}function vt(p,i,c){let m;for(m in p[c])if(p[c].hasOwnProperty(m)&&m!=="data"&&!Y(p[c][m],i[c][m]))return!1;for(m in i[c])if(i[c].hasOwnProperty(m)&&m!=="data"&&!Y(p[c][m],i[c][m]))return!1;return!0}function bt(p,i,c,m,y,x){let S;for(S in i=i||{},p=p||{})p.hasOwnProperty(S)&&(Y(p[S],i[S])||c.push({command:x,args:[m,S,i[S],y]}));for(S in i)i.hasOwnProperty(S)&&!p.hasOwnProperty(S)&&(Y(p[S],i[S])||c.push({command:x,args:[m,S,i[S],y]}))}function Rt(p){return p.id}function gn(p,i){return p[i.id]=i,p}class wn{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let c=1,m=this._distances[c];const y=i*this.paddedLength+this.padding;for(;m<y&&c<this._distances.length;)m=this._distances[++c];const x=c-1,S=this._distances[x],E=m-S,P=E>0?(y-S)/E:0;return this.points[x].mult(1-P).add(this.points[c].mult(P))}}class dn{constructor(i,c,m){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(c/m);for(let S=0;S<this.xCellCount*this.yCellCount;S++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,m,y,x){this._forEachCell(c,m,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(i,c,m,y){this._forEachCell(c-y,m-y,c+y,m+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(m),this.circles.push(y)}_insertBoxCell(i,c,m,y,x,S){this.boxCells[x].push(S)}_insertCircleCell(i,c,m,y,x,S){this.circleCells[x].push(S)}_query(i,c,m,y,x,S){if(m<0||i>this.width||y<0||c>this.height)return!x&&[];const E=[];if(i<=0&&c<=0&&this.width<=m&&this.height<=y){if(x)return!0;for(let P=0;P<this.boxKeys.length;P++)E.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const M=this.circles[3*P],z=this.circles[3*P+1],D=this.circles[3*P+2];E.push({key:this.circleKeys[P],x1:M-D,y1:z-D,x2:M+D,y2:z+D})}return S?E.filter(S):E}return this._forEachCell(i,c,m,y,this._queryCell,E,{hitTest:x,seenUids:{box:{},circle:{}}},S),x?E.length>0:E}_queryCircle(i,c,m,y,x){const S=i-m,E=i+m,P=c-m,M=c+m;if(E<0||S>this.width||M<0||P>this.height)return!y&&[];const z=[];return this._forEachCell(S,P,E,M,this._queryCellCircle,z,{hitTest:y,circle:{x:i,y:c,radius:m},seenUids:{box:{},circle:{}}},x),y?z.length>0:z}query(i,c,m,y,x){return this._query(i,c,m,y,!1,x)}hitTest(i,c,m,y,x){return this._query(i,c,m,y,!0,x)}hitTestCircle(i,c,m,y){return this._queryCircle(i,c,m,!0,y)}_queryCell(i,c,m,y,x,S,E,P){const M=E.seenUids,z=this.boxCells[x];if(z!==null){const N=this.bboxes;for(const Z of z)if(!M.box[Z]){M.box[Z]=!0;const $=4*Z;if(i<=N[$+2]&&c<=N[$+3]&&m>=N[$+0]&&y>=N[$+1]&&(!P||P(this.boxKeys[Z]))){if(E.hitTest)return S.push(!0),!0;S.push({key:this.boxKeys[Z],x1:N[$],y1:N[$+1],x2:N[$+2],y2:N[$+3]})}}}const D=this.circleCells[x];if(D!==null){const N=this.circles;for(const Z of D)if(!M.circle[Z]){M.circle[Z]=!0;const $=3*Z;if(this._circleAndRectCollide(N[$],N[$+1],N[$+2],i,c,m,y)&&(!P||P(this.circleKeys[Z]))){if(E.hitTest)return S.push(!0),!0;{const X=N[$],le=N[$+1],q=N[$+2];S.push({key:this.circleKeys[Z],x1:X-q,y1:le-q,x2:X+q,y2:le+q})}}}}}_queryCellCircle(i,c,m,y,x,S,E,P){const M=E.circle,z=E.seenUids,D=this.boxCells[x];if(D!==null){const Z=this.bboxes;for(const $ of D)if(!z.box[$]){z.box[$]=!0;const X=4*$;if(this._circleAndRectCollide(M.x,M.y,M.radius,Z[X+0],Z[X+1],Z[X+2],Z[X+3])&&(!P||P(this.boxKeys[$])))return S.push(!0),!0}}const N=this.circleCells[x];if(N!==null){const Z=this.circles;for(const $ of N)if(!z.circle[$]){z.circle[$]=!0;const X=3*$;if(this._circlesCollide(Z[X],Z[X+1],Z[X+2],M.x,M.y,M.radius)&&(!P||P(this.circleKeys[$])))return S.push(!0),!0}}}_forEachCell(i,c,m,y,x,S,E,P){const M=this._convertToXCellCoord(i),z=this._convertToYCellCoord(c),D=this._convertToXCellCoord(m),N=this._convertToYCellCoord(y);for(let Z=M;Z<=D;Z++)for(let $=z;$<=N;$++)if(x.call(this,i,c,m,y,this.xCellCount*$+Z,S,E,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,m,y,x,S){const E=y-i,P=x-c,M=m+S;return M*M>E*E+P*P}_circleAndRectCollide(i,c,m,y,x,S,E){const P=(S-y)/2,M=Math.abs(i-(y+P));if(M>P+m)return!1;const z=(E-x)/2,D=Math.abs(c-(x+z));if(D>z+m)return!1;if(M<=P||D<=z)return!0;const N=M-P,Z=D-z;return N*N+Z*Z<=m*m}}const Sn=Math.tan(85*Math.PI/180);function zo(p,i,c,m,y,x){let S=s.create();if(c){if(y.projection.name==="globe")S=s.calculateGlobeMatrix(y,y.worldSize/y._projectionScaler,[0,0]),s.multiply$1(S,S,s.globeDenormalizeECEF(s.globeTileBounds(i)));else{const E=j([],x);S[0]=E[0],S[1]=E[1],S[4]=E[2],S[5]=E[3]}m||s.rotateZ(S,S,y.angle)}else s.multiply$1(S,y.labelPlaneMatrix,p);return S}function ao(p,i,c,m,y,x){if(c){if(y.projection.name==="globe"){const S=zo(p,i,c,m,y,x);return s.invert(S,S),s.multiply$1(S,p,S),S}{const S=s.clone(p),E=s.identity([]);return E[0]=x[0],E[1]=x[1],E[4]=x[2],E[5]=x[3],s.multiply$1(S,S,E),m||s.rotateZ(S,S,-y.angle),S}}return y.glCoordMatrix}function gr(p,i,c=0){const m=[p.x,p.y,c,1];c?s.transformMat4$1(m,m,i):rl(m,m,i);const y=m[3];return{point:new s.pointGeometry(m[0]/y,m[1]/y),signedDistanceFromCamera:y}}function Ui(p,i){return Math.min(.5+p/i*.5,1.5)}function lc(p,i){const c=p[0]/p[3],m=p[1]/p[3];return c>=-i[0]&&c<=i[0]&&m>=-i[1]&&m<=i[1]}function wf(p,i,c,m,y,x,S,E,P,M){const z=c.transform,D=m?p.textSizeData:p.iconSizeData,N=s.evaluateSizeForZoom(D,c.transform.zoom),Z=[256/c.width*2+1,256/c.height*2+1],$=m?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;$.clear();const X=p.lineVertexArray,le=m?p.text.placedSymbolArray:p.icon.placedSymbolArray,q=c.transform.width/c.transform.height;let oe=!1;for(let ae=0;ae<le.length;ae++){const re=le.get(ae);if(re.writingMode!==s.WritingMode.vertical||oe||ae!==0&&le.get(ae-1).writingMode===s.WritingMode.horizontal||(oe=!0),re.hidden||re.writingMode===s.WritingMode.vertical&&!oe){Ei(re.numGlyphs,$);continue}oe=!1;const ie=new s.pointGeometry(re.tileAnchorX,re.tileAnchorY),ce=P?P(ie):[0,0,0],we=z.projection.projectTilePoint(ie.x,ie.y,M.canonical),Ce=[we.x+ce[0],we.y+ce[1],we.z+ce[2]],Ye=[...Ce,1];if(s.transformMat4$1(Ye,Ye,i),!lc(Ye,Z)){Ei(re.numGlyphs,$);continue}const Ge=Ui(c.transform.cameraToCenterDistance,Ye[3]),Ue=s.evaluateSizeForFeature(D,N,re),Ie=S?Ue/Ge:Ue*Ge,Te=gr(new s.pointGeometry(Ce[0],Ce[1]),y,Ce[2]);if(Te.signedDistanceFromCamera<=0){Ei(re.numGlyphs,$);continue}let je={};const De=S?null:P,dt=rh(re,Ie,!1,E,i,y,x,p.glyphOffsetArray,X,$,Te.point,ie,je,q,De,z.projection,M);oe=dt.useVertical,De&&dt.needsFlipping&&(je={}),(dt.notEnoughRoom||oe||dt.needsFlipping&&rh(re,Ie,!0,E,i,y,x,p.glyphOffsetArray,X,$,Te.point,ie,je,q,De,z.projection,M).notEnoughRoom)&&Ei(re.numGlyphs,$)}m?p.text.dynamicLayoutVertexBuffer.updateData($):p.icon.dynamicLayoutVertexBuffer.updateData($)}function nh(p,i,c,m,y,x,S,E,P,M,z,D,N,Z,$){const X=E.glyphStartIndex+E.numGlyphs,le=E.lineStartIndex,q=E.lineStartIndex+E.lineLength,oe=i.getoffsetX(E.glyphStartIndex),ae=i.getoffsetX(X-1),re=nl(p*oe,c,m,y,x,S,E.segment,le,q,P,M,z,D,N,!0,Z,$);if(!re)return null;const ie=nl(p*ae,c,m,y,x,S,E.segment,le,q,P,M,z,D,N,!0,Z,$);return ie?{first:re,last:ie}:null}function tl(p,i,c,m){return p.writingMode===s.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*m?{useVertical:!0}:p.writingMode===s.WritingMode.vertical?i.y<c.y?{needsFlipping:!0}:null:p.flipState!==0&&function(y,x,S){const E=(x.x-y.x)*S;return E===0||Math.abs((x.y-y.y)/E)>Sn}(i,c,m)?p.flipState===1?{needsFlipping:!0}:null:i.x>c.x?{needsFlipping:!0}:null}function rh(p,i,c,m,y,x,S,E,P,M,z,D,N,Z,$,X,le){const q=i/24,oe=p.lineOffsetX*q,ae=p.lineOffsetY*q;let re;if(p.numGlyphs>1){const ie=p.glyphStartIndex+p.numGlyphs,ce=p.lineStartIndex,we=p.lineStartIndex+p.lineLength,Ce=nh(q,E,oe,ae,c,z,D,p,P,x,N,$,!1,X,le);if(!Ce)return{notEnoughRoom:!0};const Ye=gr(Ce.first.point,S).point,Ge=gr(Ce.last.point,S).point;if(m&&!c){const Ue=tl(p,Ye,Ge,Z);if(p.flipState=Ue&&Ue.needsFlipping?1:2,Ue)return Ue}re=[Ce.first];for(let Ue=p.glyphStartIndex+1;Ue<ie-1;Ue++)re.push(nl(q*E.getoffsetX(Ue),oe,ae,c,z,D,p.segment,ce,we,P,x,N,$,!1,!1,X,le));re.push(Ce.last)}else{if(m&&!c){const ce=gr(D,y).point,we=p.lineStartIndex+p.segment+1,Ce=new s.pointGeometry(P.getx(we),P.gety(we)),Ye=gr(Ce,y),Ge=tl(p,ce,Ye.signedDistanceFromCamera>0?Ye.point:uc(D,Ce,ce,1,y,void 0,X,le.canonical),Z);if(p.flipState=Ge&&Ge.needsFlipping?1:2,Ge)return Ge}const ie=nl(q*E.getoffsetX(p.glyphStartIndex),oe,ae,c,z,D,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,P,x,N,$,!1,!1,X,le);if(!ie)return{notEnoughRoom:!0};re=[ie]}for(const ie of re)s.addDynamicAttributes(M,ie.point,ie.angle);return{}}function cc(p,i,c,m,y){const x=m.projectTilePoint(p.x,p.y,i);if(!y)return gr(x,c,x.z);const S=y(p);return gr(new s.pointGeometry(x.x+S[0],x.y+S[1]),c,x.z+S[2])}function uc(p,i,c,m,y,x,S,E){const P=cc(p.add(p.sub(i)._unit()),E,y,S,x).point,M=c.sub(P);return c.add(M._mult(m/M.mag()))}function nl(p,i,c,m,y,x,S,E,P,M,z,D,N,Z,$,X,le){const q=m?p-i:p+i;let oe=q>0?1:-1,ae=0;m&&(oe*=-1,ae=Math.PI),oe<0&&(ae+=Math.PI);let re=oe>0?E+S:E+S+1,ie=y,ce=y,we=0,Ce=0;const Ye=Math.abs(q),Ge=[],Ue=[];let Ie=x;const Te=()=>{const Xe=re-oe;return we===0?x:new s.pointGeometry(M.getx(Xe),M.gety(Xe))},je=()=>uc(Te(),Ie,ce,Ye-we+1,z,N,X,le.canonical);for(;we+Ce<=Ye;){if(re+=oe,re<E||re>=P)return null;if(ce=ie,Ge.push(ie),Z&&Ue.push(Ie||Te()),ie=D[re],ie===void 0){Ie=new s.pointGeometry(M.getx(re),M.gety(re));const Xe=cc(Ie,le.canonical,z,X,N);ie=Xe.signedDistanceFromCamera>0?D[re]=Xe.point:je()}else Ie=null;we+=Ce,Ce=ce.dist(ie)}$&&N&&(Ie=Ie||new s.pointGeometry(M.getx(re),M.gety(re)),D[re]=ie=D[re]===void 0?ie:je(),Ce=ce.dist(ie));const De=(Ye-we)/Ce,dt=ie.sub(ce),xt=dt.mult(De)._add(ce);c&&xt._add(dt._unit()._perp()._mult(c*oe));const Mt=ae+Math.atan2(ie.y-ce.y,ie.x-ce.x);return Ge.push(xt),Z&&(Ie=Ie||new s.pointGeometry(M.getx(re),M.gety(re)),Ue.push(function(Xe,gt,Et){const on=1-Et;return new s.pointGeometry(Xe.x*on+gt.x*Et,Xe.y*on+gt.y*Et)}(Ue.length>0?Ue[Ue.length-1]:Ie,Ie,De))),{point:xt,angle:Mt,path:Ge,tilePath:Ue}}const ih=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ei(p,i){for(let c=0;c<p;c++){const m=i.length;i.resize(m+4),i.float32.set(ih,3*m)}}function rl(p,i,c){const m=i[0],y=i[1];return p[0]=c[0]*m+c[4]*y+c[12],p[1]=c[1]*m+c[5]*y+c[13],p[3]=c[3]*m+c[7]*y+c[15],p}const Vi=100;class Wg{constructor(i,c,m=new dn(i.width+200,i.height+200,25),y=new dn(i.width+200,i.height+200,25)){this.transform=i,this.grid=m,this.ignoredGrid=y,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Vi,this.screenBottomBoundary=i.height+Vi,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=c}placeCollisionBox(i,c,m,y,x,S,E){let P=c.projectedAnchorX,M=c.projectedAnchorY,z=c.projectedAnchorZ;const D=c.elevation,N=c.tileID;if(D&&N){const re=this.transform.projection.createTileTransform(this.transform,this.transform.worldSize),ie=re.upVector(N.canonical,c.tileAnchorX,c.tileAnchorY),ce=re.upVectorScale(N.canonical);P+=ie[0]*D*ce,M+=ie[1]*D*ce,z+=ie[2]*D*ce}const Z=this.projectAndGetPerspectiveRatio(S,P,M,z,c.tileID),$=x*Z.perspectiveRatio,X=(c.x1*i+m.x-c.padding)*$+Z.point.x,le=(c.y1*i+m.y-c.padding)*$+Z.point.y,q=(c.x2*i+m.x+c.padding)*$+Z.point.x,oe=(c.y2*i+m.y+c.padding)*$+Z.point.y,ae=Z.perspectiveRatio<=.55||Z.aboveHorizon;return!this.isInsideGrid(X,le,q,oe)||!y&&this.grid.hitTest(X,le,q,oe,E)||ae?{box:[],offscreen:!1}:{box:[X,le,q,oe],offscreen:this.isOffscreen(X,le,q,oe)}}placeCollisionCircles(i,c,m,y,x,S,E,P,M,z,D,N,Z,$){const X=[],le=this.transform.elevation,q=this.transform.projection.createTileTransform(this.transform,this.transform.worldSize),oe=le?le.getAtTileOffsetFunc($,q):De=>[0,0,0],ae=new s.pointGeometry(c.tileAnchorX,c.tileAnchorY),re=this.transform.projection.projectTilePoint(c.tileAnchorX,c.tileAnchorY,$.canonical),ie=oe(ae),ce=[re.x+ie[0],re.y+ie[1],re.z+ie[2]],we=this.projectAndGetPerspectiveRatio(S,ce[0],ce[1],ce[2],$),{perspectiveRatio:Ce}=we,Ye=(z?x/Ce:x*Ce)/s.ONE_EM,Ge=gr(new s.pointGeometry(ce[0],ce[1]),E,ce[2]).point,Ue=we.signedDistanceFromCamera>0?nh(Ye,y,c.lineOffsetX*Ye,c.lineOffsetY*Ye,!1,Ge,ae,c,m,E,{},le&&!z?oe:null,z&&!!le,this.transform.projection,$):null;let Ie=!1,Te=!1,je=!0;if(Ue&&!we.aboveHorizon){const De=.5*N*Ce+Z,dt=new s.pointGeometry(-100,-100),xt=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Mt=new wn,Xe=Ue.first,gt=Ue.last;let Et=[];for(let wt=Xe.path.length-1;wt>=1;wt--)Et.push(Xe.path[wt]);for(let wt=1;wt<gt.path.length;wt++)Et.push(gt.path[wt]);const on=2.5*De;if(P){const wt=Et.map(le?(Bt,Tn)=>{const er=oe(Tn<Xe.path.length-1?Xe.tilePath[Xe.path.length-1-Tn]:gt.tilePath[Tn-Xe.path.length+2]);return gr(Bt,P,er[2])}:Bt=>gr(Bt,P));Et=wt.some(Bt=>Bt.signedDistanceFromCamera<=0)?[]:wt.map(Bt=>Bt.point)}let fn=[];if(Et.length>0){const wt=Et[0].clone(),Bt=Et[0].clone();for(let Tn=1;Tn<Et.length;Tn++)wt.x=Math.min(wt.x,Et[Tn].x),wt.y=Math.min(wt.y,Et[Tn].y),Bt.x=Math.max(Bt.x,Et[Tn].x),Bt.y=Math.max(Bt.y,Et[Tn].y);fn=wt.x>=dt.x&&Bt.x<=xt.x&&wt.y>=dt.y&&Bt.y<=xt.y?[Et]:Bt.x<dt.x||wt.x>xt.x||Bt.y<dt.y||wt.y>xt.y?[]:s.clipLine([Et],dt.x,dt.y,xt.x,xt.y)}for(const wt of fn){Mt.reset(wt,.25*De);let Bt=0;Bt=Mt.length<=.5*De?1:Math.ceil(Mt.paddedLength/on)+1;for(let Tn=0;Tn<Bt;Tn++){const er=Tn/Math.max(Bt-1,1),Rr=Mt.lerp(er),di=Rr.x+Vi,Ai=Rr.y+Vi;X.push(di,Ai,De,0);const Gt=di-De,Ct=Ai-De,Ut=di+De,Rn=Ai+De;if(je=je&&this.isOffscreen(Gt,Ct,Ut,Rn),Te=Te||this.isInsideGrid(Gt,Ct,Ut,Rn),!i&&this.grid.hitTestCircle(di,Ai,De,D)&&(Ie=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Ie}}}}return{circles:!M&&Ie||!Te?[]:X,offscreen:je,collisionDetected:Ie}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let m=1/0,y=1/0,x=-1/0,S=-1/0;for(const z of i){const D=new s.pointGeometry(z.x+Vi,z.y+Vi);m=Math.min(m,D.x),y=Math.min(y,D.y),x=Math.max(x,D.x),S=Math.max(S,D.y),c.push(D)}const E=this.grid.query(m,y,x,S).concat(this.ignoredGrid.query(m,y,x,S)),P={},M={};for(const z of E){const D=z.key;if(P[D.bucketInstanceId]===void 0&&(P[D.bucketInstanceId]={}),P[D.bucketInstanceId][D.featureIndex])continue;const N=[new s.pointGeometry(z.x1,z.y1),new s.pointGeometry(z.x2,z.y1),new s.pointGeometry(z.x2,z.y2),new s.pointGeometry(z.x1,z.y2)];s.polygonIntersectsPolygon(c,N)&&(P[D.bucketInstanceId][D.featureIndex]=!0,M[D.bucketInstanceId]===void 0&&(M[D.bucketInstanceId]=[]),M[D.bucketInstanceId].push(D.featureIndex))}return M}insertCollisionBox(i,c,m,y,x){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:x},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,m,y,x){const S=c?this.ignoredGrid:this.grid,E={bucketInstanceId:m,featureIndex:y,collisionGroupID:x};for(let P=0;P<i.length;P+=4)S.insertCircle(E,i[P],i[P+1],i[P+2])}projectAndGetPerspectiveRatio(i,c,m,y,x){const S=[c,m,y||0,1];let E=!1;if(y||this.transform.pitch>0){s.transformMat4$1(S,S,i);let P=!1;this.fogState&&x&&(P=function(M,z,D,N,Z,$){const X=$.calculateFogTileMatrix(Z),le=[z,D,N];return s.transformMat4(le,le,X),St(M,le,$.pitch,$._fov)}(this.fogState,c,m,y||0,x.toUnwrapped(),this.transform)>.9),E=S[2]>S[3]||P}else rl(S,S,i);return{point:new s.pointGeometry((S[0]/S[3]+1)/2*this.transform.width+Vi,(-S[1]/S[3]+1)/2*this.transform.height+Vi),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/S[3]*.5,1.5),signedDistanceFromCamera:S[3],aboveHorizon:E}}isOffscreen(i,c,m,y){return m<Vi||i>=this.screenRightBoundary||y<Vi||c>this.screenBottomBoundary}isInsideGrid(i,c,m,y){return m>=0&&i<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}class Sf{constructor(i,c,m,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):y&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class qa{constructor(i,c,m,y,x,S=!1){this.text=new Sf(i?i.text:null,c,m,x),this.icon=new Sf(i?i.icon:null,c,y,x),this.clipped=S}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Za{constructor(i,c,m,y=!1){this.text=i,this.icon=c,this.skipFade=m,this.clipped=y}}class il{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Tf{constructor(i,c,m,y,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=y,this.tileID=x}}class Ef{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[i]}}function hc(p,i,c,m,y){const{horizontalAlign:x,verticalAlign:S}=s.getAnchorAlignment(p),E=-(x-.5)*i,P=-(S-.5)*c,M=s.evaluateVariableOffset(p,m);return new s.pointGeometry(E+M[0]*y,P+M[1]*y)}function Oo(p,i,c,m,y){const x=new s.pointGeometry(p,i);return c&&x._rotate(m?y:-y),x}class dc{constructor(i,c,m,y,x){this.transform=i.clone(),this.collisionIndex=new Wg(this.transform,x),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Ef(m),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,m,y){const x=m.getBucket(c),S=m.latestFeatureIndex;if(!x||!S||c.id!==x.layerIds[0])return;const E=x.layers[0].layout,P=m.collisionBoxArray,M=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),z=m.tileSize/s.EXTENT,D=m.tileID.toUnwrapped(),N=this.transform.calculateProjMatrix(D),Z=E.get("text-pitch-alignment")==="map",$=E.get("text-rotation-alignment")==="map";c.compileFilter();const X=c.dynamicFilter(),le=c.dynamicFilterNeedsFeature(),q=this.transform.calculatePixelsToTileUnitsMatrix(m),oe=zo(N,m.tileID.canonical,Z,$,this.transform,q);let ae=null;if(Z){const ce=ao(N,m.tileID.canonical,Z,$,this.transform,q);ae=s.multiply$1([],this.transform.labelPlaneMatrix,ce)}let re=null;X&&m.latestFeatureIndex&&(re={unwrappedTileID:D,dynamicFilter:X,dynamicFilterNeedsFeature:le,featureIndex:m.latestFeatureIndex}),this.retainedQueryData[x.bucketInstanceId]=new Tf(x.bucketInstanceId,S,x.sourceLayerIndex,x.index,m.tileID);const ie={bucket:x,layout:E,posMatrix:N,textLabelPlaneMatrix:oe,labelToScreenMatrix:ae,clippingData:re,scale:M,textPixelRatio:z,holdingForFade:m.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(x.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const ce of x.sortKeyRanges){const{sortKey:we,symbolInstanceStart:Ce,symbolInstanceEnd:Ye}=ce;i.push({sortKey:we,symbolInstanceStart:Ce,symbolInstanceEnd:Ye,parameters:ie})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ie})}attemptAnchorPlacement(i,c,m,y,x,S,E,P,M,z,D,N,Z,$,X,le,q,oe){const ae=[N.textOffset0,N.textOffset1],re=hc(i,m,y,ae,x),ie=this.collisionIndex.placeCollisionBox(x,c,Oo(re.x,re.y,S,E,this.transform.angle),D,P,M,z.predicate);if((!le||this.collisionIndex.placeCollisionBox($.getSymbolInstanceIconSize(oe,this.transform.zoom,Z),le,Oo(re.x,re.y,S,E,this.transform.angle),D,P,M,z.predicate).box.length!==0)&&ie.box.length>0){let ce;return this.prevPlacement&&this.prevPlacement.variableOffsets[N.crossTileID]&&this.prevPlacement.placements[N.crossTileID]&&this.prevPlacement.placements[N.crossTileID].text&&(ce=this.prevPlacement.variableOffsets[N.crossTileID].anchor),this.variableOffsets[N.crossTileID]={textOffset:ae,width:m,height:y,anchor:i,textScale:x,prevAnchor:ce},this.markUsedJustification($,i,N,X),$.allowVerticalPlacement&&(this.markUsedOrientation($,X,N),this.placedOrientations[N.crossTileID]=X),{shift:re,placedGlyphBoxes:ie}}}placeLayerBucketPart(i,c,m,y){const{bucket:x,layout:S,posMatrix:E,textLabelPlaneMatrix:P,labelToScreenMatrix:M,clippingData:z,textPixelRatio:D,holdingForFade:N,collisionBoxArray:Z,partiallyEvaluatedTextSize:$,partiallyEvaluatedIconSize:X,collisionGroup:le}=i.parameters,q=S.get("text-optional"),oe=S.get("icon-optional"),ae=S.get("text-allow-overlap"),re=S.get("icon-allow-overlap"),ie=S.get("text-rotation-alignment")==="map",ce=S.get("text-pitch-alignment")==="map",we=S.get("icon-text-fit")!=="none",Ce=S.get("symbol-z-order")==="viewport-y",Ye=ae&&(re||!x.hasIconData()||oe),Ge=re&&(ae||!x.hasTextData()||q);!x.collisionArrays&&Z&&x.deserializeCollisionBoxes(Z),m&&y&&x.updateCollisionDebugBuffers(this.transform.zoom,Z);const Ue=(Ie,Te,je)=>{if(z){const Gt={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ct=null;if(z.dynamicFilterNeedsFeature){const Ut=this.retainedQueryData[x.bucketInstanceId];Ct=z.featureIndex.loadFeature({featureIndex:Ie.featureIndex,bucketIndex:Ut.bucketIndex,sourceLayerIndex:Ut.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,z.dynamicFilter)(Gt,Ct,this.retainedQueryData[x.bucketInstanceId].tileID.canonical,new s.pointGeometry(Ie.tileAnchorX,Ie.tileAnchorY),this.transform.calculateDistanceTileData(z.unwrappedTileID)))return this.placements[Ie.crossTileID]=new Za(!1,!1,!1,!0),void(c[Ie.crossTileID]=!0)}if(c[Ie.crossTileID])return;if(N)return void(this.placements[Ie.crossTileID]=new Za(!1,!1,!1));let De=!1,dt=!1,xt=!0,Mt=null,Xe={box:null,offscreen:null},gt={box:null,offscreen:null},Et=null,on=null,fn=null,wt=0,Bt=0,Tn=0;je.textFeatureIndex?wt=je.textFeatureIndex:Ie.useRuntimeCollisionCircles&&(wt=Ie.featureIndex),je.verticalTextFeatureIndex&&(Bt=je.verticalTextFeatureIndex);const er=Gt=>{Gt.tileID=this.retainedQueryData[x.bucketInstanceId].tileID,(this.transform.elevation||Gt.elevation)&&(Gt.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[x.bucketInstanceId].tileID,Gt.tileAnchorX,Gt.tileAnchorY):0)},Rr=je.textBox;if(Rr){er(Rr);const Gt=Ut=>{let Rn=s.WritingMode.horizontal;if(x.allowVerticalPlacement&&!Ut&&this.prevPlacement){const Kr=this.prevPlacement.placedOrientations[Ie.crossTileID];Kr&&(this.placedOrientations[Ie.crossTileID]=Kr,Rn=Kr,this.markUsedOrientation(x,Rn,Ie))}return Rn},Ct=(Ut,Rn)=>{if(x.allowVerticalPlacement&&Ie.numVerticalGlyphVertices>0&&je.verticalTextBox){for(const Kr of x.writingModes)if(Kr===s.WritingMode.vertical?(Xe=Rn(),gt=Xe):Xe=Ut(),Xe&&Xe.box&&Xe.box.length)break}else Xe=Ut()};if(S.get("text-variable-anchor")){let Ut=S.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ie.crossTileID]){const vn=this.prevPlacement.variableOffsets[Ie.crossTileID];Ut.indexOf(vn.anchor)>0&&(Ut=Ut.filter(Jr=>Jr!==vn.anchor),Ut.unshift(vn.anchor))}const Rn=(vn,Jr,Al)=>{const Br=x.getSymbolInstanceTextSize($,Ie,this.transform.zoom,Te),ma=(vn.x2-vn.x1)*Br+2*vn.padding,st=(vn.y2-vn.y1)*Br+2*vn.padding,yt=we&&!re?Jr:null;yt&&er(yt);let ur={box:[],offscreen:!1};const ga=ae?2*Ut.length:Ut.length;for(let Go=0;Go<ga;++Go){const _r=this.attemptAnchorPlacement(Ut[Go%Ut.length],vn,ma,st,Br,ie,ce,D,E,le,Go>=Ut.length,Ie,Te,x,Al,yt,$,X);if(_r&&(ur=_r.placedGlyphBoxes,ur&&ur.box&&ur.box.length)){De=!0,Mt=_r.shift;break}}return ur};Ct(()=>Rn(Rr,je.iconBox,s.WritingMode.horizontal),()=>{const vn=je.verticalTextBox;return vn&&er(vn),x.allowVerticalPlacement&&!(Xe&&Xe.box&&Xe.box.length)&&Ie.numVerticalGlyphVertices>0&&vn?Rn(vn,je.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),Xe&&(De=Xe.box,xt=Xe.offscreen);const Kr=Gt(Xe&&Xe.box);if(!De&&this.prevPlacement){const vn=this.prevPlacement.variableOffsets[Ie.crossTileID];vn&&(this.variableOffsets[Ie.crossTileID]=vn,this.markUsedJustification(x,vn.anchor,Ie,Kr))}}else{const Ut=(Rn,Kr)=>{const vn=x.getSymbolInstanceTextSize($,Ie,this.transform.zoom,Te),Jr=this.collisionIndex.placeCollisionBox(vn,Rn,new s.pointGeometry(0,0),ae,D,E,le.predicate);return Jr&&Jr.box&&Jr.box.length&&(this.markUsedOrientation(x,Kr,Ie),this.placedOrientations[Ie.crossTileID]=Kr),Jr};Ct(()=>Ut(Rr,s.WritingMode.horizontal),()=>{const Rn=je.verticalTextBox;return x.allowVerticalPlacement&&Ie.numVerticalGlyphVertices>0&&Rn?(er(Rn),Ut(Rn,s.WritingMode.vertical)):{box:null,offscreen:null}}),Gt(Xe&&Xe.box&&Xe.box.length)}}if(Et=Xe,De=Et&&Et.box&&Et.box.length>0,xt=Et&&Et.offscreen,Ie.useRuntimeCollisionCircles){const Gt=x.text.placedSymbolArray.get(Ie.centerJustifiedTextSymbolIndex>=0?Ie.centerJustifiedTextSymbolIndex:Ie.verticalPlacedTextSymbolIndex),Ct=s.evaluateSizeForFeature(x.textSizeData,$,Gt),Ut=S.get("text-padding");on=this.collisionIndex.placeCollisionCircles(ae,Gt,x.lineVertexArray,x.glyphOffsetArray,Ct,E,P,M,m,ce,le.predicate,Ie.collisionCircleDiameter*Ct/s.ONE_EM,Ut,this.retainedQueryData[x.bucketInstanceId].tileID),De=ae||on.circles.length>0&&!on.collisionDetected,xt=xt&&on.offscreen}if(je.iconFeatureIndex&&(Tn=je.iconFeatureIndex),je.iconBox){const Gt=Ct=>{er(Ct);const Ut=we&&Mt?Oo(Mt.x,Mt.y,ie,ce,this.transform.angle):new s.pointGeometry(0,0),Rn=x.getSymbolInstanceIconSize(X,this.transform.zoom,Te);return this.collisionIndex.placeCollisionBox(Rn,Ct,Ut,re,D,E,le.predicate)};gt&&gt.box&&gt.box.length&&je.verticalIconBox?(fn=Gt(je.verticalIconBox),dt=fn.box.length>0):(fn=Gt(je.iconBox),dt=fn.box.length>0),xt=xt&&fn.offscreen}const di=q||Ie.numHorizontalGlyphVertices===0&&Ie.numVerticalGlyphVertices===0,Ai=oe||Ie.numIconVertices===0;if(di||Ai?Ai?di||(dt=dt&&De):De=dt&&De:dt=De=dt&&De,De&&Et&&Et.box&&this.collisionIndex.insertCollisionBox(Et.box,S.get("text-ignore-placement"),x.bucketInstanceId,gt&&gt.box&&Bt?Bt:wt,le.ID),dt&&fn&&this.collisionIndex.insertCollisionBox(fn.box,S.get("icon-ignore-placement"),x.bucketInstanceId,Tn,le.ID),on&&(De&&this.collisionIndex.insertCollisionCircles(on.circles,S.get("text-ignore-placement"),x.bucketInstanceId,wt,le.ID),m)){const Gt=x.bucketInstanceId;let Ct=this.collisionCircleArrays[Gt];Ct===void 0&&(Ct=this.collisionCircleArrays[Gt]=new il);for(let Ut=0;Ut<on.circles.length;Ut+=4)Ct.circles.push(on.circles[Ut+0]),Ct.circles.push(on.circles[Ut+1]),Ct.circles.push(on.circles[Ut+2]),Ct.circles.push(on.collisionDetected?1:0)}this.placements[Ie.crossTileID]=new Za(De||Ye,dt||Ge,xt||x.justReloaded),c[Ie.crossTileID]=!0};if(Ce){const Ie=x.getSortedSymbolIndexes(this.transform.angle);for(let Te=Ie.length-1;Te>=0;--Te){const je=Ie[Te];Ue(x.symbolInstances.get(je),je,x.collisionArrays[je])}}else for(let Ie=i.symbolInstanceStart;Ie<i.symbolInstanceEnd;Ie++)Ue(x.symbolInstances.get(Ie),Ie,x.collisionArrays[Ie]);if(m&&x.bucketInstanceId in this.collisionCircleArrays){const Ie=this.collisionCircleArrays[x.bucketInstanceId];s.invert(Ie.invProjMatrix,E),Ie.viewportMatrix=this.collisionIndex.getViewportMatrix()}x.justReloaded=!1}markUsedJustification(i,c,m,y){let x;x=y===s.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(c)];const S=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const E of S)E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=x>=0&&E!==x?0:m.crossTileID)}markUsedOrientation(i,c,m){const y=c===s.WritingMode.horizontal||c===s.WritingMode.horizontalOnly?c:0,x=c===s.WritingMode.vertical?c:0,S=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const E of S)i.text.placedSymbolArray.get(E).placedOrientation=y;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},S=c?c.variableOffsets:{},E=c?c.placedOrientations:{};for(const P in this.placements){const M=this.placements[P],z=x[P];z?(this.opacities[P]=new qa(z,y,M.text,M.icon,null,M.clipped),m=m||M.text!==z.text.placed||M.icon!==z.icon.placed):(this.opacities[P]=new qa(null,y,M.text,M.icon,M.skipFade,M.clipped),m=m||M.text||M.icon)}for(const P in x){const M=x[P];if(!this.opacities[P]){const z=new qa(M,y,!1,!1);z.isHidden()||(this.opacities[P]=z,m=m||M.text.placed||M.icon.placed)}}for(const P in S)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=S[P]);for(const P in E)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=E[P]);m?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const m={};for(const y of c){const x=y.getBucket(i);x&&y.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,m,y.collisionBoxArray)}}updateBucketOpacities(i,c,m){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,x=!!i.layers[0].dynamicFilter(),S=new qa(null,0,!1,!1,!0),E=y.get("text-allow-overlap"),P=y.get("icon-allow-overlap"),M=y.get("text-variable-anchor"),z=y.get("text-rotation-alignment")==="map",D=y.get("text-pitch-alignment")==="map",N=y.get("icon-text-fit")!=="none",Z=new qa(null,0,E&&(P||!i.hasIconData()||y.get("icon-optional")),P&&(E||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const $=(le,q,oe)=>{for(let ae=0;ae<q/4;ae++)le.opacityVertexArray.emplaceBack(oe)};let X=0;for(let le=0;le<i.symbolInstances.length;le++){const q=i.symbolInstances.get(le),{numHorizontalGlyphVertices:oe,numVerticalGlyphVertices:ae,crossTileID:re}=q;let ie=this.opacities[re];c[re]?ie=S:ie||(ie=Z,this.opacities[re]=ie),c[re]=!0;const ce=oe>0||ae>0,we=q.numIconVertices>0,Ce=this.placedOrientations[q.crossTileID],Ye=Ce===s.WritingMode.vertical,Ge=Ce===s.WritingMode.horizontal||Ce===s.WritingMode.horizontalOnly;if(!ce&&!we||ie.isHidden()||X++,ce){const Ue=fc(ie.text);$(i.text,oe,Ye?Ro:Ue),$(i.text,ae,Ge?Ro:Ue);const Ie=ie.text.isHidden();[q.rightJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.leftJustifiedTextSymbolIndex].forEach(De=>{De>=0&&(i.text.placedSymbolArray.get(De).hidden=Ie||Ye?1:0)}),q.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).hidden=Ie||Ge?1:0);const Te=this.variableOffsets[q.crossTileID];Te&&this.markUsedJustification(i,Te.anchor,q,Ce);const je=this.placedOrientations[q.crossTileID];je&&(this.markUsedJustification(i,"left",q,je),this.markUsedOrientation(i,je,q))}if(we){const Ue=fc(ie.icon);q.placedIconSymbolIndex>=0&&($(i.icon,q.numIconVertices,Ye?Ro:Ue),i.icon.placedSymbolArray.get(q.placedIconSymbolIndex).hidden=ie.icon.isHidden()),q.verticalPlacedIconSymbolIndex>=0&&($(i.icon,q.numVerticalIconVertices,Ge?Ro:Ue),i.icon.placedSymbolArray.get(q.verticalPlacedIconSymbolIndex).hidden=ie.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Ue=i.collisionArrays[le];if(Ue){let Ie=new s.pointGeometry(0,0),Te=!0;if(Ue.textBox||Ue.verticalTextBox){if(M){const De=this.variableOffsets[re];De?(Ie=hc(De.anchor,De.width,De.height,De.textOffset,De.textScale),z&&Ie._rotate(D?this.transform.angle:-this.transform.angle)):Te=!1}x&&(Te=!ie.clipped),Ue.textBox&&Lo(i.textCollisionBox.collisionVertexArray,ie.text.placed,!Te||Ye,Ie.x,Ie.y),Ue.verticalTextBox&&Lo(i.textCollisionBox.collisionVertexArray,ie.text.placed,!Te||Ge,Ie.x,Ie.y)}const je=Te&&Boolean(!Ge&&Ue.verticalIconBox);Ue.iconBox&&Lo(i.iconCollisionBox.collisionVertexArray,ie.icon.placed,je,N?Ie.x:0,N?Ie.y:0),Ue.verticalIconBox&&Lo(i.iconCollisionBox.collisionVertexArray,ie.icon.placed,!je,N?Ie.x:0,N?Ie.y:0)}}}if(i.fullyClipped=X===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const le=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=le.invProjMatrix,i.placementViewportMatrix=le.viewportMatrix,i.collisionCircleArray=le.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function Lo(p,i,c,m,y){p.emplaceBack(i?1:0,c?1:0,m||0,y||0),p.emplaceBack(i?1:0,c?1:0,m||0,y||0),p.emplaceBack(i?1:0,c?1:0,m||0,y||0),p.emplaceBack(i?1:0,c?1:0,m||0,y||0)}const ke=Math.pow(2,25),nt=Math.pow(2,24),Cf=Math.pow(2,17),Do=Math.pow(2,16),Un=Math.pow(2,9),so=Math.pow(2,8),$i=Math.pow(2,1);function fc(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const i=p.placed?1:0,c=Math.floor(127*p.opacity);return c*ke+i*nt+c*Cf+i*Do+c*Un+i*so+c*$i+i}const Ro=0;class et{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,m,y,x){const S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(S,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((E,P)=>E.sortKey-P.sortKey));this._currentPartIndex<S.length;){const E=S[this._currentPartIndex];if(c.placeLayerBucketPart(E,this._seenCrossTileIDs,m,E.symbolInstanceStart===0),this._currentPartIndex++,x())return!0}return!1}}class jt{constructor(i,c,m,y,x,S,E,P){this.placement=new dc(i,x,S,E,P),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,c,m){const y=s.exported.now(),x=()=>{const S=s.exported.now()-y;return!this._forceFullPlacement&&S>2};for(;this._currentPlacementIndex>=0;){const S=c[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=E)&&(!S.maxzoom||S.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new et(S)),this._inProgressLayer.continuePlacement(m[S.source],this.placement,this._showCollisionBoxes,S,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const zt=512/s.EXTENT/2;class Gi{constructor(i,c,m){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let y=0;y<c.length;y++){const x=c.get(y),S=x.key;this.indexedSymbolInstances[S]||(this.indexedSymbolInstances[S]=[]),this.indexedSymbolInstances[S].push({crossTileID:x.crossTileID,coord:this.getScaledCoordinates(x,i)})}}getScaledCoordinates(i,c){const m=zt/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*s.EXTENT+i.tileAnchorX)*m),y:Math.floor((c.canonical.y*s.EXTENT+i.tileAnchorY)*m)}}findMatches(i,c,m){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const S=i.get(x);if(S.crossTileID)continue;const E=this.indexedSymbolInstances[S.key];if(!E)continue;const P=this.getScaledCoordinates(S,c);for(const M of E)if(Math.abs(M.coord.x-P.x)<=y&&Math.abs(M.coord.y-P.y)<=y&&!m[M.crossTileID]){m[M.crossTileID]=!0,S.crossTileID=M.crossTileID;break}}}}class Wa{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ot{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const m in this.indexes){const y=this.indexes[m],x={};for(const S in y){const E=y[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),x[E.tileID.key]=E}this.indexes[m]=x}this.lng=i}addBucket(i,c,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const S=this.indexes[x];if(Number(x)>i.overscaledZ)for(const E in S){const P=S[E];P.tileID.isChildOf(i)&&P.findMatches(c.symbolInstances,i,y)}else{const E=S[i.scaledTo(Number(x)).key];E&&E.findMatches(c.symbolInstances,i,y)}}for(let x=0;x<c.symbolInstances.length;x++){const S=c.symbolInstances.get(x);S.crossTileID||(S.crossTileID=m.generate(),y[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Gi(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const m in c.indexedSymbolInstances)for(const y of c.indexedSymbolInstances[m])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let c=!1;for(const m in this.indexes){const y=this.indexes[m];for(const x in y)i[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,y[x]),delete y[x],c=!0)}return c}}class ol{constructor(){this.layerIndexes={},this.crossTileIDs=new Wa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,m,y){let x=this.layerIndexes[i.id];x===void 0&&(x=this.layerIndexes[i.id]=new Ot);let S=!1;const E={};y.name!=="globe"&&x.handleWrapJump(m);for(const P of c){const M=P.getBucket(i);M&&i.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(P.tileID,M,this.crossTileIDs)&&(S=!0),E[M.bucketInstanceId]=!0)}return x.removeStaleBuckets(E)&&(S=!0),S}pruneUnusedLayers(i){const c={};i.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const Bo=(p,i)=>s.emitValidationErrors(p,i&&i.filter(c=>c.identifier!=="source.canvas")),al=s.pick(Fe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),li=s.pick(Fe,["setCenter","setZoom","setBearing","setPitch"]),zn=function(){const p={},i=s.spec.$version;for(const c in s.spec.$root){const m=s.spec.$root[c];if(m.required){let y=null;y=c==="version"?i:m.type==="array"?[]:{},y!=null&&(p[c]=y)}}return p}(),Hg={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Lr extends s.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new hn(fe(),this),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(i._requestManager,c.localFontFamily?s.LocalGlyphMode.all:c.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,c.localFontFamily||c.localIdeographFontFamily),this.lineAtlas=new s.LineAtlas(256,512),this.crossTileSymbolIndex=new ol,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const m=this;this._rtlTextPluginCallback=Lr.registerForPluginStateChange(y=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(x,S)=>{if(s.triggerPluginCompletionEvent(x),S&&S.every(E=>E))for(const E in m._sourceCaches){const P=m._sourceCaches[E],M=P.getSource().type;M!=="vector"&&M!=="geojson"||P.reload()}})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const x=this.getSource(y.sourceId);if(x&&x.vectorLayerIds)for(const S in this._layers){const E=this._layers[S];E.source===x.id&&this._validateLayer(E)}})}loadURL(i,c={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const m=typeof c.validate=="boolean"?c.validate:!s.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,c.accessToken);const y=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(y,(x,S)=>{this._request=null,x?this.fire(new s.ErrorEvent(x)):S&&this._load(S,m)})}loadJSON(i,c={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,c.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(zn,!1)}_updateLayerCount(i,c){const m=c?1:-1;i.is3D()&&(this._num3DLayers+=m),i.type==="circle"&&(this._numCircleLayers+=m),i.type==="symbol"&&(this._numSymbolLayers+=m)}_load(i,c){if(c&&Bo(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i,this.updateProjection();for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const m=Le(this.stylesheet.layers);this._order=m.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of m)y=s.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize(),this._updateLayerCount(y,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new We(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return this.terrain&&this.terrain.drapeRenderMode===0}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.updateProjection()}updateProjection(){const i=this.map.transform.projection,c=this.map.transform.setProjection(this.map._runtimeProjection||(this.stylesheet?this.stylesheet.projection:void 0)),m=this.map.transform.projection;if(this._loaded&&(m.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null)),this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),c){if(m.isReprojectedInTileSpace||i.isReprojectedInTileSpace){this.map.painter.clearBackgroundTiles();for(const y in this._sourceCaches)this._sourceCaches[y].clearTiles()}else this._forceSymbolLayerUpdate();this.map._update(!0)}}_loadSprite(i){this._spriteRequest=function(c,m,y){let x,S,E;const P=s.exported.devicePixelRatio>1?"@2x":"";let M=s.getJSON(m.transformRequest(m.normalizeSpriteURL(c,P,".json"),s.ResourceType.SpriteJSON),(N,Z)=>{M=null,E||(E=N,x=Z,D())}),z=s.getImage(m.transformRequest(m.normalizeSpriteURL(c,P,".png"),s.ResourceType.SpriteImage),(N,Z)=>{z=null,E||(E=N,S=Z,D())});function D(){if(E)y(E);else if(x&&S){const N=s.exported.getImageData(S),Z={};for(const $ in x){const{width:X,height:le,x:q,y:oe,sdf:ae,pixelRatio:re,stretchX:ie,stretchY:ce,content:we}=x[$],Ce=new s.RGBAImage({width:X,height:le});s.RGBAImage.copy(N,Ce,{x:q,y:oe},{x:0,y:0},{width:X,height:le}),Z[$]={data:Ce,pixelRatio:re,sdf:ae,stretchX:ie,stretchY:ce,content:we}}y(null,Z)}}return{cancel(){M&&(M.cancel(),M=null),z&&(z.cancel(),z=null)}}}(i,this.map._requestManager,(c,m)=>{if(this._spriteRequest=null,c)this.fire(new s.ErrorEvent(c));else if(m)for(const y in m)this.imageManager.addImage(y,m[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.getSource(i.source);if(!c)return;const m=i.sourceLayer;m&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(m)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${c.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const m of i){const y=this._layers[m];y.type!=="custom"&&c.push(y.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&Hg[i.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const S in this._updatedSources){const E=this._updatedSources[S];E==="reload"?this._reloadSource(S):E==="clear"&&this._clearSource(S)}this._updateTilesForChangedImages();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const m={};for(const y in this._sourceCaches){const x=this._sourceCaches[y];m[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];if(x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)){const E=this._getLayerSourceCache(x);E&&(E.used=!0)}const S=this.map.painter;if(S){const E=x.getProgramIds();if(!E)continue;const P=x.getProgramConfiguration(i.zoom);for(const M of E)S.useProgram(M,P)}}for(const y in m){const x=this._sourceCaches[y];m[y]!==x.used&&x.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:x.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),c&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),Bo(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=Le(i.layers);const c=function(y,x){if(!y)return[{command:Fe.setStyle,args:[x]}];let S=[];try{if(!Y(y.version,x.version))return[{command:Fe.setStyle,args:[x]}];Y(y.center,x.center)||S.push({command:Fe.setCenter,args:[x.center]}),Y(y.zoom,x.zoom)||S.push({command:Fe.setZoom,args:[x.zoom]}),Y(y.bearing,x.bearing)||S.push({command:Fe.setBearing,args:[x.bearing]}),Y(y.pitch,x.pitch)||S.push({command:Fe.setPitch,args:[x.pitch]}),Y(y.sprite,x.sprite)||S.push({command:Fe.setSprite,args:[x.sprite]}),Y(y.glyphs,x.glyphs)||S.push({command:Fe.setGlyphs,args:[x.glyphs]}),Y(y.transition,x.transition)||S.push({command:Fe.setTransition,args:[x.transition]}),Y(y.light,x.light)||S.push({command:Fe.setLight,args:[x.light]}),Y(y.fog,x.fog)||S.push({command:Fe.setFog,args:[x.fog]}),Y(y.projection,x.projection)||S.push({command:Fe.setProjection,args:[x.projection]});const E={},P=[];(function(D,N,Z,$){let X;for(X in N=N||{},D=D||{})D.hasOwnProperty(X)&&(N.hasOwnProperty(X)||ht(X,Z,$));for(X in N)N.hasOwnProperty(X)&&(D.hasOwnProperty(X)?Y(D[X],N[X])||(D[X].type==="geojson"&&N[X].type==="geojson"&&vt(D,N,X)?Z.push({command:Fe.setGeoJSONSourceData,args:[X,N[X].data]}):_t(X,N,Z,$)):$e(X,N,Z))})(y.sources,x.sources,P,E);const M=[];y.layers&&y.layers.forEach(D=>{E[D.source]?S.push({command:Fe.removeLayer,args:[D.id]}):M.push(D)});let z=y.terrain;z&&E[z.source]&&(S.push({command:Fe.setTerrain,args:[void 0]}),z=void 0),S=S.concat(P),Y(z,x.terrain)||S.push({command:Fe.setTerrain,args:[x.terrain]}),function(D,N,Z){N=N||[];const $=(D=D||[]).map(Rt),X=N.map(Rt),le=D.reduce(gn,{}),q=N.reduce(gn,{}),oe=$.slice(),ae=Object.create(null);let re,ie,ce,we,Ce,Ye,Ge;for(re=0,ie=0;re<$.length;re++)ce=$[re],q.hasOwnProperty(ce)?ie++:(Z.push({command:Fe.removeLayer,args:[ce]}),oe.splice(oe.indexOf(ce,ie),1));for(re=0,ie=0;re<X.length;re++)ce=X[X.length-1-re],oe[oe.length-1-re]!==ce&&(le.hasOwnProperty(ce)?(Z.push({command:Fe.removeLayer,args:[ce]}),oe.splice(oe.lastIndexOf(ce,oe.length-ie),1)):ie++,Ye=oe[oe.length-re],Z.push({command:Fe.addLayer,args:[q[ce],Ye]}),oe.splice(oe.length-re,0,ce),ae[ce]=!0);for(re=0;re<X.length;re++)if(ce=X[re],we=le[ce],Ce=q[ce],!ae[ce]&&!Y(we,Ce))if(Y(we.source,Ce.source)&&Y(we["source-layer"],Ce["source-layer"])&&Y(we.type,Ce.type)){for(Ge in bt(we.layout,Ce.layout,Z,ce,null,Fe.setLayoutProperty),bt(we.paint,Ce.paint,Z,ce,null,Fe.setPaintProperty),Y(we.filter,Ce.filter)||Z.push({command:Fe.setFilter,args:[ce,Ce.filter]}),Y(we.minzoom,Ce.minzoom)&&Y(we.maxzoom,Ce.maxzoom)||Z.push({command:Fe.setLayerZoomRange,args:[ce,Ce.minzoom,Ce.maxzoom]}),we)we.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?bt(we[Ge],Ce[Ge],Z,ce,Ge.slice(6),Fe.setPaintProperty):Y(we[Ge],Ce[Ge])||Z.push({command:Fe.setLayerProperty,args:[ce,Ge,Ce[Ge]]}));for(Ge in Ce)Ce.hasOwnProperty(Ge)&&!we.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?bt(we[Ge],Ce[Ge],Z,ce,Ge.slice(6),Fe.setPaintProperty):Y(we[Ge],Ce[Ge])||Z.push({command:Fe.setLayerProperty,args:[ce,Ge,Ce[Ge]]}))}else Z.push({command:Fe.removeLayer,args:[ce]}),Ye=oe[oe.lastIndexOf(ce)+1],Z.push({command:Fe.addLayer,args:[Ce,Ye]})}(M,x.layers,S)}catch(E){console.warn("Unable to compute style diff:",E),S=[{command:Fe.setStyle,args:[x]}]}return S}(this.serialize(),i).filter(y=>!(y.command in li));if(c.length===0)return!1;const m=c.filter(y=>!(y.command in al));if(m.length>0)throw new Error(`Unimplemented: ${m.map(y=>y.command).join(", ")}.`);return c.forEach(y=>{y.command!=="setTransition"&&this[y.command].apply(this,y.args)}),this.stylesheet=i,this.updateProjection(),!0}addImage(i,c){if(this.getImage(i))return this.fire(new s.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,c,m={}){if(this._checkLoaded(),this.getSource(i)!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.validateStyle.source,`sources.${i}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=Xr(i,c,this.dispatcher,this);y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:i}));const x=S=>{const E=(S?"symbol:":"other:")+i,P=this._sourceCaches[E]=new s.SourceCache(E,y,S);(S?this._symbolSourceCaches:this._otherSourceCaches)[i]=P,P.style=this,P.onAdd(this.map)};x(!1),c.type!=="vector"&&c.type!=="geojson"||x(!0),y.onAdd&&y.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const c=this.getSource(i);if(c===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${y}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const m=this._getSourceCaches(i);for(const y of m)delete this._sourceCaches[y.id],delete this._updatedSources[y.id],y.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:y.getSource().id})),y.setEventedParent(null),y.clearTiles();delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){this._checkLoaded(),this.getSource(i).setData(c),this._changed=!0}getSource(i){const c=this._getSourceCache(i);return c&&c.getSource()}addLayer(i,c,m={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${y}" already exists on this map`)));let x;if(i.type==="custom"){if(Bo(this,s.validateCustomStyleLayer(i)))return;x=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(y,i.source),i=s.clone$1(i),i=s.extend(i,{source:y})),this._validate(s.validateStyle.layer,`layers.${y}`,i,{arrayIndex:-1},m))return;x=s.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[x.id]=x.serialize(),this._updateLayerCount(x,!0)}const S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`)));this._order.splice(S,0,y),this._layerOrderChanged=!0,this._layers[y]=x;const E=this._getLayerSourceCache(x);if(this._removedLayers[y]&&x.source&&E&&x.type!=="custom"){const P=this._removedLayers[y];delete this._removedLayers[y],P.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",E.pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const m=this._order.indexOf(i);this._order.splice(m,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));c.setEventedParent(null),this._updateLayerCount(c,!1);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const c in this._layers)if(this._layers[c].type===i)return!0;return!1}setLayerZoomRange(i,c,m){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===c&&y.maxzoom===m||(c!=null&&(y.minzoom=c),m!=null&&(y.maxzoom=m),this._updateLayer(y)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,c,m={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!Y(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(s.validateStyle.filter,`layers.${y.id}.filter`,c,{layerType:y.type},m)||(y.filter=s.clone$1(c),this._updateLayer(y)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){return s.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,m,y={}){this._checkLoaded();const x=this.getLayer(i);x?Y(x.getLayoutProperty(c),m)||(x.setLayoutProperty(c,m,y),this._updateLayer(x)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,c){const m=this.getLayer(i);if(m)return m.getLayoutProperty(c);this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,c,m,y={}){this._checkLoaded();const x=this.getLayer(i);x?Y(x.getPaintProperty(c),m)||(x.setPaintProperty(c,m,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const m=i.source,y=i.sourceLayer,x=this.getSource(m);if(x===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const S=x.type;if(S==="geojson"&&y)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(S==="vector"&&!y)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const E=this._getSourceCaches(m);for(const P of E)P.setFeatureState(y,i.id,c)}removeFeatureState(i,c){this._checkLoaded();const m=i.source,y=this.getSource(m);if(y===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const x=y.type,S=x==="vector"?i.sourceLayer:void 0;if(x==="vector"&&!S)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const E=this._getSourceCaches(m);for(const P of E)P.removeFeatureState(S,i.id,c)}getFeatureState(i){this._checkLoaded();const c=i.source,m=i.sourceLayer,y=this.getSource(c);if(y!==void 0){if(y.type!=="vector"||m)return i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(c)[0].getFeatureState(m,i.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const c in this._sourceCaches){const m=this._sourceCaches[c].getSource();i[m.id]||(i[m.id]=m.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},c=>c!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0;const c=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&c&&c.getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",c.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const c=S=>this._layers[S].type==="fill-extrusion",m={},y=[];for(let S=this._order.length-1;S>=0;S--){const E=this._order[S];if(c(E)){m[E]=S;for(const P of i){const M=P[E];if(M)for(const z of M)y.push(z)}}}y.sort((S,E)=>E.intersectionZ-S.intersectionZ);const x=[];for(let S=this._order.length-1;S>=0;S--){const E=this._order[S];if(c(E))for(let P=y.length-1;P>=0;P--){const M=y[P].feature;if(m[M.layer.id]<S)break;x.push(M),y.pop()}else for(const P of i){const M=P[E];if(M)for(const z of M)x.push(z.feature)}}return x}queryRenderedFeatures(i,c,m){c&&c.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of c.layers){const M=this._layers[P];if(!M)return this.fire(new s.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];y[M.source]=!0}}const x=[];c.availableImages=this._availableImages;const S=c&&c.layers?c.layers.some(P=>{const M=this.getLayer(P);return M&&M.is3D()}):this.has3DLayers(),E=Va.createFromScreenPoints(i,m);for(const P in this._sourceCaches){const M=this._sourceCaches[P].getSource().id;c.layers&&!y[M]||x.push(O(this._sourceCaches[P],this._layers,this._serializedLayers,E,c,m,S,!!this.map._showQueryGeometry))}return this.placement&&x.push(function(P,M,z,D,N,Z,$){const X={},le=Z.queryRenderedSymbols(D),q=[];for(const oe of Object.keys(le).map(Number))q.push($[oe]);q.sort(K);for(const oe of q){const ae=oe.featureIndex.lookupSymbolFeatures(le[oe.bucketInstanceId],M,oe.bucketIndex,oe.sourceLayerIndex,N.filter,N.layers,N.availableImages,P);for(const re in ae){const ie=X[re]=X[re]||[],ce=ae[re];ce.sort((we,Ce)=>{const Ye=oe.featureSortOrder;if(Ye){const Ge=Ye.indexOf(we.featureIndex);return Ye.indexOf(Ce.featureIndex)-Ge}return Ce.featureIndex-we.featureIndex});for(const we of ce)ie.push(we)}}for(const oe in X)X[oe].forEach(ae=>{const re=ae.feature,ie=z(P[oe]).getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=ie});return X}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),E.screenGeometry,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this._getSourceCaches(i);let y=[];for(const x of m)y=y.concat(B(x,c));return y}addSourceType(i,c,m){return Lr.getSourceType(i)?m(new Error(`A source type called "${i}" already exists.`)):(Lr.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const m=this.light.getLight();let y=!1;for(const S in i)if(!Y(i[S],m[S])){y=!0;break}if(!y)return;const x={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,c=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(c===1){if(typeof i.source=="object"){const m="terrain-dem-src";this.addSource(m,i.source),i=s.clone$1(i),i=s.extend(i,{source:m})}if(this._validate(s.validateStyle.terrain,"terrain",i))return}if(!this.terrain||this.terrain&&c!==this.terrain.drapeRenderMode)this._createTerrain(i,c);else{const m=this.terrain,y=m.get();for(const x in i)if(!Y(i[x],y[x])){m.set(i),this.stylesheet.terrain=i;const S={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};m.updateTransitions(S);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const c=this.fog=new Jt(i,this.map.transform);this.stylesheet.fog=i;const m={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};c.updateTransitions(m)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog,m=c.get();for(const y in i)if(!Y(i[y],m[y])){c.set(i),this.stylesheet.fog=i;const x={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};c.updateTransitions(x);break}}else this._createFog(i);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(m=>this.isLayerDraped(this._layers[m])),c=this._order.filter(m=>!this.isLayerDraped(this._layers[m]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...c)}_createTerrain(i,c){const m=this.terrain=new it(i,c);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const y={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};m.updateTransitions(y)}_force3DLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const c=this._layers[i];c.type==="symbol"&&this._updateLayer(c)}}_validate(i,c,m,y,x={}){return(!x||x.validate!==!1)&&Bo(this,i.call(s.validateStyle,s.extend({key:c,style:this.serialize(),value:m,styleSpec:s.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const c=this._getSourceCaches(i);for(const m of c)m.clearTiles()}_reloadSource(i){const c=this._getSourceCaches(i);for(const m of c)m.resume(),m.reload()}_updateSources(i){for(const c in this._sourceCaches)this._sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const c=this._sourceCaches[i];c.resume(),c.reload()}}_updatePlacement(i,c,m,y,x=!1){let S=!1,E=!1;const P={};for(const M of this._order){const z=this._layers[M];if(z.type!=="symbol")continue;if(!P[z.source]){const N=this._getLayerSourceCache(z);if(!N)continue;P[z.source]=N.getRenderableIds(!0).map(Z=>N.getTileByID(Z)).sort((Z,$)=>$.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan($.tileID)?-1:1))}const D=this.crossTileSymbolIndex.addLayer(z,P[z.source],i.center.lng,i.projection);S=S||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),x=x||this._layerOrderChanged||m===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(x||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new jt(i,this._order,x,c,m,y,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),E=!0),S&&this.pauseablePlacement.placement.setStale()),E||S)for(const M of this._order){const z=this._layers[M];z.type==="symbol"&&this.placement.updateLayerOpacities(z,P[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();const y=x=>{x&&x.setDependencies(c.tileID.key,c.type,c.icons)};y(this._otherSourceCaches[c.source]),y(this._symbolSourceCaches[c.source])}getGlyphs(i,c,m){this.glyphManager.getGlyphs(c.stacks,m)}getResource(i,c,m){return s.makeRequest(c,m)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const c=[];return this._otherSourceCaches[i]&&c.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&c.push(this._symbolSourceCaches[i]),c}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Lr.getSourceType=function(p){return Ga[p]},Lr.setSourceType=function(p,i){Ga[p]=i},Lr.registerForPluginStateChange=s.registerForPluginStateChange;var pc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}
#endif`,Ha="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Xa={},Ya={};Xa=At("",`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
float unpack_depth(vec4 rgba_depth)
{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,!0),Ya=At(`#ifdef FOG
uniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,`#ifdef FOG
uniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,!0);const Ht=At(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef TERRAIN
highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#endif`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {
#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)
return mix(globe,mercator,t);
#else
return globe;
#endif
}
#ifdef PROJECTION_GLOBE_VIEW
mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),mc=pc;var oh={background:At(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:At(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:At(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)
view_scale*=a_scale;
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:At("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:At(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
extrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:At(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:At("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:At("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:At("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:At(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:At(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:At(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:At(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:At(`varying vec4 v_color;void main() {vec4 color=v_color;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
vec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:At(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:At(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:At(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:At(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
vec4 out_color=texture2D(u_gradient_image,v_uv);
#else
vec4 out_color=color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#ifdef RENDER_LINE_GRADIENT
attribute vec3 a_packed;
#else
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_GRADIENT
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:At(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:At(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:At(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:At(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:At(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:At(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
}`),terrainDepth:At(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:At(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ha),skyboxGradient:At(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ha),skyboxCapture:At(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:At(`uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;varying vec2 v_pos0;const float wireframeOffset=1e3;void main() {v_pos0=a_uv;vec2 uv=a_uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
vec4 globe=u_globe_matrix*vec4(a_globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(a_merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}`),globeAtmosphere:At(`uniform vec2 u_center;uniform float u_radius;uniform vec2 u_screen_size;uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform float u_pixel_ratio;void main() {highp vec2 fragCoord=gl_FragCoord.xy/u_pixel_ratio;fragCoord.y=u_screen_size.y-fragCoord.y;float distFromCenter=length(fragCoord-u_center);float normDistFromCenter=length(fragCoord-u_center)/u_radius;if (normDistFromCenter < 1.0)
discard;float t=clamp(1.0-sqrt(normDistFromCenter-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}`,"attribute vec3 a_pos;void main() {gl_Position=vec4(a_pos,1.0);}")};function At(p,i,c){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,x=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),S=p.match(y),E=i.match(y),P=pc.match(y);let M=E?E.concat(S):S;c||(Xa.staticUniforms&&(M=Xa.staticUniforms.concat(M)),Ya.staticUniforms&&(M=Ya.staticUniforms.concat(M))),M&&(M=M.concat(P));const z={};return{fragmentSource:p=p.replace(m,(D,N,Z,$,X)=>(z[X]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${Z} ${$} ${X};
#else
uniform ${Z} ${$} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${Z} ${$} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(m,(D,N,Z,$,X)=>{const le=$==="float"?"vec2":"vec4",q=X.match(/color/)?"color":le;return z[X]?N==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${Z} ${le} a_${X};
varying ${Z} ${$} ${X};
#else
uniform ${Z} ${$} u_${X};
#endif
`:q==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${Z} ${$} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${q}(a_${X}, u_${X}_t);
#else
    ${Z} ${$} ${X} = u_${X};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${Z} ${le} a_${X};
#else
uniform ${Z} ${$} u_${X};
#endif
`:q==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${Z} ${$} ${X} = a_${X};
#else
    ${Z} ${$} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${Z} ${$} ${X} = unpack_mix_${q}(a_${X}, u_${X}_t);
#else
    ${Z} ${$} ${X} = u_${X};
#endif
`}),staticAttributes:x,staticUniforms:M}}class ci{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,m,y,x,S,E,P){this.context=i;let M=this.boundPaintVertexBuffers.length!==y.length;for(let z=0;!M&&z<y.length;z++)this.boundPaintVertexBuffers[z]!==y[z]&&(M=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===m&&!M&&this.boundIndexBuffer===x&&this.boundVertexOffset===S&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===P?(i.bindVertexArrayOES.set(this.vao),E&&E.bind(),x&&x.dynamicDraw&&x.bind(),P&&P.bind()):this.freshBind(c,m,y,x,S,E,P)}freshBind(i,c,m,y,x,S,E){let P;const M=i.numAttributes,z=this.context,D=z.gl;if(z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=z.extVertexArrayObject.createVertexArrayOES(),z.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=E;else{P=z.currentNumAttributes||0;for(let N=M;N<P;N++)D.disableVertexAttribArray(N)}c.enableAttributes(D,i);for(const N of m)N.enableAttributes(D,i);S&&S.enableAttributes(D,i),E&&E.enableAttributes(D,i),c.bind(),c.setVertexAttribPointers(D,i,x);for(const N of m)N.bind(),N.setVertexAttribPointers(D,i,x);S&&(S.bind(),S.setVertexAttribPointers(D,i,x)),y&&y.bind(),E&&(E.bind(),E.setVertexAttribPointers(D,i,x)),z.currentNumAttributes=M}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function kf(p,i){const c=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new s.MercatorCoordinate(0,m/c).toLngLat().lat,new s.MercatorCoordinate(0,(m+1)/c).toLngLat().lat]}function gc(p,i,c,m,y,x,S){const E=p.context,P=E.gl,M=c.fbo;if(!M)return;p.prepareDrawTile(i);const z=p.useProgram("hillshade");E.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,M.colorAttachment.get());const D=((X,le,q,oe)=>{const ae=q.paint.get("hillshade-shadow-color"),re=q.paint.get("hillshade-highlight-color"),ie=q.paint.get("hillshade-accent-color");let ce=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);q.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=X.transform.angle);const we=!X.options.moving;return{u_matrix:oe||X.transform.calculateProjMatrix(le.tileID.toUnwrapped(),we),u_image:0,u_latrange:kf(0,le.tileID),u_light:[q.paint.get("hillshade-exaggeration"),ce],u_shadow:ae,u_highlight:re,u_accent:ie}})(p,c,m,p.terrain?i.projMatrix:null);p.prepareDrawProgram(E,z,i.toUnwrapped());const{tileBoundsBuffer:N,tileBoundsIndexBuffer:Z,tileBoundsSegments:$}=p.getTileBoundsBuffers(c);z.draw(E,P.TRIANGLES,y,x,S,s.CullFaceMode.disabled,D,m.id,N,Z,$)}function Wn(p,i,c){if(!i.needsDEMTextureUpload)return;const m=p.context,y=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||p.getTileTexture(c.stride);const x=c.getPixels();i.demTexture?i.demTexture.update(x,{premultiply:!1}):i.demTexture=new s.Texture(m,x,y.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function sl(p,i,c,m,y,x){const S=p.context,E=S.gl;if(!i.dem)return;const P=i.dem;if(S.activeTexture.set(E.TEXTURE1),Wn(p,i,P),!i.demTexture)return;i.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);const M=P.dim;S.activeTexture.set(E.TEXTURE0);let z=i.fbo;if(!z){const $=new s.Texture(S,{width:M,height:M,data:null},E.RGBA);$.bind(E.LINEAR,E.CLAMP_TO_EDGE),z=i.fbo=S.createFramebuffer(M,M,!0),z.colorAttachment.set($.texture)}S.bindFramebuffer.set(z.framebuffer),S.viewport.set([0,0,M,M]);const{tileBoundsBuffer:D,tileBoundsIndexBuffer:N,tileBoundsSegments:Z}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(S,E.TRIANGLES,m,y,x,s.CullFaceMode.disabled,(($,X)=>{const le=X.stride,q=s.create();return s.ortho(q,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(q,q,[0,-s.EXTENT,0]),{u_matrix:q,u_image:1,u_dimension:[le,le],u_zoom:$.overscaledZ,u_unpack:X.unpackVector}})(i.tileID,P),c.id,D,N,Z),i.needsHillshadePrepare=!1}const Fo=(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_image0:new s.Uniform1i(p,i.u_image0),u_skirt_height:new s.Uniform1f(p,i.u_skirt_height)}),lr=(p,i)=>({u_matrix:p,u_image0:0,u_skirt_height:i}),yc=(p,i,c,m,y)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:i,u_merc_matrix:c,u_zoom_transition:m,u_merc_center:y,u_image0:0});function ui(p,i){return p!=null&&i!=null&&!(!p.hasData()||!i.hasData())&&p.demTexture!=null&&i.demTexture!=null&&p.tileID.key!==i.tileID.key}const qi=new class{constructor(){this.operations={}}newMorphing(p,i,c,m,y){if(p in this.operations){const x=this.operations[p];x.to.tileID.key!==c.tileID.key&&(x.queued=c)}else this.operations[p]={startTime:m,phase:0,duration:y,from:i,to:c,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const i=this.operations[p];return{from:i.from,to:i.to,phase:i.phase}}update(p){for(const i in this.operations){const c=this.operations[i];for(c.phase=(p-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,p)){delete this.operations[i];break}}}_nextOp(p,i){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=i,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},da={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Xg(p,i){const c=1<<p.z;return!i&&(p.x===0||p.x===c-1)||p.y===0||p.y===c-1}const Zi=p=>({u_matrix:p});function If(p,i,c,m,y){if(y>0){const x=s.exported.now(),S=(x-p.timeAdded)/y,E=i?(x-i.timeAdded)/y:-1,P=c.getSource(),M=m.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),z=!i||Math.abs(i.tileID.overscaledZ-M)>Math.abs(p.tileID.overscaledZ-M),D=z&&p.refreshedUponExpiration?1:s.clamp(z?S:1-E,0,1);return p.refreshedUponExpiration&&S>=1&&(p.refreshedUponExpiration=!1),i?{opacity:1,mix:1-D}:{opacity:D,mix:0}}return{opacity:1,mix:0}}class Af extends s.SourceCache{constructor(i){const c={type:"raster-dem",maxzoom:i.transform.maxZoom},m=new hn(fe(),null),y=Xr("mock-dem",c,m,i.style);super("mock-dem",y,!1),y.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,c){i.state="loaded",c(null)}}class Yr extends s.SourceCache{constructor(i){const c=Xr("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new hn(fe(),null),i.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,c,m){if(i.freezeTileCoverage)return;this.transform=i;const y=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((x,S)=>{if(x[S.key]="",!this._tiles[S.key]){const E=new s.Tile(S,this._source.tileSize*S.overscaleFactor(),i.tileZoom);E.state="loaded",this._tiles[S.key]=E}return x},{});for(const x in this._tiles)x in y||(this.freeFBO(x),this._tiles[x].unloadVectorData(),delete this._tiles[x])}freeFBO(i){const c=this.proxyCachedFBO[i];if(c!==void 0){const m=Object.values(c);this.renderCachePool.push(...m),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ll extends s.OverscaledTileID{constructor(i,c,m){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=c,this.projMatrix=m}}class No extends s.Elevation{constructor(i,c){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,y,x]=function(P){const M=new s.StructArrayLayout4i8,z=new s.StructArrayLayout3ui6,D=131;M.reserve(17161),z.reserve(33800);const N=s.EXTENT/128,Z=s.EXTENT+N/2,$=Z+N;for(let le=-N;le<$;le+=N)for(let q=-N;q<$;q+=N){const oe=q<0||q>Z||le<0||le>Z?24575:0,ae=s.clamp(Math.round(q),0,s.EXTENT),re=s.clamp(Math.round(le),0,s.EXTENT);M.emplaceBack(ae+oe,re,ae,re)}const X=(le,q)=>{const oe=q*D+le;z.emplaceBack(oe+1,oe,oe+D),z.emplaceBack(oe+D,oe+D+1,oe+1)};for(let le=1;le<129;le++)for(let q=1;q<129;q++)X(q,le);return[0,129].forEach(le=>{for(let q=0;q<130;q++)X(q,le),X(le,q)}),[M,z,32768]}(),S=i.context;this.gridBuffer=S.createVertexBuffer(m,s.boundsAttributes.members),this.gridIndexBuffer=S.createIndexBuffer(y),this.gridSegments=s.SegmentVector.simpleSegment(0,0,m.length,y.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,m.length,x),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Yr(c.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,0,s.EXTENT,0,s.EXTENT,0,1);const E=S.gl;this._overlapStencilMode=new s.StencilMode({func:E.GEQUAL,mask:255},0,255,E.KEEP,E.KEEP,E.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Af(c.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency()}update(i,c,m){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const y=i.terrain.properties;this.sourceCache=i.terrain.drapeRenderMode===0?this._mockSourceCache:i._getSourceCache(y.get("source")),this._exaggeration=y.get("exaggeration");const x=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const S=this.getScaledDemTileSize();this.sourceCache.update(c,S,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,x(),this._initializing=!0),x(),c.updateElevation(!m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||i.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=m._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(m.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const y=this.proxyCoords=c.getIds().map(P=>{const M=c.getTileByID(P).tileID;return M.projMatrix=m.calculateProjMatrix(M.toUnwrapped()),M});(function(P,M){const z=M.transform.pointCoordinate(M.transform.getCameraPoint()),D=new s.pointGeometry(z.x,z.y);P.sort((N,Z)=>{if(Z.overscaledZ-N.overscaledZ)return Z.overscaledZ-N.overscaledZ;const $=new s.pointGeometry(N.canonical.x+(1<<N.canonical.z)*N.wrap,N.canonical.y),X=new s.pointGeometry(Z.canonical.x+(1<<Z.canonical.z)*Z.wrap,Z.canonical.y),le=D.mult(1<<N.canonical.z);return le.x-=.5,le.y-=.5,le.distSqr($)-le.distSqr(X)})})(y,this.painter),this._previousZoom=m.zoom;const x=this.proxyToSource||{};this.proxyToSource={},y.forEach(P=>{this.proxyToSource[P.key]={}}),this.terrainTileForTile={};const S=this._style._sourceCaches;for(const P in S){const M=S[P];if(!M.used||(M!==this.sourceCache&&this.resetTileLookupCache(M.id),this._setupProxiedCoordsForOrtho(M,i[P],x),M.usedForTerrain))continue;const z=i[P];M.getSource().reparseOverscaled&&this._assignTerrainTiles(z)}this.proxiedCoords[c.id]=y.map(P=>new ll(P,P.key,this.orthoMatrix)),this._assignTerrainTiles(y),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(x),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const E={};this._visibleDemTiles=[];for(const P of this.proxyCoords){const M=this.terrainTileForTile[P.key];if(!M)continue;const z=M.tileID.key;z in E||(this._visibleDemTiles.push(M),E[z]=z)}}_assignTerrainTiles(i){this._initializing||i.forEach(c=>{if(this.terrainTileForTile[c.key])return;const m=this._findTileCoveringTileID(c,this.sourceCache);m&&(this.terrainTileForTile[c.key]=m)})}_prepareDEMTextures(){const i=this.painter.context,c=i.gl;for(const m in this.terrainTileForTile){const y=this.terrainTileForTile[m],x=y.dem;!x||y.demTexture&&!y.needsDEMTextureUpload||(i.activeTexture.set(c.TEXTURE1),Wn(this.painter,y,x))}}_prepareDemTileUniforms(i,c,m,y){if(!c||c.demTexture==null)return!1;const x=i.tileID.canonical,S=Math.pow(2,c.tileID.canonical.z-x.z),E=y||"";return m[`u_dem_tl${E}`]=[x.x*S%1,x.y*S%1],m[`u_dem_scale${E}`]=S,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,c=i.gl;if(!this._emptyDepthBufferTexture){const m={width:1,height:1,data:new Uint8Array([255,255,255,255])};this._emptyDepthBufferTexture=new s.Texture(i,m,c.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const c=this._visibleDemTiles.reduce((m,y)=>{if(!y.dem)return m;const x=y.dem.tree.minimums[0];return x>0&&i++,m+x},0);return i?c/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,c=i.gl;i.activeTexture.set(c.TEXTURE2);const m=this._getLoadedAreaMinimum(),y={width:1,height:1,data:new Uint8Array(s.DEMData.pack(m,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let x=this._emptyDEMTexture;return x?x.update(y,{premultiply:!1}):x=this._emptyDEMTexture=new s.Texture(i,y,c.RGBA,{premultiply:!1}),x}setupElevationDraw(i,c,m){const y=this.painter.context,x=y.gl,S=(E=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(E),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var E;S.u_dem_size=this.sourceCache.getSource().tileSize,S.u_exaggeration=this.exaggeration();const P=this.painter.transform,M=P.projection.createTileTransform(P,P.worldSize),z=i.tileID.canonical;S.u_tile_tl_up=M.upVector(z,0,0),S.u_tile_tr_up=M.upVector(z,s.EXTENT,0),S.u_tile_br_up=M.upVector(z,s.EXTENT,s.EXTENT),S.u_tile_bl_up=M.upVector(z,0,s.EXTENT),S.u_tile_up_scale=M.upVectorScale(z);let D=null,N=null,Z=1;if(m&&m.morphing&&this._useVertexMorphing){const $=m.morphing.srcDemTile,X=m.morphing.dstDemTile;Z=m.morphing.phase,$&&X&&(this._prepareDemTileUniforms(i,$,S,"_prev")&&(N=$),this._prepareDemTileUniforms(i,X,S)&&(D=X))}if(N&&D?(y.activeTexture.set(x.TEXTURE2),D.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),y.activeTexture.set(x.TEXTURE4),N.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE,x.NEAREST),S.u_dem_lerp=Z):(D=this.terrainTileForTile[i.tileID.key],y.activeTexture.set(x.TEXTURE2),(this._prepareDemTileUniforms(i,D,S)?D.demTexture:this.emptyDEMTexture).bind(x.NEAREST,x.CLAMP_TO_EDGE)),y.activeTexture.set(x.TEXTURE3),m&&m.useDepthForOcclusion?(this._depthTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),S.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]):(this.emptyDepthBufferTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE),S.u_depth_size_inv=[1,1]),m&&m.useMeterToDem&&D){const $=(1<<D.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;S.u_meter_to_dem=$}m&&m.labelPlaneMatrixInv&&(S.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),c.setTerrainUniformValues(y,S)}renderToBackBuffer(i){const c=this.painter,m=this.painter.context;i.length!==0&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),this.renderingToTexture=!1,function(y,x,S,E,P){if(y.transform.projection.name==="globe")(function(M,z,D,N,Z){const $=M.context,X=$.gl;let le,q;const oe=M.options.showTerrainWireframe?2:0,ae=(Ue,Ie)=>{if(q===Ue)return;const Te=[];Ie&&Te.push(da[oe]),Te.push(da[Ue]),Te.push("PROJECTION_GLOBE_VIEW"),le=M.useProgram("globeRaster",null,Te),q=Ue},re=M.colorModeForRenderPass(),ie=new s.DepthMode(X.LEQUAL,s.DepthMode.ReadWrite,M.depthRangeFor3D);qi.update(Z);const ce=M.transform,we=s.calculateGlobeMatrix(ce,ce.worldSize),Ce=s.calculateGlobeMercatorMatrix(ce),Ye=[s.mercatorXfromLng(ce.center.lng),s.mercatorYfromLat(ce.center.lat)],Ge=M.globeSharedBuffers;(oe?[!1,!0]:[!1]).forEach(Ue=>{q=-1;const Ie=Ue?X.LINES:X.TRIANGLES;for(const Te of N){const je=D.getTile(Te),De=Math.pow(2,Te.canonical.z),[dt,xt]=s.globeBuffersForTileMesh(M,je,Te,De),Mt=s.StencilMode.disabled,Xe=z.prevTerrainTileForTile[Te.key],gt=z.terrainTileForTile[Te.key];ui(Xe,gt)&&qi.newMorphing(Te.key,Xe,gt,Z,250),$.activeTexture.set(X.TEXTURE0),je.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const Et=qi.getMorphValuesForProxy(Te.key),on=Et?1:0,fn={};Et&&s.extend$1(fn,{morphing:{srcDemTile:Et.from,dstDemTile:Et.to,phase:s.easeCubicInOut(Et.phase)}});const wt=s.globeMatrixForTile(Te.canonical,we),Bt=yc(ce.projMatrix,wt,Ce,s.globeToMercatorTransition(ce.zoom),Ye);if(ae(on,Ue),z.setupElevationDraw(je,le,fn),M.prepareDrawProgram($,le,Te.toUnwrapped()),Ge){const[Tn,er]=Ue?Ge.getWirefameBuffer(M.context):[Ge.gridIndexBuffer,Ge.gridSegments];le.draw($,Ie,ie,Mt,re,s.CullFaceMode.backCCW,Bt,"globe_raster",dt,Tn,er)}if(!Ue){const Tn=[Te.canonical.y===0?s.globePoleMatrixForTile(Te.canonical,!1,ce):null,Te.canonical.y===De-1?s.globePoleMatrixForTile(Te.canonical,!0,ce):null];for(const er of Tn){if(!er)continue;const Rr=yc(ce.projMatrix,er,er,0,Ye);Ge&&le.draw($,Ie,ie,Mt,re,s.CullFaceMode.disabled,Rr,"globe_pole_raster",xt,Ge.poleIndexBuffer,Ge.poleSegments)}}}})})(y,x,S,E,P);else{const M=y.context,z=M.gl;let D,N;const Z=y.options.showTerrainWireframe?2:0,$=(ae,re)=>{if(N===ae)return;const ie=[da[ae]];re&&ie.push(da[Z]),D=y.useProgram("terrainRaster",null,ie),N=ae},X=y.colorModeForRenderPass(),le=new s.DepthMode(z.LEQUAL,s.DepthMode.ReadWrite,y.depthRangeFor3D);qi.update(P);const q=y.transform,oe=6*Math.pow(1.5,22-q.zoom)*x.exaggeration();(Z?[!1,!0]:[!1]).forEach(ae=>{N=-1;const re=ae?z.LINES:z.TRIANGLES,[ie,ce]=ae?x.getWirefameBuffer():[x.gridIndexBuffer,x.gridSegments];for(const we of E){const Ce=S.getTile(we),Ye=s.StencilMode.disabled,Ge=x.prevTerrainTileForTile[we.key],Ue=x.terrainTileForTile[we.key];ui(Ge,Ue)&&qi.newMorphing(we.key,Ge,Ue,P,250),M.activeTexture.set(z.TEXTURE0),Ce.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const Ie=qi.getMorphValuesForProxy(we.key),Te=Ie?1:0;let je;Ie&&(je={morphing:{srcDemTile:Ie.from,dstDemTile:Ie.to,phase:s.easeCubicInOut(Ie.phase)}});const De=lr(we.projMatrix,Xg(we.canonical,q.renderWorldCopies)?oe/10:oe);$(Te,ae),x.setupElevationDraw(Ce,D,je),y.prepareDrawProgram(M,D,we.toUnwrapped()),D.draw(M,re,le,Ye,X,s.CullFaceMode.backCCW,De,"terrain_raster",x.gridBuffer,ie,ce)}})}}(c,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const c=this.painter,m=this.painter.context,y=this.proxySourceCache,x=this.proxiedCoords[y.id],S=this._drapedRenderBatches.shift(),E=[],P=c.style.order;let M=0;for(const z of x){const D=y.getTileByID(z.proxyTileKey),N=y.proxyCachedFBO[z.key]?y.proxyCachedFBO[z.key][i]:void 0,Z=N!==void 0?y.renderCache[N]:this.pool[M++],$=N!==void 0;if(D.texture=Z.tex,$&&!Z.dirty){E.push(D.tileID);continue}let X;m.bindFramebuffer.set(Z.fb.framebuffer),this.renderedToTile=!1,Z.dirty&&(m.clear({color:s.Color.transparent,stencil:0}),Z.dirty=!1);for(let le=S.start;le<=S.end;++le){const q=c.style._layers[P[le]];if(q.isHidden(c.transform.zoom))continue;const oe=c.style._getLayerSourceCache(q),ae=oe?this.proxyToSource[z.key][oe.id]:[z];if(!ae)continue;const re=ae;m.viewport.set([0,0,Z.fb.width,Z.fb.height]),X!==(oe?oe.id:null)&&(this._setupStencil(Z,ae,q,oe),X=oe?oe.id:null),c.renderLayer(c,oe,q,re)}this.renderedToTile?(Z.dirty=!0,E.push(D.tileID)):$||--M,M===5&&(M=0,this.renderToBackBuffer(E))}return this.renderToBackBuffer(E),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),S.end+1}postRender(){}renderCacheEfficiency(i){const c=i.order.length;if(c===0)return{efficiency:100};let m,y=0,x=0,S=!1;for(let E=0;E<c;++E){const P=i._layers[i.order[E]];this._style.isLayerDraped(P)?(S&&++y,++x):S||(S=!0,m=P.id)}return x===0?{efficiency:100}:{efficiency:100*(1-y/x),firstUndrapedLayer:m}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{i=Math.min(i,c.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,c,m){if(!this._visibleDemTiles)return null;const y=this._visibleDemTiles.filter(x=>x.dem).map(x=>{const S=x.tileID,E=Math.pow(2,S.overscaledZ),{x:P,y:M}=S.canonical,z=P/E,D=(P+1)/E,N=M/E,Z=(M+1)/E;return{minx:z,miny:N,maxx:D,maxy:Z,t:x.dem.tree.raycastRoot(z,N,D,Z,i,c,m),tile:x}});y.sort((x,S)=>(x.t!==null?x.t:Number.MAX_VALUE)-(S.t!==null?S.t:Number.MAX_VALUE));for(const x of y){if(x.t==null)return null;const S=x.tile.dem.tree.raycast(x.minx,x.miny,x.maxx,x.maxy,i,c,m);if(S!=null)return S}return null}_createFBO(){const i=this.painter.context,c=i.gl,m=this.drapeBufferSize;i.activeTexture.set(c.TEXTURE0);const y=new s.Texture(i,{width:m[0],height:m[1],data:null},c.RGBA);y.bind(c.LINEAR,c.CLAMP_TO_EDGE);const x=i.createFramebuffer(m[0],m[1],!1);return x.colorAttachment.set(y.texture),x.depthAttachment=new sc(i,x.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,x.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):x.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&c.texParameterf(c.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:x,tex:y,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const c=this._style._layers[i],m=c.isHidden(this.painter.transform.zoom),y=c.getCrossfadeParameters(),x=!!y&&y.t!==1,S=c.hasTransition();return c.type!=="custom"&&!m&&(x||S)})}_clearRasterFadeFromRenderCache(){let i=!1;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c]._source instanceof oo){i=!0;break}if(i)for(let c=0;c<this._style.order.length;++c){const m=this._style._layers[this._style.order[c]],y=m.isHidden(this.painter.transform.zoom),x=this._style._getLayerSourceCache(m);if(m.type!=="raster"||y||!x)continue;const S=m.paint.get("raster-fade-duration");for(const E of this.proxyCoords){const P=this.proxyToSource[E.key][x.id];if(P)for(const M of P){const z=If(x.getTile(M),x.findLoadedParent(M,0),x,this.painter.transform,S);(z.opacity!==1||z.mix!==0)&&this._clearRenderCacheForTile(x.id,M)}}}}_setupDrapedRenderBatches(){const i=this._style.order,c=i.length;if(c===0)return;const m=[];let y,x=0,S=this._style._layers[i[x]];for(;!this._style.isLayerDraped(S)&&S.isHidden(this.painter.transform.zoom)&&++x<c;)S=this._style._layers[i[x]];for(;x<c;++x){const E=this._style._layers[i[x]];E.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(E)?y===void 0&&(y=x):y!==void 0&&(m.push({start:y,end:x-1}),y=void 0))}y!==void 0&&m.push({start:y,end:x-1}),this._drapedRenderBatches=m}_setupRenderCache(i){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const S=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let E=0;E<S.length;++E){const P=Object.values(S[E]);c.renderCachePool.push(...P)}}return}this._clearRasterFadeFromRenderCache();const m=this.proxyCoords,y=this._tilesDirty;for(let S=m.length-1;S>=0;S--){const E=m[S];if(c.getTileByID(E.key),c.proxyCachedFBO[E.key]!==void 0){const P=i[E.key],M=this.proxyToSource[E.key];let z=0;for(const D in M){const N=M[D],Z=P[D];if(!Z||Z.length!==N.length||N.some(($,X)=>$!==Z[X]||y[D]&&y[D].hasOwnProperty($.key))){z=-1;break}++z}for(const D in c.proxyCachedFBO[E.key])c.renderCache[c.proxyCachedFBO[E.key][D]].dirty=z<0||z!==Object.values(P).length}}const x=[...this._drapedRenderBatches];x.sort((S,E)=>E.end-E.start-(S.end-S.start));for(const S of x)for(const E of m){if(c.proxyCachedFBO[E.key])continue;let P=c.renderCachePool.pop();P===void 0&&c.renderCache.length<50&&(P=c.renderCache.length,c.renderCache.push(this._createFBO())),P!==void 0&&(c.proxyCachedFBO[E.key]={},c.proxyCachedFBO[E.key][S.start]=P,c.renderCache[P].dirty=!0)}this._tilesDirty={}}_setupStencil(i,c,m,y){if(!y||!this._sourceTilesOverlap[y.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const x=this.painter.context,S=x.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let E;if(m.isTileClipped())E=c.length,this._overlapStencilMode.test={func:S.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);E=1,this._overlapStencilMode.test={func:S.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+E>255&&(x.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=E,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(i,c){const m=this.painter,y=this.painter.context,x=y.gl;m._tileClippingMaskIDs={},y.setColorMode(s.ColorMode.disabled),y.setDepthMode(s.DepthMode.disabled);const S=m.useProgram("clippingMask");for(const E of i){const P=m._tileClippingMaskIDs[E.key]=--c;S.draw(y,x.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:x.ALWAYS,mask:0},P,255,x.KEEP,x.KEEP,x.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Zi(E.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(i){const c=this.painter.transform;if(i.x<0||i.x>c.width||i.y<0||i.y>c.height)return null;const m=[i.x,i.y,1,1];s.transformMat4$1(m,m,c.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),m[0]/=c.worldSize,m[1]/=c.worldSize;const y=c._camera.position,x=s.mercatorZfromAltitude(1,c.center.lat),S=[y[0],y[1],y[2]/x,0],E=s.subtract([],m.slice(0,3),S);s.normalize(E,E);const P=this.raycast(S,E,this._exaggeration);return P!==null&&P?(s.scaleAndAdd(S,S,E,P),S[3]=S[2],S[2]*=x,S):null}drawDepth(){const i=this.painter,c=i.context,m=this.proxySourceCache,y=Math.ceil(i.width),x=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===y&&this._depthFBO.height===x||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const S=c.gl,E=c.createFramebuffer(y,x,!0);c.activeTexture.set(S.TEXTURE0);const P=new s.Texture(c,{width:y,height:x,data:null},S.RGBA);P.bind(S.NEAREST,S.CLAMP_TO_EDGE),E.colorAttachment.set(P.texture);const M=c.createRenderbuffer(c.gl.DEPTH_COMPONENT16,y,x);E.depthAttachment.set(M),this._depthFBO=E,this._depthTexture=P}c.bindFramebuffer.set(this._depthFBO.framebuffer),c.viewport.set([0,0,y,x]),function(S,E,P,M){if(S.transform.projection.name==="globe")return;const z=S.context,D=z.gl;z.clear({depth:1});const N=S.useProgram("terrainDepth"),Z=new s.DepthMode(D.LESS,s.DepthMode.ReadWrite,S.depthRangeFor3D);for(const $ of M){const X=P.getTile($),le=lr($.projMatrix,0);E.setupElevationDraw(X,N),N.draw(z,D.TRIANGLES,Z,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,le,"terrain_depth",E.gridBuffer,E.gridIndexBuffer,E.gridNoSkirtSegments)}}(i,this,m,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,c,m){if(i.getSource()instanceof ji)return this._setupProxiedCoordsForImageSource(i,c,m);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const y=this.proxiedCoords[i.id]=[],x=this.proxyCoords;for(let E=0;E<x.length;E++){const P=x[E],M=this._findTileCoveringTileID(P,i);if(M){const z=this._createProxiedId(P,M,m[P.key]&&m[P.key][i.id]);y.push(z),this.proxyToSource[P.key][i.id]=[z]}}let S=!1;for(let E=0;E<c.length;E++){const P=i.getTile(c[E]);if(!P||!P.hasData())continue;const M=this._findTileCoveringTileID(P.tileID,this.proxySourceCache);if(M&&M.tileID.canonical.z!==P.tileID.canonical.z){const z=this.proxyToSource[M.tileID.key][i.id],D=this._createProxiedId(M.tileID,P,m[M.tileID.key]&&m[M.tileID.key][i.id]);z?z.splice(z.length-1,0,D):this.proxyToSource[M.tileID.key][i.id]=[D],y.push(D),S=!0}}this._sourceTilesOverlap[i.id]=S}_setupProxiedCoordsForImageSource(i,c,m){if(!i.getSource().loaded())return;const y=this.proxiedCoords[i.id]=[],x=this.proxyCoords,S=i.getSource(),E=new s.pointGeometry(S.tileID.x,S.tileID.y)._div(1<<S.tileID.z),P=S.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((z,D)=>(z.min.x=Math.min(z.min.x,D.x-E.x),z.min.y=Math.min(z.min.y,D.y-E.y),z.max.x=Math.max(z.max.x,D.x-E.x),z.max.y=Math.max(z.max.y,D.y-E.y),z),{min:new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),M=(z,D)=>{const N=z.wrap+z.canonical.x/(1<<z.canonical.z),Z=z.canonical.y/(1<<z.canonical.z),$=s.EXTENT/(1<<z.canonical.z),X=D.wrap+D.canonical.x/(1<<D.canonical.z),le=D.canonical.y/(1<<D.canonical.z);return N+$<X+P.min.x||N>X+P.max.x||Z+$<le+P.min.y||Z>le+P.max.y};for(let z=0;z<x.length;z++){const D=x[z];for(let N=0;N<c.length;N++){const Z=i.getTile(c[N]);if(!Z||!Z.hasData()||M(D,Z.tileID))continue;const $=this._createProxiedId(D,Z,m[D.key]&&m[D.key][i.id]),X=this.proxyToSource[D.key][i.id];X?X.push($):this.proxyToSource[D.key][i.id]=[$],y.push($)}}}_createProxiedId(i,c,m){let y=this.orthoMatrix;if(m){const x=m.find(S=>S.key===c.tileID.key);if(x)return x}if(c.tileID.key!==i.key){const x=i.canonical.z-c.tileID.canonical.z;let S,E,P;y=s.create();const M=c.tileID.wrap-i.wrap<<i.overscaledZ;x>0?(S=s.EXTENT>>x,E=S*((c.tileID.canonical.x<<x)-i.canonical.x+M),P=S*((c.tileID.canonical.y<<x)-i.canonical.y)):(S=s.EXTENT<<-x,E=s.EXTENT*(c.tileID.canonical.x-(i.canonical.x+M<<-x)),P=s.EXTENT*(c.tileID.canonical.y-(i.canonical.y<<-x))),s.ortho(y,0,S,0,S,0,1),s.translate(y,y,[E,P,0])}return new ll(c.tileID,i.key,y)}_findTileCoveringTileID(i,c){let m=c.getTile(i);if(m&&m.hasData())return m;const y=this._findCoveringTileCache[c.id],x=y[i.key];if(m=x?c.getTileByID(x):null,m&&m.hasData()||x===null)return m;let S=m?m.tileID:i,E=S.overscaledZ;const P=c.getSource().minzoom,M=[];if(!x){const D=c.getSource().maxzoom;if(i.canonical.z>=D){const N=i.canonical.z-D;c.getSource().reparseOverscaled?(E=Math.max(i.canonical.z+2,c.transform.tileZoom),S=new s.OverscaledTileID(E,i.wrap,D,i.canonical.x>>N,i.canonical.y>>N)):N!==0&&(E=D,S=new s.OverscaledTileID(E,i.wrap,D,i.canonical.x>>N,i.canonical.y>>N))}S.key!==i.key&&(M.push(S.key),m=c.getTile(S))}const z=D=>{M.forEach(N=>{y[N]=D}),M.length=0};for(E-=1;E>=P&&(!m||!m.hasData());E--){m&&z(m.tileID.key);const D=S.calculateScaledKey(E);if(m=c.getTileByID(D),m&&m.hasData())break;const N=y[D];if(N===null)break;N===void 0?M.push(D):m=c.getTileByID(N)}return z(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(i){this.renderedToTile=!0}_clearRenderCacheForTile(i,c){let m=this._tilesDirty[i];m||(m=this._tilesDirty[i]={}),m[c.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(c){let m,y,x;const S=new s.StructArrayLayout2ui4,E=131;for(y=1;y<129;y++){for(m=1;m<129;m++)x=y*E+m,S.emplaceBack(x,x+1),S.emplaceBack(x,x+E),S.emplaceBack(x+1,x+E),y===128&&S.emplaceBack(x+E,x+E+1);S.emplaceBack(x+1,x+1+E)}return S}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function _c(p){const i=[];for(let c=0;c<p.length;c++){if(p[c]===null)continue;const m=p[c].split(" ");i.push(m.pop())}return i}class cl{static cacheKey(i,c,m){let y=`${i}${m?m.cacheKey:""}`;for(const x of c)y+=`/${x}`;return y}constructor(i,c,m,y,x,S){const E=i.gl;this.program=E.createProgram();const P=_c(m.staticAttributes),M=y?y.getBinderAttributes():[],z=P.concat(M),D=m.staticUniforms?_c(m.staticUniforms):[],N=y?y.getBinderUniforms():[],Z=D.concat(N),$=[];for(const ie of Z)$.indexOf(ie)<0&&$.push(ie);let X=y?y.defines():[];X=X.concat(S.map(ie=>`#define ${ie}`));const le=X.concat(`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,mc,Ht.fragmentSource,Ya.fragmentSource,m.fragmentSource).join(`
`),q=X.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,mc,Ht.vertexSource,Ya.vertexSource,Xa.vertexSource,m.vertexSource).join(`
`),oe=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);E.shaderSource(oe,le),E.compileShader(oe),E.attachShader(this.program,oe);const ae=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);E.shaderSource(ae,q),E.compileShader(ae),E.attachShader(this.program,ae),this.attributes={};const re={};this.numAttributes=z.length;for(let ie=0;ie<this.numAttributes;ie++)z[ie]&&(E.bindAttribLocation(this.program,ie,z[ie]),this.attributes[z[ie]]=ie);E.linkProgram(this.program),E.deleteShader(ae),E.deleteShader(oe);for(let ie=0;ie<$.length;ie++){const ce=$[ie];if(ce&&!re[ce]){const we=E.getUniformLocation(this.program,ce);we&&(re[ce]=we)}}this.fixedUniforms=x(i,re),this.binderUniforms=y?y.getUniforms(i,re):[],S.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=((ie,ce)=>({u_dem:new s.Uniform1i(ie,ce.u_dem),u_dem_prev:new s.Uniform1i(ie,ce.u_dem_prev),u_dem_unpack:new s.Uniform4f(ie,ce.u_dem_unpack),u_dem_tl:new s.Uniform2f(ie,ce.u_dem_tl),u_dem_scale:new s.Uniform1f(ie,ce.u_dem_scale),u_dem_tl_prev:new s.Uniform2f(ie,ce.u_dem_tl_prev),u_dem_scale_prev:new s.Uniform1f(ie,ce.u_dem_scale_prev),u_dem_size:new s.Uniform1f(ie,ce.u_dem_size),u_dem_lerp:new s.Uniform1f(ie,ce.u_dem_lerp),u_exaggeration:new s.Uniform1f(ie,ce.u_exaggeration),u_depth:new s.Uniform1i(ie,ce.u_depth),u_depth_size_inv:new s.Uniform2f(ie,ce.u_depth_size_inv),u_meter_to_dem:new s.Uniform1f(ie,ce.u_meter_to_dem),u_label_plane_matrix_inv:new s.UniformMatrix4f(ie,ce.u_label_plane_matrix_inv),u_tile_tl_up:new s.Uniform3f(ie,ce.u_tile_tl_up),u_tile_tr_up:new s.Uniform3f(ie,ce.u_tile_tr_up),u_tile_br_up:new s.Uniform3f(ie,ce.u_tile_br_up),u_tile_bl_up:new s.Uniform3f(ie,ce.u_tile_bl_up),u_tile_up_scale:new s.Uniform1f(ie,ce.u_tile_up_scale)}))(i,re)),S.indexOf("FOG")!==-1&&(this.fogUniforms=((ie,ce)=>({u_fog_matrix:new s.UniformMatrix4f(ie,ce.u_fog_matrix),u_fog_range:new s.Uniform2f(ie,ce.u_fog_range),u_fog_color:new s.Uniform4f(ie,ce.u_fog_color),u_fog_horizon_blend:new s.Uniform1f(ie,ce.u_fog_horizon_blend),u_fog_temporal_offset:new s.Uniform1f(ie,ce.u_fog_temporal_offset)}))(i,re))}setTerrainUniformValues(i,c){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const y in c)m[y].set(c[y])}}setFogUniformValues(i,c){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const y in c)m[y].location&&m[y].set(c[y])}}draw(i,c,m,y,x,S,E,P,M,z,D,N,Z,$,X,le){const q=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(y),i.setColorMode(x),i.setCullFace(S);for(const ae of Object.keys(this.fixedUniforms))this.fixedUniforms[ae].set(E[ae]);$&&$.setUniforms(i,this.binderUniforms,N,{zoom:Z});const oe={[q.LINES]:2,[q.TRIANGLES]:3,[q.LINE_STRIP]:1}[c];for(const ae of D.get()){const re=ae.vaos||(ae.vaos={});(re[P]||(re[P]=new ci)).bind(i,this,M,$?$.getPaintVertexBuffers():[],z,ae.vertexOffset,X,le),q.drawElements(c,ae.primitiveLength*oe,q.UNSIGNED_SHORT,ae.primitiveOffset*oe*2)}}}function Pf(p,i,c){const m=1/_n(c,1,i.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/y,S=x*(c.tileID.canonical.x+c.tileID.wrap*y),E=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[S>>16,E>>16],u_pixel_coord_lower:[65535&S,65535&E]}}const Mf=(p,i,c,m)=>{const y=i.style.light,x=y.properties.get("position"),S=[x.x,x.y,x.z],E=s.create$1();y.properties.get("anchor")==="viewport"&&(s.fromRotation(E,-i.transform.angle),s.transformMat3(S,S,E));const P=y.properties.get("color");return{u_matrix:p,u_lightpos:S,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+c,u_opacity:m}},ah=(p,i,c,m,y,x,S)=>s.extend(Mf(p,i,c,m),Pf(x,i,S),{u_height_factor:-Math.pow(2,y.overscaledZ)/S.tileSize/8}),zf=p=>({u_matrix:p}),sh=(p,i,c,m)=>s.extend(zf(p),Pf(c,i,m)),Yg=(p,i)=>({u_matrix:p,u_world:i}),Of=(p,i,c,m,y)=>s.extend(sh(p,i,c,m),{u_world:y}),Kg=(p,i,c,m)=>{const y=p.transform;let x;return x=m.paint.get("circle-pitch-alignment")==="map"?y.calculatePixelsToTileUnitsMatrix(c):new Float32Array([y.pixelsToGLUnits[0],0,0,y.pixelsToGLUnits[1]]),{u_camera_to_center_distance:y.cameraToCenterDistance,u_matrix:p.translatePosMatrix(i.projMatrix,c,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:x}},lh=p=>{const i=[];return p.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),p.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i},Lf=(p,i,c)=>{const m=s.EXTENT/c.tileSize;return{u_matrix:p,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/m,i.pixelsToGLUnits[1]/m]}},ch=(p,i,c=1)=>({u_matrix:p,u_color:i,u_overlay:0,u_overlay_scale:c}),Df=(p,i,c,m)=>({u_matrix:p,u_extrude_scale:_n(i,1,c),u_intensity:m}),Rf=(p,i,c,m,y,x)=>{const S=p.transform,E=S.calculatePixelsToTileUnitsMatrix(i),P={u_matrix:ul(p,i,c,y),u_pixels_to_tile_units:E,u_device_pixel_ratio:s.exported.devicePixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(hl(c)){const M=Ka(i,p.transform);P.u_texsize=i.lineAtlasTexture.size,P.u_scale=[M,m.fromScale,m.toScale],P.u_mix=m.t}return P},fa=(p,i,c,m,y)=>{const x=p.transform,S=Ka(i,x);return{u_matrix:ul(p,i,c,y),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:x.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:s.exported.devicePixelRatio,u_image:0,u_scale:[S,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ka(p,i){return 1/_n(p,1,i.tileZoom)}function ul(p,i,c,m){return p.translatePosMatrix(m||i.tileID.projMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function hl(p){const i=p.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}const vc=(p,i,c,m,y,x)=>{return{u_matrix:p,u_tl_parent:i,u_scale_parent:c,u_fade_t:m.mix,u_opacity:m.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(E=y.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(S=y.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:xc(y.paint.get("raster-hue-rotate")),u_perspective_transform:x};var S,E};function xc(p){p*=Math.PI/180;const i=Math.sin(p),c=Math.cos(p);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const bc=(p,i,c,m,y,x,S,E,P,M,z,D,N,Z)=>{const $=y.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:$.cameraToCenterDistance,u_pitch:$.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:$.width/$.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:S,u_coord_matrix:E,u_is_text:+P,u_pitch_with_map:+m,u_texsize:M,u_tile_id:z,u_zoom_transition:D,u_inv_rot_matrix:N,u_merc_center:Z,u_texture:0}},dl=(p,i,c,m,y,x,S,E,P,M,z,D,N,Z,$)=>{const{cameraToCenterDistance:X,_pitch:le}=y.transform;return s.extend(bc(p,i,c,m,y,x,S,E,P,M,D,N,Z,$),{u_gamma_scale:m?X*Math.cos(y.terrain?0:le):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+z})},fl=(p,i,c,m,y,x,S,E,P,M,z,D,N,Z)=>s.extend(dl(p,i,c,m,y,x,S,E,!0,P,!0,z,D,N,Z),{u_texsize_icon:M,u_texture_icon:1}),rn=(p,i,c)=>({u_matrix:p,u_opacity:i,u_color:c}),wc=(p,i,c,m,y,x)=>s.extend(function(S,E,P,M){const z=P.imageManager.getPattern(S.from.toString()),D=P.imageManager.getPattern(S.to.toString()),{width:N,height:Z}=P.imageManager.getPixelSize(),$=Math.pow(2,M.tileID.overscaledZ),X=M.tileSize*Math.pow(2,P.transform.tileZoom)/$,le=X*(M.tileID.canonical.x+M.tileID.wrap*$),q=X*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[N,Z],u_mix:E.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/_n(M,1,P.transform.tileZoom),u_pixel_coord_upper:[le>>16,q>>16],u_pixel_coord_lower:[65535&le,65535&q]}}(m,x,c,y),{u_matrix:p,u_opacity:i}),Bf={fillExtrusion:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_lightpos:new s.Uniform3f(p,i.u_lightpos),u_lightintensity:new s.Uniform1f(p,i.u_lightintensity),u_lightcolor:new s.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(p,i.u_vertical_gradient),u_opacity:new s.Uniform1f(p,i.u_opacity)}),fillExtrusionPattern:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_lightpos:new s.Uniform3f(p,i.u_lightpos),u_lightintensity:new s.Uniform1f(p,i.u_lightintensity),u_lightcolor:new s.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(p,i.u_vertical_gradient),u_height_factor:new s.Uniform1f(p,i.u_height_factor),u_image:new s.Uniform1i(p,i.u_image),u_texsize:new s.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(p,i.u_scale),u_fade:new s.Uniform1f(p,i.u_fade),u_opacity:new s.Uniform1f(p,i.u_opacity)}),fill:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix)}),fillPattern:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_image:new s.Uniform1i(p,i.u_image),u_texsize:new s.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(p,i.u_scale),u_fade:new s.Uniform1f(p,i.u_fade)}),fillOutline:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_world:new s.Uniform2f(p,i.u_world)}),fillOutlinePattern:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_world:new s.Uniform2f(p,i.u_world),u_image:new s.Uniform1i(p,i.u_image),u_texsize:new s.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(p,i.u_scale),u_fade:new s.Uniform1f(p,i.u_fade)}),circle:(p,i)=>({u_camera_to_center_distance:new s.Uniform1f(p,i.u_camera_to_center_distance),u_extrude_scale:new s.UniformMatrix2f(p,i.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(p,i.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(p,i.u_matrix)}),collisionBox:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_camera_to_center_distance:new s.Uniform1f(p,i.u_camera_to_center_distance),u_extrude_scale:new s.Uniform2f(p,i.u_extrude_scale)}),collisionCircle:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_inv_matrix:new s.UniformMatrix4f(p,i.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(p,i.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(p,i.u_viewport_size)}),debug:(p,i)=>({u_color:new s.UniformColor(p,i.u_color),u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_overlay:new s.Uniform1i(p,i.u_overlay),u_overlay_scale:new s.Uniform1f(p,i.u_overlay_scale)}),clippingMask:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix)}),heatmap:(p,i)=>({u_extrude_scale:new s.Uniform1f(p,i.u_extrude_scale),u_intensity:new s.Uniform1f(p,i.u_intensity),u_matrix:new s.UniformMatrix4f(p,i.u_matrix)}),heatmapTexture:(p,i)=>({u_image:new s.Uniform1i(p,i.u_image),u_color_ramp:new s.Uniform1i(p,i.u_color_ramp),u_opacity:new s.Uniform1f(p,i.u_opacity)}),hillshade:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_image:new s.Uniform1i(p,i.u_image),u_latrange:new s.Uniform2f(p,i.u_latrange),u_light:new s.Uniform2f(p,i.u_light),u_shadow:new s.UniformColor(p,i.u_shadow),u_highlight:new s.UniformColor(p,i.u_highlight),u_accent:new s.UniformColor(p,i.u_accent)}),hillshadePrepare:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_image:new s.Uniform1i(p,i.u_image),u_dimension:new s.Uniform2f(p,i.u_dimension),u_zoom:new s.Uniform1f(p,i.u_zoom),u_unpack:new s.Uniform4f(p,i.u_unpack)}),line:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_pixels_to_tile_units:new s.UniformMatrix2f(p,i.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(p,i.u_units_to_pixels),u_dash_image:new s.Uniform1i(p,i.u_dash_image),u_gradient_image:new s.Uniform1i(p,i.u_gradient_image),u_image_height:new s.Uniform1f(p,i.u_image_height),u_texsize:new s.Uniform2f(p,i.u_texsize),u_scale:new s.Uniform3f(p,i.u_scale),u_mix:new s.Uniform1f(p,i.u_mix),u_alpha_discard_threshold:new s.Uniform1f(p,i.u_alpha_discard_threshold)}),linePattern:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_texsize:new s.Uniform2f(p,i.u_texsize),u_pixels_to_tile_units:new s.UniformMatrix2f(p,i.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(p,i.u_device_pixel_ratio),u_image:new s.Uniform1i(p,i.u_image),u_units_to_pixels:new s.Uniform2f(p,i.u_units_to_pixels),u_scale:new s.Uniform3f(p,i.u_scale),u_fade:new s.Uniform1f(p,i.u_fade),u_alpha_discard_threshold:new s.Uniform1f(p,i.u_alpha_discard_threshold)}),raster:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_tl_parent:new s.Uniform2f(p,i.u_tl_parent),u_scale_parent:new s.Uniform1f(p,i.u_scale_parent),u_fade_t:new s.Uniform1f(p,i.u_fade_t),u_opacity:new s.Uniform1f(p,i.u_opacity),u_image0:new s.Uniform1i(p,i.u_image0),u_image1:new s.Uniform1i(p,i.u_image1),u_brightness_low:new s.Uniform1f(p,i.u_brightness_low),u_brightness_high:new s.Uniform1f(p,i.u_brightness_high),u_saturation_factor:new s.Uniform1f(p,i.u_saturation_factor),u_contrast_factor:new s.Uniform1f(p,i.u_contrast_factor),u_spin_weights:new s.Uniform3f(p,i.u_spin_weights),u_perspective_transform:new s.Uniform2f(p,i.u_perspective_transform)}),symbolIcon:(p,i)=>({u_is_size_zoom_constant:new s.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(p,i.u_size_t),u_size:new s.Uniform1f(p,i.u_size),u_camera_to_center_distance:new s.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(p,i.u_pitch),u_rotate_symbol:new s.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(p,i.u_fade_change),u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new s.Uniform1i(p,i.u_is_text),u_pitch_with_map:new s.Uniform1i(p,i.u_pitch_with_map),u_texsize:new s.Uniform2f(p,i.u_texsize),u_tile_id:new s.Uniform3f(p,i.u_tile_id),u_zoom_transition:new s.Uniform1f(p,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(p,i.u_merc_center),u_texture:new s.Uniform1i(p,i.u_texture)}),symbolSDF:(p,i)=>({u_is_size_zoom_constant:new s.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(p,i.u_size_t),u_size:new s.Uniform1f(p,i.u_size),u_camera_to_center_distance:new s.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(p,i.u_pitch),u_rotate_symbol:new s.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(p,i.u_fade_change),u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new s.Uniform1i(p,i.u_is_text),u_pitch_with_map:new s.Uniform1i(p,i.u_pitch_with_map),u_texsize:new s.Uniform2f(p,i.u_texsize),u_texture:new s.Uniform1i(p,i.u_texture),u_gamma_scale:new s.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(p,i.u_device_pixel_ratio),u_tile_id:new s.Uniform3f(p,i.u_tile_id),u_zoom_transition:new s.Uniform1f(p,i.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(p,i.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(p,i.u_merc_center),u_is_halo:new s.Uniform1i(p,i.u_is_halo)}),symbolTextAndIcon:(p,i)=>({u_is_size_zoom_constant:new s.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(p,i.u_size_t),u_size:new s.Uniform1f(p,i.u_size),u_camera_to_center_distance:new s.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(p,i.u_pitch),u_rotate_symbol:new s.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(p,i.u_fade_change),u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new s.Uniform1i(p,i.u_is_text),u_pitch_with_map:new s.Uniform1i(p,i.u_pitch_with_map),u_texsize:new s.Uniform2f(p,i.u_texsize),u_texsize_icon:new s.Uniform2f(p,i.u_texsize_icon),u_texture:new s.Uniform1i(p,i.u_texture),u_texture_icon:new s.Uniform1i(p,i.u_texture_icon),u_gamma_scale:new s.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(p,i.u_is_halo)}),background:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_opacity:new s.Uniform1f(p,i.u_opacity),u_color:new s.UniformColor(p,i.u_color)}),backgroundPattern:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_opacity:new s.Uniform1f(p,i.u_opacity),u_image:new s.Uniform1i(p,i.u_image),u_pattern_tl_a:new s.Uniform2f(p,i.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(p,i.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(p,i.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(p,i.u_pattern_br_b),u_texsize:new s.Uniform2f(p,i.u_texsize),u_mix:new s.Uniform1f(p,i.u_mix),u_pattern_size_a:new s.Uniform2f(p,i.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(p,i.u_pattern_size_b),u_scale_a:new s.Uniform1f(p,i.u_scale_a),u_scale_b:new s.Uniform1f(p,i.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(p,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(p,i.u_tile_units_to_pixels)}),terrainRaster:Fo,terrainDepth:Fo,skybox:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_sun_direction:new s.Uniform3f(p,i.u_sun_direction),u_cubemap:new s.Uniform1i(p,i.u_cubemap),u_opacity:new s.Uniform1f(p,i.u_opacity),u_temporal_offset:new s.Uniform1f(p,i.u_temporal_offset)}),skyboxGradient:(p,i)=>({u_matrix:new s.UniformMatrix4f(p,i.u_matrix),u_color_ramp:new s.Uniform1i(p,i.u_color_ramp),u_center_direction:new s.Uniform3f(p,i.u_center_direction),u_radius:new s.Uniform1f(p,i.u_radius),u_opacity:new s.Uniform1f(p,i.u_opacity),u_temporal_offset:new s.Uniform1f(p,i.u_temporal_offset)}),skyboxCapture:(p,i)=>({u_matrix_3f:new s.UniformMatrix3f(p,i.u_matrix_3f),u_sun_direction:new s.Uniform3f(p,i.u_sun_direction),u_sun_intensity:new s.Uniform1f(p,i.u_sun_intensity),u_color_tint_r:new s.Uniform4f(p,i.u_color_tint_r),u_color_tint_m:new s.Uniform4f(p,i.u_color_tint_m),u_luminance:new s.Uniform1f(p,i.u_luminance)}),globeRaster:(p,i)=>({u_proj_matrix:new s.UniformMatrix4f(p,i.u_proj_matrix),u_globe_matrix:new s.UniformMatrix4f(p,i.u_globe_matrix),u_merc_matrix:new s.UniformMatrix4f(p,i.u_merc_matrix),u_zoom_transition:new s.Uniform1f(p,i.u_zoom_transition),u_merc_center:new s.Uniform2f(p,i.u_merc_center),u_image0:new s.Uniform1i(p,i.u_image0)}),globeAtmosphere:(p,i)=>({u_center:new s.Uniform2f(p,i.u_center),u_radius:new s.Uniform1f(p,i.u_radius),u_screen_size:new s.Uniform2f(p,i.u_screen_size),u_pixel_ratio:new s.Uniform1f(p,i.u_pixel_ratio),u_opacity:new s.Uniform1f(p,i.u_opacity),u_fadeout_range:new s.Uniform1f(p,i.u_fadeout_range),u_start_color:new s.Uniform3f(p,i.u_start_color),u_end_color:new s.Uniform3f(p,i.u_end_color)})};let pl;function uh(p,i,c,m,y,x,S){const E=p.context,P=E.gl,M=p.useProgram("collisionBox"),z=[];let D=0,N=0;for(let ae=0;ae<m.length;ae++){const re=m[ae],ie=i.getTile(re),ce=ie.getBucket(c);if(!ce)continue;let we=re.projMatrix;y[0]===0&&y[1]===0||(we=p.translatePosMatrix(re.projMatrix,ie,y,x));const Ce=S?ce.textCollisionBox:ce.iconCollisionBox,Ye=ce.collisionCircleArray;if(Ye.length>0){const Ge=s.create(),Ue=we;s.mul(Ge,ce.placementInvProjMatrix,p.transform.glCoordMatrix),s.mul(Ge,Ge,ce.placementViewportMatrix),z.push({circleArray:Ye,circleOffset:N,transform:Ue,invTransform:Ge}),D+=Ye.length/4,N=D}Ce&&(p.terrain&&p.terrain.setupElevationDraw(ie,M),M.draw(E,P.LINES,s.DepthMode.disabled,s.StencilMode.disabled,p.colorModeForRenderPass(),s.CullFaceMode.disabled,Lf(we,p.transform,ie),c.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,null,p.transform.zoom,null,Ce.collisionVertexBuffer,Ce.collisionVertexBufferExt))}if(!S||!z.length)return;const Z=p.useProgram("collisionCircle"),$=new s.StructArrayLayout2f1f2i16;$.resize(4*D),$._trim();let X=0;for(const ae of z)for(let re=0;re<ae.circleArray.length/4;re++){const ie=4*re,ce=ae.circleArray[ie+0],we=ae.circleArray[ie+1],Ce=ae.circleArray[ie+2],Ye=ae.circleArray[ie+3];$.emplace(X++,ce,we,Ce,Ye,0),$.emplace(X++,ce,we,Ce,Ye,1),$.emplace(X++,ce,we,Ce,Ye,2),$.emplace(X++,ce,we,Ce,Ye,3)}(!pl||pl.length<2*D)&&(pl=function(ae){const re=2*ae,ie=new s.StructArrayLayout3ui6;ie.resize(re),ie._trim();for(let ce=0;ce<re;ce++){const we=6*ce;ie.uint16[we+0]=4*ce+0,ie.uint16[we+1]=4*ce+1,ie.uint16[we+2]=4*ce+2,ie.uint16[we+3]=4*ce+2,ie.uint16[we+4]=4*ce+3,ie.uint16[we+5]=4*ce+0}return ie}(D));const le=E.createIndexBuffer(pl,!0),q=E.createVertexBuffer($,s.collisionCircleLayout.members,!0);for(const ae of z){const re={u_matrix:ae.transform,u_inv_matrix:ae.invTransform,u_camera_to_center_distance:(oe=p.transform).cameraToCenterDistance,u_viewport_size:[oe.width,oe.height]};Z.draw(E,P.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,p.colorModeForRenderPass(),s.CullFaceMode.disabled,re,c.id,q,le,s.SegmentVector.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,p.transform.zoom,null,null,null)}var oe;q.destroy(),le.destroy()}const Sc=s.identity(new Float32Array(16));function Ff(p,i,c,m,y,x){const{horizontalAlign:S,verticalAlign:E}=s.getAnchorAlignment(p),P=-(S-.5)*i,M=-(E-.5)*c,z=s.evaluateVariableOffset(p,m);return new s.pointGeometry((P/y+z[0])*x,(M/y+z[1])*x)}function Jg(p,i,c,m,y,x,S,E,P,M,z,D){const N=p.text.placedSymbolArray,Z=p.text.dynamicLayoutVertexArray,$=p.icon.dynamicLayoutVertexArray,X={},le=E.projMatrix,q=x.elevation,oe=q?q.getAtTileOffsetFunc(E,D):ae=>[0,0,0];Z.clear();for(let ae=0;ae<N.length;ae++){const re=N.get(ae),ie=p.allowVerticalPlacement&&!re.placedOrientation,ce=re.hidden||!re.crossTileID||ie?null:m[re.crossTileID];if(ce){const we=new s.pointGeometry(re.tileAnchorX,re.tileAnchorY),Ce=oe(we),Ye=gr(we,c?le:S,Ce[2]),Ge=Ui(x.cameraToCenterDistance,Ye.signedDistanceFromCamera);let Ue=y.evaluateSizeForFeature(p.textSizeData,M,re)*Ge/s.ONE_EM;c&&(Ue*=p.tilePixelRatio/P);const{width:Ie,height:Te,anchor:je,textOffset:De,textScale:dt}=ce,xt=Ff(je,Ie,Te,De,dt,Ue),Mt=c?gr(we.add(xt),S,Ce[2]).point:Ye.point.add(i?xt.rotate(-x.angle):xt),Xe=p.allowVerticalPlacement&&re.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let gt=0;gt<re.numGlyphs;gt++)s.addDynamicAttributes(Z,Mt,Xe);z&&re.associatedIconIndex>=0&&(X[re.associatedIconIndex]={shiftedAnchor:Mt,angle:Xe})}else Ei(re.numGlyphs,Z)}if(z){$.clear();const ae=p.icon.placedSymbolArray;for(let re=0;re<ae.length;re++){const ie=ae.get(re);if(ie.hidden)Ei(ie.numGlyphs,$);else{const ce=X[re];if(ce)for(let we=0;we<ie.numGlyphs;we++)s.addDynamicAttributes($,ce.shiftedAnchor,ce.angle);else Ei(ie.numGlyphs,$)}}p.icon.dynamicLayoutVertexBuffer.updateData($)}p.text.dynamicLayoutVertexBuffer.updateData(Z)}function Qg(p,i,c){return c.iconsInText&&i?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Tc(p,i,c,m,y,x,S,E,P,M,z,D){const N=p.context,Z=N.gl,$=p.transform,X=$.projection.createTileTransform($,$.worldSize),le=E==="map",q=P==="map",oe=le&&c.layout.get("symbol-placement")!=="point",ae=le&&!q&&!oe,re=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ie=!1;const ce=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),we=[s.mercatorXfromLng($.center.lng),s.mercatorYfromLat($.center.lat)],Ce=c.layout.get("text-variable-anchor"),Ye=$.projection.name==="globe",Ge=Ye?s.globeToMercatorTransition($.zoom):0,Ue=[],Ie=[];p.terrain&&q&&Ie.push("PITCH_WITH_MAP_TERRAIN"),Ye&&Ie.push("PROJECTION_GLOBE_VIEW"),oe&&Ie.push("PROJECTED_POS_ON_VIEWPORT");for(const Te of m){const je=i.getTile(Te),De=je.getBucket(c);if(!De||De.projection!==$.projection.name)continue;const dt=y?De.text:De.icon;if(!dt||De.fullyClipped||!dt.segments.get().length)continue;const xt=dt.programConfigurations.get(c.id),Mt=y||De.sdfIcons,Xe=y?De.textSizeData:De.iconSizeData,gt=q||$.pitch!==0,Et=p.useProgram(Qg(Mt,y,De),xt,Ie),on=s.evaluateSizeForZoom(Xe,$.zoom),fn=[Te.canonical.x,Te.canonical.y,1<<Te.canonical.z];let wt,Bt,Tn,er,Rr=[0,0],di=null;if(y){if(Bt=je.glyphAtlasTexture,Tn=Z.LINEAR,wt=je.glyphAtlasTexture.size,De.iconsInText){Rr=je.imageAtlasTexture.size,di=je.imageAtlasTexture;const ur=Xe.kind==="composite"||Xe.kind==="camera";er=gt||p.options.rotating||p.options.zooming||ur?Z.LINEAR:Z.NEAREST}}else{const ur=c.layout.get("icon-size").constantOr(0)!==1||De.iconsNeedLinear;Bt=je.imageAtlasTexture,Tn=Mt||p.options.rotating||p.options.zooming||ur||gt?Z.LINEAR:Z.NEAREST,wt=je.imageAtlasTexture.size}const Ai=p.transform.calculatePixelsToTileUnitsMatrix(je),Gt=zo(Te.projMatrix,je.tileID.canonical,q,le,p.transform,Ai),Ct=p.terrain&&q&&oe?s.invert(new Float32Array(16),Gt):Sc,Ut=ao(Te.projMatrix,je.tileID.canonical,q,le,p.transform,Ai),Rn=Ce&&De.hasTextData(),Kr=c.layout.get("icon-text-fit")!=="none"&&Rn&&De.hasIconData();if(oe){const ur=$.elevation,ga=ur?ur.getAtTileOffsetFunc(Te,X):Go=>[0,0,0];wf(De,Te.projMatrix,p,y,Gt,Ut,q,M,ga,Te)}const vn=p.translatePosMatrix(Te.projMatrix,je,x,S),Jr=oe||y&&Ce||Kr?Sc:Gt,Al=p.translatePosMatrix(Ut,je,x,S,!0),Br=Mt&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ma;const st=X.createInversionMatrix(Te.toUnwrapped());ma=Mt?De.iconsInText?fl(Xe.kind,on,ae,q,p,vn,Jr,Al,wt,Rr,fn,Ge,st,we):dl(Xe.kind,on,ae,q,p,vn,Jr,Al,y,wt,!0,fn,Ge,st,we):bc(Xe.kind,on,ae,q,p,vn,Jr,Al,y,wt,fn,Ge,st,we);const yt={program:Et,buffers:dt,uniformValues:ma,atlasTexture:Bt,atlasTextureIcon:di,atlasInterpolation:Tn,atlasInterpolationIcon:er,isSDF:Mt,hasHalo:Br,tile:je,labelPlaneMatrixInv:Ct};if(re&&De.canOverlap){ie=!0;const ur=dt.segments.get();for(const ga of ur)Ue.push({segments:new s.SegmentVector([ga]),sortKey:ga.sortKey,state:yt})}else Ue.push({segments:dt.segments,sortKey:0,state:yt})}ie&&Ue.sort((Te,je)=>Te.sortKey-je.sortKey);for(const Te of Ue){const je=Te.state;if(p.terrain&&p.terrain.setupElevationDraw(je.tile,je.program,{useDepthForOcclusion:!Ye,labelPlaneMatrixInv:je.labelPlaneMatrixInv}),N.activeTexture.set(Z.TEXTURE0),je.atlasTexture.bind(je.atlasInterpolation,Z.CLAMP_TO_EDGE),je.atlasTextureIcon&&(N.activeTexture.set(Z.TEXTURE1),je.atlasTextureIcon&&je.atlasTextureIcon.bind(je.atlasInterpolationIcon,Z.CLAMP_TO_EDGE)),je.isSDF){const De=je.uniformValues;je.hasHalo&&(De.u_is_halo=1,Ec(je.buffers,Te.segments,c,p,je.program,ce,z,D,De)),De.u_is_halo=0}Ec(je.buffers,Te.segments,c,p,je.program,ce,z,D,je.uniformValues)}}function Ec(p,i,c,m,y,x,S,E,P){const M=m.context;y.draw(M,M.gl.TRIANGLES,x,S,E,s.CullFaceMode.disabled,P,c.id,p.layoutVertexBuffer,p.indexBuffer,i,c.paint,m.transform.zoom,p.programConfigurations.get(c.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Cc(p,i,c,m,y,x,S){const E=p.context.gl,P=c.paint.get("fill-pattern"),M=P&&P.constantOr(1),z=c.getCrossfadeParameters();let D,N,Z,$,X;S?(N=M&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",D=E.LINES):(N=M?"fillPattern":"fill",D=E.TRIANGLES);for(const le of m){const q=i.getTile(le);if(M&&!q.patternsLoaded())continue;const oe=q.getBucket(c);if(!oe)continue;p.prepareDrawTile(le);const ae=oe.programConfigurations.get(c.id),re=p.useProgram(N,ae);M&&(p.context.activeTexture.set(E.TEXTURE0),q.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ae.updatePaintBuffers(z));const ie=P.constantOr(null);if(ie&&q.imageAtlas){const we=q.imageAtlas,Ce=we.patternPositions[ie.to.toString()],Ye=we.patternPositions[ie.from.toString()];Ce&&Ye&&ae.setConstantPatternPositions(Ce,Ye)}const ce=p.translatePosMatrix(le.projMatrix,q,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(S){$=oe.indexBuffer2,X=oe.segments2;const we=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[E.drawingBufferWidth,E.drawingBufferHeight];Z=N==="fillOutlinePattern"&&M?Of(ce,p,z,q,we):Yg(ce,we)}else $=oe.indexBuffer,X=oe.segments,Z=M?sh(ce,p,z,q):zf(ce);p.prepareDrawProgram(p.context,re,le.toUnwrapped()),re.draw(p.context,D,y,p.stencilModeForClipping(le),x,s.CullFaceMode.disabled,Z,c.id,oe.layoutVertexBuffer,$,X,c.paint,p.transform.zoom,ae)}}function ml(p,i,c,m,y,x,S){const E=p.context,P=E.gl,M=c.paint.get("fill-extrusion-pattern"),z=M.constantOr(1),D=c.getCrossfadeParameters(),N=c.paint.get("fill-extrusion-opacity");for(const Z of m){const $=i.getTile(Z),X=$.getBucket(c);if(!X)continue;const le=X.programConfigurations.get(c.id),q=p.useProgram(z?"fillExtrusionPattern":"fillExtrusion",le);if(p.terrain){const ce=p.terrain;if(!X.enableTerrain)continue;if(ce.setupElevationDraw($,q,{useMeterToDem:!0}),Nf(E,i,Z,X,c,ce),!X.centroidVertexBuffer){const we=q.attributes.a_centroid_pos;we!==void 0&&P.vertexAttrib2f(we,0,0)}}z&&(p.context.activeTexture.set(P.TEXTURE0),$.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),le.updatePaintBuffers(D));const oe=M.constantOr(null);if(oe&&$.imageAtlas){const ce=$.imageAtlas,we=ce.patternPositions[oe.to.toString()],Ce=ce.patternPositions[oe.from.toString()];we&&Ce&&le.setConstantPatternPositions(we,Ce)}const ae=p.translatePosMatrix(Z.projMatrix,$,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),re=c.paint.get("fill-extrusion-vertical-gradient"),ie=z?ah(ae,p,re,N,Z,D,$):Mf(ae,p,re,N);p.prepareDrawProgram(E,q,Z.toUnwrapped()),q.draw(E,E.gl.TRIANGLES,y,x,S,s.CullFaceMode.backCCW,ie,c.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,c.paint,p.transform.zoom,le,p.terrain?X.centroidVertexBuffer:null)}}function Nf(p,i,c,m,y,x){const S=[q=>{let oe=q.canonical.x-1,ae=q.wrap;return oe<0&&(oe=(1<<q.canonical.z)-1,ae--),new s.OverscaledTileID(q.overscaledZ,ae,q.canonical.z,oe,q.canonical.y)},q=>{let oe=q.canonical.x+1,ae=q.wrap;return oe===1<<q.canonical.z&&(oe=0,ae++),new s.OverscaledTileID(q.overscaledZ,ae,q.canonical.z,oe,q.canonical.y)},q=>new s.OverscaledTileID(q.overscaledZ,q.wrap,q.canonical.z,q.canonical.x,(q.canonical.y===0?1<<q.canonical.z:q.canonical.y)-1),q=>new s.OverscaledTileID(q.overscaledZ,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y===(1<<q.canonical.z)-1?0:q.canonical.y+1)],E=q=>{const oe=i.getSource().maxzoom,ae=we=>{const Ce=i.getTileByID(we);if(Ce&&Ce.hasData())return Ce.getBucket(y)};let re,ie,ce;return(q.overscaledZ===q.canonical.z||q.overscaledZ>=oe)&&(re=ae(q.key)),q.overscaledZ>=oe&&(ie=ae(q.calculateScaledKey(q.overscaledZ+1))),q.overscaledZ>oe&&(ce=ae(q.calculateScaledKey(q.overscaledZ-1))),re||ie||ce},P=[0,0,0],M=(q,oe)=>(P[0]=Math.min(q.min.y,oe.min.y),P[1]=Math.max(q.max.y,oe.max.y),P[2]=s.EXTENT-oe.min.x>q.max.x?oe.min.x-s.EXTENT:q.max.x,P),z=(q,oe)=>(P[0]=Math.min(q.min.x,oe.min.x),P[1]=Math.max(q.max.x,oe.max.x),P[2]=s.EXTENT-oe.min.y>q.max.y?oe.min.y-s.EXTENT:q.max.y,P),D=[(q,oe)=>M(q,oe),(q,oe)=>M(oe,q),(q,oe)=>z(q,oe),(q,oe)=>z(oe,q)],N=new s.pointGeometry(0,0);let Z,$,X;const le=(q,oe,ae,re,ie)=>{const ce=[[re?ae:q,re?q:ae,0],[re?ae:oe,re?oe:ae,0]],we=ie<0?s.EXTENT+ie:ie,Ce=[re?we:(q+oe)/2,re?(q+oe)/2:we,0];return ae===0&&ie<0||ae!==0&&ie>0?x.getForTilePoints(X,[Ce],!0,$):ce.push(Ce),x.getForTilePoints(c,ce,!0,Z),Math.max(ce[0][2],ce[1][2],Ce[2])/x.exaggeration()};for(let q=0;q<4;q++){const oe=m.borders[q];if(oe.length===0&&(m.borderDone[q]=!0),m.borderDone[q])continue;const ae=X=S[q](c),re=E(ae);if(!re||!re.enableTerrain||($=x.findDEMTileFor(ae),!$||!$.dem))continue;if(!Z){const Ce=x.findDEMTileFor(c);if(!Ce||!Ce.dem)return;Z=Ce}const ie=(q<2?1:5)-q,ce=re.borders[ie];let we=0;for(let Ce=0;Ce<oe.length;Ce++){const Ye=m.featuresOnBorder[oe[Ce]],Ge=Ye.borders[q];let Ue;for(;we<ce.length&&(Ue=re.featuresOnBorder[ce[we]],!(Ue.borders[ie][1]>Ge[0]+3));)re.borderDone[ie]||re.encodeCentroid(void 0,Ue,!1),we++;if(Ue&&we<ce.length){const Ie=we;let Te=0;for(;!(Ue.borders[ie][0]>Ge[1]-3)&&(Te++,++we!==ce.length);)Ue=re.featuresOnBorder[ce[we]];if(Ue=re.featuresOnBorder[ce[Ie]],Ye.intersectsCount()>1||Ue.intersectsCount()>1||Te!==1){Te!==1&&(we=Ie),m.encodeCentroid(void 0,Ye,!1),re.borderDone[ie]||re.encodeCentroid(void 0,Ue,!1);continue}const je=D[q](Ye,Ue),De=q%2?s.EXTENT-1:0;N.x=le(je[0],Math.min(s.EXTENT-1,je[1]),De,q<2,je[2]),N.y=0,m.encodeCentroid(N,Ye,!1),re.borderDone[ie]||re.encodeCentroid(N,Ue,!1)}else m.encodeCentroid(void 0,Ye,!1)}m.borderDone[q]=m.needsCentroidUpdate=!0,re.borderDone[ie]||(re.borderDone[ie]=re.needsCentroidUpdate=!0)}(m.needsCentroidUpdate||!m.centroidVertexBuffer&&m.centroidVertexArray.length!==0)&&m.uploadCentroid(p)}const jf=new s.Color(1,0,0,1),ey=new s.Color(0,1,0,1),gl=new s.Color(0,0,1,1),yl=new s.Color(1,0,1,1),Uf=new s.Color(0,1,1,1);function Dr(p,i,c,m){pa(p,0,i+c/2,p.transform.width,c,m)}function kc(p,i,c,m){pa(p,i-c/2,0,c,p.transform.height,m)}function pa(p,i,c,m,y,x){const S=p.context,E=S.gl;E.enable(E.SCISSOR_TEST),E.scissor(i*s.exported.devicePixelRatio,c*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,y*s.exported.devicePixelRatio),S.clear({color:x}),E.disable(E.SCISSOR_TEST)}function Ic(p,i,c){const m=p.context,y=m.gl,x=c.projMatrix,S=p.useProgram("debug"),E=i.getTileByID(c.key);p.terrain&&p.terrain.setupElevationDraw(E,S);const P=s.DepthMode.disabled,M=s.StencilMode.disabled,z=p.colorModeForRenderPass(),D="$debug";m.activeTexture.set(y.TEXTURE0),p.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),E._makeDebugTileBoundsBuffers(p.context,p.transform.projection);const N=E._tileDebugBuffer||p.debugBuffer,Z=E._tileDebugIndexBuffer||p.debugIndexBuffer,$=E._tileDebugSegments||p.debugSegments;S.draw(m,y.LINE_STRIP,P,M,z,s.CullFaceMode.disabled,ch(x,s.Color.red),D,N,Z,$);const X=E.latestRawTileData,le=Math.floor((X&&X.byteLength||0)/1024),q=i.getTile(c).tileSize,oe=512/Math.min(q,512)*(c.overscaledZ/p.transform.zoom)*.5;let ae=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ae+=` => ${c.overscaledZ}`),function(re,ie){re.initDebugOverlayCanvas();const ce=re.debugOverlayCanvas,we=re.context.gl,Ce=re.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,ce.width,ce.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(ie,5,5),Ce.strokeText(ie,5,5),re.debugOverlayTexture.update(ce),re.debugOverlayTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE)}(p,`${ae} ${le}kb`),S.draw(m,y.TRIANGLES,P,M,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,ch(x,s.Color.transparent,oe),D,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}const hh=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:dh}=hh;function Ci(p,i,c,m){p.emplaceBack(i,c,m)}class Ac{constructor(i){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Ci(this.vertexArray,-1,-1,1),Ci(this.vertexArray,1,-1,1),Ci(this.vertexArray,-1,1,1),Ci(this.vertexArray,1,1,1),Ci(this.vertexArray,-1,-1,-1),Ci(this.vertexArray,1,-1,-1),Ci(this.vertexArray,-1,1,-1),Ci(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,dh),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function jo(p,i,c,m,y,x){const S=p.gl,E=i.paint.get("sky-atmosphere-color"),P=i.paint.get("sky-atmosphere-halo-color"),M=i.paint.get("sky-atmosphere-sun-intensity"),z=((D,N,Z,$,X)=>({u_matrix_3f:D,u_sun_direction:N,u_sun_intensity:Z,u_color_tint_r:[$.r,$.g,$.b,$.a],u_color_tint_m:[X.r,X.g,X.b,X.a],u_luminance:5e-5}))(s.fromMat4([],m),y,M,E,P);S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+x,i.skyboxTexture,0),c.draw(p,S.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,z,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const _l={symbol:function(p,i,c,m,y){if(p.renderPass!=="translucent")return;const x=s.StencilMode.disabled,S=p.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(E,P,M,z,D,N,Z){const $=P.transform,X=D==="map",le=N==="map",q=$.projection.createTileTransform($,$.worldSize);for(const oe of E){const ae=z.getTile(oe),re=ae.getBucket(M);if(!re||re.projection!==$.projection.name||!re.text||!re.text.segments.get().length)continue;const ie=s.evaluateSizeForZoom(re.textSizeData,$.zoom),ce=P.transform.calculatePixelsToTileUnitsMatrix(ae),we=zo(oe.projMatrix,ae.tileID.canonical,le,X,P.transform,ce),Ce=M.layout.get("icon-text-fit")!=="none"&&re.hasIconData();if(ie){const Ye=Math.pow(2,$.zoom-ae.tileID.overscaledZ);Jg(re,X,le,Z,s.symbolSize,$,we,oe,Ye,ie,Ce,q)}}}(m,p,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),y),c.paint.get("icon-opacity").constantOr(1)!==0&&Tc(p,i,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),x,S),c.paint.get("text-opacity").constantOr(1)!==0&&Tc(p,i,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),x,S),i.map.showCollisionBoxes&&(uh(p,i,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),uh(p,i,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(p,i,c,m){if(p.renderPass!=="translucent")return;const y=c.paint.get("circle-opacity"),x=c.paint.get("circle-stroke-width"),S=c.paint.get("circle-stroke-opacity"),E=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(y.constantOr(1)===0&&(x.constantOr(1)===0||S.constantOr(1)===0))return;const P=p.context,M=P.gl,z=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),D=s.StencilMode.disabled,N=p.colorModeForRenderPass(),Z=[];for(let X=0;X<m.length;X++){const le=m[X],q=i.getTile(le),oe=q.getBucket(c);if(!oe)continue;const ae=oe.programConfigurations.get(c.id),re=lh(c),ie={programConfiguration:ae,program:p.useProgram("circle",ae,re),layoutVertexBuffer:oe.layoutVertexBuffer,indexBuffer:oe.indexBuffer,uniformValues:Kg(p,le,q,c),tile:q};if(E){const ce=oe.segments.get();for(const we of ce)Z.push({segments:new s.SegmentVector([we]),sortKey:we.sortKey,state:ie})}else Z.push({segments:oe.segments,sortKey:0,state:ie})}E&&Z.sort((X,le)=>X.sortKey-le.sortKey);const $={useDepthForOcclusion:p.transform.projection.name!=="globe"};for(const X of Z){const{programConfiguration:le,program:q,layoutVertexBuffer:oe,indexBuffer:ae,uniformValues:re,tile:ie}=X.state,ce=X.segments;p.terrain&&p.terrain.setupElevationDraw(ie,q,$),p.prepareDrawProgram(P,q,ie.tileID.toUnwrapped()),q.draw(P,M.TRIANGLES,z,D,N,s.CullFaceMode.disabled,re,c.id,oe,ae,ce,c.paint,p.transform.zoom,le)}},heatmap:function(p,i,c,m){if(c.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const y=p.context,x=y.gl,S=s.StencilMode.disabled,E=new s.ColorMode([x.ONE,x.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(P,M,z){const D=P.gl;P.activeTexture.set(D.TEXTURE1),P.viewport.set([0,0,M.width/4,M.height/4]);let N=z.heatmapFbo;if(N)D.bindTexture(D.TEXTURE_2D,N.colorAttachment.get()),P.bindFramebuffer.set(N.framebuffer);else{const Z=D.createTexture();D.bindTexture(D.TEXTURE_2D,Z),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.LINEAR),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.LINEAR),N=z.heatmapFbo=P.createFramebuffer(M.width/4,M.height/4,!1),function($,X,le,q){const oe=$.gl;oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,X.width/4,X.height/4,0,oe.RGBA,$.extRenderToTextureHalfFloat?$.extTextureHalfFloat.HALF_FLOAT_OES:oe.UNSIGNED_BYTE,null),q.colorAttachment.set(le)}(P,M,Z,N)}})(y,p,c),y.clear({color:s.Color.transparent});for(let P=0;P<m.length;P++){const M=m[P];if(i.hasRenderableParent(M))continue;const z=i.getTile(M),D=z.getBucket(c);if(!D)continue;const N=D.programConfigurations.get(c.id),Z=p.useProgram("heatmap",N),{zoom:$}=p.transform;p.terrain&&p.terrain.setupElevationDraw(z,Z),p.prepareDrawProgram(y,Z,M.toUnwrapped()),Z.draw(y,x.TRIANGLES,s.DepthMode.disabled,S,E,s.CullFaceMode.disabled,Df(M.projMatrix,z,$,c.paint.get("heatmap-intensity")),c.id,D.layoutVertexBuffer,D.indexBuffer,D.segments,c.paint,p.transform.zoom,N)}y.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(y,x){const S=y.context,E=S.gl,P=x.heatmapFbo;if(!P)return;S.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P.colorAttachment.get()),S.activeTexture.set(E.TEXTURE1);let M=x.colorRampTexture;M||(M=x.colorRampTexture=new s.Texture(S,x.colorRamp,E.RGBA)),M.bind(E.LINEAR,E.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(S,E.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,y.colorModeForRenderPass(),s.CullFaceMode.disabled,((z,D,N,Z)=>({u_image:0,u_color_ramp:1,u_opacity:D.paint.get("heatmap-opacity")}))(0,x),x.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,x.paint,y.transform.zoom)}(p,c))},line:function(p,i,c,m){if(p.renderPass!=="translucent")return;const y=c.paint.get("line-opacity"),x=c.paint.get("line-width");if(y.constantOr(1)===0||x.constantOr(1)===0)return;const S=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),E=p.colorModeForRenderPass(),P=c.paint.get("line-dasharray"),M=P.constantOr(1),z=c.layout.get("line-cap"),D=c.paint.get("line-pattern"),N=D.constantOr(1),Z=c.paint.get("line-gradient"),$=c.getCrossfadeParameters(),X=N?"linePattern":"line",le=p.context,q=le.gl,oe=(re=>{const ie=[];hl(re)&&ie.push("RENDER_LINE_DASH"),re.paint.get("line-gradient")&&ie.push("RENDER_LINE_GRADIENT");const ce=re.paint.get("line-pattern").constantOr(1),we=re.paint.get("line-opacity").constantOr(1)!==1;return!ce&&we&&ie.push("RENDER_LINE_ALPHA_DISCARD"),ie})(c);let ae=oe.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(ae=!1);for(const re of m){const ie=i.getTile(re);if(N&&!ie.patternsLoaded())continue;const ce=ie.getBucket(c);if(!ce)continue;p.prepareDrawTile(re);const we=ce.programConfigurations.get(c.id),Ce=p.useProgram(X,we,oe),Ye=D.constantOr(null);if(Ye&&ie.imageAtlas){const De=ie.imageAtlas,dt=De.patternPositions[Ye.to.toString()],xt=De.patternPositions[Ye.from.toString()];dt&&xt&&we.setConstantPatternPositions(dt,xt)}const Ge=P.constantOr(null),Ue=z.constantOr(null);if(!N&&Ge&&Ue&&ie.lineAtlas){const De=ie.lineAtlas,dt=De.getDash(Ge.to,Ue),xt=De.getDash(Ge.from,Ue);dt&&xt&&we.setConstantPatternPositions(dt,xt)}const Ie=p.terrain?re.projMatrix:null,Te=N?fa(p,ie,c,$,Ie):Rf(p,ie,c,$,Ie,ce.lineClipsArray.length);if(Z){const De=ce.gradients[c.id];let dt=De.texture;if(c.gradientVersion!==De.version){let xt=256;if(c.stepInterpolant){const Mt=i.getSource().maxzoom,Xe=re.canonical.z===Mt?Math.ceil(1<<p.transform.maxZoom-re.canonical.z):1;xt=s.clamp(s.nextPowerOfTwo(ce.maxLineLength/s.EXTENT*1024*Xe),256,le.maxTextureSize)}De.gradient=s.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:xt,image:De.gradient||void 0,clips:ce.lineClipsArray}),De.texture?De.texture.update(De.gradient):De.texture=new s.Texture(le,De.gradient,q.RGBA),De.version=c.gradientVersion,dt=De.texture}le.activeTexture.set(q.TEXTURE1),dt.bind(c.stepInterpolant?q.NEAREST:q.LINEAR,q.CLAMP_TO_EDGE)}M&&(le.activeTexture.set(q.TEXTURE0),ie.lineAtlasTexture.bind(q.LINEAR,q.REPEAT),we.updatePaintBuffers($)),N&&(le.activeTexture.set(q.TEXTURE0),ie.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),we.updatePaintBuffers($)),p.prepareDrawProgram(le,Ce,re.toUnwrapped());const je=De=>{Ce.draw(le,q.TRIANGLES,S,De,E,s.CullFaceMode.disabled,Te,c.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,c.paint,p.transform.zoom,we,ce.layoutVertexBuffer2)};if(ae){const De=p.stencilModeForClipping(re).ref;De===0&&p.terrain&&le.clear({stencil:0});const dt={func:q.EQUAL,mask:255};Te.u_alpha_discard_threshold=.8,je(new s.StencilMode(dt,De,255,q.KEEP,q.KEEP,q.INVERT)),Te.u_alpha_discard_threshold=0,je(new s.StencilMode(dt,De,255,q.KEEP,q.KEEP,q.KEEP))}else je(p.stencilModeForClipping(re))}ae&&(p.resetStencilClippingMasks(),p.terrain&&le.clear({stencil:0}))},fill:function(p,i,c,m){const y=c.paint.get("fill-color"),x=c.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const S=p.colorModeForRenderPass(),E=c.paint.get("fill-pattern"),P=p.opaquePassEnabledForLayer()&&!E.constantOr(1)&&y.constantOr(s.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===P){const M=p.depthModeForSublayer(1,p.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);Cc(p,i,c,m,M,S,!1)}if(p.renderPass==="translucent"&&c.paint.get("fill-antialias")){const M=p.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);Cc(p,i,c,m,M,S,!0)}},"fill-extrusion":function(p,i,c,m){const y=c.paint.get("fill-extrusion-opacity");if(y!==0&&p.renderPass==="translucent"){const x=new s.DepthMode(p.context.gl.LEQUAL,s.DepthMode.ReadWrite,p.depthRangeFor3D);if(y!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))ml(p,i,c,m,x,s.StencilMode.disabled,s.ColorMode.disabled),ml(p,i,c,m,x,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const S=p.colorModeForRenderPass();ml(p,i,c,m,x,s.StencilMode.disabled,S)}}},hillshade:function(p,i,c,m){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const y=p.context,x=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),S=p.colorModeForRenderPass(),E=p.terrain&&p.terrain.renderingToTexture,[P,M]=p.renderPass!=="translucent"||E?[{},m]:p.stencilConfigForOverlap(m);for(const z of M){const D=i.getTile(z);if(D.needsHillshadePrepare&&p.renderPass==="offscreen")sl(p,D,c,x,s.StencilMode.disabled,S);else if(p.renderPass==="translucent"){const N=E&&p.terrain?p.terrain.stencilModeForRTTOverlap(z):P[z.overscaledZ];gc(p,z,D,c,x,N,S)}}y.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,i,c,m,y,x){if(p.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!m.length)return;const S=p.context,E=S.gl,P=i.getSource(),M=p.useProgram("raster"),z=p.colorModeForRenderPass(),D=p.terrain&&p.terrain.renderingToTexture,[N,Z]=P instanceof ji||D?[{},m]:p.stencilConfigForOverlap(m),$=Z[Z.length-1].overscaledZ,X=!p.options.moving;for(const le of Z){const q=D?s.DepthMode.disabled:p.depthModeForSublayer(le.overscaledZ-$,c.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,E.LESS),oe=le.toUnwrapped(),ae=i.getTile(le);if(D&&(!ae||!ae.hasData()))continue;const re=D?le.projMatrix:p.transform.calculateProjMatrix(oe,X),ie=p.terrain&&D?p.terrain.stencilModeForRTTOverlap(le):N[le.overscaledZ],ce=x?0:c.paint.get("raster-fade-duration");ae.registerFadeDuration(ce);const we=i.findLoadedParent(le,0),Ce=If(ae,we,i,p.transform,ce);let Ye,Ge;p.terrain&&p.terrain.prepareDrawTile(le);const Ue=c.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;S.activeTexture.set(E.TEXTURE0),ae.texture.bind(Ue,E.CLAMP_TO_EDGE),S.activeTexture.set(E.TEXTURE1),we?(we.texture.bind(Ue,E.CLAMP_TO_EDGE),Ye=Math.pow(2,we.tileID.overscaledZ-ae.tileID.overscaledZ),Ge=[ae.tileID.canonical.x*Ye%1,ae.tileID.canonical.y*Ye%1]):ae.texture.bind(Ue,E.CLAMP_TO_EDGE);const Ie=vc(re,Ge||[0,0],Ye||1,Ce,c,P instanceof ji?P.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(S,M,oe),P instanceof ji)M.draw(S,E.TRIANGLES,q,s.StencilMode.disabled,z,s.CullFaceMode.disabled,Ie,c.id,P.boundsBuffer,p.quadTriangleIndexBuffer,P.boundsSegments);else{const{tileBoundsBuffer:Te,tileBoundsIndexBuffer:je,tileBoundsSegments:De}=p.getTileBoundsBuffers(ae);M.draw(S,E.TRIANGLES,q,ie,z,s.CullFaceMode.disabled,Ie,c.id,Te,je,De)}}p.resetStencilClippingMasks()},background:function(p,i,c,m){const y=c.paint.get("background-color"),x=c.paint.get("background-opacity");if(x===0)return;const S=p.context,E=S.gl,P=p.transform,M=P.tileSize,z=c.paint.get("background-pattern");if(p.isPatternMissing(z))return;const D=!z&&y.a===1&&x===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==D)return;const N=s.StencilMode.disabled,Z=p.depthModeForSublayer(0,D==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),$=p.colorModeForRenderPass(),X=p.useProgram(z?"backgroundPattern":"background");let le,q=m;q||(le=p.getBackgroundTiles(),q=Object.values(le).map(ae=>ae.tileID)),z&&(S.activeTexture.set(E.TEXTURE0),p.imageManager.bind(p.context));const oe=c.getCrossfadeParameters();for(const ae of q){const re=ae.toUnwrapped(),ie=m?ae.projMatrix:p.transform.calculateProjMatrix(re);p.prepareDrawTile(ae);const ce=i?i.getTile(ae):le?le[ae.key]:new s.Tile(ae,M,P.zoom,p),we=z?wc(ie,x,p,z,{tileID:ae,tileSize:M},oe):rn(ie,x,y);p.prepareDrawProgram(S,X,re);const{tileBoundsBuffer:Ce,tileBoundsIndexBuffer:Ye,tileBoundsSegments:Ge}=p.getTileBoundsBuffers(ce);X.draw(S,E.TRIANGLES,Z,N,$,s.CullFaceMode.disabled,we,c.id,Ce,Ye,Ge)}},sky:function(p,i,c){const m=p.transform,y=m.projection.name==="mercator"||m.projection.name==="globe"?1:s.smoothstep(7,8,m.zoom),x=c.paint.get("sky-opacity")*y;if(x===0)return;const S=p.context,E=c.paint.get("sky-type"),P=new s.DepthMode(S.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),M=p.frameCounter/1e3%1;E==="atmosphere"?p.renderPass==="offscreen"?c.needsSkyboxCapture(p)&&(function(z,D,N,Z){const $=z.context,X=$.gl;let le=D.skyboxFbo;if(!le){le=D.skyboxFbo=$.createFramebuffer(32,32,!1),D.skyboxGeometry=new Ac($),D.skyboxTexture=$.gl.createTexture(),X.bindTexture(X.TEXTURE_CUBE_MAP,D.skyboxTexture),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_MIN_FILTER,X.LINEAR),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_MAG_FILTER,X.LINEAR);for(let re=0;re<6;++re)X.texImage2D(X.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,X.RGBA,32,32,0,X.RGBA,X.UNSIGNED_BYTE,null)}$.bindFramebuffer.set(le.framebuffer),$.viewport.set([0,0,32,32]);const q=D.getCenter(z,!0),oe=z.useProgram("skyboxCapture"),ae=new Float64Array(16);s.identity(ae),s.rotateY(ae,ae,.5*-Math.PI),jo($,D,oe,ae,q,0),s.identity(ae),s.rotateY(ae,ae,.5*Math.PI),jo($,D,oe,ae,q,1),s.identity(ae),s.rotateX(ae,ae,.5*-Math.PI),jo($,D,oe,ae,q,2),s.identity(ae),s.rotateX(ae,ae,.5*Math.PI),jo($,D,oe,ae,q,3),s.identity(ae),jo($,D,oe,ae,q,4),s.identity(ae),s.rotateY(ae,ae,Math.PI),jo($,D,oe,ae,q,5),$.viewport.set([0,0,z.width,z.height])}(p,c),c.markSkyboxValid(p)):p.renderPass==="sky"&&function(z,D,N,Z,$){const X=z.context,le=X.gl,q=z.transform,oe=z.useProgram("skybox");X.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_CUBE_MAP,D.skyboxTexture);const ae=((re,ie,ce,we,Ce)=>({u_matrix:re,u_sun_direction:ie,u_cubemap:0,u_opacity:we,u_temporal_offset:Ce}))(q.skyboxMatrix,D.getCenter(z,!1),0,Z,$);z.prepareDrawProgram(X,oe),oe.draw(X,le.TRIANGLES,N,s.StencilMode.disabled,z.colorModeForRenderPass(),s.CullFaceMode.backCW,ae,"skybox",D.skyboxGeometry.vertexBuffer,D.skyboxGeometry.indexBuffer,D.skyboxGeometry.segment)}(p,c,P,x,M):E==="gradient"&&p.renderPass==="sky"&&function(z,D,N,Z,$){const X=z.context,le=X.gl,q=z.transform,oe=z.useProgram("skyboxGradient");D.skyboxGeometry||(D.skyboxGeometry=new Ac(X)),X.activeTexture.set(le.TEXTURE0);let ae=D.colorRampTexture;ae||(ae=D.colorRampTexture=new s.Texture(X,D.colorRamp,le.RGBA)),ae.bind(le.LINEAR,le.CLAMP_TO_EDGE);const re=((ie,ce,we,Ce,Ye)=>({u_matrix:ie,u_color_ramp:0,u_center_direction:ce,u_radius:s.degToRad(we),u_opacity:Ce,u_temporal_offset:Ye}))(q.skyboxMatrix,D.getCenter(z,!1),D.paint.get("sky-gradient-radius"),Z,$);z.prepareDrawProgram(X,oe),oe.draw(X,le.TRIANGLES,N,s.StencilMode.disabled,z.colorModeForRenderPass(),s.CullFaceMode.backCW,re,"skyboxGradient",D.skyboxGeometry.vertexBuffer,D.skyboxGeometry.indexBuffer,D.skyboxGeometry.segment)}(p,c,P,x,M)},debug:function(p,i,c){for(let m=0;m<c.length;m++)Ic(p,i,c[m])},custom:function(p,i,c){const m=p.context,y=c.implementation;if(p.transform.projection.unsupportedLayers&&p.transform.projection.unsupportedLayers.includes("custom"))s.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(p.renderPass==="offscreen"){const x=y.prerender;x&&(p.setCustomLayerDefaults(),m.setColorMode(p.colorModeForRenderPass()),x.call(y,m.gl,p.transform.customLayerMatrix()),m.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),m.setColorMode(p.colorModeForRenderPass()),m.setStencilMode(s.StencilMode.disabled);const x=y.renderingMode==="3d"?new s.DepthMode(p.context.gl.LEQUAL,s.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,s.DepthMode.ReadOnly);m.setDepthMode(x),y.render(m.gl,p.transform.customLayerMatrix()),m.setDirty(),p.setBaseState(),m.bindFramebuffer.set(null)}}};class Vf{constructor(i,c){this.context=new si(i),this.transform=c,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ol,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(i,c){const m=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new No(this,i));const y=this._terrain;this.transform.elevation=m?y:null,y.update(i,this.transform,c)}_updateFog(i){const c=i.fog;if(!c||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,y]=c.getFovAdjustedRange(this.transform._fov);if(m>y)return void(this.transform.fogCullDistSq=null);const x=m+.78*(y-m);this.transform.fogCullDistSq=x*x}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,c){if(this.width=i*s.exported.devicePixelRatio,this.height=c*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._layers[m].resize()}setup(){const i=this.context,c=new s.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(s.EXTENT,0),c.emplaceBack(0,s.EXTENT),c.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(m,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const y=new s.StructArrayLayout2i4;y.emplaceBack(-1,-1),y.emplaceBack(1,-1),y.emplaceBack(-1,1),y.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(y,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const x=new s.StructArrayLayout4i8;x.emplaceBack(0,0,0,0),x.emplaceBack(s.EXTENT,0,s.EXTENT,0),x.emplaceBack(0,s.EXTENT,0,s.EXTENT),x.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(x,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const S=new s.StructArrayLayout3ui6;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(S);const E=new s.StructArrayLayout1ui2;for(const M of[0,1,3,2,0])E.emplaceBack(M);this.debugIndexBuffer=i.createIndexBuffer(E),this.emptyTexture=new s.Texture(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA),this.identityMat=s.create();const P=this.context.gl;this.stencilClearMode=new s.StencilMode({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO),this.loadTimeStamps.push(s.window.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(i,c.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Zi(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,c,m){if(!c||this.currentStencilSource===c.id||!i.isTileClipped()||!m||m.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let E=!1;for(const P of m)if(this._tileClippingMaskIDs[P.key]===void 0){E=!0;break}if(!E)return}this.currentStencilSource=c.id;const y=this.context,x=y.gl;this.nextStencilID+m.length>256&&this.clearStencil(),y.setColorMode(s.ColorMode.disabled),y.setDepthMode(s.DepthMode.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of m){const P=c.getTile(E),M=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,{tileBoundsBuffer:z,tileBoundsIndexBuffer:D,tileBoundsSegments:N}=this.getTileBoundsBuffers(P);S.draw(y,x.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:x.ALWAYS,mask:0},M,255,x.KEEP,x.KEEP,x.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Zi(E.projMatrix),"$clipping",z,D,N)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new s.StencilMode({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const c=this.context.gl;return new s.StencilMode({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,m=i.sort((S,E)=>E.overscaledZ-S.overscaledZ),y=m[m.length-1].overscaledZ,x=m[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const S={};for(let E=0;E<x;E++)S[E+y]=new s.StencilMode({func:c.GEQUAL,mask:255},E+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[S,m]}return[{[y]:s.StencilMode.disabled},m]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([i.CONSTANT_COLOR,i.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(i,c,m){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new s.DepthMode(m||this.context.gl.LEQUAL,c,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const m=this.style.order,y=this.style._sourceCaches;for(const M in y){const z=y[M];z.used&&z.prepare(this.context)}const x={},S={},E={};for(const M in y){const z=y[M];x[M]=z.getVisibleCoordinates(),S[M]=x[M].slice().reverse(),E[M]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<m.length;M++)if(this.style._layers[m[M]].is3D()){this.opaquePassCutoff=M;break}if(this.terrain&&(this.terrain.updateTileBinding(E),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const M of m){const z=this.style._layers[M],D=i._getLayerSourceCache(z);if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const N=D?S[D.id]:void 0;(z.type==="custom"||z.isSky()||N&&N.length)&&this.renderLayer(this,D,z,N)}this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let P=s.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(P=this.style.fog.properties.get("color")),this.context.clear({color:c.showOverdrawInspector?s.Color.black:P,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[m[this.currentLayer]],z=i._getLayerSourceCache(M);if(M.isSky())continue;const D=z?S[z.id]:void 0;this._renderTileClippingMasks(M,z,D),this.renderLayer(this,z,M,D)}if(this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const M=this.style._layers[m[this.currentLayer]],z=i._getLayerSourceCache(M);M.isSky()&&this.renderLayer(this,z,M,z?S[z.id]:void 0)}for(this.transform.projection.name==="globe"&&function(M){const z=M.context,D=z.gl,N=M.transform,Z=new s.DepthMode(D.LEQUAL,s.DepthMode.ReadOnly,[0,1]),$=M.useProgram("globeAtmosphere"),X=N._camera.getWorldToCamera(N.worldSize,1),le=N._camera.getCameraToClipPerspective(N._fov,N.width/N.height,N._nearZ,N._farZ),q=s.mul([],X,s.calculateGlobeMatrix(N,N.worldSize)),oe=s.mul([],N.labelPlaneMatrix,le),ae=s.transformMat4([],[0,0,0],q),re=s.add([],ae,[N.worldSize/Math.PI/2,0,0]),ie=s.transformMat4([],ae,oe),ce=s.transformMat4([],re,oe),we=s.length(s.sub([],ce,ie)),Ce=1-s.globeToMercatorTransition(N.zoom),Ye={u_center:ie,u_radius:we,u_screen_size:[N.width,N.height],u_pixel_ratio:s.exported.devicePixelRatio,u_opacity:Ce,u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};M.prepareDrawProgram(z,$);const Ge=M.globeSharedBuffers;Ge&&$.draw(z,D.TRIANGLES,Z,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,Ye,"skybox",Ge.atmosphereVertexBuffer,Ge.atmosphereIndexBuffer,Ge.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;){const M=this.style._layers[m[this.currentLayer]],z=i._getLayerSourceCache(M);if(M.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(M)){if(M.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const D=z?(M.type==="symbol"?E:S)[z.id]:void 0;this._renderTileClippingMasks(M,z,z?x[z.id]:void 0),this.renderLayer(this,z,M,D),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let M=null;s.values(this.style._layers).forEach(z=>{const D=i._getLayerSourceCache(z);D&&!z.isHidden(this.transform.zoom)&&(!M||M.getSource().maxzoom<D.getSource().maxzoom)&&(M=D)}),M&&this.options.showTileBoundaries&&_l.debug(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const z=M.transform.padding;Dr(M,M.transform.height-(z.top||0),3,jf),Dr(M,z.bottom||0,3,ey),kc(M,z.left||0,3,gl),kc(M,M.transform.width-(z.right||0),3,yl);const D=M.transform.centerPoint;(function(N,Z,$,X){pa(N,Z-1,$-10,2,20,X),pa(N,Z-10,$-1,20,2,X)})(M,D.x,M.transform.height-D.y,Uf)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(i,c,m,y){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="sky"||m.type==="custom"||y&&y.length)&&(this.id=m.id,this.gpuTimingStart(m),i.transform.projection.unsupportedLayers&&i.transform.projection.unsupportedLayers.includes(m.type)||_l[m.type](i,c,m,y,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let m=this.gpuTimers[i.id];m||(m=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),m.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,m.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const c={};for(const m in i){const y=i[m],x=this.context.extTimerQuery,S=x.getQueryObjectEXT(y.query,x.QUERY_RESULT_EXT)/1e6;x.deleteQueryEXT(y.query),c[m]=S}return c}translatePosMatrix(i,c,m,y,x){if(!m[0]&&!m[1])return i;const S=x?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(S){const M=Math.sin(S),z=Math.cos(S);m=[m[0]*z-m[1]*M,m[0]*M+m[1]*z]}const E=[x?m[0]:_n(c,m[0],this.transform.zoom),x?m[1]:_n(c,m[1],this.transform.zoom),0],P=new Float32Array(16);return s.translate(P,i,E),P}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!c||!m}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,c=this.style&&this.style.fog,m=[];return this.terrain&&!this.terrain.renderingToTexture&&m.push("TERRAIN"),c&&!i&&c.getOpacity(this.transform.pitch)!==0&&m.push("FOG"),i&&m.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&m.push("OVERDRAW_INSPECTOR"),m}useProgram(i,c,m){this.cache=this.cache||{};const y=m||[],x=this.currentGlobalDefines().concat(y),S=cl.cacheKey(i,x,c);return this.cache[S]||(this.cache[S]=new cl(this.context,i,oh[i],c,Bf[i],x)),this.cache[S]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(i){this.terrain&&this.terrain.prepareDrawTile(i)}prepareDrawProgram(i,c,m){if(this.terrain&&this.terrain.renderingToTexture)return;const y=this.style.fog;if(y){const x=y.getOpacity(this.transform.pitch);x!==0&&c.setFogUniformValues(i,((S,E,P,M)=>{const z=E.properties.get("color"),D=S.frameCounter/1e3%1,N=[z.r/z.a,z.g/z.a,z.b/z.a,M];return{u_fog_matrix:P?S.transform.calculateFogTileMatrix(P):S.identityMat,u_fog_range:E.getFovAdjustedRange(S.transform._fov),u_fog_color:N,u_fog_horizon_blend:E.properties.get("horizon-blend"),u_fog_temporal_offset:D}})(this,y,m,x))}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const i=this.context.gl,c=i.createTexture();return i.bindTexture(i.TEXTURE_2D,c),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,c=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const y of m)c[y.key]=i[y.key]||new s.Tile(y,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}}class Pc{constructor(i=0,c=0,m=0,y=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=m,this.right=y}interpolate(i,c,m){return c.top!=null&&i.top!=null&&(this.top=s.number(i.top,c.top,m)),c.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,c.bottom,m)),c.left!=null&&i.left!=null&&(this.left=s.number(i.left,c.left,m)),c.right!=null&&i.right!=null&&(this.right=s.number(i.right,c.right,m)),this}getCenter(i,c){const m=s.clamp((this.left+i-this.right)/2,0,i),y=s.clamp((this.top+c-this.bottom)/2,0,c);return new s.pointGeometry(m,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Pc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Uo(p,i){const c=s.getColumn(p,3);s.fromQuat(p,i),s.setColumn(p,3,c)}function $f(p,i){s.setColumn(p,3,[i[0],i[1],i[2],1])}function fh(p,i){const c=s.identity$1([]);return s.rotateZ$1(c,c,-i),s.rotateX$1(c,c,-p),c}function ph(p,i){const c=[p[0],p[1],0],m=[i[0],i[1],0];if(s.length(c)>=1e-15){const S=s.normalize([],c);s.scale$2(m,S,s.dot(m,S)),i[0]=m[0],i[1]=m[1]}const y=s.cross([],i,p);if(s.len(y)<1e-15)return null;const x=Math.atan2(-y[1],y[0]);return fh(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),x)}class Gf{constructor(i,c){this.position=i,this.orientation=c}get position(){return this._position}set position(i){this._position=this._renderWorldCopies?function(c){if(!c)return;const m=Array.isArray(c)?new s.MercatorCoordinate(c[0],c[1],c[2]):c;return m.x=s.wrap(m.x,0,1),m}(i):i}lookAtPoint(i,c){if(this.orientation=null,!this.position)return;const m=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(i)):0,y=this.position,x=s.MercatorCoordinate.fromLngLat(i,m),S=[x.x-y.x,x.y-y.y,x.z-y.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=ph(S,c)}setPitchBearing(i,c){this.orientation=fh(s.degToRad(i),s.degToRad(-c))}}class mh{constructor(i,c){this._transform=s.identity([]),this._orientation=s.identity$1([]),c&&(this._orientation=c,Uo(this._transform,this._orientation)),i&&$f(this._transform,i)}get mercatorPosition(){const i=this.position;return new s.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=s.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){$f(this._transform,i)}get orientation(){return this._orientation}set orientation(i){this._orientation=i,Uo(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,c){this._orientation=fh(i,c),Uo(this._transform,this._orientation)}forward(){const i=s.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,c){const m=new Float64Array(16);return s.invert(m,this.getWorldToCamera(i,c)),m}getWorldToCameraPosition(i,c,m){const y=this.position;s.scale$2(y,y,-i);const x=new Float64Array(16);return s.fromScaling(x,[m,m,m]),s.translate(x,x,y),x[10]*=c,x}getWorldToCamera(i,c){const m=new Float64Array(16),y=new Float64Array(4),x=this.position;return s.conjugate(y,this._orientation),s.scale$2(x,x,-i),s.fromQuat(m,y),s.translate(m,m,x),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=c,m[9]*=c,m[10]*=c,m[11]*=c,m}getCameraToClipPerspective(i,c,m,y){const x=new Float64Array(16);return s.perspective(x,i,c,m,y),x}getDistanceToElevation(i){const c=i===0?0:s.mercatorZfromAltitude(i,this.position[1]),m=this.forward();return(c-this.position[2])/m[2]}clone(){return new mh([...this.position],[...this.orientation])}}function qf(p,i){const c=zc(p),m=function(x,S,E,P,M){const z=new s.LngLat(E.lng-180*ki,E.lat),D=new s.LngLat(E.lng+180*ki,E.lat),N=x.project(z.lng,z.lat),Z=x.project(D.lng,D.lat),$=-Math.atan2(Z.y-N.y,Z.x-N.x),X=s.MercatorCoordinate.fromLngLat(E);X.y=s.clamp(X.y,-.999975,.999975);const le=X.toLngLat(),q=x.project(le.lng,le.lat),oe=s.MercatorCoordinate.fromLngLat(le);oe.x+=ki;const ae=oe.toLngLat(),re=x.project(ae.lng,ae.lat),ie=yh(re.x-q.x,re.y-q.y,$),ce=s.MercatorCoordinate.fromLngLat(le);ce.y+=ki;const we=ce.toLngLat(),Ce=x.project(we.lng,we.lat),Ye=yh(Ce.x-q.x,Ce.y-q.y,$),Ge=Math.abs(ie.x)/Math.abs(Ye.y),Ue=s.identity([]);s.rotateZ(Ue,Ue,-$*(1-(M?0:P)));const Ie=s.identity([]);return s.scale(Ie,Ie,[1,1-(1-Ge)*P,1]),Ie[4]=-Ye.x/Ye.y*P,s.rotateZ(Ie,Ie,$),s.multiply$1(Ie,Ue,Ie),Ie}(p.projection,0,p.center,c,i),y=Mc(p);return s.scale(m,m,[y,y,1]),m}function Mc(p){const i=p.projection,c=zc(p),m=gh(i,p.center),y=gh(i,s.LngLat.convert(i.center));return Math.pow(2,m*c+(1-c)*y)}function zc(p){const i=p.projection.range;if(!i)return 0;const c=Math.max(p.width,p.height),m=Math.log(c/1024)/Math.LN2;return s.smoothstep(i[0]+m,i[1]+m,p.zoom)}const ki=1/4e4;function gh(p,i){const c=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),m=new s.LngLat(i.lng-180*ki,c),y=new s.LngLat(i.lng+180*ki,c),x=p.project(m.lng,c),S=p.project(y.lng,c),E=s.MercatorCoordinate.fromLngLat(m),P=s.MercatorCoordinate.fromLngLat(y),M=S.x-x.x,z=S.y-x.y,D=P.x-E.x,N=P.y-E.y,Z=Math.sqrt((D*D+N*N)/(M*M+z*z));return Math.log(Z)/Math.LN2}function yh(p,i,c){const m=Math.cos(c),y=Math.sin(c);return{x:p*m-i*y,y:p*y+i*m}}class vl{constructor(i,c,m,y,x){this.tileSize=512,this._renderWorldCopies=x===void 0||x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=m==null?0:m,this._maxPitch=y==null?60:y,this.setProjection(),this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Pc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new mh,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}clone(){const i=new vl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.setProjection(this.getProjection()),i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i.tileSize=this.tileSize,i.setMaxBounds(this.getMaxBounds()),i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._cameraZoom=this._cameraZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,i?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(i){this._terrainEnabled()&&this._cameraZoom==null&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),i&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(i){i==null&&(i={name:"mercator"}),this.projectionOptions=i;const c=this.projection?this.getProjection():void 0;return this.projection=s.getProjection(i),!Y(c,this.getProjection())&&(this._calcMatrices(),!0)}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const c=-i*Math.PI/180;var m;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(m=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(y,x,S){var E=x[0],P=x[1],M=x[2],z=x[3],D=Math.sin(S),N=Math.cos(S);y[0]=E*N+M*D,y[1]=P*N+z*D,y[2]=E*-D+M*N,y[3]=P*-D+z*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const i=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center),-1);return i===-1?(this._cameraZoom=null,!1):(this._centerAltitude=i,!0)}_updateCameraOnTerrain(){this._cameraZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize)}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let y=0,x=0;for(let S=0;S<c.length;S++){const E=new s.pointGeometry(c[S][0]*this.width,m+c[S][1]*(this.height-m)),P=i.pointCoordinate(E);if(!P)continue;const M=1/Math.hypot(P[0]-this._camera.position[0],P[1]-this._camera.position[1]);y+=P[3]*M,x+=M}return x===0?NaN:y/x}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._cameraZoom==null||!this._elevation)return;const i=this._cameraZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*c,y=this._mercatorZfromZoom(i),x=this._mercatorZfromZoom(this._maxZoom),S=Math.max(y-m,x);this._setZoom(this._zoomFromMercatorZ(S))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let m;m=i.z<this._camera.position[2]?[c.x,c.y,c.z]:[i.x,i.y,i.z];const y=s.length(s.sub([],this._camera.position,m));return s.clamp(this._zoomFromMercatorZ(y),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let c=!1;if(i.orientation&&!s.exactEquals(i.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(i.orientation)),i.position){const m=[i.position.x,i.position.y,i.position.z];s.exactEquals$1(m,this._camera.position)||(this._setCameraPosition(m),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,c=new Gf;return c.position=new s.MercatorCoordinate(i[0],i[1],i[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(i){if(!s.length$1(i))return!1;s.normalize$1(i,i);const c=s.transformQuat([],[0,0,-1],i),m=s.transformQuat([],[0,-1,0],i);if(m[2]<0)return!1;const y=ph(c,m);return!!y&&(this._camera.orientation=y,!0)}_setCameraPosition(i){const c=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,y=this.cameraToCenterDistance;i[2]=s.clamp(i[2],y/m,y/c),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,m){this._unmodified=!1,this._edgeInsets.interpolate(i,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new s.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const m=this.pointCoordinate(new s.pointGeometry(0,0)),y=this.pointCoordinate(new s.pointGeometry(this.width,0)),x=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),S=this.pointCoordinate(new s.pointGeometry(0,this.height)),E=Math.floor(Math.min(m.x,y.x,x.x,S.x)),P=Math.floor(Math.max(m.x,y.x,x.x,S.x)),M=1;for(let z=E-M;z<=P+M;z++)z!==0&&c.push(new s.UnwrappedTileID(z,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const m=c,y=this.elevation&&!i.isTerrainDEM,x=this.projection.name==="mercator";if(i.minzoom!==void 0&&c<i.minzoom)return[];i.maxzoom!==void 0&&c>i.maxzoom&&(c=i.maxzoom);const S=this.locationCoordinate(this.center),E=1<<c,P=[E*S.x,E*S.y,0],M=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,this.projection.name!=="globe"),z=this.pointCoordinate(this.getCameraPoint()),D=E*s.mercatorZfromAltitude(1,this.center.lat),N=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Z=[E*z.x,E*z.y,N],$=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),X=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?c:0,le=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,q=i.isTerrainDEM?-le:this._elevation?this._elevation.getMinElevationBelowMSL():0,oe=this.projection.isReprojectedInTileSpace?Mc(this):1,ae=Te=>{const De=new s.MercatorCoordinate(Te.x+25e-6,Te.y,Te.z),dt=new s.MercatorCoordinate(Te.x,Te.y+25e-6,Te.z),xt=Te.toLngLat(),Mt=De.toLngLat(),Xe=dt.toLngLat(),gt=this.locationCoordinate(xt),Et=this.locationCoordinate(Mt),on=this.locationCoordinate(Xe),fn=Math.hypot(Et.x-gt.x,Et.y-gt.y),wt=Math.hypot(on.x-gt.x,on.y-gt.y);return Math.sqrt(fn*wt)*oe/25e-6},re=Te=>{const je=le,De=q;return{aabb:s.tileAABB(this,E,0,0,0,Te,De,je,this.projection),zoom:0,x:0,y:0,minZ:De,maxZ:je,wrap:Te,fullyVisible:!1}},ie=[];let ce=[];const we=c,Ce=i.reparseOverscaled?m:c,Ye=Te=>Te*Te,Ge=Ye((N-this._centerAltitude)*D),Ue=Te=>{if(!this._elevation||!Te.tileID||!x)return;const je=this._elevation.getMinMaxForTile(Te.tileID),De=Te.aabb;je?(De.min[2]=je.min,De.max[2]=je.max,De.center[2]=(De.min[2]+De.max[2])/2):(Te.shouldSplit=Ie(Te),Te.shouldSplit||(De.min[2]=De.max[2]=De.center[2]=this._centerAltitude))},Ie=Te=>{if(Te.zoom<X)return!0;if(Te.zoom===we)return!1;if(Te.shouldSplit!=null)return Te.shouldSplit;const je=Te.aabb.distanceX(Z),De=Te.aabb.distanceY(Z);let dt=Ge;y&&(dt=Ye(Te.aabb.distanceZ(Z)*D));let xt=1;if(this.projection.isReprojectedInTileSpace&&m<=5){const Xe=Math.pow(2,Te.zoom),gt=ae(new s.MercatorCoordinate((Te.x+.5)/Xe,(Te.y+.5)/Xe));xt=gt>.85?1:gt}const Mt=je*je+De*De+dt;return Mt<Ye((1<<we-Te.zoom)*$*xt*((Xe,gt)=>{if(gt*Ye(.707)<Xe)return 1;const Et=Math.sqrt(gt/Xe);return Et/(1.4144271570014144+(Math.pow(1.1,Et-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(dt,Ge),Mt))};if(this.renderWorldCopies)for(let Te=1;Te<=3;Te++)ie.push(re(-Te)),ie.push(re(Te));for(ie.push(re(0));ie.length>0;){const Te=ie.pop(),je=Te.x,De=Te.y;let dt=Te.fullyVisible;if(!dt){const xt=Te.aabb.intersects(M);if(xt===0)continue;dt=xt===2}if(Te.zoom!==we&&Ie(Te))for(let xt=0;xt<4;xt++){const Mt=(je<<1)+xt%2,Xe=(De<<1)+(xt>>1),gt={aabb:x?Te.aabb.quadrant(xt):s.tileAABB(this,E,Te.zoom+1,Mt,Xe,Te.wrap,Te.minZ,Te.maxZ,this.projection),zoom:Te.zoom+1,x:Mt,y:Xe,wrap:Te.wrap,fullyVisible:dt,tileID:void 0,shouldSplit:void 0,minZ:Te.minZ,maxZ:Te.maxZ};y&&(gt.tileID=new s.OverscaledTileID(Te.zoom+1===we?Ce:Te.zoom+1,Te.wrap,Te.zoom+1,Mt,Xe),Ue(gt)),ie.push(gt)}else{const xt=Te.zoom===we?Ce:Te.zoom;if(i.minzoom&&i.minzoom>xt)continue;const Mt=P[0]-(.5+je+(Te.wrap<<Te.zoom))*(1<<c-Te.zoom),Xe=P[1]-.5-De,gt=Te.tileID?Te.tileID:new s.OverscaledTileID(xt,Te.wrap,Te.zoom,je,De);ce.push({tileID:gt,distanceSq:Mt*Mt+Xe*Xe})}}if(this.fogCullDistSq){const Te=this.fogCullDistSq,je=this.horizonLineFromTop();ce=ce.filter(De=>{const dt=[0,0,0,1],xt=[s.EXTENT,s.EXTENT,0,1],Mt=this.calculateFogTileMatrix(De.tileID.toUnwrapped());s.transformMat4$1(dt,dt,Mt),s.transformMat4$1(xt,xt,Mt);const Xe=s.getAABBPointSquareDist(dt,xt);if(Xe===0)return!0;let gt=!1;const Et=this._elevation;if(Et&&Xe>Te&&je!==0){const on=this.calculateProjMatrix(De.tileID.toUnwrapped());let fn;i.isTerrainDEM||(fn=Et.getMinMaxForTile(De.tileID)),fn||(fn={min:q,max:le});const wt=s.furthestTileCorner(this.rotation),Bt=[wt[0]*s.EXTENT,wt[1]*s.EXTENT,fn.max];s.transformMat4(Bt,Bt,on),gt=(1-Bt[1])*this.height*.5<je}return Xe<Te||gt})}return ce.sort((Te,je)=>Te.distanceSq-je.distanceSq).map(Te=>Te.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),m=this.projection.project(i.lng,c);return new s.pointGeometry(m.x*this.worldSize,m.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(i,c){const m=this.pointCoordinate(c),y=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i);this.setLocation(new s.MercatorCoordinate(x.x-(m.x-y.x),x.y-(m.y-y.y)))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this._coordinatePoint(this.locationCoordinate(i),!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,c){const m=c?s.mercatorZfromAltitude(c,i.lat):void 0,y=this.projection.project(i.lng,i.lat);return new s.MercatorCoordinate(y.x,y.y,m)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,c){const m=c!=null?c:this._centerAltitude,y=[i.x,i.y,0,1],x=[i.x,i.y,1,1];s.transformMat4$1(y,y,this.pixelMatrixInverse),s.transformMat4$1(x,x,this.pixelMatrixInverse);const S=x[3];s.scale$1(y,y,1/y[3]),s.scale$1(x,x,1/S);const E=y[2],P=x[2];return{p0:y,p1:x,t:E===P?0:(m-E)/(P-E)}}screenPointToMercatorRay(i){const c=[i.x,i.y,0,1],m=[i.x,i.y,1,1];return s.transformMat4$1(c,c,this.pixelMatrixInverse),s.transformMat4$1(m,m,this.pixelMatrixInverse),s.scale$1(c,c,1/c[3]),s.scale$1(m,m,1/m[3]),c[2]=s.mercatorZfromAltitude(c[2],this._center.lat)*this.worldSize,m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,s.scale$1(c,c,1/this.worldSize),s.scale$1(m,m,1/this.worldSize),new s.Ray([c[0],c[1],c[2]],s.normalize([],s.sub([],m,c)))}rayIntersectionCoordinate(i){const{p0:c,p1:m,t:y}=i,x=s.mercatorZfromAltitude(c[2],this._center.lat),S=s.mercatorZfromAltitude(m[2],this._center.lat);return new s.MercatorCoordinate(s.number(c[0],m[0],y)/this.worldSize,s.number(c[1],m[1],y)/this.worldSize,s.number(x,S,y))}pointCoordinate(i,c=this._centerAltitude){return this.projection.createTileTransform(this,this.worldSize).pointCoordinate(i.x,i.y,c)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);const c=this.elevation;let m=this.elevation.pointCoordinate(i);if(m)return new s.MercatorCoordinate(m[0],m[1],m[2]);let y=0,x=this.horizonLineFromTop();if(i.y>x)return this.pointCoordinate(i);const S=.02*x,E=i.clone();for(let P=0;P<10&&x-y>S;P++){E.y=s.number(y,x,.66);const M=c.pointCoordinate(E);M?(x=E.y,m=M):y=E.y}return m?new s.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){if(this.elevation)return!this.elevation.pointCoordinate(i);{const c=this.horizonLineFromTop();return i.y<c}}_coordinatePoint(i,c){const m=c&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,y=[i.x*this.worldSize,i.y*this.worldSize,m+i.toAltitude(),1];return s.transformMat4$1(y,y,this.pixelMatrix),y[3]>0?new s.pointGeometry(y[0]/y[3],y[1]/y[3]):new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(i,c){const m=new s.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),y=new s.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),x=new s.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),S=new s.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let E=this.pointCoordinate(m,i),P=this.pointCoordinate(y,i);const M=this.pointCoordinate(x,c),z=this.pointCoordinate(S,c),D=(N,Z)=>(Z.y-N.y)/(Z.x-N.x);return E.y>1&&P.y>=0?E=new s.MercatorCoordinate((1-z.y)/D(z,E)+z.x,1):E.y<0&&P.y<=1&&(E=new s.MercatorCoordinate(-z.y/D(z,E)+z.x,0)),P.y>1&&E.y>=0?P=new s.MercatorCoordinate((1-M.y)/D(M,P)+M.x,1):P.y<0&&E.y<=1&&(P=new s.MercatorCoordinate(-M.y/D(M,P)+M.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(E)).extend(this.coordinateLocation(P)).extend(this.coordinateLocation(z)).extend(this.coordinateLocation(M))}_getBounds3D(){const i=this.elevation;if(!i.visibleDemTiles.length)return this._getBounds(0,0);const c=i.visibleDemTiles.reduce((m,y)=>{if(y.dem){const x=y.dem.tree;m.min=Math.min(m.min,x.minimums[0]),m.max=Math.max(m.max,x.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBounds(c.min*i.exaggeration(),c.max*i.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(i=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,m=this.height/2-c*(1-this._horizonShift);return i?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,c){return this.projection.createTileTransform(this,c).createTileMatrix(i)}calculateDistanceTileData(i){const c=i.key,m=this._distanceTileDataCache;if(m[c])return m[c];const y=i.canonical,x=1/this.height,S=this.cameraWorldSize/this.zoomScale(y.z),E=(y.x+Math.pow(2,y.z)*i.wrap)*S,P=y.y*S,M=this.point,z=this.angle,D=Math.sin(-z),N=-Math.cos(-z);return m[c]={bearing:[D,N],center:[(M.x-E)*x,(M.y-P)*x],scale:S/s.EXTENT*x},m[c]}calculateFogTileMatrix(i){const c=i.key,m=this._fogTileMatrixCache;if(m[c])return m[c];const y=this.calculatePosMatrix(i,this.cameraWorldSize);return s.multiply$1(y,this.worldToFogMatrix,y),m[c]=new Float32Array(y),m[c]}calculateProjMatrix(i,c=!1){const m=i.key,y=c?this._alignedProjMatrixCache:this._projMatrixCache;if(y[m])return y[m];const x=this.calculatePosMatrix(i,this.worldSize);return s.multiply$1(x,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:c?this.alignedProjMatrix:this.projMatrix,x),y[m]=new Float32Array(x),y[m]}calculatePixelsToTileUnitsMatrix(i){const c=i.tileID.key,m=this._pixelsToTileUnitsCache;if(m[c])return m[c];const y=function(x,S){const{scale:E}=x.tileTransform,P=E*s.EXTENT/(x.tileSize*Math.pow(2,S.zoom-x.tileID.overscaledZ+x.tileID.canonical.z));return M=new Float32Array(4),N=(z=S.inverseAdjustmentMatrix)[1],Z=z[2],$=z[3],le=(D=[P,P])[1],M[0]=z[0]*(X=D[0]),M[1]=N*X,M[2]=Z*le,M[3]=$*le,M;var M,z,D,N,Z,$,X,le}(i,this);return m[c]=y,m[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const c=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(c),y=this._camera.forward(),x=s.mercatorZfromAltitude(1,this._center.lat);m[2]/=x,y[2]/=x,s.normalize(y,y);const S=i.raycast(m,y,i.exaggeration());if(S){const E=s.scaleAndAdd([],m,y,S),P=new s.MercatorCoordinate(E[0],E[1],s.mercatorZfromAltitude(E[2],s.latFromMercatorY(E[1]))),M=(P.z+s.length([P.x-m[0],P.y-m[1],P.z-m[2]*x]))*this._projectionScaler;this._cameraZoom=this._zoomFromMercatorZ(M),this._centerAltitude=P.toAltitude(),this._center=this.coordinateLocation(P),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const i=this._elevation;this._updateCameraState();const c=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(c),y=i.getAtPointOrZero(new s.MercatorCoordinate(...m)),x=this._minimumHeightOverTerrain()*Math.cos(s.degToRad(this._maxPitch)),S=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*y;if(S<x){const E=this.locationCoordinate(this._center,this._centerAltitude),P=[E.x-m[0],E.y-m[1],E.z-m[2]],M=s.length(P);P[2]-=(x-S)/this._projectionScaler;const z=s.length(P);if(z===0)return;s.scale$2(P,P,M/z*this._projectionScaler),this._camera.position=[E.x-P[0],E.y-P[1],E.z*this._projectionScaler-P[2]],this._camera.orientation=ph(P,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const D=this.center;return D.lat=s.clamp(D.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(D.lng=s.clamp(D.lng,this.minLng,this.maxLng)),this.center=D,void(this._constraining=!1)}const i=this._unmodified,{x:c,y:m}=this.point;let y=0,x=c,S=m;const E=this.width/2,P=this.height/2,M=this.worldMinY*this.scale,z=this.worldMaxY*this.scale;if(m-P<M&&(S=M+P),m+P>z&&(S=z-P),z-M<this.height&&(y=Math.max(y,this.height/(z-M)),S=(z+M)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const D=this.worldMinX*this.scale,N=this.worldMaxX*this.scale,Z=this.worldSize/2-(D+N)/2;x=(c+Z+this.worldSize)%this.worldSize-Z,x-E<D&&(x=D+E),x+E>N&&(x=N-E),N-D<this.width&&(y=Math.max(y,this.width/(N-D)),x=(N+D)/2)}x===c&&S===m||(this.center=this.unproject(new s.pointGeometry(x,S))),y&&(this.zoom+=this.scaleZoom(y)),this._constrainCameraAltitude(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this._fov/2,c=this.centerOffset,m=this.pixelsPerMeter;this._projectionScaler=m/(s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(i)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const y=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?m:1),x=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);x[8]=2*-c.x/this.width,x[9]=2*c.y/this.height;let S=s.mul([],x,y);if(this.projection.isReprojectedInTileSpace){const re=this.locationCoordinate(this.center),ie=s.identity([]);s.translate(ie,ie,[re.x*this.worldSize,re.y*this.worldSize,0]),s.multiply$1(ie,ie,qf(this)),s.translate(ie,ie,[-re.x*this.worldSize,-re.y*this.worldSize,0]),s.multiply$1(S,S,ie),this.inverseAdjustmentMatrix=function(ce){const we=qf(ce,!0);return j([],[we[0],we[1],we[4],we[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],S,[this.worldSize,this.worldSize,this.worldSize/m,1]),this.projMatrix=S,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const E=new Float32Array(16);s.identity(E),s.scale(E,E,[1,-1,1]),s.rotateX(E,E,this._pitch),s.rotateZ(E,E,this.angle);const P=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),M=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;P[8]=2*-c.x/this.width,P[9]=2*(c.y+M)/this.height,this.skyboxMatrix=s.multiply$1(E,P,E);const z=this.point,D=z.x,N=z.y,Z=this.width%2/2,$=this.height%2/2,X=Math.cos(this.angle),le=Math.sin(this.angle),q=D-Math.round(D)+X*Z+le*$,oe=N-Math.round(N)+X*$+le*Z,ae=new Float64Array(S);if(s.translate(ae,ae,[q>.5?q-1:q,oe>.5?oe-1:oe,0]),this.alignedProjMatrix=ae,S=s.create(),s.scale(S,S,[this.width/2,-this.height/2,1]),s.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=s.create(),s.scale(S,S,[1,-1,1]),s.translate(S,S,[-1,-1,0]),s.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.pixelMatrix=s.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},S=s.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSize,c=this.cameraPixelsPerMeter,m=this._camera.position,y=1/this.height,x=[i,i,c];s.scale$2(x,x,y),s.scale$2(m,m,-1),s.multiply$2(m,m,x);const S=s.create();s.translate(S,S,m),s.scale(S,S,x),this.mercatorFogMatrix=S,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,c,y)}_computeCameraPosition(i){const c=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),y=this.point,x=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)*c-i/this.worldSize*this._centerAltitude;return[y.x/this.worldSize-m[0]*x,y.y/this.worldSize-m[1]*x,i/this.worldSize*this._centerAltitude-m[2]*x]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=i[2];let y=1;m>0&&(y=Math.min((c-this._camera.position[2])/m,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,i,y),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,c=this._camera.forward(),{pitch:m,bearing:y}=this._camera.getPitchBearing(),x=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,S=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),E=Math.max((i[2]-x)/Math.cos(m),S),P=this._zoomFromMercatorZ(E);s.scaleAndAdd(i,i,c,E),this._pitch=s.clamp(m,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(y,-Math.PI,Math.PI),this._setZoom(s.clamp(P,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=this.coordinateLocation(new s.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((this._cameraZoom!=null?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}anyCornerOffEdge(i,c){const m=Math.min(i.x,c.x),y=Math.max(i.x,c.x),x=Math.min(i.y,c.y),S=Math.max(i.y,c.y);if(x<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const E=[new s.pointGeometry(m,x),new s.pointGeometry(y,S),new s.pointGeometry(m,S),new s.pointGeometry(y,x)],P=this.renderWorldCopies?-3:0,M=this.renderWorldCopies?4:1;for(const z of E){const D=this.pointRayIntersection(z);if(D.t<0)return!0;const N=this.rayIntersectionCoordinate(D);if(N.x<P||N.y<0||N.x>M||N.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.pointGeometry(0,0),new s.pointGeometry(this.width,this.height))}zoomDeltaToMovement(i,c){const m=s.length(s.sub([],this._camera.position,i)),y=this._zoomFromMercatorZ(m)+c;return m-this._mercatorZfromZoom(y)}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,i))}}function Vo(p,i){let c=!1,m=null;const y=()=>{m=null,c&&(p(),m=setTimeout(y,i),c=!1)};return()=>(c=!0,m||y(),m)}class Zf{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Vo(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,s.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return s.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,y=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),S=Math.round(c.lng*x)/x,E=Math.round(c.lat*x)/x,P=this._map.getBearing(),M=this._map.getPitch();let z="";if(z+=i?`/${S}/${E}/${m}`:`${m}/${E}/${S}`,(P||M)&&(z+="/"+Math.round(10*P)/10),M&&(z+=`/${Math.round(M)}`),this._hashName){const D=this._hashName;let N=!1;const Z=s.window.location.hash.slice(1).split("&").map($=>{const X=$.split("=")[0];return X===D?(N=!0,`${X}=${z}`):$}).filter($=>$);return N||Z.push(`${D}=${z}`),`#${Z.join("&")}`}return`#${z}`}_getCurrentHash(){const i=s.window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(c=m)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:c,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,i)}}const lo={linearity:.3,easing:s.bezier(0,0,.3,1)},Ja=s.extend({deceleration:2500,maxSpeed:1400},lo),Wf=s.extend({deceleration:20,maxSpeed:1400},lo),_h=s.extend({deceleration:1e3,maxSpeed:360},lo),Qt=s.extend({deceleration:1e3,maxSpeed:90},lo);class Oc{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=s.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const x=xl(c.pan.mag(),m,s.extend({},Ja,i||{}));y.offset=c.pan.mult(x.amount/c.pan.mag()),y.center=this._map.transform.center,Lc(y,x)}if(c.zoom){const x=xl(c.zoom,m,Wf);y.zoom=this._map.transform.zoom+x.amount,Lc(y,x)}if(c.bearing){const x=xl(c.bearing,m,_h);y.bearing=this._map.transform.bearing+s.clamp(x.amount,-179,179),Lc(y,x)}if(c.pitch){const x=xl(c.pitch,m,Qt);y.pitch=this._map.transform.pitch+x.amount,Lc(y,x)}if(y.zoom||y.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),s.extend(y,{noMoveStart:!0})}}function Lc(p,i){(!p.duration||p.duration<i.duration)&&(p.duration=i.duration,p.easing=i.easing)}function xl(p,i,c){const{maxSpeed:m,linearity:y,deceleration:x}=c,S=s.clamp(p*y/(i/1e3),-m,m),E=Math.abs(S)/(x*y);return{easing:c.easing,duration:1e3*E,amount:S*(E/2)}}class yr extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m,y={}){const x=H.mousePos(c.getCanvasContainer(),m),S=c.unproject(x);super(i,s.extend({point:x,lngLat:S,originalEvent:m},y)),this._defaultPrevented=!1,this.target=c}}class Dc extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m){const y=i==="touchend"?m.changedTouches:m.touches,x=H.touchPos(c.getCanvasContainer(),y),S=x.map(P=>c.unproject(P)),E=x.reduce((P,M,z,D)=>P.add(M.div(D.length)),new s.pointGeometry(0,0));super(i,{points:x,point:E,lngLats:S,lngLat:c.unproject(E),originalEvent:m}),this._defaultPrevented=!1}}class ty extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}}class Hf{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new ty(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new yr(i.type,this._map,i))}mouseup(i){this._map.fire(new yr(i.type,this._map,i))}preclick(i){const c=s.extend({},i);c.type="preclick",this._map.fire(new yr(c.type,this._map,c))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(i),this._map.fire(new yr(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new yr(i.type,this._map,i))}mouseover(i){this._map.fire(new yr(i.type,this._map,i))}mouseout(i){this._map.fire(new yr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Dc(i.type,this._map,i))}touchmove(i){this._map.fire(new Dc(i.type,this._map,i))}touchend(i){this._map.fire(new Dc(i.type,this._map,i))}touchcancel(i){this._map.fire(new Dc(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ny{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new yr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new yr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new yr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vh{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(H.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=m,this._box||(this._box=H.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(y.x,m.x),S=Math.max(y.x,m.x),E=Math.min(y.y,m.y),P=Math.max(y.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${x}px,${E}px)`,this._box.style.width=S-x+"px",this._box.style.height=P-E+"px")})}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const m=this._startPos,y=c;if(this.reset(),H.suppressClick(),m.x!==y.x||m.y!==y.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(m,y,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),H.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new s.Event(i,{originalEvent:c}))}}function Qa(p,i){const c={};for(let m=0;m<p.length;m++)c[p[m].identifier]=i[m];return c}class bl{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=function(y){const x=new s.pointGeometry(0,0);for(const S of y)x._add(S);return x.div(y.length)}(c),this.touches=Qa(m,c)))}touchmove(i,c,m){if(this.aborted||!this.centroid)return;const y=Qa(m,c);for(const x in this.touches){const S=this.touches[x],E=y[x];(!E||E.dist(S)>30)&&(this.aborted=!0)}}touchend(i,c,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class wl{constructor(i){this.singleTap=new bl(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,m){this.singleTap.touchstart(i,c,m)}touchmove(i,c,m){this.singleTap.touchmove(i,c,m)}touchend(i,c,m){const y=this.singleTap.touchend(i,c,m);if(y){const x=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(y)<30;if(x&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class xh{constructor(){this._zoomIn=new wl({numTouches:1,numTaps:2}),this._zoomOut=new wl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,m){this._zoomIn.touchstart(i,c,m),this._zoomOut.touchstart(i,c,m)}touchmove(i,c,m){this._zoomIn.touchmove(i,c,m),this._zoomOut.touchmove(i,c,m)}touchend(i,c,m){const y=this._zoomIn.touchend(i,c,m),x=this._zoomOut.touchend(i,c,m);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(y)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Xf={0:1,2:2};class es{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const m=H.mouseButton(i);this._correctButton(i,m)&&(this._lastPoint=c,this._eventButton=m)}mousemoveWindow(i,c){const m=this._lastPoint;if(m){if(i.preventDefault(),function(y,x){const S=Xf[x];return y.buttons===void 0||(y.buttons&S)!==S}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(m,c)}}mouseupWindow(i){this._lastPoint&&H.mouseButton(i)===this._eventButton&&(this._moved&&H.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rc extends es{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return c===0&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class hi extends es{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const m=.8*(c.x-i.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(i){i.preventDefault()}}class bh extends es{_correctButton(i,c){return c===0&&i.ctrlKey||c===2}_move(i,c){const m=-.5*(c.y-i.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(i){i.preventDefault()}}class Yf{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(i,c,m){return this._calculateTransform(i,c,m)}touchmove(i,c,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(m.length===1)return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.preventDefault(),this._calculateTransform(i,c,m)}}touchend(i,c,m){this._calculateTransform(i,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,m){m.length>0&&(this._active=!0);const y=Qa(m,c),x=new s.pointGeometry(0,0),S=new s.pointGeometry(0,0);let E=0;for(const M in y){const z=y[M],D=this._touches[M];D&&(x._add(z),S._add(z.sub(D)),E++,y[M]=z)}if(this._touches=y,E<this._minTouches||!S.mag())return;const P=S.div(E);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(E),panDelta:P}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H.create("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class Bc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,c,m){return{}}touchstart(i,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,m){if(!this._firstTwoTouches)return;i.preventDefault();const[y,x]=this._firstTwoTouches,S=co(m,c,y),E=co(m,c,x);if(!S||!E)return;const P=this._aroundCenter?null:S.add(E).div(2);return this._move([S,E],P,i)}touchend(i,c,m){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,S=co(m,c,y),E=co(m,c,x);S&&E||(this._active&&H.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function co(p,i,c){for(let m=0;m<p.length;m++)if(p[m].identifier===c)return i[m]}function wh(p,i){return Math.log(p/i)/Math.LN2}class Fc extends Bc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(wh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wh(this._distance,m),pinchAround:c}}}function Nc(p,i){return 180*p.angleWith(i)/Math.PI}class jc extends Bc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nc(this._vector,m),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,m=Nc(i,this._startVector);return Math.abs(m)<c}}function Uc(p){return Math.abs(p.y)>Math.abs(p.x)}class Kf extends Bc{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,Uc(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,m){const y=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);if(!(this._map._cooperativeGestures&&m.touches.length<3)&&(this._valid=this.gestureBeginsVertically(y,x,m.timeStamp),this._valid))return this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+x.y)/2*-.5}}gestureBeginsVertically(i,c,m){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,x=c.mag()>=2;if(!y&&!x)return;if(!y||!x)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const S=i.y>0==c.y>0;return Uc(i)&&Uc(c)&&S}}const ts={panStep:100,bearingStep:15,pitchStep:10};class ry{constructor(){const i=ts;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,m=0,y=0,x=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(m=0,y=0),{cameraAnimation:E=>{const P=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:iy,zoom:c?Math.round(P)+c*(i.shiftKey?2:1):P,bearing:E.getBearing()+m*this._bearingStep,pitch:E.getPitch()+y*this._pitchStep,offset:[-x*this._panStep,-S*this._panStep],center:E.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function iy(p){return p*(2-p)}const Sh=4.000244140625;class Vc{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=i.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=s.exported.now(),y=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%Sh==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=H.mousePos(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform,c=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Sh?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&M!==0&&(M=1/M);const z=c(),D=Math.pow(2,z),N=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):D;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(N*M))),this._type==="wheel"&&(this._startZoom=c(),this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:c(),y=this._startZoom,x=this._easing;let S,E=!1;if(this._type==="wheel"&&y&&x){const P=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),M=x(P);S=s.number(y,m,M),P<1?this._frameId||(this._frameId=!0):E=!0}else S=m,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:S-c(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=s.ease;if(this._prevEase){const m=this._prevEase,y=(s.exported.now()-m.start)/m.duration,x=m.easing(y+.01)-m.easing(y),S=.27/Math.sqrt(x*x+1e-4)*.01,E=Math.sqrt(.0729-S*S);c=s.bezier(S,E,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H.create("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!s.window.document.fullscreenElement}_showBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class Th{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jf{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,c){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(i.shiftKey?-1:1),around:m.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qf{constructor(){this._tap=new wl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,c,m){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=c[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(i,c,m))}touchmove(i,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const y=c[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,m)}touchend(i,c,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(i,c,m)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $c{constructor(i,c,m){this._el=i,this._mousePan=c,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Eh{constructor(i,c,m){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ep{constructor(i,c,m,y){this._el=i,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Sl=p=>p.zoom||p.drag||p.pitch||p.rotate;class tp extends s.Event{}class np{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,c){const m=s.sub([],c,i);this.radius=s.length(m[2]<0?s.div([],m,this.constants):[m[0],m[1],0])}projectRay(i){s.div(i,i,this.constants),s.normalize(i,i),s.mul$1(i,i,this.constants);const c=s.scale$2([],i,this.radius);if(c[2]>0){const m=s.scale$2([],[0,0,1],s.dot(c,[0,0,1])),y=s.scale$2([],s.normalize([],[c[0],c[1],0]),this.radius),x=s.add([],c,s.scale$2([],s.sub([],s.add([],y,m),c),2));c[0]=x[0],c[1]=x[1]}return c}}function Tl(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class ns{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Oc(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new np,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),s.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[y,x,S]of this._listeners)y.addEventListener(x,y===s.window.document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[i,c,m]of this._listeners)i.removeEventListener(c,i===s.window.document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new Hf(c,i));const y=c.boxZoom=new vh(c,i);this._add("boxZoom",y);const x=new xh,S=new Jf;c.doubleClickZoom=new Th(S,x),this._add("tapZoom",x),this._add("clickZoom",S);const E=new Qf;this._add("tapDragZoom",E);const P=c.touchPitch=new Kf(c);this._add("touchPitch",P);const M=new hi(i),z=new bh(i);c.dragRotate=new Eh(i,M,z),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]);const D=new Rc(i),N=new Yf(c,i);c.dragPan=new $c(m,D,N),this._add("mousePan",D),this._add("touchPan",N,["touchZoom","touchRotate"]);const Z=new jc,$=new Fc;c.touchZoomRotate=new ep(m,$,Z,E),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",$,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ny(c));const X=c.scrollZoom=new Vc(c,this);this._add("scrollZoom",X,["mousePan"]);const le=c.keyboard=new ry;this._add("keyboard",le);for(const q of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[q]&&c[q].enable(i[q])}_add(i,c,m){this._handlers.push({handlerName:i,handler:c,allowed:m}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Sl(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,c,m){for(const y in i)if(y!==m&&(!c||c.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const m of i)this._el.contains(m.target)&&c.push(m);return c}handleEvent(i,c){this._updatingCamera=!0;const m=i.type==="renderFrame",y=m?void 0:i,x={needsRenderFrame:!1},S={},E={},P=i.touches?this._getMapTouches(i.touches):void 0,M=P?H.touchPos(this._el,P):m?void 0:H.mousePos(this._el,i);for(const{handlerName:N,handler:Z,allowed:$}of this._handlers){if(!Z.isEnabled())continue;let X;this._blockedByActive(E,$,N)?Z.reset():Z[c||i.type]&&(X=Z[c||i.type](i,M,P),this.mergeHandlerResult(x,S,X,N,y),X&&X.needsRenderFrame&&this._triggerRenderFrame()),(X||Z.isActive())&&(E[N]=Z)}const z={};for(const N in this._previousActiveHandlers)E[N]||(z[N]=y);this._previousActiveHandlers=E,(Object.keys(z).length||Tl(x))&&(this._changes.push([x,S,z]),this._triggerRenderFrame()),(Object.keys(E).length||Tl(x))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:D}=x;D&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],D(this._map))}mergeHandlerResult(i,c,m,y,x){if(!m)return;s.extend(i,m);const S={handlerName:y,originalEvent:m.originalEvent||x};m.zoomDelta!==void 0&&(c.zoom=S),m.panDelta!==void 0&&(c.drag=S),m.pitchDelta!==void 0&&(c.pitch=S),m.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){const i={},c={},m={};for(const[y,x,S]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new s.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.aroundCoord!==void 0&&(i.aroundCoord=y.aroundCoord),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),s.extend(c,x),s.extend(m,S);this._updateMapTransform(i,c,m),this._changes=[]}_updateMapTransform(i,c,m){const y=this._map,x=y.transform,S=oe=>[oe.x,oe.y,oe.z];if((oe=>{const ae=this._eventsInProgress.drag;return ae&&!this._handlersById[ae.handlerName].isActive()})()&&!Tl(i)){const oe=x.zoom;x.cameraElevationReference="sea",x.recenterOnTerrain(),x.cameraElevationReference="ground",oe!==x.zoom&&this._map._update(!0)}if(!Tl(i))return this._fireEvents(c,m,!0);let{panDelta:E,zoomDelta:P,bearingDelta:M,pitchDelta:z,around:D,aroundCoord:N,pinchAround:Z}=i;Z!==void 0&&(D=Z),(oe=>c.drag&&!this._eventsInProgress.drag)()&&D&&(this._dragOrigin=S(x.pointCoordinate3D(D)),this._trackingEllipsoid.setup(x._camera.position,this._dragOrigin)),x.cameraElevationReference="sea",y._stop(!0),D=D||y.transform.centerPoint,M&&(x.bearing+=M),z&&(x.pitch+=z),x._updateCameraState();const $=[0,0,0];if(E){const oe=x.pointCoordinate(D),ae=x.pointCoordinate(D.sub(E));oe&&ae&&($[0]=ae.x-oe.x,$[1]=ae.y-oe.y)}const X=x.zoom,le=[0,0,0];if(P){const oe=S(N||x.pointCoordinate3D(D)),ae={dir:s.normalize([],s.sub([],oe,x._camera.position))};if(ae.dir[2]<0){const re=x.zoomDeltaToMovement(oe,P);s.scale$2(le,ae.dir,re)}}const q=s.add($,$,le);x._translateCameraConstrained(q),P&&Math.abs(x.zoom-X)>1e-4&&x.recenterOnTerrain(),x.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,m,!0)}_fireEvents(i,c,m){const y=Sl(this._eventsInProgress),x=Sl(i),S={};for(const z in i){const{originalEvent:D}=i[z];this._eventsInProgress[z]||(S[`${z}start`]=D),this._eventsInProgress[z]=i[z]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const z in S)this._fireEvent(z,S[z]);x&&this._fireEvent("move",x.originalEvent);for(const z in i){const{originalEvent:D}=i[z];this._fireEvent(z,D)}const E={};let P;for(const z in this._eventsInProgress){const{handlerName:D,originalEvent:N}=this._eventsInProgress[z];this._handlersById[D].isActive()||(delete this._eventsInProgress[z],P=c[D]||N,E[`${z}end`]=P)}for(const z in E)this._fireEvent(z,E[z]);const M=Sl(this._eventsInProgress);if(m&&(y||x)&&!M){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),D=N=>N!==0&&-this._bearingSnap<N&&N<this._bearingSnap;z?(D(z.bearing||this._map.getBearing())&&(z.bearing=0),this._map.easeTo(z,{originalEvent:P})):(this._map.fire(new s.Event("moveend",{originalEvent:P})),D(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new s.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new tp("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ch="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class rp extends s.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,m){return i=s.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},c),m)}panTo(i,c,m){return this.easeTo(s.extend({center:i},c),m)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,m){return this.easeTo(s.extend({zoom:i},c),m)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,m){return this.easeTo(s.extend({bearing:i},c),m)}resetNorth(i,c){return this.rotateTo(0,s.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=s.LngLatBounds.convert(i);const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,c)}_extendCameraOptions(i){const c={top:0,bottom:0,right:0,left:0};if(typeof(i=s.extend({padding:c,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){const m=i.padding;i.padding={top:m,bottom:m,right:m,left:m}}return i.padding=s.extend(c,i.padding),i}_cameraForBoxAndBearing(i,c,m,y){const x=this._extendCameraOptions(y),S=this.transform,E=S.padding,P=S.project(s.LngLat.convert(i)),M=S.project(s.LngLat.convert(c)),z=P.rotate(-s.degToRad(m)),D=M.rotate(-s.degToRad(m)),N=new s.pointGeometry(Math.max(z.x,D.x),Math.max(z.y,D.y)),Z=new s.pointGeometry(Math.min(z.x,D.x),Math.min(z.y,D.y)),$=N.sub(Z),X=(S.width-(E.left+E.right+x.padding.left+x.padding.right))/$.x,le=(S.height-(E.top+E.bottom+x.padding.top+x.padding.bottom))/$.y;if(le<0||X<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const q=Math.min(S.scaleZoom(S.scale*Math.min(X,le)),x.maxZoom),oe=typeof x.offset.x=="number"?new s.pointGeometry(x.offset.x,x.offset.y):s.pointGeometry.convert(x.offset),ae=new s.pointGeometry((x.padding.left-x.padding.right)/2,(x.padding.top-x.padding.bottom)/2).rotate(m*Math.PI/180),re=oe.add(ae).mult(S.scale/S.zoomScale(q));return{center:S.unproject(P.add(M).div(2).sub(re)),zoom:q,bearing:m}}_cameraForBox(i,c,m,y,x){const S=this._extendCameraOptions(x);m=m||0,y=y||0,i=s.LngLat.convert(i),c=s.LngLat.convert(c);const E=this.transform.clone();E.padding=S.padding;const P=this.getFreeCameraOptions(),M=new s.LngLat(.5*(i.lng+c.lng),.5*(i.lat+c.lat)),z=.5*(m+y);if(E._camera.position[2]<s.mercatorZfromAltitude(z,M.lat))return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");P.lookAtPoint(M),E.setFreeCameraOptions(P);const D=s.MercatorCoordinate.fromLngLat(i),N=s.MercatorCoordinate.fromLngLat(c),Z=E.pointRayIntersection(E.centerPoint,z),$=[(X=E.rayIntersectionCoordinate(Z)).x,X.y,X.z];var X;const le=E.screenPointToMercatorRay(E.centerPoint),q=E.projection.name!=="globe";let oe,ae=0;do{const re=Math.floor(E.zoom),ie=1<<re,ce=Math.min(ie*D.x,ie*N.x),we=Math.min(ie*D.y,ie*N.y),Ce=Math.max(ie*D.x,ie*N.x),Ye=Math.max(ie*D.y,ie*N.y),Ge=new s.Aabb([ce,we,m],[Ce,Ye,y]),Ue=s.Frustum.fromInvProjectionMatrix(E.invProjMatrix,E.worldSize,re,q);if(Ge.intersects(Ue)!==2){oe&&(E._camera.position=s.scaleAndAdd([],E._camera.position,le.dir,-oe),E._updateStateFromCamera());break}const Ie=s.sub([],E._camera.position,$);oe=.5*s.length(Ie),E._camera.position=s.scaleAndAdd([],E._camera.position,le.dir,oe);try{E._updateStateFromCamera()}catch{return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++ae<10);return{center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}}fitBounds(i,c,m){return this._fitInternal(this.cameraForBounds(i,c),c,m)}_raycastElevationBox(i,c){const m=this.transform.elevation;if(!m)return;const y=new s.pointGeometry(i.x,c.y),x=new s.pointGeometry(c.x,i.y),S=m.pointCoordinate(i);if(!S)return;const E=m.pointCoordinate(c);if(!E)return;const P=m.pointCoordinate(y);if(!P)return;const M=m.pointCoordinate(x);if(!M)return;const z=new s.MercatorCoordinate(S[0],S[1]).toLngLat(),D=new s.MercatorCoordinate(E[0],E[1]).toLngLat(),N=new s.MercatorCoordinate(P[0],P[1]).toLngLat(),Z=new s.MercatorCoordinate(M[0],M[1]).toLngLat(),$=Math.min(z.lng,Math.min(D.lng,Math.min(N.lng,Z.lng))),X=Math.min(z.lat,Math.min(D.lat,Math.min(N.lat,Z.lat))),le=Math.max(z.lng,Math.max(D.lng,Math.max(N.lng,Z.lng))),q=Math.max(z.lat,Math.max(D.lat,Math.max(N.lat,Z.lat))),oe=Math.min(S[3],Math.min(E[3],Math.min(P[3],M[3]))),ae=Math.max(S[3],Math.max(E[3],Math.max(P[3],M[3])));return{minLngLat:new s.LngLat($,X),maxLngLat:new s.LngLat(le,q),minAltitude:oe,maxAltitude:ae}}fitScreenCoordinates(i,c,m,y,x){let S,E,P,M;const z=s.pointGeometry.convert(i),D=s.pointGeometry.convert(c),N=this._raycastElevationBox(z,D);if(N)S=N.minLngLat,E=N.maxLngLat,P=N.minAltitude,M=N.maxAltitude;else{if(this.transform.anyCornerOffEdge(z,D))return this;S=this.transform.pointLocation(z),E=this.transform.pointLocation(D)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(i)),this.transform.pointLocation(s.pointGeometry.convert(c)),m,y):this._cameraForBox(S,E,P,M,y),y,x)}_fitInternal(i,c,m){return i?(delete(c=s.extend(i,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(i,c){this.stop();const m=i.preloadOnly?this.transform.clone():this.transform;let y=!1,x=!1,S=!1;return"zoom"in i&&m.zoom!==+i.zoom&&(y=!0,m.zoom=+i.zoom),i.center!==void 0&&(m.center=s.LngLat.convert(i.center)),"bearing"in i&&m.bearing!==+i.bearing&&(x=!0,m.bearing=+i.bearing),"pitch"in i&&m.pitch!==+i.pitch&&(S=!0,m.pitch=+i.pitch),i.padding==null||m.isPaddingEqual(i.padding)||(m.padding=i.padding),i.preloadOnly?(this._preloadTiles(m),this):(this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),y&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),x&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),S&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Ch),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,c){const m=this.transform;if(!m.projection.supportsFreeCamera)return void s.warnOnce(Ch);this.stop();const y=m.zoom,x=m.pitch,S=m.bearing;m.setFreeCameraOptions(i);const E=y!==m.zoom,P=x!==m.pitch,M=S!==m.bearing;return this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),E&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),M&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),P&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)),this}easeTo(i,c){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||!i.essential&&s.exported.prefersReducedMotion)&&(i.duration=0);const m=this.transform,y=this.getZoom(),x=this.getBearing(),S=this.getPitch(),E=this.getPadding(),P="zoom"in i?+i.zoom:y,M="bearing"in i?this._normalizeBearing(i.bearing,x):x,z="pitch"in i?+i.pitch:S,D="padding"in i?i.padding:m.padding,N=s.pointGeometry.convert(i.offset);let Z=m.centerPoint.add(N);const $=m.projection.name==="globe"?m.pointCoordinate(Z).toLngLat():m.pointLocation(Z),X=s.LngLat.convert(i.center||$);this._normalizeCenter(X);const le=m.project($),q=m.project(X).sub(le),oe=m.zoomScale(P-y);let ae,re;i.around&&(ae=s.LngLat.convert(i.around),re=m.locationPoint(ae));const ie=this._zooming||P!==y,ce=this._rotating||x!==M,we=this._pitching||z!==S,Ce=!m.isPaddingEqual(D),Ye=Ue=>Ie=>{if(ie&&(Ue.zoom=s.number(y,P,Ie)),ce&&(Ue.bearing=s.number(x,M,Ie)),we&&(Ue.pitch=s.number(S,z,Ie)),Ce&&(Ue.interpolatePadding(E,D,Ie),Z=Ue.centerPoint.add(N)),ae)Ue.setLocationAtPoint(ae,re);else{const Te=Ue.zoomScale(Ue.zoom-y),je=P>y?Math.min(2,oe):Math.max(.5,oe),De=Math.pow(je,1-Ie),dt=Ue.unproject(le.add(q.mult(Ie*De)).mult(Te));Ue.setLocationAtPoint(Ue.renderWorldCopies?dt.wrap():dt,Z)}return i.preloadOnly||this._fireMoveEvents(c),Ue};if(i.preloadOnly){const Ue=this._emulate(Ye,i.duration,m);return this._preloadTiles(Ue),this}const Ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ie,this._rotating=ce,this._pitching=we,this._padding=Ce,this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Ge),this._ease(Ye(m),Ue=>{m.recenterOnTerrain(),this._afterEase(c,Ue)},i),this}_prepareEase(i,c,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",c||m.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!m.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId,this.transform.cameraElevationReference="ground";const m=this._zooming,y=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new s.Event("zoomend",i)),y&&this.fire(new s.Event("rotateend",i)),x&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,c){if(!i.essential&&s.exported.prefersReducedMotion){const Xe=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xe,c)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const m=this.transform,y=this.getZoom(),x=this.getBearing(),S=this.getPitch(),E=this.getPadding(),P="zoom"in i?s.clamp(+i.zoom,m.minZoom,m.maxZoom):y,M="bearing"in i?this._normalizeBearing(i.bearing,x):x,z="pitch"in i?+i.pitch:S,D="padding"in i?i.padding:m.padding,N=m.zoomScale(P-y),Z=s.pointGeometry.convert(i.offset);let $=m.centerPoint.add(Z);const X=m.pointLocation($),le=s.LngLat.convert(i.center||X);this._normalizeCenter(le);const q=m.project(X),oe=m.project(le).sub(q);let ae=i.curve;const re=Math.max(m.width,m.height),ie=re/N,ce=oe.mag();if("minZoom"in i){const Xe=s.clamp(Math.min(i.minZoom,y,P),m.minZoom,m.maxZoom),gt=re/m.zoomScale(Xe-y);ae=Math.sqrt(gt/ce*2)}const we=ae*ae;function Ce(Xe){const gt=(ie*ie-re*re+(Xe?-1:1)*we*we*ce*ce)/(2*(Xe?ie:re)*we*ce);return Math.log(Math.sqrt(gt*gt+1)-gt)}function Ye(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function Ge(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}const Ue=Ce(0);let Ie=function(Xe){return Ge(Ue)/Ge(Ue+ae*Xe)},Te=function(Xe){return re*((Ge(Ue)*(Ye(gt=Ue+ae*Xe)/Ge(gt))-Ye(Ue))/we)/ce;var gt},je=(Ce(1)-Ue)/ae;if(Math.abs(ce)<1e-6||!isFinite(je)){if(Math.abs(re-ie)<1e-6)return this.easeTo(i,c);const Xe=ie<re?-1:1;je=Math.abs(Math.log(ie/re))/ae,Te=function(){return 0},Ie=function(gt){return Math.exp(Xe*ae*gt)}}i.duration="duration"in i?+i.duration:1e3*je/("screenSpeed"in i?+i.screenSpeed/ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const De=x!==M,dt=z!==S,xt=!m.isPaddingEqual(D),Mt=Xe=>gt=>{const Et=gt*je,on=1/Ie(Et);Xe.zoom=gt===1?P:y+Xe.scaleZoom(on),De&&(Xe.bearing=s.number(x,M,gt)),dt&&(Xe.pitch=s.number(S,z,gt)),xt&&(Xe.interpolatePadding(E,D,gt),$=Xe.centerPoint.add(Z));const fn=gt===1?le:Xe.unproject(q.add(oe.mult(Te(Et))).mult(on));return Xe.setLocationAtPoint(Xe.renderWorldCopies?fn.wrap():fn,$),Xe._updateCenterElevation(),i.preloadOnly||this._fireMoveEvents(c),Xe};if(i.preloadOnly){const Xe=this._emulate(Mt,i.duration,m);return this._preloadTiles(Xe),this}return this._zooming=!0,this._rotating=De,this._pitching=dt,this._padding=xt,this._prepareEase(c,!1),this._ease(Mt(m),()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!i){const m=this.handlers;m&&m.stop(!1)}return this}_ease(i,c,m){m.animate===!1||m.duration===0?(i(1),c()):(this._easeStart=s.exported.now(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=s.wrap(i,-180,180);const m=Math.abs(i-c);return Math.abs(i-360-c)<m&&(i-=360),Math.abs(i+360-c)<m&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.maxBounds)return;const m=i.lng-c.center.lng;i.lng+=m>180?-360:m<-180?360:0}_emulate(i,c,m){const y=Math.ceil(15*c/1e3),x=[],S=i(m.clone());for(let E=0;E<=y;E++){const P=S(E/y);x.push(P.clone())}return x}}class kh{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const c=this.options&&this.options.compact;return this._map=i,this._container=H.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=H.create("button","mapboxgl-ctrl-attrib-button",this._container),H.create("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden",!0),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=H.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const m=this._map._getUIString(`AttributionControl.${c}`);i.setAttribute("aria-label",m),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",m)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(i){const m=c.reduce((y,x,S)=>(x.value&&(y+=`${x.key}=${x.value}${S<c.length-1?"&":""}`),y),"?");i.href=`${s.config.FEEDBACK_URL}/${m}${this._map._hash?this._map._hash.getHashString(!0):""}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style._sourceCaches;for(const y in c){const x=c[y];if(x.used){const S=x.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i.sort((y,x)=>y.length-x.length),i=i.filter((y,x)=>{for(let S=x+1;S<i.length;S++)if(i[S].indexOf(y)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ih{constructor(){s.bindAll(["_updateLogo"],this),s.bindAll(["_updateCompact"],this)}onAdd(i){this._map=i,this._container=H.create("div","mapboxgl-ctrl");const c=H.create("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const c in i){const m=i[c].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class Ah{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const y of m)if(y.id===i)return void(y.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ph(p,i,c){if(p=new s.LngLat(p.lng,p.lat),i){const m=new s.LngLat(p.lng-360,p.lat),y=new s.LngLat(p.lng+360,p.lat),x=360*Math.ceil(Math.abs(p.lng-c.center.lng)/360),S=c.locationPoint(p).distSqr(i),E=i.x<0||i.y<0||i.x>c.width||i.y>c.height;c.locationPoint(m).distSqr(i)<S&&(E||Math.abs(m.lng-c.center.lng)<x)?p=m:c.locationPoint(y).distSqr(i)<S&&(E||Math.abs(y.lng-c.center.lng)<x)&&(p=y)}for(;Math.abs(p.lng-c.center.lng)>180;){const m=c.locationPoint(p);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;p.lng>c.center.lng?p.lng-=360:p.lng+=360}return p}const cr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Mh extends s.Evented{constructor(i,c){if(super(),(i instanceof s.window.HTMLElement||c)&&(i=s.extend({element:i},c)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this._updateMoving=()=>this._update(!0),i&&i.element)this._element=i.element,this._offset=s.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=H.create("div");const y=41,x=27,S=H.createSVG("svg",{display:"block",height:y*this._scale+"px",width:x*this._scale+"px",viewBox:`0 0 ${x} ${y}`},this._element),E=H.createSVG("radialGradient",{id:"shadowGradient"},H.createSVG("defs",{},S));H.createSVG("stop",{offset:"10%","stop-opacity":.4},E),H.createSVG("stop",{offset:"100%","stop-opacity":.05},E),H.createSVG("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},S),H.createSVG("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},S),H.createSVG("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},S),H.createSVG("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},S),this._offset=s.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()});const m=this._element.classList;for(const y in cr)m.remove(`mapboxgl-marker-anchor-${y}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick)),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._updateMoving),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const c=i.code,m=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_evaluateOpacity(){const i=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(i))return void this._clearFadeTimer();const c=this._map.unproject(i);let m=!1;if(this._map.transform._terrainEnabled()&&this._map.getTerrain()){const x=this._map.getFreeCameraOptions();if(x.position){const S=x.position.toLngLat();m=S.distanceTo(c)<.9*S.distanceTo(this._lngLat)}}const y=(1-this._map._queryFogOpacity(c))*(m?.2:1);this._element.style.opacity=`${y}`,this._popup&&this._popup._setOpacity(`${y}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(i){const c=this._map.transform;return!!i&&i.x>=0&&i.x<c.width&&i.y>=0&&i.y<c.height}_updateDOM(){const i=this._pos||new s.pointGeometry(0,0),c=this._calculatePitch(),m=this._calculateRotation();this._element.style.transform=`${cr[this._anchor]} translate(${i.x}px, ${i.y}px) rotateX(${c}deg) rotateZ(${m}deg)`}_calculatePitch(){return this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?0:this._pitchAlignment==="map"?this._map.getPitch():0}_calculateRotation(){return this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?this._rotation:this._rotationAlignment==="map"?this._rotation-this._map.getBearing():0}_update(i){s.window.cancelAnimationFrame(this._updateFrameId),this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Ph(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),i===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),this._map._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}_transformedOffset(){if(!this._defaultMarker)return this._offset;const i=this._map.transform,c=this._offset.mult(this._scale);return this._rotationAlignment==="map"&&c._rotate(i.angle),this._pitchAlignment==="map"&&(c.y*=Math.cos(i._pitch)),c}getOffset(){return this._offset}setOffset(i){return this._offset=s.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class uo{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const c=s.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,c,m){this._start=this.getValue(c),this._end=i,this._startTime=c,this._endTime=c+m}}const ip={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},{HTMLImageElement:Ii,HTMLElement:rs,ImageBitmap:is}=s.window,oy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function zh(p){p.parentNode&&p.parentNode.removeChild(p)}const ay={showCompass:!0,showZoom:!0,visualizePitch:!1};class op{constructor(i,c,m=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new hi({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,m&&(this.mousePitch=new bh({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),H.disableDrag()}move(i,c){const m=this.map,y=this.mouseRotate.mousemoveWindow(i,c);if(y&&y.bearingDelta&&m.setBearing(m.getBearing()+y.bearingDelta),this.mousePitch){const x=this.mousePitch.mousemoveWindow(i,c);x&&x.pitchDelta&&m.setPitch(m.getPitch()+x.pitchDelta)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){H.enableDrag(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),H.mousePos(this.element,i)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,H.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=H.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=H.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const El={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Cr,Cl=0,os=!1;const kl={maxWidth:100,unit:"metric"};function ot(p,i,c){const m=c&&c.maxWidth||100,y=p._containerHeight/2,x=p.unproject([0,y]),S=p.unproject([m,y]),E=x.distanceTo(S);if(c&&c.unit==="imperial"){const P=3.2808*E;P>5280?as(i,m,P/5280,p._getUIString("ScaleControl.Miles"),p):as(i,m,P,p._getUIString("ScaleControl.Feet"),p)}else c&&c.unit==="nautical"?as(i,m,E/1852,p._getUIString("ScaleControl.NauticalMiles"),p):E>=1e3?as(i,m,E/1e3,p._getUIString("ScaleControl.Kilometers"),p):as(i,m,E,p._getUIString("ScaleControl.Meters"),p)}function as(p,i,c,m,y){const x=function(E){const P=Math.pow(10,`${Math.floor(E)}`.length-1);let M=E/P;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(z){const D=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*D)/D}(M),P*M}(c),S=x/c;y._requestDomTask(()=>{p.style.width=i*S+"px",p.innerHTML=`${x}&nbsp;${m}`})}const ap={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Il=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),$o={version:s.version,supported:I,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends rp{constructor(p){if((p=s.extend({},oy,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new vl(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._renderTaskQueue=new Ah,this._domRenderTaskQueue=new Ah,this._controls=[],this._markers=[],this._mapId=s.uniqueId(),this._locale=s.extend({},ip,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new uo(0),this._requestManager=new s.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,typeof p.container=="string"){if(this._container=s.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof rs))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new ns(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new Zf(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,s.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new kh({customAttribution:p.customAttribution})),this._logoControl=new Ih,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new s.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new s.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(p,i){if(i===void 0&&(i=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=p.onAdd(this);this._controls.push(p);const m=this._controlPositions[i];return i.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(p);return i>-1&&this._controls.splice(i,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.Event("movestart",p)).fire(new s.Event("move",p)),this.fire(new s.Event("resize",p)),i&&this.fire(new s.Event("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(s.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p==null?85:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getProjection(){return this.transform.getProjection()}setProjection(p){return this._lazyInitEmptyStyle(),typeof p=="string"&&(p={name:p}),this._runtimeProjection=p,this.style.updateProjection(),this._transitionFromGlobe=!1,this}project(p){return this.transform.locationPoint3D(s.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(s.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(p,i,c){if(p==="mouseenter"||p==="mouseover"){let m=!1;const y=S=>{const E=i.filter(M=>this.getLayer(M)),P=E.length?this.queryRenderedFeatures(S.point,{layers:E}):[];P.length?m||(m=!0,c.call(this,new yr(p,this,S.originalEvent,{features:P}))):m=!1},x=()=>{m=!1};return{layers:new Set(i),listener:c,delegates:{mousemove:y,mouseout:x}}}if(p==="mouseleave"||p==="mouseout"){let m=!1;const y=S=>{const E=i.filter(P=>this.getLayer(P));(E.length?this.queryRenderedFeatures(S.point,{layers:E}):[]).length?m=!0:m&&(m=!1,c.call(this,new yr(p,this,S.originalEvent)))},x=S=>{m&&(m=!1,c.call(this,new yr(p,this,S.originalEvent)))};return{layers:new Set(i),listener:c,delegates:{mousemove:y,mouseout:x}}}{const m=y=>{const x=i.filter(E=>this.getLayer(E)),S=x.length?this.queryRenderedFeatures(y.point,{layers:x}):[];S.length&&(y.features=S,c.call(this,y),delete y.features)};return{layers:new Set(i),listener:c,delegates:{[p]:m}}}}on(p,i,c){if(c===void 0)return super.on(p,i);Array.isArray(i)||(i=[i]);const m=this._createDelegatedListener(p,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(m);for(const y in m.delegates)this.on(y,m.delegates[y]);return this}once(p,i,c){if(c===void 0)return super.once(p,i);Array.isArray(i)||(i=[i]);const m=this._createDelegatedListener(p,i,c);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(p,i,c){if(c===void 0)return super.off(p,i);i=new Set(Array.isArray(i)?i:[i]);const m=(x,S)=>{if(x.size!==S.size)return!1;for(const E of x)if(!S.has(E))return!1;return!0},y=this._delegatedListeners?this._delegatedListeners[p]:void 0;return y&&(x=>{for(let S=0;S<x.length;S++){const E=x[S];if(E.listener===c&&m(E.layers,i)){for(const P in E.delegates)this.off(P,E.delegates[P]);return x.splice(S,1),this}}})(y),this}queryRenderedFeatures(p,i){return this.style?(i!==void 0||p===void 0||p instanceof s.pointGeometry||Array.isArray(p)||(i=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(p,i){return this.style.querySourceFeatures(p,i)}queryTerrainElevation(p,i){const c=this.transform.elevation;return c?(i=s.extend({},{exaggerated:!0},i),c.getAtPoint(s.MercatorCoordinate.fromLngLat(p),null,i.exaggerated)):null}setStyle(p,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(p,i))}_getUIString(p){const i=this._locale[p];if(i==null)throw new Error(`Missing UI string '${p}'`);return i}_updateStyle(p,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),p&&(this.style=new Lr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Lr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,i){if(typeof p=="string"){const c=this._requestManager.normalizeStyleURL(p),m=this._requestManager.transformRequest(c,s.ResourceType.Style);s.getJSON(m,(y,x)=>{y?this.fire(new s.ErrorEvent(y)):x&&this._updateDiff(x,i)})}else typeof p=="object"&&this._updateDiff(p,i)}_updateDiff(p,i){try{this.style.setState(p)&&this._update(!0)}catch(c){s.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(p,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(p,i){return this._lazyInitEmptyStyle(),this.style.addSource(p,i),this._update(!0)}isSourceLoaded(p){const i=this.style&&this.style._getSourceCaches(p);if(i.length!==0)return i.every(c=>c.loaded());this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const i in p){const c=p[i]._tiles;for(const m in c){const y=c[m];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(p,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,i,c)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,i,{pixelRatio:c=1,sdf:m=!1,stretchX:y,stretchY:x,content:S}={}){if(this._lazyInitEmptyStyle(),i instanceof Ii||is&&i instanceof is){const{width:E,height:P,data:M}=s.exported.getImageData(i);this.style.addImage(p,{data:new s.RGBAImage({width:E,height:P},M),pixelRatio:c,stretchX:y,stretchY:x,content:S,sdf:m,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:E,height:P,data:M}=i,z=i;this.style.addImage(p,{data:new s.RGBAImage({width:E,height:P},new Uint8Array(M)),pixelRatio:c,stretchX:y,stretchY:x,content:S,sdf:m,version:0,userImage:z}),z.onAdd&&z.onAdd(this,p)}}}updateImage(p,i){const c=this.style.getImage(p);if(!c)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof Ii||is&&i instanceof is?s.exported.getImageData(i):i,{width:y,height:x,data:S}=m;return y===void 0||x===void 0?this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):y!==c.data.width||x!==c.data.height?this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(c.data.replace(S,!(i instanceof Ii||is&&i instanceof is)),void this.style.updateImage(p,c))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,i){s.getImage(this._requestManager.transformRequest(p,s.ResourceType.Image),(c,m)=>{i(c,m instanceof Ii?s.exported.getImageData(m):m)})}listImages(){return this.style.listImages()}addLayer(p,i){return this._lazyInitEmptyStyle(),this.style.addLayer(p,i),this._update(!0)}moveLayer(p,i){return this.style.moveLayer(p,i),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,i,c){return this.style.setLayerZoomRange(p,i,c),this._update(!0)}setFilter(p,i,c={}){return this.style.setFilter(p,i,c),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,i,c,m={}){return this.style.setPaintProperty(p,i,c,m),this._update(!0)}getPaintProperty(p,i){return this.style.getPaintProperty(p,i)}setLayoutProperty(p,i,c,m={}){return this.style.setLayoutProperty(p,i,c,m),this._update(!0)}getLayoutProperty(p,i){return this.style.getLayoutProperty(p,i)}setLight(p,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}_updateProjection(){this.transform.projection.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX&&!this._transitionFromGlobe&&(this.setProjection({name:"mercator"}),this._transitionFromGlobe=!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(p),this.transform):0}setFeatureState(p,i){return this.style.setFeatureState(p,i),this._update()}removeFeatureState(p,i){return this.style.removeFeatureState(p,i),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let c,m=this._container;for(;m&&!c;){const y=s.window.getComputedStyle(m).transform;y&&y!=="none"&&(c=y.match(/matrix.*\((.+)\)/)[1].split(", ")),m=m.parentElement}c?(this._containerWidth=c[0]&&c[0]!=="0"?Math.abs(p/c[0]):p,this._containerHeight=c[3]&&c[3]!=="0"?Math.abs(i/c[3]):i):(this._containerWidth=p,this._containerHeight=i)}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=H.create("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=H.create("div","mapboxgl-canvas-container",p);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=H.create("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=H.create("div","mapboxgl-control-container",p),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{m[y]=H.create("div",`mapboxgl-ctrl-${y}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,i){const c=s.exported.devicePixelRatio||1;this._canvas.width=c*Math.ceil(p),this._canvas.height=c*Math.ceil(i),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${i}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const i=this._markers.indexOf(p);i!==-1&&this._markers.splice(i,1)}_setupPainter(){const p=s.extend({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);i?(s.storeAuthState(i,!0),this.painter=new Vf(i,this.transform),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(i)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let i;const c=this.painter.context.extTimerQuery,m=s.exported.now();this.listens("gpu-timing-frame")&&(i=c.createQueryEXT(),c.beginQueryEXT(c.TIME_ELAPSED_EXT,i));let y=this._updateAverageElevation(m);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjection();let x=!1;const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,M=this.transform.pitch,z=s.exported.now();this.style.zoomHistory.update(P,z);const D=new s.EvaluationParameters(P,{now:z,fadeDuration:S,pitch:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=D.crossFadingFactor();N===1&&N===this._crossFadingFactor||(x=!0,this._crossFadingFactor=N),this.style.update(D)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform),this._forceMarkerUpdate()),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||x)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=s.exported.now()-m;c.endQueryEXT(c.TIME_ELAPSED_EXT,i),setTimeout(()=>{const M=c.getQueryObjectEXT(i,c.QUERY_RESULT_EXT)/1e6;c.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:P,gpuTime:M}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const M=this.painter.queryGpuTimers(P);this.fire(new s.Event("gpu-timing-layer",{layerTimes:M}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty||y;if(E||this._repaint)this.triggerRepaint();else{const P=!this.isMoving()&&this.loaded();if(P&&(y=this._updateAverageElevation(m,!0)),y)this.triggerRepaint();else if(this._triggerFrame(!1),P&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const M=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:M})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,this._authenticate()),this}_forceMarkerUpdate(){for(const p of this._markers)p._update()}_updateAverageElevation(p,i=!1){const c=m=>(this.transform.averageElevation=m,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);if((i||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const m=this.transform.averageElevation;let y=this.transform.sampleAverageElevation();isNaN(y)?y=0:this._averageElevationLastSampledAt=p;const x=Math.abs(m-y);if(x>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(y),c(y);this._averageElevation.easeTo(y,p,300)}else if(x>1e-4)return this._averageElevation.jumpTo(y),c(y)}return!!this._averageElevation.isEasing(p)&&c(this._averageElevation.getValue(p))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===s.AUTH_ERR_MSG||p.status===401)){const i=this.painter.context.gl;s.storeAuthState(i,!1),this._logoControl instanceof Ih&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const c=this.painter.context.gl,m=c.createFramebuffer();function y(x){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,x,0);const S=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,S),S}return c.bindFramebuffer(c.FRAMEBUFFER,m),this._canvasPixelComparison(y(p),i.canvasCopies.map(y),i.timeStamps)}_canvasPixelComparison(p,i,c){let m=c[1]-c[0];const y=p.length/4;for(let x=0;x<i.length;x++){const S=i[x];let E=0;for(let P=0;P<S.length;P+=4)S[P]===p[P]&&S[P+1]===p[P+1]&&S[P+2]===p[P+2]&&S[P+3]===p[P+3]&&(E+=1);m+=(c[x+2]-c[x+1])*(1-E/y)}return m}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),zh(this._canvasContainer),zh(this._controlContainer),zh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=s.exported.frame(i=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(i)}))}_preloadTiles(p){const i=this.style&&Object.values(this.style._sourceCaches)||[];return s.asyncAll(i,(c,m)=>c._preloadTiles(p,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,i){s.setCacheLimits(p,i)}get version(){return s.version}},NavigationControl:class{constructor(p){this.options=s.extend({},ay,p),this._container=H.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),H.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),H.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=H.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const p=this._map.getZoom(),i=p===this._map.getMaxZoom(),c=p===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=p)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new op(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){this._container.remove(),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,i){const c=H.create("button",p,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(p,i){const c=this._map._getUIString(`NavigationControl.${i}`);p.setAttribute("aria-label",c),p.firstElementChild&&p.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends s.Evented{constructor(p){super(),this.options=s.extend({},El,p),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=Vo(this._updateMarkerRotation,20)}onAdd(p){var i;return this._map=p,this._container=H.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Cr!==void 0?i(Cr):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(c=>{Cr=c.state!=="denied",i(Cr)}):(Cr=!!s.window.navigator.geolocation,i(Cr)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,Cl=0,os=!1}_isOutOfMapMaxBounds(p){const i=this._map.getMaxBounds(),c=p.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",p)),this._finish()}}_updateCamera(p){const i=new s.LngLat(p.coords.longitude,p.coords.latitude),c=p.coords.accuracy,m=this._map.getBearing(),y=s.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),y,{geolocateSource:!0})}_updateMarker(p){if(p){const i=new s.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map._containerHeight/2,i=this._map.unproject([0,p]),c=this._map.unproject([100,p]),m=i.distanceTo(c)/100,y=Math.ceil(2*this._accuracy/m);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&os)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=H.create("button","mapboxgl-ctrl-geolocate",this._container),H.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",p===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H.create("div","mapboxgl-user-location"),this._dotElement.appendChild(H.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(H.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Mh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=H.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Cl--,os=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Cl++,Cl>1?(p={maximumAge:6e5,timeout:0},os=!0):(p=this.options.positionOptions,os=!1),this._geolocationWatchID=s.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else s.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&p()}).catch(console.error):p()}_clearWatch(){s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:kh,ScaleControl:class{constructor(p){this.options=s.extend({},kl,p),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ot(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=H.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,ot(this._map,this._container,this.options)}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof s.window.HTMLElement?this._container=p.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=H.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=H.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);H.create("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden",!0),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(p){super(),this.options=s.extend(Object.create(ap),p),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("preclick",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&this._content.remove(),this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=s.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(s.window.document.createTextNode(p))}setHTML(p){const i=s.window.document.createDocumentFragment(),c=s.window.document.createElement("body");let m;for(c.innerHTML=p;m=c.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=H.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._container&&this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._container&&this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let i;return this._classList.delete(p)?i=!1:(this._classList.add(p),i=!0),this._container&&this._updateClassList(),i}_createCloseButton(){this.options.closeButton&&(this._closeButton=H.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.setAttribute("aria-hidden","true"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const i=this._pos,c=this._container.offsetWidth,m=this._container.offsetHeight;let y;return y=i.y+p.bottom.y<m?["top"]:i.y>this._map.transform.height-m?["bottom"]:[],i.x<c/2?y.push("left"):i.x>this._map.transform.width-c/2&&y.push("right"),y.length===0?"bottom":y.join("-")}_updateClassList(){const p=[...this._classList];p.push("mapboxgl-popup"),this._anchor&&p.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&p.push("mapboxgl-popup-track-pointer"),this._container.className=p.join(" ")}_update(p){if(this._map&&(this._lngLat||this._trackPointer)&&this._content){if(this._container||(this._container=H.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=H.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ph(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||p){const i=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat),c=function(x){if(x||(x=new s.pointGeometry(0,0)),typeof x=="number"){const S=Math.round(Math.sqrt(.5*Math.pow(x,2)));return{center:new s.pointGeometry(0,0),top:new s.pointGeometry(0,x),"top-left":new s.pointGeometry(S,S),"top-right":new s.pointGeometry(-S,S),bottom:new s.pointGeometry(0,-x),"bottom-left":new s.pointGeometry(S,-S),"bottom-right":new s.pointGeometry(-S,-S),left:new s.pointGeometry(x,0),right:new s.pointGeometry(-x,0)}}if(x instanceof s.pointGeometry||Array.isArray(x)){const S=s.pointGeometry.convert(x);return{center:S,top:S,"top-left":S,"top-right":S,bottom:S,"bottom-left":S,"bottom-right":S,left:S,right:S}}return{center:s.pointGeometry.convert(x.center||[0,0]),top:s.pointGeometry.convert(x.top||[0,0]),"top-left":s.pointGeometry.convert(x["top-left"]||[0,0]),"top-right":s.pointGeometry.convert(x["top-right"]||[0,0]),bottom:s.pointGeometry.convert(x.bottom||[0,0]),"bottom-left":s.pointGeometry.convert(x["bottom-left"]||[0,0]),"bottom-right":s.pointGeometry.convert(x["bottom-right"]||[0,0]),left:s.pointGeometry.convert(x.left||[0,0]),right:s.pointGeometry.convert(x.right||[0,0])}}(this.options.offset),m=this._anchor=this._getAnchor(c),y=i.add(c[m]).round();this._map._requestDomTask(()=>{this._container&&m&&(this._container.style.transform=`${cr[m]} translate(${y.x}px,${y.y}px)`)})}this._updateClassList()}}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Il);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._content&&(this._content.style.opacity=p),this._tip&&(this._tip.style.opacity=p)}},Marker:Mh,Style:Lr,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Gf,Evented:s.Evented,config:s.config,prewarm:function(){fe().acquire(ue)},clearPrewarmedResources:function(){const p=xe;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(ue),xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(p){s.config.ACCESS_TOKEN=p},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(p){s.config.API_URL=p},get workerCount(){return ve.workerCount},set workerCount(p){ve.workerCount=p},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){s.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){s.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return $o});var b=d;return b})})(Bk);var S0=Bk.exports;S0.accessToken="pk.eyJ1IjoiYWxlbGExMWkiLCJhIjoiY2t3Nmg4dzdqNzNndjJ2bXRxN29rcGY4byJ9.NEWRnqXP-98PS7S6lxcyRQ";const KS={lng:-60.63973586545013,lat:-32.9427014048633,zoom:15},BB=()=>{const t=In.exports.useRef(),n=In.exports.useRef();return In.exports.useEffect(()=>{const a=new S0.Map({container:t.current,center:[-60.63973586545013,-32.9427014048633],style:"mapbox://styles/mapbox/streets-v11",zoom:15,cooperativeGestures:!0,doubleClickZoom:!0,dragPan:!0});n.current=a},[KS]),In.exports.useEffect(()=>{new S0.Marker().setLngLat([-60.63973586545013,-32.9427014048633]).addTo(n.current)},[KS,n]),Je("div",{ref:t,className:"map"})},FB=()=>xn("div",{className:"contacto d-flex justify-content-around align-items-center",children:[Je(BB,{}),Je(RB,{})]});const NB=()=>{const[t]=Ku("global");return xn(Mg,{children:[xn("div",{className:"footer-above",children:[xn("div",{className:"footer-columns",children:[xn("h3",{children:[Je(So,{icon:mL,className:"icons"}),t("Footer.location"),Je("hr",{color:"#1ce"})]}),xn("p",{className:"footer-info",children:["Urquiza 1285 PA ",Je("br",{})," S2000ANI - Rosario - Argentina"]})]}),xn("div",{className:"footer-columns",children:[xn("h3",{children:[Je(So,{icon:_L,className:"icons"}),t("Footer.phone"),Je("hr",{color:"#1ce"})]}),Je("p",{className:"footer-info",children:"+ 54 9 341 528-2575 / (15)6932434"})]}),xn("div",{className:"footer-columns",children:[xn("h3",{children:[Je(So,{icon:dL,className:"icons"}),t("Footer.email"),Je("hr",{color:"#1ce"})]}),Je("p",{className:"footer-info",children:"contacto@sertic.com.ar"})]})]}),Je("div",{className:"footer-below",children:Je("p",{children:"Copyright \xA9 SerTIC 2022. All Rights Reserved"})})]})};const jB=()=>xn(Mg,{children:[Je("a",{id:"wsp",href:"https://wa.me/+5493413938154",target:"blanck"}),Je("img",{className:"wsp-icon m-3 fixed-bottom animate__animated animate__fadeInUp rounded-circle",src:"https://www.proandroid.com/wp-content/uploads/2018/03/WhatsApp.jpg",alt:"whatsapp",onClick:()=>document.getElementById("wsp").click(),width:"70px",height:"70px"})]}),UB=()=>xn(Mg,{children:[Je(s3,{}),Je(jB,{}),Je(l3,{}),xn("div",{className:"background",children:[Je(wL,{}),Je("hr",{className:"hr-box"}),Je(EL,{}),Je(q4,{}),Je(FB,{}),Je(NB,{})]})]}),VB={Home:"Inicio",About:"Nosotros",Services:"Servicios",Clients:"Clientes",Contact:"Contacto",Assistance:"Asistencia"},$B={title:"Nuestra Identidad","img-text":"H\xE9ctor A. Garc\xEDa - CEO SysAdmin y Especialista en Seguridad Inform\xE1tica.",description:{text1:"Hace m\xE1s de 10 a\xF1os que conformamos equipos de trabajo que proveen servicios tecnol\xF3gicos a empresas que buscan un funcionamiento eficiente de sus recursos inform\xE1ticos.",text2:"Nuestra identidad est\xE1 definida por 3 pilares de trabajo:",text3:" Somos curiosos. Creemos que siempre hay algo m\xE1s por ver, por aprender y por mejorar. Queremos llevar los conocimientos al siguiente nivel.",text4:" Somos colegas. Tanto internamente como de forma externa, buscamos crear redes y relaciones comprometidas de trabajo, juntos somos mejores.",text5:" Somos \xE1giles. Sabemos donde poner foco ante las urgencias y c\xF3mo priorizar las acciones necesarias para encontrar soluciones y el alcance de objetivos.",text6:"Somos SerTIC."}},GB={title:"Nuestros Servicios",service1:{title:"Consultor\xEDa",descr1:"Transformaci\xF3n digital.",descr2:"Seguridad y Auditor\xEDa de Sistemas.",descr3:"Planes de contingencia.",descr4:"Procedimientos y pol\xEDticas de respaldo de activos inform\xE1ticos."},service2:{title:"Soporte Inform\xE1tico",descr1:"Mantenimiento t\xE9cnico.",descr2:"Soporte On-Site de t\xE9cnicos especializados.",descr3:"Monitoreo de redes.",descr4:"Soluciones integrales para teletrabajo."},service3:{title:"Outsourcing, Recruiting y Training",descr1:"B\xFAsqueda y Reclutamiento IT.",descr2:"Proyectos con/sin contrataci\xF3n directa."},service4:{title:"Infraestructura y Soluciones Cloud",descr1:"Servidores.",descr2:"Aplicaciones.",descr3:"Servicios."},service5:{title:"Desarrollo de software",descr1:"Desarrollo web y mobile.",descr2:"DevOps Culture."}},qB={title:"Empresas que confian en"},ZB={title:"Contactanos por correo",name:"Nombre",email:"Correo",phone:"Tel\xE9fono",message:"Mensaje",button:"Enviar",error:"Uno de los campos est\xE1 incompleto.",success:"Mensaje enviado correctamente!",waiting:"Espere.."},WB={location:"Ubicaci\xF3n",phone:"Tel\xE9fono",email:"E-mail"};var HB={sections:VB,aboutUs:$B,services:GB,Clients:qB,Contact:ZB,Footer:WB};const XB={Home:"Home",About:"About",Services:"Services",Clients:"Clients",Contact:"Contact",Assistance:"Assistance"},YB={title:"Our Identity","img-text":"H\xE9ctor A. Garc\xEDa - CEO SysAdmin and Information Security Specialist.",description:{text1:"For more than 10 years we have formed work teams that provide technological services to companies that seek an efficient operation of their computer resources.",text2:"Our identity is defined by 3 work pillars:",text3:" We're curious. We believe that there is always something more to see, to learn and to improve. We want to take knowledge to the next level.",text4:" We're colleagues. Both internally and externally, we seek to create networks and committed work relationships, together we are better.",text5:" We are agile. We know where to focus when faced with emergencies and how to prioritize the necessary actions to find solutions and achieve goals.",text6:"We are SerTIC."}},KB={title:"Our services",service1:{title:"Consultancy.",descr1:"Digital transformation.",descr2:"Security and Systems Audit.",descr3:"Contingency plans.",descr4:"IT asset backup policies and procedures."},service2:{title:"Informatic support.",descr1:"Technical maintenance.",descr2:"On-Site support from specialized technicians.",descr3:"Network monitoring.",descr4:"Comprehensive solutions for teleworking."},service3:{title:"Outsourcing, Recruiting y Training",descr1:"IT Search and Recruitment.",descr2:"Projects with/without direct contracting."},service4:{title:"Infrastructure and Cloud Solutions.",descr1:"Servers.",descr2:"Applications.",descr3:"Services."},service5:{title:"Software development.",descr1:"Web and mobile development.",descr2:"DevOps Culture."}},JB={title:"Companies that trust in"},QB={title:"Contact Us By Email",name:"Name",email:"Email",phone:"Phone",message:"Message",button:"Send",error:"One of the fields is incomplete",success:"Message sent successfully!!",waiting:"Loading.."},eF={location:"Location",phone:"Phone",email:"E-mail"};var tF={sections:XB,aboutUs:YB,services:KB,Clients:JB,Contact:QB,Footer:eF};const nF=({children:t})=>{const n=localStorage.getItem("language")||"es";return Gr.init({interpolation:{escapeValue:!1},lng:n,resources:{es:{global:HB},en:{global:tF}}}),Je(n3,{i18n:Gr,children:t})};Zz.render(Je(nF,{children:Je(UB,{})}),document.getElementById("root"));
